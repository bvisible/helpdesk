import{_ as S}from"./UserAvatar.vue_vue_type_script_setup_true_lang-95965310.js";import{m as N,n as k,r as h,e as v,f as V,w as m,l as o,t as g,g as l,h as s,be as z,W as $,d as H,S as T,q as j,z as x,Y as q,aW as E,k as w,F as A,E as P,y as Q,x as W,a2 as Y,a6 as G,L as J,R as K}from"./index-3194ec9b.js";import{_ as O}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-add081d8.js";import{D as X}from"./Dropdown-c7dd9c29.js";import{_ as F}from"./TextEditor.vue_vue_type_script_setup_true_lang-7cb9f49e.js";import{u as Z}from"./pageMeta-9b603434.js";import"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-a9d0f8af.js";import{d as ee}from"./dayjs-f66c5460.js";import{L as te}from"./LayoutHeader-3eb7ac7a.js";import{_ as se}from"./EmptyState.vue_vue_type_script_setup_true_lang-946d36ad.js";import"./Avatar.vue_vue_type_script_setup_true_lang-1b98856a.js";const oe={class:"flex items-center gap-3"},ae={class:"text-2xl font-semibold leading-6 text-gray-900"},le={class:"flex flex-col gap-4"},ne={__name:"CannedResponseModal",props:N({name:{type:String,required:!1,default:null},isNew:{type:Boolean,required:!1,default:!1}},{modelValue:{},modelModifiers:{},title:{},titleModifiers:{},message:{},messageModifiers:{}}),emits:N(["update"],["update:modelValue","update:title","update:message"]),setup(p,{emit:b}){const y=p,_=k(p,"modelValue"),n=k(p,"title"),i=k(p,"message"),c=b;async function C(){y.name?await $("frappe.client.set_value",{doctype:"HD Canned Response",name:y.name,fieldname:{title:n.value,message:i.value}}):await $("frappe.client.insert",{doc:{doctype:"HD Canned Response",title:n.value,message:i.value}}),c("update"),_.value=!1}return(d,a)=>{const u=h("Dialog");return v(),V(u,{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=f=>_.value=f),options:{size:"xl",actions:[{label:p.isNew?"Create":"Update",variant:"solid",onClick:()=>C()}]}},{"body-title":m(()=>[o("div",oe,[o("h3",ae,g(p.isNew?"Create Canned Response":"Edit Canned Response"),1)])]),"body-content":m(()=>[o("div",le,[o("div",null,[a[3]||(a[3]=o("div",{class:"mb-1.5 text-sm text-gray-600"},g("Title"),-1)),l(s(z),{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=f=>n.value=f),variant:"outline",placeholder:"Customer Query Resolved"},null,8,["modelValue"])]),o("div",null,[a[4]||(a[4]=o("div",{class:"mb-1.5 text-sm text-gray-600"},g("Message"),-1)),l(s(F),{ref:"content",variant:"outline","editor-class":"!prose-sm overflow-auto min-h-[180px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors","bubble-menu":!0,content:i.value,placeholder:"Your query has been resolved. Thank you for reaching out.",onChange:a[1]||(a[1]=f=>i.value=f)},null,8,["content"])])])]),_:1},8,["modelValue","options"])}}},ie={class:"flex flex-col"},re={class:"flex items-center gap-2"},de={class:"flex-1 overflow-y-auto"},ue={key:0,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4"},me=["onClick"],pe={class:"flex items-center justify-between"},ce={class:"truncate text-lg font-medium"},fe={class:"mt-2 flex items-center justify-between gap-2"},ve={class:"flex items-center gap-2"},ge={class:"text-sm text-gray-800"},_e={class:"text-sm text-gray-700"},Fe=H({__name:"CannedResponses",setup(p){const{getUser:b}=T(),y=[{label:"Canned Responses",route:{name:"CannedResponses"}}],_=j(),n=x(null),i=x(null),c=x(null),C=_.hash.split("#")[1]==="new",d=x(C||!1),a=x(""),u=q({doctype:"HD Canned Response",fields:["name","title","message","owner","modified"],auto:!0,orFilters:{},orderBy:"modified desc"});E(a,r=>{u.update({orFilters:r?{message:["like",`%${r}%`],title:["like",`%${r}%`]}:{}}),u.reload()},{debounce:300});function f(r){n.value=r.title,i.value=r.message,c.value=r.name,d.value=!0}async function M(r){await $("frappe.client.delete",{doctype:"HD Canned Response",name:r}),u.reload()}return Z(()=>({title:"Canned Responses"})),(r,t)=>{var U;const B=h("FeatherIcon"),I=h("TextInput"),R=K,D=h("Button"),L=S;return v(),w("div",ie,[l(s(te),null,{"left-header":m(()=>[l(s(O),{items:y,class:"-ml-0.5"})]),"right-header":m(()=>[o("div",re,[l(I,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),type:"text",placeholder:"Search canned responses",class:"input input-bordered h-8 px-2 text-sm",style:{"min-width":"290px"}},{prefix:m(()=>[l(B,{name:"search",class:"h-4 w-4 text-gray-500 ml-2"})]),_:1},8,["modelValue"]),l(D,{label:"Create",theme:"gray",variant:"solid",onClick:t[1]||(t[1]=()=>{n.value=null,i.value=null,d.value=!0})},{prefix:m(()=>[l(R,{class:"h-4 w-4"})]),_:1})])]),_:1}),o("div",de,[((U=s(u).data)==null?void 0:U.length)>0?(v(),w("div",ue,[(v(!0),w(A,null,P(s(u).data,e=>(v(),w("div",{key:e.name,class:"group flex h-60 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-4 py-3 pt-2 shadow-sm hover:bg-gray-50",onClick:xe=>f(e)},[o("div",pe,[o("div",ce,g(e.title),1),l(s(X),{options:[{label:"Delete",icon:"trash-2",onClick:()=>M(e.name)}],onClick:t[2]||(t[2]=Q(()=>{},["stop"]))},{default:m(()=>[l(D,{icon:"more-horizontal",variant:"ghosted",class:"hover:bg-white"})]),_:1},8,["options"])]),e.message?(v(),V(s(F),{key:0,content:e.message,editable:!1,"editor-class":"prose-sm",class:"flex-1 overflow-hidden response-preview"},null,8,["content"])):W("",!0),o("div",fe,[o("div",ve,[l(L,{name:e.owner,size:"xs"},null,8,["name"]),o("div",ge,g(s(b)(e.owner).full_name),1)]),l(s(J),{text:s(Y)(e.modified,s(G))},{default:m(()=>[o("div",_e,g(s(ee).tz(e.modified).fromNow()),1)]),_:2},1032,["text"])])],8,me))),128))])):(v(),V(se,{key:1,title:"No Canned Responses Found",onEmptyStateAction:t[3]||(t[3]=e=>d.value=!0)}))]),l(s(ne),{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value=e),title:n.value,"onUpdate:title":t[5]||(t[5]=e=>n.value=e),message:i.value,"onUpdate:message":t[6]||(t[6]=e=>i.value=e),name:c.value,"is-new":!c.value,onClose:t[7]||(t[7]=()=>{d.value=!1,n.value=null,i.value=null,c.value=null}),onUpdate:t[8]||(t[8]=()=>{s(u).reload(),d.value=!1,n.value=null,i.value=null,c.value=null})},null,8,["modelValue","title","message","name","is-new"])])}}});export{Fe as default};
//# sourceMappingURL=CannedResponses-75b08609.js.map
