{"version":3,"file":"types-27fcf86f.js","sources":["../../../../desk/src/types.ts"],"sourcesContent":["import { Dayjs } from \"dayjs\";\nimport { Component, ComputedRef, InjectionKey, Ref } from \"vue\";\nimport type { HDTicket } from \"./types/doctypes\";\n\ninterface ResourceOptions<T = any> {\n  method?: string;\n  url: string;\n  initialData?: T;\n  auto?: boolean;\n  cache?: string | string[];\n  debounce?: number;\n  params?: any;\n  makeParams?: (params: any) => any;\n  onFetch?: (params: any) => void;\n  beforeSubmit?: (params: any) => void;\n  validate?: (params: any) => string | void;\n  onError?: (error: Error) => void;\n  onSuccess?: (data: T) => void;\n  onData?: (data: T) => void;\n  transform?: (data: any) => T;\n  resourceFetcher?: (options: any) => Promise<any>;\n}\n\ninterface Resource<T = any> {\n  method: string | undefined;\n  url: string;\n  data: T | null;\n  previousData: T | null;\n  loading: boolean;\n  fetched: boolean;\n  error: Error | null;\n  promise: Promise<T> | null;\n  auto: boolean;\n  params: any;\n  fetch: (\n    params?: any,\n    tempOptions?: Partial<ResourceOptions<T>>\n  ) => Promise<T>;\n  reload: (\n    params?: any,\n    tempOptions?: Partial<ResourceOptions<T>>\n  ) => Promise<T>;\n  submit: (\n    params?: any,\n    tempOptions?: Partial<ResourceOptions<T>>\n  ) => Promise<T>;\n  reset: () => void;\n  update: (options: {\n    method?: string;\n    url?: string;\n    params?: any;\n    auto?: boolean;\n  }) => void;\n  setData: (data: T | ((currentData: T) => T)) => void;\n}\n\nexport interface ListResourceOptions {\n  doctype: string;\n  fields?: string[];\n  filters?: Record<string, any>;\n  orFilters?: Record<string, any>;\n  orderBy?: string;\n  start?: number;\n  pageLength?: number;\n  groupBy?: string;\n  parent?: string;\n  debug?: number;\n  auto?: boolean;\n  url?: string;\n  cache?: any;\n  realtime?: boolean;\n  onSuccess?: (data: any) => void;\n  onError?: (error: any) => void;\n  onData?: (data: any) => void;\n  transform?: (data: any) => any;\n  fetchOne?: {\n    onSuccess?: (data: any) => void;\n    onError?: (error: any) => void;\n  };\n  insert?: {\n    onSuccess?: (data: any) => void;\n    onError?: (error: any) => void;\n  };\n  setValue?: {\n    onSuccess?: (data: any) => void;\n    onError?: (error: any) => void;\n  };\n  delete?: {\n    onSuccess?: (data: any) => void;\n    onError?: (error: any) => void;\n  };\n  runDocMethod?: {\n    onSuccess?: (data: any) => void;\n    onError?: (error: any) => void;\n  };\n}\n\nexport interface ListResource<T = any> {\n  doctype: string;\n  fields?: string[];\n  filters?: Record<string, any>;\n  orFilters?: Record<string, any>;\n  orderBy?: string;\n  start: number;\n  pageLength: number;\n  groupBy?: string;\n  parent?: string;\n  debug: number;\n  originalData: T[] | null;\n  dataMap: Record<string, T>;\n  data: T[] | null;\n  hasPreviousPage: boolean;\n  hasNextPage: boolean;\n  auto?: boolean;\n  list: Resource<T[]>;\n  fetchOne: Resource<T>;\n  insert: Resource<T>;\n  setValue: Resource<T>;\n  delete: Resource<T>;\n  runDocMethod: Resource<T>;\n  update: (updatedOptions: Partial<ListResourceOptions>) => void;\n  fetch: () => void;\n  reload: () => Promise<T[]>;\n  setData: (data: T[] | ((data: T[]) => T[])) => void;\n  transform: (data: T[]) => T[];\n  getRow: (name: string) => T;\n  previous: () => void;\n  next: () => void;\n}\n\nexport interface Error {\n  exc_type: string;\n  exc: string;\n  response: string;\n  status: string;\n  messages: string;\n  stack: string;\n  message: string;\n}\n\nexport interface Comment {\n  commented_by: string;\n  content: string;\n  is_pinned: boolean;\n  name: string;\n  creation: string;\n}\n\nexport interface Communication {\n  creation: string;\n  content: string;\n  name: string;\n  sender: string;\n  bcc?: string;\n  cc?: string;\n}\n\nexport interface Activity {\n  action: string;\n  name: string;\n  owner: string;\n  creation: string;\n}\n\nexport interface Contact {\n  full_name: string;\n  name: string;\n  company_name?: string;\n  email_id?: string;\n  image?: string;\n  mobile_no?: string;\n  phone?: string;\n}\n\nexport interface CustomField {\n  fieldname: string;\n  label: string;\n  value: string;\n  route: string;\n}\n\nexport interface ViewLog {\n  name: string;\n  viewed_by: string;\n  creation: string;\n}\n\nexport interface Ticket {\n  _assign: string;\n  assignee: UserInfo;\n  agent_group: string;\n  customer: string;\n  modified: string;\n  name: string;\n  priority: string;\n  raised_by: string;\n  resolution_by: string;\n  response_by: string;\n  first_responded_on: string;\n  resolution_date: string;\n  resolution_time: number;\n  status: string;\n  subject: string;\n  ticket_type: string;\n  via_customer_portal: string;\n  agreement_status: string;\n  creation: string;\n  feedback_rating?: number;\n  feedback_extra?: string;\n  contact: Contact;\n  comments: Comment[];\n  communications: Communication[];\n  history: Activity[];\n  template: Template;\n  views: ViewLog[];\n  _customActions: Function[];\n  is_merged?: boolean;\n  status_category: \"Open\" | \"Paused\" | \"Resolved\";\n}\n\nexport interface DocField {\n  fieldname: string;\n  fieldtype: string;\n  label: string;\n  name: string;\n  options: string;\n}\n\nexport interface Filter {\n  field?: DocField;\n  fieldname: string;\n  operator: string;\n  label: string;\n  value: boolean | number | string;\n}\n\nexport interface AutoCompleteItem {\n  label: string;\n  value: string;\n}\n\nexport interface Field {\n  fieldname: string;\n  fieldtype: string;\n  hide_from_customer?: 0 | 1;\n  label: string;\n  options: string;\n  required: 0 | 1;\n  description?: null;\n  url_method?: string;\n  link_filters?: string;\n  filters?: string;\n  display_via_depends_on?: string;\n  mandatory_via_depends_on?: string;\n  disabled?: boolean;\n  placeholder?: string | null;\n  readonly?: boolean;\n}\n\nexport type FieldValue = string | number | boolean | null | undefined | Dayjs;\n\nexport interface Template {\n  about: string;\n  fields: Field[];\n}\n\nexport type Column = {\n  key: string;\n  label: string;\n  icon?: string;\n  align?: string;\n  width?: string;\n  text?: string;\n};\n\nexport type File = {\n  file_name: string;\n  name: string;\n  file_url: string;\n  is_private: boolean;\n  attached_to_doctype?: string;\n  attached_to_field?: string;\n  attached_to_name?: string;\n};\n\nexport type Notification = {\n  creation: string;\n  name: string;\n  notification_type: string;\n  read: boolean;\n  reference_comment: string;\n  reference_ticket: string;\n  user_from: UserInfo;\n  user_to: UserInfo;\n};\n\nexport type UserInfo = {\n  email: string;\n  image: string;\n  name: string;\n};\n\nexport interface RenderField {\n  label: string;\n  name: string;\n  type: string;\n  placeholder?: string;\n  description?: string;\n}\n\nexport interface EmailService {\n  name: string;\n  icon: string;\n  info: string;\n  link: string;\n  custom: boolean;\n}\n\nexport type EmailStep = \"email-list\" | \"email-add\" | \"email-edit\";\n\nexport interface EmailAccount {\n  email_account_name: string;\n  email_id: string;\n  service: string;\n  api_key?: string;\n  api_secret?: string;\n  password?: string;\n  frappe_mail_site?: string;\n  enable_outgoing?: boolean;\n  enable_incoming?: boolean;\n  default_outgoing?: boolean;\n  default_incoming?: boolean;\n}\n\nexport type TicketTab = \"activity\" | \"email\" | \"comment\" | \"details\" | \"call\";\n\nexport interface TabObject {\n  name: TicketTab;\n  label: string;\n  icon: Component;\n  condition?: () => boolean;\n}\n\nexport interface RootCategory {\n  category_id: string;\n  category_name: string;\n}\n\nexport interface Article {\n  name: string;\n  title: string;\n  category_name: string;\n  category_id: string;\n  published_on: string;\n  author: Author;\n  subtitle: string;\n  article_image: string | null;\n  _user_tags: string | null;\n  status: string;\n  creation: string;\n  content: string;\n  modified: string;\n  feedback: FeedbackAction;\n}\n\nexport type FeedbackAction = 0 | 1 | 2; // 0: neutral, 1: like, 2: dislike\n\nexport interface Author {\n  name: string;\n  image: string | null;\n  email: string;\n}\n\nexport interface Category {\n  categoryName: string;\n  articles: Article[];\n  authors?: {\n    [key: string]: Author;\n  };\n  children?: Article[];\n}\n\nexport interface View {\n  filters: string;\n  order_by: string;\n  columns: string;\n  rows: string;\n  dt?: string;\n  type?: string;\n  route_name?: string;\n  user?: string;\n  icon?: string;\n  label?: string;\n  is_default?: boolean;\n  pinned?: boolean;\n  public?: boolean;\n  group_by_field?: string;\n  name?: string;\n  is_customer_portal?: boolean;\n}\n\nexport interface ViewType {\n  view_type: string;\n  group_by_field: string;\n  name: string;\n}\n\nexport interface Breadcrumb {\n  label: string;\n  route?: {\n    name: string;\n    params?: Record<string, string>;\n  };\n}\n\n// Activity Types\ninterface BaseActivity {\n  type: string;\n  key: string;\n  creation: string;\n  content: string;\n}\n\ninterface HistoryActivity extends BaseActivity {\n  type: \"history\";\n  user: string;\n  relatedActivities: HistoryActivity[];\n}\n\nexport interface EmailActivity extends BaseActivity {\n  type: \"email\";\n  attachments: FileAttachment;\n  bcc: string;\n  cc: string;\n  name: string;\n  sender: { full_name: string; name: string };\n  subject: string;\n  to: string;\n  isFirstEmail: boolean;\n}\n\nexport interface CommentActivity extends BaseActivity {\n  type: \"comment\";\n  name: string;\n  commenter: string;\n  commentedBy: string;\n  attachments: FileAttachment[];\n}\n\nexport interface CallActivity extends BaseActivity {\n  type: \"call\";\n  name: string;\n  caller: string;\n  calledBy: string;\n  attachments: FileAttachment[];\n  call_type: \"Incoming\" | \"Outgoing\";\n}\n\nexport interface FeedbackActivity {\n  type: \"feedback\";\n  feedback_rating: number;\n  feedback: string; // option seletor\n  feedback_extra?: string; // free flow text\n  sender: { name: string; full_name: string };\n  key: string;\n}\n\nexport type TicketActivity =\n  | HistoryActivity\n  | EmailActivity\n  | CommentActivity\n  | CallActivity\n  | FeedbackActivity;\n\ninterface FileAttachment {\n  name: string;\n  file_name: string;\n  file_url: string;\n}\n\nexport interface FieldCriteriaState {\n  selectedParentField: string;\n  selectedChildField: string;\n  childFields: any[];\n  parentFieldValues: any[];\n  childFieldValues: any[];\n  currentParentSelection: string;\n  childSelections: any;\n  initialChildSelections: any;\n  parentSearch: string;\n  childSearch: string;\n  enabled: boolean;\n}\n\ninterface ResourceBase {\n  data: any;\n  error: any;\n  fetched: boolean;\n  loading: boolean;\n  params: any;\n  previousData: any;\n  promise: Promise<any> | null;\n  submit: (params?: any) => void;\n}\n\ninterface DocumentResourceOptions<T = unknown> {\n  doctype: string;\n  name: string;\n  auto?: boolean;\n  whitelistedMethods?: Record<string, string>;\n  onError?: (error: any) => void;\n  onSuccess?: (data: T) => void;\n  transform?: (doc: T) => T;\n  delete?: {\n    onSuccess?: () => void;\n    onError?: (error: any) => void;\n  };\n  setValue?: {\n    onSuccess?: () => void;\n    onError?: (error: any) => void;\n  };\n}\n\nexport interface DocumentResource<T = unknown> {\n  // Configuration\n  auto: boolean;\n  doctype: string;\n  name: string;\n  isDirty: boolean;\n  promise: Promise<void> | null;\n\n  // Main document data\n  doc: T;\n  originalDoc: T;\n\n  // Core methods\n  reload(): void;\n  update(options: Partial<DocumentResourceOptions<T>>): void;\n\n  // Sub-resources\n  get: ResourceBase & {\n    data: T;\n    params: {\n      doctype: string;\n      name: string;\n    };\n  };\n\n  setValue: ResourceBase & {\n    submit: (\n      values: Partial<T>,\n      options?: { onSuccess?: () => void; onError?: (error: any) => void }\n    ) => void;\n  };\n\n  setValueDebounced: ResourceBase & {\n    submit: (values: Partial<T>) => void;\n  };\n\n  save: ResourceBase;\n  delete: ResourceBase;\n\n  // Dynamic whitelisted methods\n  [methodName: string]: any;\n}\n\nexport interface Customizations {\n  custom_fields: {\n    fieldname: string;\n    required: number;\n    placeholder: string;\n    url_method: string;\n  }[];\n  _form_script: string[];\n  _customActions?: any;\n  _customOnChange?: any;\n}\n\nexport interface TicketContact {\n  name: string;\n  email_id: string;\n  phone: string;\n  mobile_no: string;\n  image: string;\n}\n\nexport type RecentTicket = Record<\n  \"subject\" | \"status\" | \"priority\" | \"name\",\n  string | number\n>;\nexport type SimilarTicket = Record<\n  \"subject\" | \"status\" | \"priority\" | \"name\",\n  string | number\n>;\nexport interface RecentSimilarTicket {\n  recent_tickets: RecentTicket[];\n  similar_tickets: SimilarTicket[];\n}\n\nexport interface TicketActivities {\n  comments: Comment[];\n  communications: Communication[];\n  history: Activity[];\n  views: ViewLog[];\n}\n\nexport interface AssignmentRule {\n  name: string;\n  description: string;\n  priority: string;\n  enabled: boolean;\n}\n\nexport interface HDSettings {\n  brandName: string;\n  brandLogo: string;\n  favicon: string;\n  autoCloseAfterDays: string;\n  autoCloseStatus: string;\n  autoCloseTickets: string;\n  assignWithinTeam: boolean;\n  doNotRestrictTicketsWithoutAnAgentGroup: boolean;\n  restrictTicketsByAgentGroup: boolean;\n  updateStatusTo: string;\n  autoUpdateStatus: boolean;\n  isFeedbackMandatory: boolean;\n  allowAnyoneToCreateTickets: boolean;\n  defaultTicketType: string;\n  preferKnowledgeBase: boolean;\n  skipEmailWorkflow: boolean;\n}\n\nexport interface HolidayList {\n  name: string;\n  description: string;\n}\n\nexport interface SlaPolicy {\n  name: string;\n  description: string;\n  default_sla: boolean;\n  enabled: boolean;\n}\n\nexport interface Team {\n  name: string;\n}\n\nexport type APIOptions = DropdownOption[] | string[] | [];\n\nexport type DropdownOption = {\n  label: string;\n  value: string | number;\n};\n\n// symbols\nexport const TicketSymbol: InjectionKey<\n  ComputedRef<DocumentResource<HDTicket>>\n> = Symbol(\"ticket\");\nexport const AssigneeSymbol: InjectionKey<\n  ComputedRef<Resource<Record<\"name\", string>[]>>\n> = Symbol(\"assignees\");\n\nexport const CustomizationSymbol: InjectionKey<\n  ComputedRef<Resource<Customizations>>\n> = Symbol(\"customizations\");\n\nexport const TicketContactSymbol: InjectionKey<\n  ComputedRef<Resource<TicketContact>>\n> = Symbol(\"ticketContact\");\n\nexport const RecentSimilarTicketsSymbol: InjectionKey<\n  ComputedRef<Resource<RecentSimilarTicket>>\n> = Symbol(\"recentSimilarTickets\");\n\nexport const ActivitiesSymbol: InjectionKey<\n  ComputedRef<Resource<TicketActivities>>\n> = Symbol(\"activities\");\n\nexport const AssignmentRuleListResourceSymbol: InjectionKey<\n  Resource<AssignmentRule[]>\n> = Symbol(\"assignmentRuleListResource\");\n\nexport const HDSettingsSymbol: InjectionKey<Ref<HDSettings>> =\n  Symbol(\"hdSettings\");\n\nexport const HolidayListResourceSymbol: InjectionKey<\n  ListResource<HolidayList>\n> = Symbol(\"holidayListResource\");\n\nexport const SlaPolicyListResourceSymbol: InjectionKey<\n  ListResource<SlaPolicy>\n> = Symbol(\"slaPolicyListResource\");\n\nexport const TeamListResourceSymbol: InjectionKey<ListResource<Team>> =\n  Symbol(\"teamListResource\");\n\ndeclare global {\n  interface Window {\n    is_fc_site: boolean;\n    date_format: string;\n    time_format: string;\n    session_user: string;\n  }\n}\n"],"names":["TicketSymbol","AssigneeSymbol","CustomizationSymbol","TicketContactSymbol","RecentSimilarTicketsSymbol","ActivitiesSymbol","AssignmentRuleListResourceSymbol","HDSettingsSymbol","HolidayListResourceSymbol","SlaPolicyListResourceSymbol","TeamListResourceSymbol"],"mappings":"AAgpBa,MAAAA,EAET,OAAO,QAAQ,EACNC,EAET,OAAO,WAAW,EAETC,EAET,OAAO,gBAAgB,EAEdC,EAET,OAAO,eAAe,EAEbC,EAET,OAAO,sBAAsB,EAEpBC,EAET,OAAO,YAAY,EAEVC,EAET,OAAO,4BAA4B,EAE1BC,EACX,OAAO,YAAY,EAERC,EAET,OAAO,qBAAqB,EAEnBC,EAET,OAAO,uBAAuB,EAErBC,EACX,OAAO,kBAAkB"}