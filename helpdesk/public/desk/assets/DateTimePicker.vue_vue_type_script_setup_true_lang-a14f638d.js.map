{"version":3,"file":"DateTimePicker.vue_vue_type_script_setup_true_lang-a14f638d.js","sources":["../../../../desk/node_modules/frappe-ui/src/components/DatePicker/DatePicker.vue","../../../../desk/node_modules/frappe-ui/src/components/TimePicker/TimePicker.vue","../../../../desk/node_modules/frappe-ui/src/components/DatePicker/DateTimePicker.vue"],"sourcesContent":["<template>\n  <Popover\n    class=\"inline-block\"\n    :placement=\"placement\"\n    @open=\"initFromValue\"\n    @close=\"handleClose\"\n  >\n    <template #target=\"{ togglePopover, isOpen }\">\n      <slot\n        name=\"target\"\n        v-bind=\"{ togglePopover, isOpen, displayLabel, inputValue }\"\n      >\n        <TextInput\n          v-model=\"inputValue\"\n          type=\"text\"\n          class=\"cursor-text w-full\"\n          :class=\"props.inputClass\"\n          :label=\"props.label\"\n          :variant=\"props.variant\"\n          :placeholder=\"props.placeholder\"\n          :disabled=\"props.disabled\"\n          :readonly=\"props.readonly || !props.allowCustom\"\n          @focus=\"activateInput(isOpen, togglePopover)\"\n          @click=\"activateInput(isOpen, togglePopover)\"\n          @blur=\"onBlur\"\n          @keydown.enter.prevent=\"onEnter(togglePopover)\"\n        >\n          <template v-if=\"$slots.prefix\" #prefix>\n            <slot\n              name=\"prefix\"\n              v-bind=\"{ togglePopover, isOpen, displayLabel, inputValue }\"\n            />\n          </template>\n          <template #suffix>\n            <slot\n              name=\"suffix\"\n              v-bind=\"{ togglePopover, isOpen, displayLabel, inputValue }\"\n            >\n              <FeatherIcon\n                name=\"chevron-down\"\n                class=\"h-4 w-4 cursor-pointer\"\n                @mousedown.prevent=\"togglePopover\"\n              />\n            </slot>\n          </template>\n        </TextInput>\n      </slot>\n    </template>\n    <template #body=\"{ togglePopover }\">\n      <div\n        ref=\"popoverContentRef\"\n        class=\"w-fit min-w-60 select-none text-base text-ink-gray-9 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 mt-2\"\n      >\n        <div class=\"flex items-center justify-between p-2 pb-0 gap-1\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            class=\"text-sm font-medium text-ink-gray-7\"\n            @click=\"cycleView\"\n          >\n            <span v-if=\"view === 'date'\">\n              {{ months[currentMonth] }} {{ currentYear }}\n            </span>\n            <span v-else-if=\"view === 'month'\">{{ currentYear }}</span>\n            <span v-else>\n              {{ yearRangeStart }} - {{ yearRangeStart + 11 }}\n            </span>\n          </Button>\n          <div class=\"flex items-center\">\n            <Button\n              variant=\"ghost\"\n              icon=\"chevron-left\"\n              class=\"size-7\"\n              @click=\"prev\"\n            />\n            <Button\n              v-if=\"!clearable\"\n              variant=\"ghost\"\n              class=\"text-xs\"\n              :label=\"'Today'\"\n              @click=\"() => handleTodayClick(togglePopover)\"\n            />\n            <Button\n              variant=\"ghost\"\n              icon=\"chevron-right\"\n              class=\"size-7\"\n              @click=\"next\"\n            />\n          </div>\n        </div>\n        <div class=\"p-2\">\n          <div v-if=\"view === 'date'\" role=\"grid\" aria-label=\"Calendar dates\">\n            <div\n              class=\"flex items-center text-xs font-medium uppercase text-ink-gray-4 mb-1\"\n            >\n              <div\n                v-for=\"d in ['S', 'M', 'T', 'W', 'T', 'F', 'S']\"\n                :key=\"d\"\n                class=\"flex h-6 w-8 items-center justify-center\"\n              >\n                {{ d }}\n              </div>\n            </div>\n            <div v-for=\"(week, wi) in weeks\" :key=\"wi\" class=\"flex\" role=\"row\">\n              <button\n                v-for=\"dateObj in week\"\n                type=\"button\"\n                :key=\"dateObj.key\"\n                class=\"flex h-8 w-8 items-center justify-center rounded cursor-pointer text-sm focus:outline-none focus:ring-2 focus:ring-outline-gray-2\"\n                :class=\"[\n                  dateObj.inMonth ? 'text-ink-gray-8' : 'text-ink-gray-3',\n                  dateObj.isToday ? 'font-extrabold text-ink-gray-9' : '',\n                  dateObj.isSelected\n                    ? 'bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6'\n                    : 'hover:bg-surface-gray-2',\n                ]\"\n                role=\"gridcell\"\n                :aria-selected=\"dateObj.isSelected ? 'true' : 'false'\"\n                :aria-label=\"\n                  dateObj.date.format('YYYY-MM-DD') +\n                  (dateObj.isToday ? ' (Today)' : '')\n                \"\n                @click=\"handleDateCellClick(dateObj.date, togglePopover)\"\n              >\n                {{ dateObj.date.date() }}\n              </button>\n            </div>\n          </div>\n          <div\n            v-else-if=\"view === 'month'\"\n            class=\"grid grid-cols-3 gap-1\"\n            role=\"grid\"\n            aria-label=\"Select month\"\n          >\n            <button\n              v-for=\"(m, i) in months\"\n              type=\"button\"\n              :key=\"m\"\n              class=\"py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6\"\n              :class=\"{\n                'bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6':\n                  i === currentMonth,\n              }\"\n              :aria-selected=\"i === currentMonth ? 'true' : 'false'\"\n              @click=\"selectMonth(i)\"\n            >\n              {{ m.slice(0, 3) }}\n            </button>\n          </div>\n          <div\n            v-else\n            class=\"grid grid-cols-3 gap-1\"\n            role=\"grid\"\n            aria-label=\"Select year\"\n          >\n            <button\n              v-for=\"y in yearRange\"\n              type=\"button\"\n              :key=\"y\"\n              class=\"py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6\"\n              :class=\"{\n                'bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6':\n                  y === currentYear,\n              }\"\n              :aria-selected=\"y === currentYear ? 'true' : 'false'\"\n              @click=\"selectYear(y)\"\n            >\n              {{ y }}\n            </button>\n          </div>\n        </div>\n        <div\n          v-if=\"props.clearable\"\n          class=\"flex items-center justify-between gap-1 p-2 border-t\"\n        >\n          <div class=\"flex gap-1\">\n            <Button\n              variant=\"outline\"\n              :label=\"'Today'\"\n              @click=\"() => handleTodayClick(togglePopover)\"\n            />\n            <Button\n              variant=\"outline\"\n              :label=\"'Tomorrow'\"\n              @click=\"() => handleTomorrowClick(togglePopover)\"\n            />\n          </div>\n          <Button\n            v-if=\"selected\"\n            size=\"sm\"\n            variant=\"outline\"\n            :label=\"'Clear'\"\n            @click=\"() => handleClearClick(togglePopover)\"\n          />\n        </div>\n      </div>\n    </template>\n  </Popover>\n</template>\n<script setup lang=\"ts\">\nimport { ref, computed, watch, toRefs } from 'vue'\nimport { Popover } from '../Popover'\nimport { Button } from '../Button'\nimport { TextInput } from '../TextInput'\n// @ts-ignore - Vue SFC without explicit types\nimport FeatherIcon from '../FeatherIcon.vue'\nimport { dayjs, dayjsLocal } from '../../utils/dayjs'\nimport { months, monthStart, generateWeeks, getDateValue } from './utils'\nimport type { Dayjs } from 'dayjs/esm'\nimport type {\n  DatePickerProps,\n  DatePickerEmits,\n  DatePickerViewMode as ViewMode,\n  DatePickerDateObj as DateObj,\n} from './types'\n\nconst props = withDefaults(defineProps<DatePickerProps>(), {\n  value: '',\n  modelValue: '',\n  placement: 'bottom-start',\n  variant: 'subtle',\n  placeholder: 'Select date',\n  readonly: false,\n  allowCustom: true,\n  autoClose: true,\n  disabled: false,\n  clearable: true,\n})\nconst emit = defineEmits<DatePickerEmits>()\n\nconst { autoClose } = toRefs(props)\n\nconst view = ref<ViewMode>('date')\nconst currentYear = ref<number>(dayjs().year())\nconst currentMonth = ref<number>(dayjs().month()) // 0-index\nconst DATE_FORMAT = 'YYYY-MM-DD'\n\nconst selected = ref<string>('')\nconst initialValue = ref(props.modelValue || props.value || '')\n\nfunction coerceToDayjs(val?: string | null): Dayjs | null {\n  if (!val) return null\n  const raw = String(val).trim()\n  if (!raw) return null\n  if (props.format) {\n    const dStrict = dayjs(raw, props.format, true)\n    if (dStrict.isValid()) return dStrict\n  }\n  const dLoose = dayjs(raw)\n  if (dLoose.isValid()) return dLoose\n  const normalized = getDateValue(raw)\n  if (normalized) {\n    const dNorm = dayjs(normalized)\n    if (dNorm.isValid()) return dNorm\n  }\n  return null\n}\n\nfunction syncFromValue(val?: string): void {\n  if (!val) {\n    if (!props.clearable) {\n      const today = dayjsLocal()\n      currentYear.value = today.year()\n      currentMonth.value = today.month()\n      selected.value = today.format(DATE_FORMAT)\n    } else {\n      selected.value = ''\n    }\n    return\n  }\n  const d = coerceToDayjs(val)\n  if (!d) {\n    selected.value = ''\n    return\n  }\n  currentYear.value = d.year()\n  currentMonth.value = d.month()\n  selected.value = d.format(DATE_FORMAT)\n}\n\nsyncFromValue(initialValue.value)\n\nfunction initFromValue(): void {\n  syncFromValue(props.modelValue || props.value)\n}\n\nwatch(\n  () => [props.modelValue, props.value],\n  ([m, v]) => {\n    const val = m || v\n    syncFromValue(val)\n  },\n)\n\nconst displayLabel = computed<string>(() =>\n  props.format ? formatter(selected.value, props.format) : selected.value,\n)\n\nfunction formatter(dateStr: string, format: string): string {\n  const d = dayjs(dateStr)\n  if (!d.isValid()) return dateStr\n  return d.format(format)\n}\n\nconst inputValue = ref<string>(displayLabel.value)\nconst isTyping = ref(false)\n\nwatch(displayLabel, (val) => {\n  if (!isTyping.value) inputValue.value = val\n})\n\nfunction maybeClose(togglePopover?: () => void, condition = true) {\n  if (condition && autoClose.value && togglePopover) togglePopover()\n}\n\nfunction clearSelection() {\n  if (!selected.value) return\n  selected.value = ''\n  emit('update:modelValue', '')\n  emit('change', '')\n  initialValue.value = ''\n  inputValue.value = ''\n}\n\nfunction commitInput(close = false, togglePopover?: () => void): void {\n  const raw = inputValue.value.trim()\n  if (!raw) {\n    if (!props.clearable) {\n      selectDate(dayjsLocal())\n      maybeClose(togglePopover, close)\n    } else {\n      clearSelection()\n      maybeClose(togglePopover, close)\n    }\n    return\n  }\n  const d = coerceToDayjs(raw)\n  if (d) {\n    selectDate(d)\n    maybeClose(togglePopover, close)\n  }\n}\n\nconst popoverContentRef = ref<HTMLElement | null>(null)\n\nfunction onBlur(e: FocusEvent) {\n  const next = e.relatedTarget as Node | null\n  if (next && popoverContentRef.value?.contains(next)) return\n  commitInput()\n  isTyping.value = false\n}\nfunction onEnter(togglePopover: () => void) {\n  commitInput(true, togglePopover)\n  isTyping.value = false\n}\nfunction activateInput(isOpen: boolean | undefined, togglePopover: () => void) {\n  isTyping.value = true\n  if (!isOpen) togglePopover()\n}\nconst weeks = computed<DateObj[][]>(() =>\n  generateWeeks(currentYear.value, currentMonth.value, selected.value),\n)\n\nfunction selectDate(date: string | Date | Dayjs): void {\n  const d = dayjs(date as any)\n  if (!d.isValid()) return\n  const prev = selected.value\n  selected.value = d.format(DATE_FORMAT)\n  currentYear.value = d.year()\n  currentMonth.value = d.month()\n\n  if (selected.value !== initialValue.value) {\n    emit('update:modelValue', selected.value)\n    if (selected.value !== prev) emit('change', selected.value)\n    initialValue.value = selected.value\n  }\n\n  // Reflect new value in input immediately if not typing\n  if (!isTyping.value) {\n    inputValue.value = props.format\n      ? formatter(selected.value, props.format)\n      : selected.value\n  }\n  view.value = 'date'\n}\nfunction selectMonth(i: number): void {\n  currentMonth.value = i\n  view.value = 'date'\n}\nfunction selectYear(y: number): void {\n  currentYear.value = y\n  view.value = 'month'\n}\nfunction prev(): void {\n  if (view.value === 'date') {\n    const m = monthStart(currentYear.value, currentMonth.value).subtract(\n      1,\n      'month',\n    )\n    currentYear.value = m.year()\n    currentMonth.value = m.month()\n  } else if (view.value === 'month') {\n    currentYear.value -= 1\n  } else {\n    currentYear.value -= 12\n  }\n}\nfunction next(): void {\n  if (view.value === 'date') {\n    const m = monthStart(currentYear.value, currentMonth.value).add(1, 'month')\n    currentYear.value = m.year()\n    currentMonth.value = m.month()\n  } else if (view.value === 'month') {\n    currentYear.value += 1\n  } else {\n    currentYear.value += 12\n  }\n}\nfunction handleDateCellClick(\n  date: string | Date | Dayjs,\n  togglePopover: () => void,\n) {\n  selectDate(date)\n  if (autoClose.value) togglePopover()\n  isTyping.value = false\n}\n\nfunction selectOffset(days = 0, togglePopover: () => void) {\n  handleDateCellClick(dayjsLocal().add(days, 'day'), togglePopover)\n}\nfunction handleTodayClick(togglePopover: () => void) {\n  selectOffset(0, togglePopover)\n}\nfunction handleTomorrowClick(togglePopover: () => void) {\n  selectOffset(1, togglePopover)\n}\n\nfunction handleClearClick(togglePopover: () => void) {\n  clearSelection()\n  maybeClose(togglePopover)\n  isTyping.value = false\n  view.value = 'date'\n}\n\nfunction cycleView(): void {\n  if (view.value === 'date') view.value = 'month'\n  else if (view.value === 'month') view.value = 'year'\n  else view.value = 'date'\n}\n\nfunction handleClose() {\n  view.value = 'date'\n  if (isTyping.value) {\n    commitInput()\n    isTyping.value = false\n  }\n}\n\nconst yearRangeStart = computed(\n  () => currentYear.value - (currentYear.value % 12),\n)\nconst yearRange = computed<number[]>(() =>\n  Array.from({ length: 12 }, (_, i) => yearRangeStart.value + i),\n)\n</script>\n","<template>\n  <Popover\n    v-model:show=\"showOptions\"\n    transition=\"default\"\n    :placement=\"placement\"\n  >\n    <template #target=\"{ togglePopover, isOpen }\">\n      <TextInput\n        ref=\"inputRef\"\n        v-model=\"displayValue\"\n        :variant=\"variant\"\n        type=\"text\"\n        class=\"text-sm w-full cursor-text\"\n        :placeholder=\"placeholder\"\n        :disabled=\"disabled\"\n        :readonly=\"!props.allowCustom\"\n        @focus=\"onFocus\"\n        @click=\"onClickInput(isOpen, togglePopover)\"\n        @keydown.enter.prevent=\"onEnter\"\n        @blur=\"onBlur\"\n        @keydown.down.prevent=\"onArrowDown(togglePopover, isOpen)\"\n        @keydown.up.prevent=\"onArrowUp(togglePopover, isOpen)\"\n        @keydown.esc.prevent=\"onEscape\"\n      >\n        <template v-if=\"$slots.prefix\" #prefix>\n          <slot name=\"prefix\" />\n        </template>\n        <template #suffix>\n          <slot name=\"suffix\" v-bind=\"{ togglePopover, isOpen }\">\n            <FeatherIcon\n              name=\"chevron-down\"\n              class=\"h-4 w-4 cursor-pointer\"\n              @mousedown.prevent=\"togglePopover\"\n            />\n          </slot>\n        </template>\n      </TextInput>\n    </template>\n    <template #body=\"{ isOpen }\">\n      <div\n        v-show=\"isOpen\"\n        ref=\"panelRef\"\n        class=\"mt-2 max-h-48 w-44 overflow-y-auto rounded-lg bg-surface-modal p-1 text-base shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none\"\n        role=\"listbox\"\n        :aria-activedescendant=\"activeDescendantId\"\n      >\n        <button\n          v-for=\"(opt, idx) in displayedOptions\"\n          :key=\"opt.value\"\n          :data-value=\"opt.value\"\n          :data-index=\"idx\"\n          type=\"button\"\n          class=\"group flex h-7 w-full items-center rounded px-2 text-left\"\n          :class=\"buttonClasses(opt, idx)\"\n          @click=\"select(opt.value)\"\n          @mouseenter=\"highlightIndex = idx\"\n          role=\"option\"\n          :id=\"optionId(idx)\"\n          :aria-selected=\"internalValue === opt.value\"\n        >\n          <span class=\"truncate\">{{ opt.label }}</span>\n        </button>\n      </div>\n    </template>\n  </Popover>\n</template>\n\n<script setup lang=\"ts\">\nimport Popover from '../Popover/Popover.vue'\nimport TextInput from '../TextInput/TextInput.vue'\nimport FeatherIcon from '../FeatherIcon.vue'\nimport { ref, computed, watch, nextTick } from 'vue'\nimport type {\n  Option,\n  ParsedTime,\n  TimePickerProps,\n  Placement,\n  Variant,\n  TimePickerEmits,\n} from './types'\n\nconst props = withDefaults(defineProps<TimePickerProps>(), {\n  value: '',\n  modelValue: '',\n  interval: 15,\n  options: () => [],\n  placement: 'bottom-start' as Placement,\n  placeholder: 'Select time',\n  variant: 'subtle' as Variant,\n  allowCustom: true,\n  autoClose: true,\n  use12Hour: true,\n  disabled: false,\n  scrollMode: 'center' as const,\n  minTime: '',\n  maxTime: '',\n})\n\nconst emit = defineEmits<TimePickerEmits>()\n\nconst panelRef = ref<HTMLElement | null>(null)\nconst isFocused = ref(false)\nconst showOptions = ref(false)\nconst highlightIndex = ref<number>(-1)\nconst hasSelectedOnFirstClick = ref(false)\nconst isTyping = ref(false)\nlet navUpdating = false\nlet invalidState = false\n\nconst inputRef = ref<any>(null)\nconst initial = props.modelValue || props.value || ''\nconst internalValue = ref<string>(initial)\nconst displayValue = ref<string>('')\ndisplayValue.value = formatDisplay(internalValue.value)\nconst uid = Math.random().toString(36).slice(2, 9)\nconst activeDescendantId = computed<string | undefined>(() =>\n  highlightIndex.value > -1 ? optionId(highlightIndex.value) : undefined,\n)\nfunction optionId(idx: number): string {\n  return `tp-${uid}-${idx}`\n}\n\nfunction minutesFromHHMM(str: string): number | null {\n  if (!str) return null\n  if (!/^\\d{2}:\\d{2}(:\\d{2})?$/.test(str)) return null\n  const [h, m] = str.split(':').map((n) => parseInt(n))\n  if (h > 23 || m > 59) return null\n  return h * 60 + m\n}\nconst minMinutes = computed<number | null>(() => minutesFromHHMM(props.minTime))\nconst maxMinutes = computed<number | null>(() => minutesFromHHMM(props.maxTime))\n\nconst displayedOptions = computed<Option[]>(() => {\n  if (props.options?.length) {\n    return props.options.map((o) => {\n      const value = normalize24(o.value)\n      return {\n        value,\n        label: o.label || formatDisplay(value),\n      }\n    })\n  }\n  const out: Option[] = []\n  for (let m = 0; m < 1440; m += props.interval) {\n    if (minMinutes.value != null && m < minMinutes.value) continue\n    if (maxMinutes.value != null && m > maxMinutes.value) continue\n    const hh = Math.floor(m / 60)\n      .toString()\n      .padStart(2, '0')\n    const mm = (m % 60).toString().padStart(2, '0')\n    const val = `${hh}:${mm}`\n    out.push({\n      value: val,\n      label: formatDisplay(val),\n    })\n  }\n  return out\n})\n\nwatch(\n  () => [props.modelValue, props.value],\n  ([m, v]) => {\n    const nv = m || v || ''\n    if (nv && nv !== internalValue.value) {\n      internalValue.value = normalize24(nv)\n      displayValue.value = formatDisplay(internalValue.value)\n    } else if (!nv) {\n      internalValue.value = ''\n      displayValue.value = ''\n    }\n  },\n)\n\nfunction normalize24(raw: string): string {\n  if (!raw) return ''\n  if (/^\\d{2}:\\d{2}$/.test(raw)) return raw\n  if (/^\\d{2}:\\d{2}:\\d{2}$/.test(raw)) return raw // keep seconds if present\n  const parsed = parseFlexibleTime(raw)\n  if (!parsed.valid) return ''\n  return parsed.ss\n    ? `${parsed.hh24}:${parsed.mm}:${parsed.ss}`\n    : `${parsed.hh24}:${parsed.mm}`\n}\n\nfunction formatDisplay(val24: string): string {\n  if (!val24) return ''\n  const segs = val24.split(':')\n  const h = parseInt(segs[0])\n  const m = parseInt(segs[1])\n  const s = segs[2]\n  const base24 = `${h.toString().padStart(2, '0')}:${m\n    .toString()\n    .padStart(2, '0')}${s ? `:${s}` : ''}`\n  if (!props.use12Hour) return base24\n  const am = h < 12\n  const hour12 = h % 12 === 0 ? 12 : h % 12\n  return `${hour12}:${m.toString().padStart(2, '0')}${s ? `:${s}` : ''} ${\n    am ? 'am' : 'pm'\n  }`\n}\n\nfunction parseFlexibleTime(input: string): ParsedTime {\n  if (!input) return { valid: false }\n  let s = input.trim().toLowerCase()\n  s = s.replace(/\\./g, '')\n  s = s.replace(/(\\d)(am|pm)$/, '$1 $2')\n  const re = /^(\\d{1,2})(?::(\\d{1,2}))?(?::(\\d{1,2}))?\\s*([ap]m)?$/\n  const m = s.match(re)\n  if (!m) return { valid: false }\n  let [, hhStr, mmStr, ssStr, ap] = m\n  let hh = parseInt(hhStr)\n  if (isNaN(hh) || hh < 0 || hh > 23) return { valid: false }\n  if (ssStr && !mmStr) return { valid: false }\n  let mm = mmStr != null && mmStr !== '' ? parseInt(mmStr) : 0\n  if (isNaN(mm) || mm < 0 || mm > 59) return { valid: false }\n  let ss: number | undefined\n  if (ssStr) {\n    ss = parseInt(ssStr)\n    if (isNaN(ss) || ss < 0 || ss > 59) return { valid: false }\n  }\n  if (ap) {\n    if (hh < 1 || hh > 12) return { valid: false }\n    if (hh === 12 && ap === 'am') hh = 0\n    else if (hh < 12 && ap === 'pm') hh += 12\n  }\n  return {\n    valid: true,\n    hh24: hh.toString().padStart(2, '0'),\n    mm: mm.toString().padStart(2, '0'),\n    ss: ss != null ? ss.toString().padStart(2, '0') : undefined,\n    total: hh * 60 + mm,\n  }\n}\n\nfunction findNearestIndex(targetMinutes: number, list: Option[]): number {\n  if (!list.length) return -1\n  const minutesArr = list.map((o) => {\n    const [hh, mm] = o.value.split(':').map(Number)\n    return hh * 60 + mm\n  })\n  let lo = 0,\n    hi = minutesArr.length - 1\n  while (lo <= hi) {\n    const mid = (lo + hi) >> 1\n    const val = minutesArr[mid]\n    if (val === targetMinutes) return mid\n    if (val < targetMinutes) lo = mid + 1\n    else hi = mid - 1\n  }\n  const candidates: number[] = []\n  if (lo < minutesArr.length) candidates.push(lo)\n  if (lo - 1 >= 0) candidates.push(lo - 1)\n  if (!candidates.length) return -1\n  return candidates.sort(\n    (a, b) =>\n      Math.abs(minutesArr[a] - targetMinutes) -\n      Math.abs(minutesArr[b] - targetMinutes),\n  )[0]\n}\n\nfunction isOutOfRange(totalMinutes: number): boolean {\n  if (minMinutes.value != null && totalMinutes < minMinutes.value) return true\n  if (maxMinutes.value != null && totalMinutes > maxMinutes.value) return true\n  return false\n}\n\nfunction applyValue(val24: string, commit = false) {\n  const prev = internalValue.value\n  internalValue.value = val24\n  displayValue.value = formatDisplay(val24)\n  if (commit || !isFocused.value) emit('update:modelValue', val24)\n  if (commit && val24 !== prev) emit('change', val24)\n  setInvalid(false)\n}\n\nfunction commitInput() {\n  const raw = displayValue.value\n  const parsed = parseFlexibleTime(raw)\n  if (!raw) {\n    const prev = internalValue.value\n    internalValue.value = ''\n    if (!isFocused.value) emit('update:modelValue', '')\n    if (prev && prev !== '') emit('change', '')\n    setInvalid(false)\n    return\n  }\n  if (!parsed.valid || isOutOfRange(parsed.total)) {\n    emit('input-invalid', raw)\n    setInvalid(true)\n    return\n  }\n  const normalized = parsed.ss\n    ? `${parsed.hh24}:${parsed.mm}:${parsed.ss}`\n    : `${parsed.hh24}:${parsed.mm}`\n  if (\n    !props.allowCustom &&\n    !displayedOptions.value.some((o) => {\n      const base = normalized.length === 8 ? normalized.slice(0, 5) : normalized\n      return o.value === base\n    })\n  ) {\n    const nearestIdx = findNearestIndex(parsed.total, displayedOptions.value)\n    if (nearestIdx > -1) {\n      const nearestVal = displayedOptions.value[nearestIdx].value\n      const committed =\n        normalized.length === 8 && nearestVal.length === 5\n          ? `${nearestVal}${normalized.slice(5)}`\n          : nearestVal\n      applyValue(committed, true)\n      return\n    }\n  }\n  applyValue(normalized, true)\n}\n\nfunction select(val: string, forceChange = false) {\n  const prev = internalValue.value\n  applyValue(val, true)\n  if (forceChange && prev === internalValue.value) {\n    emit('change', internalValue.value)\n  }\n  if (props.autoClose) showOptions.value = false\n}\n\nconst selectedAndNearest = computed<{\n  selected: Option | null\n  nearest: Option | null\n}>(() => {\n  const list = displayedOptions.value\n  if (!list.length) return { selected: null, nearest: null }\n  const parsedTyped = parseFlexibleTime(displayValue.value)\n  const candidate =\n    isTyping.value && parsedTyped.valid\n      ? parsedTyped.ss\n        ? `${parsedTyped.hh24}:${parsedTyped.mm}:${parsedTyped.ss}`\n        : `${parsedTyped.hh24}:${parsedTyped.mm}`\n      : internalValue.value || null\n  if (!candidate) return { selected: null, nearest: null }\n  const candidateCompare =\n    candidate && candidate.length === 8 ? candidate.slice(0, 5) : candidate\n  const selected = list.find((o) => o.value === candidateCompare) || null\n  if (selected) return { selected, nearest: null }\n  const parsed = parseFlexibleTime(candidate)\n  if (!parsed.valid) return { selected: null, nearest: null }\n  const idx = findNearestIndex(parsed.total, list)\n  return { selected: null, nearest: idx > -1 ? list[idx] : null }\n})\n\nfunction buttonClasses(opt: Option, idx: number): string {\n  if (idx === highlightIndex.value) return 'bg-surface-gray-3 text-ink-gray-8'\n  const { selected, nearest } = selectedAndNearest.value\n  if (isTyping.value && !selected) {\n    if (nearest && nearest.value === opt.value)\n      return 'text-ink-gray-7 italic bg-surface-gray-2'\n    return 'text-ink-gray-6 hover:bg-surface-gray-2 hover:text-ink-gray-8'\n  }\n  if (selected && selected.value === opt.value)\n    return 'bg-surface-gray-3 text-ink-gray-8'\n  if (nearest && nearest.value === opt.value)\n    return 'text-ink-gray-7 italic bg-surface-gray-2'\n  return 'text-ink-gray-6 hover:bg-surface-gray-2 hover:text-ink-gray-8'\n}\n\nwatch(\n  () => displayedOptions.value,\n  () => scheduleScroll(),\n)\n\nfunction scheduleScroll() {\n  nextTick(() => {\n    if (!panelRef.value || !showOptions.value) return\n    let targetEl: HTMLElement | null = null\n    if (highlightIndex.value > -1) {\n      targetEl = panelRef.value.querySelector(\n        `[data-index=\"${highlightIndex.value}\"]`,\n      ) as HTMLElement | null\n    } else {\n      const { selected, nearest } = selectedAndNearest.value\n      const target = selected || nearest\n      if (target)\n        targetEl = panelRef.value.querySelector(\n          `[data-value=\"${target.value}\"]`,\n        ) as HTMLElement | null\n    }\n    if (!targetEl) return\n    targetEl.scrollIntoView({\n      block:\n        props.scrollMode === 'center'\n          ? 'center'\n          : props.scrollMode === 'start'\n            ? 'start'\n            : 'nearest',\n    })\n  })\n}\n\nwatch(showOptions, (open) => {\n  if (open) {\n    emit('open')\n    initHighlight()\n    scheduleScroll()\n  } else {\n    emit('close')\n  }\n})\n\nwatch(\n  () => displayValue.value,\n  () => {\n    if (navUpdating) return\n    if (showOptions.value) scheduleScroll()\n    isTyping.value = true\n    highlightIndex.value = -1\n  },\n)\n\nfunction initHighlight() {\n  const { selected, nearest } = selectedAndNearest.value\n  const target = selected || nearest\n  if (!target) {\n    highlightIndex.value = -1\n    return\n  }\n  const idx = displayedOptions.value.findIndex((o) => o.value === target.value)\n  highlightIndex.value = idx\n}\n\nfunction moveHighlight(delta: number) {\n  const list = displayedOptions.value\n  if (!list.length) return\n  if (highlightIndex.value === -1) initHighlight()\n  else\n    highlightIndex.value =\n      (highlightIndex.value + delta + list.length) % list.length\n  const opt = list[highlightIndex.value]\n  if (opt) {\n    navUpdating = true\n    const val =\n      internalValue.value.length === 8 && opt.value.length === 5\n        ? `${opt.value}${internalValue.value.slice(5)}`\n        : opt.value\n    applyValue(val, false)\n    nextTick(() => {\n      navUpdating = false\n    })\n  }\n  isTyping.value = false\n  scheduleScroll()\n}\n\nfunction onArrowDown(togglePopover: () => void, isOpen?: boolean) {\n  if (!isOpen) togglePopover()\n  else moveHighlight(1)\n}\nfunction onArrowUp(togglePopover: () => void, isOpen?: boolean) {\n  if (!isOpen) togglePopover()\n  else moveHighlight(-1)\n}\n\nfunction onEnter() {\n  if (!showOptions.value) {\n    commitInput()\n    blurInput()\n    return\n  }\n  const parsed = parseFlexibleTime(displayValue.value)\n  const normalized = parsed.valid\n    ? parsed.ss\n      ? `${parsed.hh24}:${parsed.mm}:${parsed.ss}`\n      : `${parsed.hh24}:${parsed.mm}`\n    : null\n  const exists = normalized\n    ? displayedOptions.value.some((o) => {\n        const base =\n          normalized.length === 8 ? normalized.slice(0, 5) : normalized\n        return o.value === base\n      })\n    : false\n  if (parsed.valid && (!exists || isTyping.value)) {\n    commitInput()\n    if (props.autoClose) showOptions.value = false\n    blurInput()\n    return\n  }\n  if (highlightIndex.value > -1) {\n    const opt = displayedOptions.value[highlightIndex.value]\n    if (opt) select(opt.value, true)\n  } else {\n    commitInput()\n    if (props.autoClose) showOptions.value = false\n  }\n  blurInput()\n}\n\nfunction onClickInput(isOpen: boolean | undefined, togglePopover: () => void) {\n  if (!isOpen) togglePopover()\n  if (props.allowCustom) selectAll()\n}\n\nfunction onFocus() {\n  isFocused.value = true\n  if (props.allowCustom && !hasSelectedOnFirstClick.value) selectAll()\n}\n\nfunction onBlur() {\n  if (showOptions.value) {\n    isFocused.value = false\n    return\n  }\n  commitInput()\n  isFocused.value = false\n}\n\nfunction selectAll() {\n  nextTick(() => {\n    const el = inputRef.value?.el || inputRef.value\n    if (el && el.querySelector) {\n      const input: HTMLInputElement | any = el.querySelector('input') || el\n      input?.select?.()\n    } else if (el?.select) {\n      el.select()\n    }\n    hasSelectedOnFirstClick.value = true\n  })\n}\n\nfunction blurInput() {\n  nextTick(() => {\n    const el = inputRef.value?.el || inputRef.value\n    if (el && el.querySelector) {\n      const input: HTMLInputElement | any = el.querySelector('input') || el\n      input?.blur?.()\n    } else if (el?.blur) {\n      el.blur()\n    }\n    isFocused.value = false\n  })\n}\n\nfunction onEscape() {\n  if (showOptions.value) showOptions.value = false\n  blurInput()\n}\n\nfunction setInvalid(val: boolean) {\n  if (invalidState !== val) {\n    invalidState = val\n    emit('invalid-change', val)\n  }\n}\n</script>\n","<template>\n  <Popover\n    class=\"inline-block\"\n    :placement=\"placement\"\n    @open=\"initFromValue\"\n    @close=\"handleClose\"\n  >\n    <template #target=\"{ togglePopover, isOpen }\">\n      <slot\n        name=\"target\"\n        v-bind=\"{ togglePopover, isOpen, displayLabel, inputValue }\"\n      >\n        <TextInput\n          v-model=\"inputValue\"\n          type=\"text\"\n          class=\"cursor-text w-full\"\n          :class=\"props.inputClass\"\n          :label=\"props.label\"\n          :variant=\"props.variant\"\n          :placeholder=\"props.placeholder || 'Select date & time'\"\n          :disabled=\"props.disabled\"\n          :readonly=\"props.readonly || !props.allowCustom\"\n          @focus=\"activateInput(isOpen, togglePopover)\"\n          @click=\"activateInput(isOpen, togglePopover)\"\n          @blur=\"onBlur\"\n          @keydown.enter.prevent=\"onEnter(togglePopover)\"\n        >\n          <template v-if=\"$slots.prefix\" #prefix>\n            <slot\n              name=\"prefix\"\n              v-bind=\"{ togglePopover, isOpen, displayLabel, inputValue }\"\n            />\n          </template>\n          <template #suffix>\n            <slot\n              name=\"suffix\"\n              v-bind=\"{ togglePopover, isOpen, displayLabel, inputValue }\"\n            >\n              <FeatherIcon\n                name=\"chevron-down\"\n                class=\"h-4 w-4 cursor-pointer\"\n                @mousedown.prevent=\"togglePopover\"\n              />\n            </slot>\n          </template>\n        </TextInput>\n      </slot>\n    </template>\n\n    <template #body=\"{ togglePopover }\">\n      <div\n        ref=\"popoverContentRef\"\n        class=\"w-fit min-w-60 select-none text-base text-ink-gray-9 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 mt-2\"\n      >\n        <!-- Header (Month/Year navigation) -->\n        <div class=\"flex items-center justify-between p-2 pb-0 gap-1\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            class=\"text-sm font-medium text-ink-gray-7\"\n            @click=\"cycleView\"\n          >\n            <span v-if=\"view === 'date'\"\n              >{{ months[currentMonth] }} {{ currentYear }}</span\n            >\n            <span v-else-if=\"view === 'month'\">{{ currentYear }}</span>\n            <span v-else>{{ yearRangeStart }} - {{ yearRangeStart + 11 }}</span>\n          </Button>\n          <div class=\"flex items-center\">\n            <Button\n              variant=\"ghost\"\n              icon=\"chevron-left\"\n              class=\"size-7\"\n              @click=\"prev\"\n            />\n            <Button\n              v-if=\"!clearable\"\n              variant=\"ghost\"\n              class=\"text-xs\"\n              :label=\"'Now'\"\n              @click=\"() => handleNowClick(togglePopover)\"\n            />\n            <Button\n              variant=\"ghost\"\n              icon=\"chevron-right\"\n              class=\"size-7\"\n              @click=\"next\"\n            />\n          </div>\n        </div>\n\n        <!-- Calendar -->\n        <div class=\"p-2\">\n          <div v-if=\"view === 'date'\" role=\"grid\" aria-label=\"Calendar dates\">\n            <div\n              class=\"flex items-center text-xs font-medium uppercase text-ink-gray-4 mb-1\"\n            >\n              <div\n                v-for=\"d in ['S', 'M', 'T', 'W', 'T', 'F', 'S']\"\n                :key=\"d\"\n                class=\"flex h-6 w-8 items-center justify-center\"\n              >\n                {{ d }}\n              </div>\n            </div>\n            <div v-for=\"(week, wi) in weeks\" :key=\"wi\" class=\"flex\" role=\"row\">\n              <button\n                v-for=\"dateObj in week\"\n                type=\"button\"\n                :key=\"dateObj.key\"\n                class=\"flex h-8 w-8 items-center justify-center rounded cursor-pointer text-sm focus:outline-none focus:ring-2 focus:ring-outline-gray-2\"\n                :class=\"[\n                  dateObj.inMonth ? 'text-ink-gray-8' : 'text-ink-gray-3',\n                  dateObj.isToday ? 'font-extrabold text-ink-gray-9' : '',\n                  dateObj.disabled\n                    ? 'opacity-30 cursor-not-allowed hover:bg-transparent'\n                    : dateObj.isSelected\n                      ? 'bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6'\n                      : 'hover:bg-surface-gray-2',\n                ]\"\n                role=\"gridcell\"\n                :aria-selected=\"dateObj.isSelected ? 'true' : 'false'\"\n                :aria-label=\"\n                  dateObj.date.format('YYYY-MM-DD') +\n                  (dateObj.isToday ? ' (Today)' : '')\n                \"\n                :disabled=\"dateObj.disabled\"\n                @click=\"\n                  !dateObj.disabled &&\n                    handleDateCellClick(dateObj.date, togglePopover)\n                \"\n              >\n                {{ dateObj.date.date() }}\n              </button>\n            </div>\n          </div>\n          <div\n            v-else-if=\"view === 'month'\"\n            class=\"grid grid-cols-3 gap-1\"\n            role=\"grid\"\n            aria-label=\"Select month\"\n          >\n            <button\n              v-for=\"(m, i) in months\"\n              type=\"button\"\n              :key=\"m\"\n              class=\"py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6\"\n              :class=\"{\n                'bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6':\n                  i === currentMonth,\n              }\"\n              :aria-selected=\"i === currentMonth ? 'true' : 'false'\"\n              @click=\"selectMonth(i)\"\n            >\n              {{ m.slice(0, 3) }}\n            </button>\n          </div>\n          <div\n            v-else\n            class=\"grid grid-cols-3 gap-1\"\n            role=\"grid\"\n            aria-label=\"Select year\"\n          >\n            <button\n              v-for=\"y in yearRange\"\n              type=\"button\"\n              :key=\"y\"\n              class=\"py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6\"\n              :class=\"{\n                'bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6':\n                  y === currentYear,\n              }\"\n              :aria-selected=\"y === currentYear ? 'true' : 'false'\"\n              @click=\"selectYear(y)\"\n            >\n              {{ y }}\n            </button>\n          </div>\n        </div>\n\n        <!-- Time Picker Section -->\n        <div class=\"flex flex-col gap-2 p-2 pt-0\">\n          <TimePicker\n            :value=\"timeValue\"\n            :allowCustom=\"props.allowCustomTime\"\n            :placement=\"'bottom-start'\"\n            placeholder=\"Select time\"\n            :minTime=\"computedMinTime\"\n            :maxTime=\"computedMaxTime\"\n            @change=\"onTimeChange\"\n          />\n        </div>\n\n        <!-- Footer Actions (clearable variant) -->\n        <div\n          v-if=\"props.clearable\"\n          class=\"flex items-center justify-between gap-1 p-2 border-t\"\n        >\n          <div class=\"flex gap-1\">\n            <Button\n              variant=\"outline\"\n              :label=\"'Now'\"\n              @click=\"() => handleNowClick(togglePopover)\"\n            />\n            <Button\n              variant=\"outline\"\n              :label=\"'Tomorrow'\"\n              @click=\"() => handleTomorrowClick()\"\n            />\n          </div>\n          <Button\n            v-if=\"selectedDate\"\n            size=\"sm\"\n            variant=\"outline\"\n            :label=\"'Clear'\"\n            @click=\"() => handleClearClick(togglePopover)\"\n          />\n        </div>\n      </div>\n    </template>\n  </Popover>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, toRefs } from 'vue'\nimport { Popover } from '../Popover'\nimport { Button } from '../Button'\nimport { TextInput } from '../TextInput'\n// @ts-ignore - Vue SFC without explicit types\nimport FeatherIcon from '../FeatherIcon.vue'\nimport TimePicker from '../TimePicker/TimePicker.vue'\nimport { dayjs, dayjsLocal, dayjsSystem } from '../../utils/dayjs'\nimport { months, monthStart, generateWeeks, getDateValue } from './utils'\nimport type { Dayjs } from 'dayjs/esm'\nimport type {\n  DatePickerProps,\n  DatePickerEmits,\n  DatePickerViewMode as ViewMode,\n} from './types'\n\ninterface ExtraDateTimeProps {\n  minDateTime?: string\n  maxDateTime?: string\n  allowCustomTime?: boolean\n}\n\nconst props = withDefaults(\n  defineProps<DatePickerProps & ExtraDateTimeProps>(),\n  {\n    value: '',\n    modelValue: '',\n    placement: 'bottom-start',\n    variant: 'subtle',\n    placeholder: 'Select date & time',\n    readonly: false,\n    allowCustom: true,\n    autoClose: true,\n    disabled: false,\n    clearable: true,\n    allowCustomTime: true,\n  },\n)\nconst emit = defineEmits<DatePickerEmits>()\n\nconst { autoClose } = toRefs(props)\n\nconst view = ref<ViewMode>('date')\nconst currentYear = ref<number>(dayjs().year())\nconst currentMonth = ref<number>(dayjs().month())\nconst DATE_FORMAT = 'YYYY-MM-DD'\nconst DATE_TIME_FORMAT = 'YYYY-MM-DD h:mm a'\n\nconst selectedDate = ref<string>('') // YYYY-MM-DD\nconst timeValue = ref<string>('') // HH:mm:ss\n\nconst initialValue = ref(props.modelValue || props.value || '')\n\nfunction coerceDateTime(val?: string | null): Dayjs | null {\n  if (!val) return null\n  const raw = String(val).trim()\n  if (!raw) return null\n\n  if (props.format) {\n    const dStrict = dayjs(raw, props.format, true)\n    if (dStrict.isValid()) return dStrict\n  }\n\n  const dLoose = dayjsLocal(raw)\n  if (dLoose.isValid()) return dLoose\n\n  const normalized = getDateValue(raw)\n  if (normalized) {\n    const dNorm = dayjsLocal(normalized)\n    if (dNorm.isValid()) return dNorm\n  }\n  return null\n}\n\nfunction syncFromValue(val?: string): void {\n  if (!val) {\n    if (!props.clearable) {\n      const now = dayjsLocal()\n      currentYear.value = now.year()\n      currentMonth.value = now.month()\n      selectedDate.value = now.format(DATE_FORMAT)\n      timeValue.value = now.format('HH:mm:ss')\n    } else {\n      selectedDate.value = ''\n      timeValue.value = ''\n    }\n    return\n  }\n  const d = coerceDateTime(val)\n  if (!d) {\n    selectedDate.value = ''\n    timeValue.value = ''\n    return\n  }\n  currentYear.value = d.year()\n  currentMonth.value = d.month()\n  selectedDate.value = d.format(DATE_FORMAT)\n  timeValue.value = d.format('HH:mm:ss')\n}\n\nsyncFromValue(initialValue.value)\n\nfunction initFromValue(): void {\n  syncFromValue(props.modelValue || props.value)\n}\n\nwatch(\n  () => [props.modelValue, props.value],\n  ([m, v]) => {\n    const val = m || v\n    syncFromValue(val)\n  },\n)\n\nconst combinedValue = computed<string>(() => {\n  if (!selectedDate.value) return ''\n  const base = `${selectedDate.value} ${timeValue.value || '00:00:00'}`\n  const local = dayjs(base)\n  if (!local.isValid()) return ''\n  return local.format(DATE_TIME_FORMAT)\n})\n\nconst displayLabel = computed<string>(() => {\n  if (!combinedValue.value) return ''\n  if (props.format) return dayjs(combinedValue.value).format(props.format)\n  return combinedValue.value\n})\n\nconst inputValue = ref<string>(displayLabel.value)\nconst isTyping = ref(false)\nwatch(displayLabel, (val) => {\n  if (!isTyping.value) inputValue.value = val\n})\n\nfunction maybeClose(togglePopover?: () => void, condition = true) {\n  if (condition && autoClose.value && togglePopover) togglePopover()\n}\n\nfunction clearSelection() {\n  if (!selectedDate.value && !timeValue.value) return\n  selectedDate.value = ''\n  timeValue.value = ''\n  emit('update:modelValue', '')\n  emit('change', '')\n  initialValue.value = ''\n  inputValue.value = ''\n}\n\nfunction commitInput(close = false, togglePopover?: () => void): void {\n  const raw = inputValue.value.trim()\n  if (!raw) {\n    if (!props.clearable) {\n      const now = dayjsLocal()\n      selectDate(now)\n      timeValue.value = now.format('HH:mm:ss')\n      emitChange()\n      maybeClose(togglePopover, close)\n    } else {\n      clearSelection()\n      maybeClose(togglePopover, close)\n    }\n    return\n  }\n  const parsed = coerceDateTime(raw)\n  if (parsed) {\n    selectDate(parsed)\n    timeValue.value = parsed.format('HH:mm:ss')\n    emitChange()\n    maybeClose(togglePopover, close)\n  }\n}\n\nconst popoverContentRef = ref<HTMLElement | null>(null)\nfunction onBlur(e: FocusEvent) {\n  const next = e.relatedTarget as Node | null\n  if (next && popoverContentRef.value?.contains(next)) return\n  commitInput()\n  isTyping.value = false\n}\nfunction onEnter(togglePopover: () => void) {\n  commitInput(true, togglePopover)\n  isTyping.value = false\n}\nfunction activateInput(isOpen: boolean | undefined, togglePopover: () => void) {\n  isTyping.value = true\n  if (!isOpen) togglePopover()\n}\n\nconst minDT = computed<Dayjs | null>(() =>\n  props.minDateTime ? coerceDateTime(props.minDateTime) : null,\n)\nconst maxDT = computed<Dayjs | null>(() =>\n  props.maxDateTime ? coerceDateTime(props.maxDateTime) : null,\n)\n\nfunction dateDisabled(d: Dayjs): boolean {\n  if (minDT.value && d.endOf('day').isBefore(minDT.value)) return true\n  if (maxDT.value && d.startOf('day').isAfter(maxDT.value)) return true\n  return false\n}\n\nconst weeks = computed<any[][]>(() => {\n  const base = generateWeeks(\n    currentYear.value,\n    currentMonth.value,\n    selectedDate.value,\n  )\n  return base.map((week) =>\n    week.map((obj) => ({ ...obj, disabled: dateDisabled(obj.date) })),\n  )\n})\n\nconst computedMinTime = computed<string>(() => {\n  if (!minDT.value || !selectedDate.value) return ''\n  if (dayjs(selectedDate.value).isSame(minDT.value, 'day'))\n    return minDT.value.format('HH:mm:ss')\n  return ''\n})\nconst computedMaxTime = computed<string>(() => {\n  if (!maxDT.value || !selectedDate.value) return ''\n  if (dayjs(selectedDate.value).isSame(maxDT.value, 'day'))\n    return maxDT.value.format('HH:mm:ss')\n  return ''\n})\n\nwatch([computedMinTime, computedMaxTime, timeValue, selectedDate], () => {\n  if (!selectedDate.value || !timeValue.value) return\n  const cur = dayjs(`${selectedDate.value} ${timeValue.value}`)\n  if (minDT.value && cur.isBefore(minDT.value))\n    timeValue.value = computedMinTime.value || timeValue.value\n  if (maxDT.value && cur.isAfter(maxDT.value))\n    timeValue.value = computedMaxTime.value || timeValue.value\n})\n\nfunction selectDate(date: string | Date | Dayjs): void {\n  const d = dayjs(date as any)\n  if (!d.isValid()) return\n  if (dateDisabled(d)) return\n  selectedDate.value = d.format(DATE_FORMAT)\n  currentYear.value = d.year()\n  currentMonth.value = d.month()\n}\nfunction selectMonth(i: number): void {\n  currentMonth.value = i\n  view.value = 'date'\n}\nfunction selectYear(y: number): void {\n  currentYear.value = y\n  view.value = 'month'\n}\nfunction prev(): void {\n  if (view.value === 'date') {\n    const m = monthStart(currentYear.value, currentMonth.value).subtract(\n      1,\n      'month',\n    )\n    currentYear.value = m.year()\n    currentMonth.value = m.month()\n  } else if (view.value === 'month') currentYear.value -= 1\n  else currentYear.value -= 12\n}\nfunction next(): void {\n  if (view.value === 'date') {\n    const m = monthStart(currentYear.value, currentMonth.value).add(1, 'month')\n    currentYear.value = m.year()\n    currentMonth.value = m.month()\n  } else if (view.value === 'month') currentYear.value += 1\n  else currentYear.value += 12\n}\nfunction handleDateCellClick(\n  date: string | Date | Dayjs,\n  togglePopover: () => void,\n) {\n  selectDate(date)\n  emitChange(true, togglePopover)\n  isTyping.value = false\n  view.value = 'date'\n}\n\nfunction onTimeChange(val: string) {\n  timeValue.value = val\n  isTyping.value = false\n  if (selectedDate.value) emitChange()\n}\n\nfunction emitChange(close = false, togglePopover?: () => void) {\n  if (!selectedDate.value) {\n    clearSelection()\n    return\n  }\n\n  const localDateTime = combinedValue.value\n  const systemDateTime = dayjsSystem(localDateTime).format(DATE_TIME_FORMAT)\n\n  if (systemDateTime !== initialValue.value) {\n    emit('update:modelValue', systemDateTime)\n    emit('change', systemDateTime)\n    initialValue.value = systemDateTime\n  }\n\n  if (!isTyping.value) inputValue.value = displayLabel.value\n  maybeClose(togglePopover, close)\n}\n\nfunction handleNowClick(togglePopover: () => void) {\n  const now = dayjsLocal()\n  selectDate(now)\n  timeValue.value = now.format('HH:mm:ss')\n  emitChange(true, togglePopover)\n  isTyping.value = false\n}\nfunction handleTomorrowClick() {\n  const tomorrow = dayjsLocal().add(1, 'day')\n  selectDate(tomorrow)\n  // keep current time value if any, else set to now's time\n  if (!timeValue.value) timeValue.value = dayjsLocal().format('HH:mm:ss')\n  emitChange()\n  isTyping.value = false\n}\nfunction handleClearClick(togglePopover: () => void) {\n  clearSelection()\n  maybeClose(togglePopover)\n  isTyping.value = false\n  view.value = 'date'\n}\n\nfunction cycleView(): void {\n  if (view.value === 'date') view.value = 'month'\n  else if (view.value === 'month') view.value = 'year'\n  else view.value = 'date'\n}\nfunction handleClose() {\n  view.value = 'date'\n  if (isTyping.value) {\n    commitInput()\n    isTyping.value = false\n  }\n}\n\nconst yearRangeStart = computed(\n  () => currentYear.value - (currentYear.value % 12),\n)\nconst yearRange = computed<number[]>(() =>\n  Array.from({ length: 12 }, (_, i) => yearRangeStart.value + i),\n)\n</script>\n"],"names":["DATE_FORMAT","props","__props","emit","__emit","autoClose","toRefs","view","ref","currentYear","dayjs","currentMonth","selected","initialValue","coerceToDayjs","val","raw","dStrict","dLoose","normalized","getDateValue","dNorm","syncFromValue","today","dayjsLocal","d","initFromValue","watch","m","v","displayLabel","computed","formatter","dateStr","format","inputValue","isTyping","maybeClose","togglePopover","condition","clearSelection","commitInput","close","selectDate","popoverContentRef","onBlur","e","next","_a","onEnter","activateInput","isOpen","weeks","generateWeeks","date","prev","selectMonth","i","selectYear","y","monthStart","handleDateCellClick","selectOffset","days","handleTodayClick","handleTomorrowClick","handleClearClick","cycleView","handleClose","yearRangeStart","yearRange","_","_createBlock","_unref","Popover","_withCtx","_renderSlot","_ctx","_normalizeProps","_guardReactiveProps","_createVNode","TextInput","$event","_normalizeClass","_withKeys","_withModifiers","FeatherIcon","$slots","_createElementVNode","_hoisted_1","Button","_openBlock","_createElementBlock","months","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_Fragment","_renderList","week","wi","dateObj","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","panelRef","isFocused","showOptions","highlightIndex","hasSelectedOnFirstClick","navUpdating","invalidState","inputRef","initial","internalValue","displayValue","formatDisplay","uid","activeDescendantId","optionId","idx","minutesFromHHMM","str","h","n","minMinutes","maxMinutes","displayedOptions","o","value","normalize24","out","hh","mm","nv","parsed","parseFlexibleTime","val24","segs","base24","am","input","s","re","hhStr","mmStr","ssStr","ap","ss","findNearestIndex","targetMinutes","list","minutesArr","lo","hi","mid","candidates","a","b","isOutOfRange","totalMinutes","applyValue","commit","setInvalid","base","nearestIdx","nearestVal","committed","select","forceChange","selectedAndNearest","parsedTyped","candidate","candidateCompare","buttonClasses","opt","nearest","scheduleScroll","nextTick","targetEl","target","open","initHighlight","moveHighlight","delta","onArrowDown","onArrowUp","blurInput","exists","onClickInput","selectAll","onFocus","el","_b","onEscape","_hoisted_3","DATE_TIME_FORMAT","selectedDate","timeValue","coerceDateTime","now","combinedValue","local","emitChange","minDT","maxDT","dateDisabled","obj","computedMinTime","computedMaxTime","cur","onTimeChange","localDateTime","systemDateTime","dayjsSystem","handleNowClick","tomorrow","TimePicker","_hoisted_16"],"mappings":"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","x_google_ignoreList":[0,1,2]}