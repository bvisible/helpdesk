import{$ as Q,e as o,k as y,B as U,l as f,t as J,h as e,f as x,ab as pe,a0 as ce,x as I,z as te,c as z,bY as Ct,C as me,D as we,a8 as re,y as ve,bc as Be,F as le,E as se,al as Oe,v as de,g as p,w as b,L as et,j as fe,s as tt,bZ as $t,b5 as Vt,p as Le,a3 as Ae,a7 as Ie,r as he,X as Te,b as lt,ak as xe,bg as Ne,a9 as ie,Q as ot,G as St,J as X,b_ as Lt,b$ as Rt,M as st,ap as Ee,c0 as At,c1 as ze,N as Dt,be as jt,c2 as qt,au as Ft,aq as Nt,ar as Mt,c3 as It,c4 as zt,c5 as Bt,d as Ot,q as Tt,u as Et,a as Ut,ao as Ht,W as Wt,P as Pt,V as Ve,aQ as Kt,O as Zt,ac as Gt,c6 as Jt}from"./index-3194ec9b.js";import{D as nt}from"./Dropdown-c7dd9c29.js";import{T as Qt}from"./TabButtons-439c1e4c.js";import{S as Yt,D as Xt,v as el,g as tl,u as ll,x as Me,c as Se}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-a9d0f8af.js";import"./dayjs-f66c5460.js";import"./LayoutHeader-3eb7ac7a.js";import{_ as at,D as it}from"./DateTimePicker-8cacf145.js";import{_ as ol}from"./DateRangePicker.vue_vue_type_script_setup_true_lang-7827f28c.js";import{a as rt,_ as Re}from"./Link-431cfb69.js";import{_ as ut}from"./StarRating.vue_vue_type_script_setup_true_lang-0c43ad36.js";import{_ as sl,G as nl,j as al,y as il}from"./NestedPopover-37db8746.js";import{a as rl,_ as ul}from"./MultipleAvatar.vue_vue_type_script_setup_true_lang-7025dfbf.js";import{u as cl}from"./ticketStatus-895288f5.js";import{_ as dl}from"./EmptyState.vue_vue_type_script_setup_true_lang-946d36ad.js";const fl={class:"flex h-full w-full flex-col items-center justify-center text-base"},pl={class:"text-xl font-medium"},ml={class:"mt-1 text-base text-ink-gray-5"},vl={__name:"ListEmptyState",setup(t){const s=Q("list");return(l,n)=>(o(),y("div",fl,[U(l.$slots,"default",{},()=>[f("div",pl,J(e(s).options.emptyState.title),1),f("div",ml,J(e(s).options.emptyState.description),1),e(s).options.emptyState.button?(o(),x(e(ce),pe({key:0},e(s).options.emptyState.button,{class:"mt-4"}),null,16)):I("",!0)])]))}};function ct(t,s=!0){let l=s?"14px ":"",n=t.map(m=>{let i=m.width||1;return typeof i=="number"?i+"fr":i}).join(" ");return l+n}const Ue={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},hl={class:"truncate"},dt={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(t,{emit:s}){const l=t,n=s,m=te(null),i=te(null),d=z(()=>{if(typeof l.item.width=="string"){const c=parseInt(l.item.width);if(l.item.width.includes("rem"))return c*16;if(l.item.width.includes("px"))return c}return i.value.offsetWidth}),u=c=>{const k=c.clientX,L=d.value,h=M=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),m.value.style.backgroundColor="rgb(199 199 199)";let v=L+(M.clientX-k);l.item.width=`${v<50?50:v}px`,g(l.item.width)},_=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),m.value.style.backgroundColor="",window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",_)};window.addEventListener("mousemove",h),window.addEventListener("mouseup",_)},g=Ct(c=>{l.item.width=c,n("columnWidthUpdated")},l.debounce),R=Q("list");return(c,k)=>(o(),y("div",{ref_key:"columnRef",ref:i,class:re(["group relative flex items-center",t.item.align?e(Ue)[t.item.align]:"justify-between"])},[f("div",{class:re(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",c.$attrs.class])},[U(c.$slots,"prefix",me(we({item:t.item}))),U(c.$slots,"default",{},()=>[f("div",hl,J(t.item.label),1)]),U(c.$slots,"suffix",me(we({item:t.item})))],2),e(R).options.resizeColumn?U(c.$slots,"resizer",me(pe({key:0},{item:t.item})),()=>[f("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:u},[f("div",{ref_key:"resizer",ref:m,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):I("",!0)],2))}},ft={__name:"ListHeader",emits:["columnWidthUpdated"],setup(t,{emit:s}){const l=s,n=Q("list");return(m,i)=>(o(),y("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Oe({gridTemplateColumns:e(ct)(e(n).columns,e(n).options.selectable)})},[e(n).options.selectable?(o(),x(Be,{key:0,class:"cursor-pointer duration-300",modelValue:e(n).allRowsSelected,onClick:ve(e(n).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):I("",!0),U(m.$slots,"default",{},()=>[(o(!0),y(le,null,se(e(n).columns,d=>(o(),x(dt,{key:d.key,item:d,onColumnWidthUpdated:u=>l("columnWidthUpdated",d)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},wl={class:"truncate text-base"},pt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(t){const s=t,l=z(()=>{var d,u;return(d=s.column)!=null&&d.getLabel?(u=s.column)==null?void 0:u.getLabel({row:s.row}):m(s.item).label||""}),n=z(()=>i.value.options.showTooltip?s.column.getTooltip?s.column.getTooltip(s.row):m(s.item).label:"");function m(d){return d&&typeof d=="object"?d:{label:d}}const i=Q("list");return(d,u)=>(o(),y("div",{class:re(["flex items-center space-x-2",e(Ue)[t.align]])},[U(d.$slots,"prefix",{},()=>[t.column.prefix?(o(),x(de(typeof t.column.prefix=="function"?t.column.prefix({row:t.row}):t.column.prefix),{key:0})):I("",!0)]),p(e(et),me(we(e(i).options.showTooltip?{text:n.value}:{text:""})),{default:b(()=>[U(d.$slots,"default",me(we({label:l.value})),()=>[f("div",wl,J(l.value),1)])]),_:3},16),U(d.$slots,"suffix")],2))}},De={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(t){const s=t,l=Q("list"),n=z(()=>{var c;return(c=l.value.rows)!=null&&c.length?l.value.rows[l.value.rows.length-1][l.value.rowKey]===s.row[l.value.rowKey]:!1}),m=z(()=>l.value.selections.has(s.row[l.value.rowKey])),i=z(()=>l.value.options.enableActive&&l.value.activeRow.value===s.row.name),d=z(()=>l.value.options.getRowRoute||l.value.options.onRowClick),u=z(()=>typeof l.value.options.rowHeight=="number"?`${l.value.options.rowHeight}px`:l.value.options.rowHeight),g=z(()=>{var L,h,_;if(!m.value)return"rounded";const c=[...l.value.selections];let k=(L=l.value.rows[0])!=null&&L.group?l.value.rows.map(M=>M.rows):[l.value.rows];for(let M of k){let v=M.findIndex(C=>C==s.row);if(v===-1)continue;let q=!c.includes((h=M[v+1])==null?void 0:h.name),j=!c.includes((_=M[v-1])==null?void 0:_.name);return(q?"rounded-b ":"")+(j?"rounded-t":"")}}),R=(c,k)=>{l.value.options.onRowClick&&l.value.options.onRowClick(c,k),l.value.activeRow.value===c.name?l.value.activeRow.value=null:l.value.activeRow.value=c.name};return(c,k)=>(o(),x(de(e(l).options.getRowRoute?"router-link":"div"),pe({class:[[g.value,m.value||i.value?"bg-surface-gray-2":"",d.value?"cursor-pointer":"",d.value?m.value||i.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:e(l).options.getRowRoute?e(l).options.getRowRoute(t.row):void 0,onClick:L=>R(t.row,L)}),{default:b(()=>[(o(),x(de(e(l).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:b(()=>{var L,h;return[f("div",{class:"grid items-center space-x-4 px-2",style:Oe({height:u.value,gridTemplateColumns:e(ct)(e(l).columns,e(l).options.selectable)})},[e(l).options.selectable?(o(),y("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:k[1]||(k[1]=ve(()=>{},["stop","prevent"])),onDblclick:k[2]||(k[2]=ve(()=>{},["stop"]))},[p(Be,{modelValue:m.value,class:"cursor-pointer duration-300",onClick:k[0]||(k[0]=ve(_=>e(l).toggleRow(t.row[e(l).rowKey]),["stop"]))},null,8,["modelValue"])],32)):I("",!0),(o(!0),y(le,null,se(e(l).columns,(_,M)=>(o(),y("div",{key:_.key,class:re([e(Ue)[_.align],M==0?"text-ink-gray-9":"text-ink-gray-7"])},[U(c.$slots,"default",pe({ref_for:!0},{idx:M,column:_,item:t.row[_.key],isActive:i.value}),()=>[e(l).slots.cell?(o(),x(de(e(l).slots.cell),pe({key:0,ref_for:!0},{column:_,row:t.row,item:t.row[_.key],align:_.align}),null,16)):(o(),x(pt,{key:1,column:_,row:t.row,item:t.row[_.key],align:_.align},null,8,["column","row","item","align"]))])],2))),128))],4),n.value?I("",!0):(o(),y("div",{key:0,class:re(["h-px border-t",g.value==="rounded"||(h=(L=g.value)==null?void 0:L.includes)!=null&&h.call(L,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},yl={class:"h-full overflow-y-auto"},mt={__name:"ListRows",setup(t){const s=Q("list");return(l,n)=>(o(),y("div",yl,[U(l.$slots,"default",{},()=>[(o(!0),y(le,null,se(e(s).rows,m=>(o(),x(De,{key:m[e(s).rowKey],row:m},null,8,["row"]))),128))])]))}},gl={},_l={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function bl(t,s){return o(),y("svg",_l,[...s[0]||(s[0]=[f("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)])])}const kl=fe(gl,[["render",bl]]),xl={class:"flex items-center"},Cl={class:"w-full py-1.5 pr-2"},$l={key:1,class:"text-base font-medium leading-6"},vt={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(t){const s=t,l=Q("list");function n(){s.group.collapsed==null&&(s.group.collapsed=!1),s.group.collapsed=!s.group.collapsed}return(m,i)=>(o(),y(le,null,[f("div",xl,[f("button",{onClick:n,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[p(kl,{class:re(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[t.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),U(m.$slots,"default",{},()=>[f("div",Cl,[e(l).slots["group-header"]?(o(),x(de(e(l).slots["group-header"]),me(pe({key:0},{group:t.group})),null,16)):(o(),y("span",$l,J(t.group.group),1))])])]),i[0]||(i[0]=f("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Vl={key:0,class:"mb-5 mt-2"},ht={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(t){const s=Q("list");return(l,n)=>t.group.collapsed?I("",!0):(o(),y("div",Vl,[U(l.$slots,"default",{},()=>[(o(!0),y(le,null,se(t.group.rows,m=>(o(),x(De,{key:m[e(s).rowKey],row:m},null,8,["row"]))),128))])]))}},Sl={class:"h-full overflow-y-auto"},Ll={__name:"ListGroups",setup(t){const s=Q("list");return(l,n)=>(o(),y("div",Sl,[(o(!0),y(le,null,se(e(s).rows,m=>(o(),y("div",{key:m.group},[U(l.$slots,"default",{},()=>[p(vt,{group:m},{default:b(()=>[l.$slots["group-header"]?U(l.$slots,"group-header",pe({key:0,ref_for:!0},{group:m})):I("",!0)]),_:2},1032,["group"]),p(ht,{group:m},null,8,["group"])])]))),128))]))}},Rl={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Al={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Dl={class:"flex items-center space-x-3"},jl={class:"mr-3"},ql={class:"flex items-center space-x-1"},wt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(t){const s=Q("list");let l=z(()=>s.value.options.selectionText(s.value.selections.size));return(n,m)=>(o(),x($t,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:b(()=>[e(s).selections.size?(o(),y("div",Rl,[f("div",{class:re(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",n.$attrs.class])},[U(n.$slots,"default",me(we({selections:e(s).selections,allRowsSelected:e(s).allRowsSelected,selectAll:()=>e(s).toggleAllRows(!0),unselectAll:()=>e(s).toggleAllRows(!1)})),()=>[f("div",Al,[f("div",Dl,[p(Be,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),f("div",null,J(e(l)),1)]),f("div",jl,[U(n.$slots,"actions",me(we({selections:e(s).selections,allRowsSelected:e(s).allRowsSelected,selectAll:()=>e(s).toggleAllRows(!0),unselectAll:()=>e(s).toggleAllRows(!1)})))])]),f("div",ql,[p(e(ce),{class:re(["w- text-ink-gray-7",e(s).allRowsSelected?"cursor-not-allowed":""]),disabled:e(s).allRowsSelected,variant:"ghost",onClick:m[0]||(m[0]=i=>e(s).toggleAllRows(!0))},{default:b(()=>[...m[2]||(m[2]=[tt(" Select all ",-1)])]),_:1},8,["disabled","class"]),p(e(ce),{icon:"x",variant:"ghost",onClick:m[1]||(m[1]=i=>e(s).toggleAllRows(!1))})])])],2)])):I("",!0)]),_:3}))}}),Fl={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Nl=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(t,{expose:s,emit:l}){const n=t,m=Vt();let i=Le(new Set),d=te(null);const u=l;Ae(i,_=>{i.size&&(d.value=null),u("update:selections",_)}),Ae(d,_=>{u("update:active-row",_)});let g=z(()=>{function _(v){return v===void 0?!0:v}function M(v){return v===void 0?!1:v}return{getRowRoute:n.options.getRowRoute||null,onRowClick:n.options.onRowClick||null,showTooltip:_(n.options.showTooltip),selectionText:n.options.selectionText||(v=>v===1?"1 row selected":`${v} rows selected`),enableActive:M(n.options.enableActive),selectable:_(n.options.selectable),resizeColumn:M(n.options.resizeColumn),rowHeight:n.options.rowHeight||40,emptyState:n.options.emptyState}});const R=z(()=>n.rows.length?k.value?i.size===n.rows.reduce((_,M)=>_+M.rows.length,0):i.size===n.rows.length:!1),c=z(()=>g.value.selectable);let k=z(()=>n.rows.every(_=>_.group&&_.rows&&Array.isArray(_.rows)));function L(_){i.delete(_)||i.add(_)}function h(_){if(!_||R.value){i.clear();return}if(k.value){n.rows.forEach(M=>{M.rows.forEach(v=>i.add(v[n.rowKey]))});return}n.rows.forEach(M=>i.add(M[n.rowKey]))}return Ie("list",z(()=>({rowKey:n.rowKey,rows:n.rows,columns:n.columns,options:g.value,selections:i,activeRow:d,allRowsSelected:R.value,slots:m,toggleRow:L,toggleAllRows:h}))),s({selections:i,allRowsSelected:R,toggleRow:L,toggleAllRows:h}),(_,M)=>(o(),y("div",Fl,[f("div",{class:re(["flex w-max min-w-full flex-col overflow-y-hidden",_.$attrs.class]),style:Oe(_.$attrs.style)},[U(_.$slots,"default",me(we({showGroupedRows:e(k),selectable:c.value})),()=>[p(ft),n.rows.length?(o(),y(le,{key:0},[e(k)?(o(),x(Ll,{key:0})):(o(),x(mt,{key:1}))],64)):(o(),x(vl,{key:1})),c.value?(o(),x(wt,{key:2})):I("",!0)])],6)]))}}),Ml={class:"flex justify-between gap-2"},Il={class:"flex items-center"},zl={key:1,class:"mx-3 h-[80%] border-l"},Bl={class:"flex items-center gap-1 text-base text-ink-gray-5"},Ol={__name:"ListFooter",props:{modelValue:{type:Number,default:20},options:{type:Object,default:()=>({rowCount:0,totalCount:0,pageLengthOptions:[20,50,100]})}},emits:["update:modelValue","loadMore"],setup(t,{emit:s}){const l=t,n=s,m=z({get:()=>l.modelValue,set:u=>n("update:modelValue",u)}),i=te(l.options.pageLengthOptions||[20,50,100]),d=z(()=>l.options.rowCount&&l.options.totalCount&&l.options.rowCount<l.options.totalCount);return(u,g)=>{const R=he("Button");return o(),y("div",Ml,[U(u.$slots,"default",{},()=>[U(u.$slots,"left",{},()=>[p(Qt,{modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=c=>m.value=c),buttons:i.value.map(c=>({label:c,value:c}))},null,8,["modelValue","buttons"])]),U(u.$slots,"right",{},()=>[f("div",Il,[d.value?(o(),x(R,{key:0,label:"Load More",onClick:g[1]||(g[1]=c=>n("loadMore"))})):I("",!0),d.value?(o(),y("div",zl)):I("",!0),f("div",Bl,[f("div",null,J(t.options.rowCount||"0"),1),g[2]||(g[2]=f("div",null,"of",-1)),f("div",null,J(t.options.totalCount||"0"),1)])])])])])}}},Tl={},El={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-down-a-z"};function Ul(t,s){return o(),y("svg",El,[...s[0]||(s[0]=[Te('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)])])}const Ze=fe(Tl,[["render",Ul]]),Hl={},Wl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Pl(t,s){return o(),y("svg",Wl,[...s[0]||(s[0]=[f("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07548 1.50005C8.05087 1.49632 8.02566 1.49438 8 1.49438C7.97434 1.49438 7.94914 1.49632 7.92452 1.50005H3C1.89543 1.50005 1 2.39548 1 3.50005V12.5C1 13.6046 1.89543 14.5 3 14.5H7.92511C7.94954 14.5037 7.97455 14.5056 8 14.5056C8.02545 14.5056 8.05046 14.5037 8.07489 14.5H13C14.1046 14.5 15 13.6046 15 12.5V3.50005C15 2.39548 14.1046 1.50005 13 1.50005H8.07548ZM7.5 2.50005H3C2.44772 2.50005 2 2.94776 2 3.50005V12.5C2 13.0523 2.44772 13.5 3 13.5H7.5L7.5 2.50005ZM8.5 13.5L8.5 2.50005H13C13.5523 2.50005 14 2.94776 14 3.50005V12.5C14 13.0523 13.5523 13.5 13 13.5H8.5Z",fill:"currentColor"},null,-1)])])}const Ge=fe(Hl,[["render",Pl]]),Kl={},Zl={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-up-z-a"};function Gl(t,s){return o(),y("svg",Zl,[...s[0]||(s[0]=[Te('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)])])}const Je=fe(Kl,[["render",Gl]]),Jl={},Ql={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Yl(t,s){return o(),y("svg",Ql,[...s[0]||(s[0]=[f("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 6.75C12.3096 6.75 11.75 6.19036 11.75 5.5C11.75 4.80964 12.3096 4.25 13 4.25C13.6904 4.25 14.25 4.80964 14.25 5.5C14.25 6.19036 13.6904 6.75 13 6.75ZM3 6.75C2.30964 6.75 1.75 6.19036 1.75 5.5C1.75 4.80964 2.30964 4.25 3 4.25C3.69036 4.25 4.25 4.80964 4.25 5.5C4.25 6.19036 3.69036 6.75 3 6.75ZM6.75 5.5C6.75 6.19036 7.30964 6.75 8 6.75C8.69036 6.75 9.25 6.19036 9.25 5.5C9.25 4.80964 8.69036 4.25 8 4.25C7.30964 4.25 6.75 4.80964 6.75 5.5ZM13 11.75C12.3096 11.75 11.75 11.1904 11.75 10.5C11.75 9.80964 12.3096 9.25 13 9.25C13.6904 9.25 14.25 9.80964 14.25 10.5C14.25 11.1904 13.6904 11.75 13 11.75ZM1.75 10.5C1.75 11.1904 2.30964 11.75 3 11.75C3.69036 11.75 4.25 11.1904 4.25 10.5C4.25 9.80964 3.69036 9.25 3 9.25C2.30964 9.25 1.75 9.80964 1.75 10.5ZM8 11.75C7.30964 11.75 6.75 11.1904 6.75 10.5C6.75 9.80964 7.30964 9.25 8 9.25C8.69036 9.25 9.25 9.80964 9.25 10.5C9.25 11.1904 8.69036 11.75 8 11.75Z",fill:"currentColor"},null,-1)])])}const yt=fe(Jl,[["render",Yl]]),Xl={},eo={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function to(t,s){return o(),y("svg",eo,[...s[0]||(s[0]=[f("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 4.5C2.5 3.39543 3.39543 2.5 4.5 2.5H8.5C8.77614 2.5 9 2.27614 9 2C9 1.72386 8.77614 1.5 8.5 1.5H4.5C2.84315 1.5 1.5 2.84315 1.5 4.5V11.5C1.5 13.1569 2.84315 14.5 4.5 14.5H11.5C13.1569 14.5 14.5 13.1569 14.5 11.5V7.5C14.5 7.22386 14.2761 7 14 7C13.7239 7 13.5 7.22386 13.5 7.5V11.5C13.5 12.6046 12.6046 13.5 11.5 13.5H4.5C3.39543 13.5 2.5 12.6046 2.5 11.5V4.5ZM14.1255 2.58446C14.3207 2.3892 14.3207 2.07261 14.1255 1.87735C13.9302 1.68209 13.6136 1.68209 13.4184 1.87735L6.68616 8.60954C6.4909 8.8048 6.4909 9.12139 6.68616 9.31665C6.88143 9.51191 7.19801 9.51191 7.39327 9.31665L14.1255 2.58446Z",fill:"currentColor"},null,-1)])])}const lo=fe(Xl,[["render",to]]),oo={},so={width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"};function no(t,s){return o(),y("svg",so,[...s[0]||(s[0]=[f("g",{class:"es-line-reload","clip-path":"url(#a)"},[f("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.743 2.189a6 6 0 0 0-6.558 2.596.5.5 0 0 0 .844.535 5 5 0 0 1 9.12 1.683l-1.187-.686a.5.5 0 0 0-.5.866l2.165 1.25a.5.5 0 0 0 .683-.183l1.25-2.165a.5.5 0 0 0-.866-.5l-.603 1.044a6 6 0 0 0-4.348-4.44ZM3.356 9.024l1.189.687a.5.5 0 0 0 .5-.866L2.88 7.595a.5.5 0 0 0-.683.183L.947 9.943a.5.5 0 1 0 .866.5l.603-1.044a6 6 0 0 0 10.9 1.816.5.5 0 0 0-.844-.536 5 5 0 0 1-9.116-1.655Z",class:"Union","clip-rule":"evenodd"})],-1),f("defs",null,[f("clipPath",{id:"a",class:"a"},[f("path",{fill:"currentColor",d:"M.25 0h16v16h-16z"})])],-1)])])}const ao=fe(oo,[["render",no]]),io={},ro={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function uo(t,s){return o(),y("svg",ro,[...s[0]||(s[0]=[f("path",{d:"M2.35619 8.42909C2.35644 9.77009 2.84031 11.066 3.719 12.079C4.5977 13.092 5.81226 13.7542 7.13977 13.9439C8.46729 14.1336 9.8187 13.8382 10.946 13.1119C12.0732 12.3856 12.9008 11.2771 13.2766 9.98982C13.6525 8.70258 13.5515 7.32295 12.9922 6.10414C12.4329 4.88534 11.4528 3.90914 10.2318 3.35469C9.0108 2.80025 7.63079 2.70476 6.34504 3.08576C5.0593 3.46675 3.95409 4.29867 3.23226 5.42883",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),f("path",{d:"M3.21297 2V5.42886H6.64183",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const co=fe(io,[["render",uo]]),fo={},po={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function mo(t,s){return o(),y("svg",po,[...s[0]||(s[0]=[Te('<path d="M1.75 3.75H10.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 7.75H7.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 11.75H5.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14.25 8.25L12.25 6.25L10.25 8.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.25 12.25L12.25 6.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>',5)])])}const ke=fe(fo,[["render",mo]]),vo={},ho={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function wo(t,s){return o(),y("svg",ho,[...s[0]||(s[0]=[f("path",{d:"M2 4.5H14",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),f("path",{d:"M4 8.5H12",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),f("path",{d:"M6.5 12.5H9.5",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const yo=fe(vo,[["render",wo]]),go={class:"flex items-center w-fit"},_o={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},bo={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},ko={class:"min-w-72 p-2 sm:min-w-[400px]"},xo={key:0,class:"flex flex-col gap-2"},Co={class:"-mb-2 flex w-full items-center justify-between"},$o={class:"text-base text-gray-600"},Vo={id:"fieldname",class:"w-full"},So={id:"operator"},Lo={id:"value",class:"w-full"},Ro={key:1,class:"flex items-center justify-between gap-2"},Ao={class:"flex items-center gap-2 flex-1"},Do={class:"w-13 pl-2 text-end text-base text-gray-600"},jo={id:"fieldname",class:"!min-w-[140px]"},qo={id:"operator"},Fo={id:"value",class:"!min-w-[140px] flex-1"},No={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},Mo={class:"flex items-center justify-between gap-2"},Qe={__name:"Filter",props:{default_filters:{type:Object,required:!1,default:{}}},setup(t){const{isMobileView:s}=lt(),l=["Check"],n=["Link","Dynamic Link"],m=["Float","Int","Currency","Percent"],i=["Select"],d=["Data","Long Text","Small Text","Text Editor","Text"],u=["Date","Datetime"],g=["Rating"],R=Q("listViewData"),c=Q("listViewActions"),{list:k,filterableFields:L}=R,h=z(()=>{var A,V,O;if(!k)return new Set;let r=((A=k==null?void 0:k.params)==null?void 0:A.filters)||((O=(V=k.data)==null?void 0:V.params)==null?void 0:O.filters);return!r||!L.data?new Set:_(L.data,r)});function _(r,A){let V=[];for(let[O,H]of Object.entries(A)){let S=r.find(G=>G.fieldname===O);(typeof H!="object"||!H)&&(H=["=",H],(S==null?void 0:S.fieldtype)==="Check"&&(H=["equals",H[1]?"Yes":"No"])),typeof H[1]=="number"&&(H[1]=H[1].toString()),S&&V.push({field:S,fieldname:O,operator:je[H[0]],value:H[1]})}return new Set(V)}function M(r,A){let V=[];return d.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),A==="_assign"&&(V=[{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"Is",value:"is"}]),m.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"},{label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="}),i.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),n.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),l.includes(r)&&V.push({label:"Equals",value:"equals"}),["Duration"].includes(r)&&V.push({label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),u.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="},{label:"Between",value:"between"},{label:"Timespan",value:"timespan"}),g.includes(r)&&V.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="}),V}function v(r){const{field:A,operator:V}=r,{fieldtype:O,options:H}=A;if(V=="is")return X(ie,{type:"select",options:[{label:"Set",value:"set"},{label:"Not Set",value:"not set"}]});if(V=="timespan")return X(ie,{type:"select",options:qe});if(["like","not like","in","not in"].includes(V))return X(ie,{type:"text"});if(i.includes(O)||l.includes(O)){const S=O=="Check"?["Yes","No"]:C(H);return X(ie,{type:"select",options:S.map(G=>({label:G,value:G}))})}else return n.includes(O)?O=="Dynamic Link"?X(ie,{type:"text"}):X(rt,{class:"form-control",doctype:H,value:r.value}):m.includes(O)?X(ie,{type:"number"}):u.includes(O)&&V=="between"?X(ol,{value:r.value,iconLeft:""}):u.includes(O)?X(O=="Date"?at:it,{value:r.value,iconLeft:""}):g.includes(O)?X(ut,{rating:r.value||0,static:!1,class:"truncate","onUpdate:modelValue":S=>ee(S,r)}):X(ie,{type:"text"})}function q(r){return i.includes(r.fieldtype)?C(r.options)[0]:l.includes(r.fieldtype)?"Yes":u.includes(r.fieldtype)?null:g.includes(r.fieldtype)?0:""}function j(r,A=null){return A==="_assign"?"like":i.includes(r)||l.includes(r)||m.includes(r)?"equals":u.includes(r)?"between":n.includes(r)||g.includes(r)?"equals":"like"}function C(r){return r.split(`
`)}function w(r){r&&(h.value.add({field:{label:r.label,fieldname:r.value,fieldtype:r.fieldtype,options:r.options},fieldname:r.value,operator:j(r.fieldtype,r.fieldname),value:q(r)}),Y())}function D(r,A){h.value.delete(Array.from(h.value)[A]),h.value.add({fieldname:r.value,operator:j(r.fieldtype),value:q(r),field:{label:r.label,fieldname:r.value,fieldtype:r.fieldtype,options:r.options}}),Y()}function F(r){h.value.delete(Array.from(h.value)[r]),Y()}function W(r){h.value.clear(),Y(),r&&r()}function ee(r,A){r=r.target?r.target.value:r,A.operator==="between"?A.value=[r.split(",")[0],r.split(",")[1]]:A.value=r,Y()}function K(r,A){let V=r.target._value,O=r.target.value;A.operator=r.target.value,P(V,O)||(A.value=q(A.field)),(O==="is"||O==="is not")&&(A.value="set"),Y()}function P(r,A){let V=["equals","not equals","in","not in",">","<",">=","<="];return!!(V.includes(r)&&V.includes(A))}function Y(){const r=[];h.value.forEach(A=>{r.push({fieldname:A.fieldname,operator:A.operator,value:A.value,toBoolean:A.field.fieldtype==="Check"})}),c.applyFilters(ye(r))}function ye(r){return r.map(ge).reduce((A,V)=>(["equals","="].includes(V.operator)?V.toBoolean?A[V.fieldname]=V.value==="Yes"?!0:V.value==="No"?!1:V.value:A[V.fieldname]=V.value:A[V.fieldname]=[Ce[V.operator.toLowerCase()],V.value],A),{})}function ge(r){return r.operator.includes("like")&&!r.value.includes("%")&&(r.value=`%${r.value}%`),r}const Ce={is:"is","is not":"is not",in:"in","not in":"not in",equals:"=","not equals":"!=",yes:!0,no:!1,like:"LIKE","not like":"NOT LIKE",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},je={is:"is","=":"equals","!=":"not equals",equals:"equals","is not":"is not",true:"yes",false:"no",LIKE:"like","NOT LIKE":"not like",in:"in","not in":"not in",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},qe=[{label:"Last Week",value:"last week"},{label:"Last Month",value:"last month"},{label:"Last Quarter",value:"last quarter"},{label:"Last 6 Months",value:"last 6 months"},{label:"Last Year",value:"last year"},{label:"Yesterday",value:"yesterday"},{label:"Today",value:"today"},{label:"Tomorrow",value:"tomorrow"},{label:"This Week",value:"this week"},{label:"This Month",value:"this month"},{label:"This Quarter",value:"this quarter"},{label:"This Year",value:"this year"},{label:"Next Week",value:"next week"},{label:"Next Month",value:"next month"},{label:"Next Quarter",value:"next quarter"},{label:"Next 6 Months",value:"next 6 months"},{label:"Next Year",value:"next year"}];return(r,A)=>(o(),x(e(St),{placement:"bottom-end"},{target:b(({togglePopover:V,close:O})=>{var H,S,G;return[f("div",go,[p(e(ce),{label:"Filter",class:re((H=h.value)!=null&&H.size?"rounded-r-none":""),onClick:V},xe({prefix:b(()=>[p(yo,{class:"h-4"})]),_:2},[(S=h.value)!=null&&S.size?{name:"suffix",fn:b(()=>[f("span",_o,J(h.value.size),1)]),key:"0"}:void 0]),1032,["class","onClick"]),(G=h.value)!=null&&G.size?(o(),x(e(et),{key:0,text:"Clear all Filter"},{default:b(()=>[f("div",null,[p(e(ce),{class:"rounded-l-none border-l",icon:"x",onClick:ve(B=>W(O),["stop"])},null,8,["onClick"])])]),_:2},1024)):I("",!0)])]}),body:b(({close:V})=>{var O,H;return[f("div",bo,[f("div",ko,[(O=h.value)!=null&&O.size?(o(!0),y(le,{key:0},se(h.value,(S,G)=>(o(),y("div",{key:G,id:"filter-list",class:"mb-4 sm:mb-3"},[e(s)?(o(),y("div",xo,[f("div",Co,[f("div",$o,J(G==0?"Where":"And"),1),p(e(ce),{class:"flex",variant:"ghost",icon:"x",onClick:B=>F(G)},null,8,["onClick"])]),f("div",Vo,[p(e(Ne),{modelValue:S.field.fieldname,"onUpdate:modelValue":[B=>S.field.fieldname=B,B=>D(B,G)],options:e(L).data,placeholder:"First Name"},null,8,["modelValue","onUpdate:modelValue","options"])]),f("div",So,[p(e(ie),{type:"select",modelValue:S.operator,"onUpdate:modelValue":B=>S.operator=B,onChange:B=>K(B,S),options:M(S.field.fieldtype,S.field.fieldname),placeholder:"Equals"},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),f("div",Lo,[(o(),x(de(v(S)),{modelValue:S.value,"onUpdate:modelValue":B=>S.value=B,onChange:B=>ee(B,S),placeholder:"John Doe"},null,40,["modelValue","onUpdate:modelValue","onChange"]))])])):(o(),y("div",Ro,[f("div",Ao,[f("div",Do,J(G==0?"Where":"And"),1),f("div",jo,[p(e(Ne),{modelValue:S.field.fieldname,"onUpdate:modelValue":[B=>S.field.fieldname=B,B=>D(B,G)],options:e(L).data,placeholder:"First Name"},null,8,["modelValue","onUpdate:modelValue","options"])]),f("div",qo,[p(e(ie),{type:"select",modelValue:S.operator,"onUpdate:modelValue":B=>S.operator=B,onChange:B=>K(B,S),options:M(S.field.fieldtype,S.field.fieldname),placeholder:"Equals"},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),f("div",Fo,[(o(),x(de(v(S)),{modelValue:S.value,"onUpdate:modelValue":B=>S.value=B,onChange:B=>ee(B,S),placeholder:"John Doe"},null,40,["modelValue","onUpdate:modelValue","onChange"]))])]),p(e(ce),{class:"flex",variant:"ghost",icon:"x",onClick:B=>F(G)},null,8,["onClick"])]))]))),128)):(o(),y("div",No,J("Empty - Choose a field to filter by"))),f("div",Mo,[p(e(Ne),{options:e(L).data,"onUpdate:modelValue":A[0]||(A[0]=S=>w(S)),placeholder:"First name"},{target:b(({togglePopover:S})=>[p(e(ce),{class:"!text-gray-600",variant:"ghost",onClick:G=>S(),label:"Add Filter"},{prefix:b(()=>[p(e(ot),{name:"plus",class:"h-4"})]),_:1},8,["onClick"])]),_:1},8,["options"]),(H=h.value)!=null&&H.size?(o(),x(e(ce),{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear all Filter",onClick:S=>W(V)},null,8,["onClick"])):I("",!0)])])])]}),_:1}))}};function Io(t){return Lt()?(Rt(t),!0):!1}const zo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Bo(t){return t||At()}function Oo(t,s=!0,l){Bo(l)?st(t,l):s?t():Ee(t)}const To=zo?window.document:void 0;function Eo(t){var s;const l=ze(t);return(s=l==null?void 0:l.$el)!=null?s:l}function Uo(t,s,l={}){let n;const{document:m=To,...i}=l,d={onUpdate:c=>{Po(s,c.oldIndex,c.newIndex,c)}},u=()=>{const c=typeof t=="string"?m==null?void 0:m.querySelector(t):Eo(t);!c||n!==void 0||(n=new Yt(c,{...d,...i}))},g=()=>{n==null||n.destroy(),n=void 0},R=(c,k)=>{if(k!==void 0)n==null||n.option(c,k);else return n==null?void 0:n.option(c)};return Oo(u),Io(g),{stop:g,start:u,option:R}}function Ho(t,s,l){const n=t.children[l];t.insertBefore(s,n)}function Wo(t){t.parentNode&&t.parentNode.removeChild(t)}function Po(t,s,l,n=null){n!=null&&(Wo(n.item),Ho(n.from,n.item,s));const m=Dt(t),i=m?[...ze(t)]:ze(t);if(l>=0&&l<i.length){const d=i.splice(s,1)[0];Ee(()=>{i.splice(l,0,d),m&&(t.value=i)})}}const Ko={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},Zo={key:1,class:"flex items-center justify-center"},Go={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},Jo={class:"min-w-60 p-2"},Qo={key:0,id:"sort-list",class:"mb-3 flex flex-col gap-2"},Yo={class:"handle flex h-7 w-7 items-center justify-center"},Xo={class:"flex"},es={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},ts={class:"flex items-center justify-between gap-2"},Ye={__name:"SortBy",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(t,{emit:s}){const l=Q("listViewData"),n=Q("listViewActions"),{list:m,sortableFields:i}=l,d=z({get:()=>{var j;if(!m)return new Set;let q=(j=m.params)==null?void 0:j.order_by;return!q||!i.data?new Set:(q=q.split(", ").map(C=>{const[w,D]=C.split(" ");return{fieldname:w,direction:D}}),new Set(q))},set:q=>{m.params.order_by=M(q)}}),u=z(()=>{if(!i.data)return[];if(!d.value.size)return i.data;const q=[...d.value].map(j=>j.fieldname);return v(),i.data.filter(j=>!q.includes(j.value))}),g=Uo("#sort-list",d,{handle:".handle",animation:200,onEnd:()=>_()});function R(){var C,w;if(!d.value.size)return"Sort";let q=Array.from(d.value);return((w=(C=i.data)==null?void 0:C.find(D=>D.value===q[0].fieldname))==null?void 0:w.label)||sort.fieldname}function c(q){d.value.add({fieldname:q.value,direction:"asc"}),v(),_()}function k(q,j){let C=Array.from(d.value)[j];d.value.delete(C),d.value.add({fieldname:q.value,direction:C.direction}),_()}function L(q){d.value.delete(Array.from(d.value)[q]),_()}function h(q){d.value.clear(),_(),q()}function _(){n.applySort(M(d.value))}function M(q){let j="";return q.forEach(C=>{j+=`${C.fieldname} ${C.direction}, `}),j=j.slice(0,-2),j}function v(){g.stop(),g.start()}return(q,j)=>{var D;const C=he("Button"),w=he("FeatherIcon");return(D=d.value)!=null&&D.size?(o(),x(e(sl),{key:1},{target:b(({open:F})=>{var W,ee,K;return[d.value.size>1?(o(),x(C,{key:0,label:"Sort"},xe({default:b(()=>[t.hideLabel?(o(),x(e(ke),{key:0,class:"h-4"})):I("",!0)]),_:2},[t.hideLabel?void 0:{name:"prefix",fn:b(()=>[p(e(ke),{class:"h-4"})]),key:"0"},(W=d.value)!=null&&W.size?{name:"suffix",fn:b(()=>[f("div",Ko,J(d.value.size),1)]),key:"1"}:void 0]),1024)):(o(),y("div",Zo,[d.value.size?(o(),x(C,{key:0,class:"rounded-r-none border-r",onClick:j[1]||(j[1]=ve(()=>{Array.from(d.value)[0].direction=Array.from(d.value)[0].direction=="asc"?"desc":"asc",_()},["stop"]))},{default:b(()=>[Array.from(d.value)[0].direction=="asc"?(o(),x(e(Ze),{key:0,class:"h-4"})):(o(),x(e(Je),{key:1,class:"h-4"}))]),_:1})):I("",!0),p(C,{label:R(),class:re(d.value.size?"rounded-l-none":"")},xe({_:2},[!t.hideLabel&&!((ee=d.value)!=null&&ee.size)?{name:"prefix",fn:b(()=>[p(e(ke),{class:"h-4"})]),key:"0"}:void 0,(K=d.value)!=null&&K.size?{name:"suffix",fn:b(()=>[p(w,{name:F?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),key:"1"}:void 0]),1032,["label","class"])]))]}),body:b(({close:F})=>{var W,ee;return[f("div",Go,[f("div",Jo,[(W=d.value)!=null&&W.size?(o(),y("div",Qo,[(o(!0),y(le,null,se(d.value,(K,P)=>(o(),y("div",{key:K.fieldname,class:"flex items-center gap-1"},[f("div",Yo,[p(e(yt),{class:"h-4 w-4 cursor-grab text-gray-600"})]),f("div",Xo,[p(C,{size:"md",class:"rounded-r-none border-r",onClick:()=>{K.direction=K.direction=="asc"?"desc":"asc",_()}},{default:b(()=>[K.direction=="asc"?(o(),x(e(Ze),{key:0,class:"h-4"})):(o(),x(e(Je),{key:1,class:"h-4"}))]),_:2},1032,["onClick"]),p(Re,{class:"!w-32",value:K.fieldname,options:e(i).data,onChange:Y=>k(Y,P),placeholder:"First Name"},{target:b(({togglePopover:Y,selectedValue:ye,displayValue:ge})=>[p(C,{class:"flex w-full items-center justify-between rounded-l-none !text-gray-600 text-xs",size:"md",onClick:Ce=>Y()},{suffix:b(()=>[p(w,{name:"chevron-down",class:"h-4 text-gray-600"})]),default:b(()=>[tt(J(ge(ye))+" ",1)]),_:2},1032,["onClick"])]),_:1},8,["value","options","onChange"])]),p(C,{variant:"ghost",icon:"x",onClick:Y=>L(P)},null,8,["onClick"])]))),128))])):(o(),y("div",es,J("Empty - Choose a field to sort by"))),f("div",ts,[p(Re,{options:u.value,value:"",placeholder:"First Name",onChange:j[2]||(j[2]=K=>c(K))},{target:b(({togglePopover:K})=>[p(C,{class:"!text-gray-600",variant:"ghost",onClick:P=>K(),label:"Add Sort"},{prefix:b(()=>[p(w,{name:"plus",class:"h-4"})]),_:1},8,["onClick"])]),_:1},8,["options"]),(ee=d.value)!=null&&ee.size?(o(),x(C,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear Sort",onClick:K=>h(F)},null,8,["onClick"])):I("",!0)])])])]}),_:1})):(o(),x(Re,{key:0,options:u.value,value:"",placeholder:"First Name",onChange:j[0]||(j[0]=F=>c(F))},{target:b(({togglePopover:F})=>{var W;return[p(C,{label:"Sort",onClick:ee=>F()},xe({default:b(()=>[t.hideLabel?(o(),x(e(ke),{key:0,class:"h-4"})):I("",!0)]),_:2},[!t.hideLabel&&!((W=d.value)!=null&&W.size)?{name:"prefix",fn:b(()=>[p(e(ke),{class:"h-4"})]),key:"0"}:void 0]),1032,["onClick"])]}),_:1},8,["options"]))}}},ls={__name:"QuickFilterField",props:{filter:{type:Object,required:!0},value:{type:[String,Boolean],required:!0}},emits:["applyQuickFilter"],setup(t,{emit:s}){const l=t,n=s,m=qt((d,u)=>{n("applyQuickFilter",d,u)},500);function i(d,u){n("applyQuickFilter",d,u)}return(d,u)=>t.filter.type=="Check"?(o(),x(e(ie),{key:0,label:t.filter.label,type:"checkbox",checked:l.value,onChange:u[0]||(u[0]=ve(g=>i(t.filter,g.target.checked),["stop"])),class:"w-44"},null,8,["label","checked"])):t.filter.type==="Select"?(o(),x(e(ie),{key:1,class:"form-control cursor-pointer [&_select]:cursor-pointer w-44",type:"select","model-value":l.value,options:t.filter.options,placeholder:t.filter.label,onChange:u[1]||(u[1]=ve(g=>i(t.filter,g.target.value),["stop"]))},null,8,["model-value","options","placeholder"])):t.filter.type==="Link"?(o(),x(e(rt),{key:2,value:l.value,doctype:t.filter.options,placeholder:t.filter.label,onChange:u[2]||(u[2]=g=>i(t.filter,g)),class:"w-44"},null,8,["value","doctype","placeholder"])):["Date","Datetime"].includes(t.filter.type)?(o(),x(de(t.filter.type==="Date"?e(at):e(it)),{key:3,class:"border-none w-44",value:l.value,onChange:u[3]||(u[3]=g=>i(t.filter,g)),placeholder:t.filter.label},null,40,["value","placeholder"])):(o(),x(e(jt),{key:4,value:l.value,type:"text",placeholder:t.filter.label,onInput:u[4]||(u[4]=ve(g=>e(m)(t.filter,g.target.value),["stop"]))},null,8,["value","placeholder"]))}},os={key:0},ss={__name:"QuickFilters",setup(t){const s=Q("listViewData"),l=Q("listViewActions"),{list:n,quickFilters:m}=s,i=["Check","Select","Link","Date","Datetime"];function d(R,c){var h;let k={...(h=n.params)==null?void 0:h.filters},L=R.name;c?i.includes(R.type)?k[L]=c:k[L]=["LIKE",`%${c}%`]:delete k[L],l.applyFilters(k)}function u(R){return R.type==="Check"?!1:""}function g(R,c){if(!c||!(R&&R.name))return u(R);const k=c[R.name];if(k===void 0)return u(R);if(i.includes(R.type))return k;if(!Array.isArray(k)||k.length!==2||k[0].toLowerCase()!=="like")return u(R);let L=k[1];return L.startsWith("%")&&(L=L.substring(1)),L.endsWith("%")&&(L=L.substring(0,L.length-1)),L}return(R,c)=>e(m).loading?I("",!0):(o(),y("div",os,[p(e(rl),{class:"flex flex-1 items-center -ml-1 flex-wrap gap-2",orientation:"horizontal"},{default:b(()=>[(o(!0),y(le,null,se(e(m).data,k=>{var L;return o(),y("div",{key:k.name,class:"min-w-36"},[p(ls,{filter:k,value:g(k,(L=e(n).params)==null?void 0:L.filters),onApplyQuickFilter:c[0]||(c[0]=(h,_)=>d(h,_))},null,8,["filter","value"])])}),128))]),_:1})]))}},Xe={__name:"Reload",props:{loading:{type:Boolean,default:!1}},setup(t){return(s,l)=>{const n=ao,m=he("Button");return o(),x(m,{label:"Refresh",loading:t.loading},{icon:b(()=>[p(n,{class:"h-4 w-4"})]),_:1},8,["loading"])}}},ns={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(t){const s=t,l=te(null),n=te(null);let m=te(null);function i(){m.value?m.value.update():m.value=It(l.value.el,n.value.el,{placement:s.placement})}function d(){Ee(()=>i())}return Ft(()=>{var u;(u=m.value)==null||u.destroy()}),(u,g)=>(o(),x(e(il),null,{default:b(({open:R})=>[p(e(nl),{ref_key:"reference",ref:l,as:"div",onClick:d,onFocusin:d,onKeydown:d},{default:b(({open:c})=>[U(u.$slots,"target",{open:c})]),_:3},512),Nt(f("div",null,[p(e(al),{ref_key:"popover",ref:n,static:"",class:"z-[100]"},{default:b(({open:c,close:k})=>[U(u.$slots,"body",{open:c,close:k})]),_:3},512)],512),[[Mt,R]])]),_:3}))}},as={class:"my-2 p-1.5 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},is={key:0},rs={class:"flex cursor-grab items-center justify-between gap-6 rounded px-2 py-1.5 text-base text-ink-gray-8 hover:bg-surface-gray-2"},us={class:"flex items-center gap-2"},cs={class:"flex cursor-pointer items-center gap-1"},ds={class:"mt-1.5 flex flex-col gap-1 border-t border-outline-gray-modals pt-1.5"},fs={key:1},ps={class:"flex flex-col items-center justify-between gap-2 rounded px-2 py-1.5 text-base text-ink-gray-8"},ms={class:"flex flex-col items-center gap-3"},vs={class:"flex w-full gap-2 border-t pt-2"},hs={__name:"ColumnSettings",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(t,{emit:s}){const l=te(!1),n=te({columns:[],rows:[],isDefault:!1}),m=Q("listViewData"),{list:i}=m,d=Q("listViewActions"),u=te(!1),g=te({old:{},label:"",key:"",width:"10rem"}),R=z({get:()=>{var w;return(w=i.data)==null?void 0:w.is_default},set:w=>{i.data.is_default=w}}),c=z({get:()=>{var w;return(w=i.data)==null?void 0:w.columns},set:w=>{i.data.columns=w}}),k=z({get:()=>{var w;return(w=i.data)==null?void 0:w.rows},set:w=>{i.data.rows=w}}),L=z(()=>{var D;let w=(D=i.data)==null?void 0:D.fields;return w?c.value===""?w:w.filter(F=>!c.value.find(W=>W.key===F.value)):[]});function h(w){let D=["Float","Int","Percent","Currency"].includes(w.type)?"right":"left",F={label:w.label,type:w.type,key:w.value,width:"10rem",align:D};c.value.push(F),k.value.push(w.value),C(!0)}function _(w){c.value.length!==1&&(c.value=c.value.filter(D=>D.key!==w.key),w.key!=="name"&&(k.value=k.value.filter(D=>D!==w.key)),C())}function M(w){u.value=!0,g.value=w,g.value.old={...w}}function v(w){u.value=!1;let D=c.value.findIndex(F=>F.key===w.key);c.value[D].label=w.label,c.value[D].width=w.width,c.value[D].old&&delete c.value[D].old,C()}function q(){u.value=!1,g.value.label=g.value.old.label,g.value.width=g.value.old.width,delete g.value.old}function j(w){C(!0,!0,!0),w()}function C(w=!1,D=!1,F=!1){R.value=D,l.value=!0;let W={columns:F?n.value.columns:c.value,rows:F?n.value.rows:k.value,isDefault:F?n.value.isDefault:D,reload:w,reset:F};d.updateColumns(W),l.value=!F}return zt(()=>i.data,w=>{w&&(n.value.columns=JSON.parse(JSON.stringify(w.columns)),n.value.rows=JSON.parse(JSON.stringify(w.rows)),n.value.isDefault=w.is_default)}),(w,D)=>{const F=he("Button"),W=he("FeatherIcon"),ee=he("FormControl");return o(),x(ns,null,{target:b(()=>[p(F,{label:"Columns"},xe({default:b(()=>[t.hideLabel?(o(),x(e(Ge),{key:0,class:"h-4"})):I("",!0)]),_:2},[t.hideLabel?void 0:{name:"prefix",fn:b(()=>[p(e(Ge),{class:"h-4"})]),key:"0"}]),1024)]),body:b(({close:K})=>[f("div",as,[u.value?(o(),y("div",fs,[f("div",ps,[f("div",ms,[p(ee,{type:"text",size:"md",label:"Label",modelValue:g.value.label,"onUpdate:modelValue":D[1]||(D[1]=P=>g.value.label=P),class:"sm:w-full w-52",placeholder:"First Name"},null,8,["modelValue"]),p(ee,{type:"text",size:"md",label:"Width",class:"sm:w-full w-52",modelValue:g.value.width,"onUpdate:modelValue":D[2]||(D[2]=P=>g.value.width=P),placeholder:"10rem",description:"Width can be in number, pixel or rem (eg. 3, 30px, 10rem)",debounce:500},null,8,["modelValue"])]),f("div",vs,[p(F,{variant:"subtle",label:"Cancel",class:"w-full flex-1",onClick:q}),p(F,{variant:"solid",label:"Update",class:"w-full flex-1",onClick:D[3]||(D[3]=P=>v(g.value))})])])])):(o(),y("div",is,[p(e(Xt),{list:c.value,onEnd:C,delay:e(Bt)()?200:0,"item-key":"key",class:"list-group"},{item:b(({element:P})=>[f("div",rs,[f("div",us,[p(e(yt),{class:"h-3.5"}),f("div",null,J(P.label),1)]),f("div",cs,[p(F,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:Y=>M(P)},{default:b(()=>[p(e(lo),{class:"h-3.5"})]),_:1},8,["onClick"]),p(F,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:Y=>_(P)},{default:b(()=>[p(W,{name:"x",class:"h-3.5"})]),_:1},8,["onClick"])])])]),_:1},8,["list","delay"]),f("div",ds,[p(Re,{value:"",options:L.value,onChange:D[0]||(D[0]=P=>h(P))},{target:b(({togglePopover:P})=>[p(F,{class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:Y=>P(),label:"Add Column"},{prefix:b(()=>[p(W,{name:"plus",class:"h-4"})]),_:1},8,["onClick"])]),_:1},8,["options"]),R.value?I("",!0):(o(),x(F,{key:0,class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:P=>j(K),label:"Reset to Default"},{prefix:b(()=>[p(e(co),{class:"h-4"})]),_:1},8,["onClick"]))])]))])]),_:1})}}},ws={key:0,class:"mx-3 h-full overflow-y-auto sm:mx-5"},ys={class:"my-2 flex items-center gap-2 text-base font-medium text-ink-gray-8 justify-between w-full mr-1"},gs={class:"flex items-center gap-2 w-full"},_s={key:1,class:"flex items-end gap-1 w-full"},bs={class:"text-xs text-ink-gray-5"},ks={__name:"ListRows",props:{rows:{type:Array,required:!0},groupByActions:{type:Array,default:()=>[]}},setup(t){const s=t,l=te(s.rows),n=i=>{let d=s.groupByActions.map(u=>({...u,onClick:()=>u.onClick(i)}));return i.group.label=="General"&&(d=d.filter(u=>u.label==="Add New Article")),d};Ae(()=>s.rows,i=>l.value=i);let m=z(()=>s.rows.every(i=>i.group&&i.rows&&Array.isArray(i.rows)));return(i,d)=>e(m)?(o(),y("div",ws,[(o(!0),y(le,null,se(l.value,u=>(o(),y("div",{key:u.group},[p(e(vt),{group:u},{default:b(()=>[f("div",ys,[f("div",gs,[u.icon?(o(),x(de(u.icon),{key:0})):I("",!0),u.group.label!=""?(o(),y("div",_s,[f("span",null,J(u.group.label),1),f("span",bs,J(u.rows.length+" Article"+(u.rows.length>1?"s":"")),1)])):I("",!0)]),t.groupByActions.length>0?(o(),x(e(nt),{key:0,options:n(u)},{default:b(()=>[p(e(ce),{variant:"ghost"},{icon:b(()=>[p(e(el),{class:"h-4 w-4"})]),_:1})]),_:1},8,["options"])):I("",!0)])]),_:2},1032,["group"]),p(e(ht),{group:u,id:"list-rows",class:"!mt-0"},{default:b(()=>[(o(!0),y(le,null,se(u.rows,g=>(o(),x(e(De),{key:g.name,row:g,class:"truncate text-base row"},{default:b(({idx:R,column:c,item:k})=>[U(i.$slots,"default",pe({ref_for:!0},{idx:R,column:c,item:k,row:g}))]),_:2},1032,["row"]))),128))]),_:2},1032,["group"])]))),128))])):(o(),x(e(mt),{key:1,class:"mx-3 sm:mx-5",id:"list-rows"},{default:b(()=>[(o(!0),y(le,null,se(l.value,u=>(o(),x(e(De),{key:u.name,row:u,class:"truncate text-base"},{default:b(({idx:g,column:R,item:c})=>[U(i.$slots,"default",pe({ref_for:!0},{idx:g,column:R,item:c,row:u}))]),_:2},1032,["row"]))),128))]),_:3}))}},xs={key:0,class:"flex items-center justify-between gap-2 px-5 pb-4 pt-3 pl-6"},Cs={key:1,class:"flex items-start gap-2 justify-end h-full"},$s={key:2,class:"flex justify-between items-center w-full"},Vs={class:"flex items-center gap-2"},Ss={key:2,class:"p-20 border-t sm:px-5 px-3 py-2"},Ls={key:3,class:"w-full h-full flex items-center justify-center -mt-48"},Us=Ot({__name:"ListViewBuilder",props:{options:{}},emits:["emptyStateAction","rowClick"],setup(t,{expose:s,emit:l}){const n=t,m=l,i=Tt(),d=Et(),{isManager:u}=Ut(),{$dialog:g}=tl(),{getStatus:R}=cl();te(new Set);const c=Le({doctype:"",hideViewControls:!1,selectable:!1,view:{view_type:"list",group_by_field:"owner",name:i.query.view},groupByActions:[],default_page_length:20,isCustomerPortal:!1,hideColumnSetting:!0,rowRoute:{name:"",prop:""},selectBannerActions:[{label:"Delete",icon:"trash-2",onClick:a=>{g({title:"Delete",message:`Are you sure you want to delete ${a.size} item(s)?`,actions:[{label:"Confirm",variant:"solid",onClick({close:$}){k($,a)}}]})},condition:()=>!h.value.isCustomerPortal&&u}]});function k(a,$){Ht("bulk_delete"+n.options.doctype),Wt("frappe.desk.reportview.delete_items",{items:JSON.stringify(Array.from($)),doctype:n.options.doctype}).then(()=>{Pt.success("Item(s) deleted successfully"),a(),L()})}function L(){w.reload(),w.unselectAll()}const h=z(()=>({...c,...n.options})),{isMobileView:_}=lt(),M={icon:"",title:"No Data Found"},v=Le({doctype:h.value.doctype,filters:{},default_filters:h.value.defaultFilters,order_by:"modified desc",page_length:h.value.default_page_length,page_length_count:h.value.default_page_length,view:h.value.view,columns:[],rows:[],show_customer_portal_fields:h.value.isCustomerPortal,is_default:!1}),q=z(()=>{var a;return((a=h.value)==null?void 0:a.emptyState)||M}),j=te(!1),C=Ve({url:"helpdesk.api.doc.get_list_data",params:v,transform:a=>(a.columns.forEach($=>{K($),P($)}),a),onSuccess:a=>{C.params=v,W.value=a.columns}}),w={list:C,reload:H,unselectAll:()=>{}};function D(a,$=()=>{}){w.unselectAll=$;const N=h.value.selectBannerActions.map(E=>({...E,onClick:()=>{var Z;return(Z=E.onClick)==null?void 0:Z.call(E,a)}})),T=c.selectBannerActions.filter(E=>!N.some(Z=>Z.label===E.label)).map(E=>({...E,onClick:()=>{var Z;return(Z=E.onClick)==null?void 0:Z.call(E,a)}}));return[...N,...T]}const F=z(()=>{var a,$,N,T;return(a=C.data)!=null&&a.data?C.data.view_type==="group_by"?(N=($=C.data)==null?void 0:$.group_by_field)!=null&&N.name?ee(C.data.data,C.data.group_by_field):[]:(T=C.data)==null?void 0:T.data:[]}),W=te([]);function ee(a,$){var T;let N=[];return(T=$.options)==null||T.forEach(E=>{let Z=[];E.value?Z=a.filter(ne=>ne[$.name]==E.value):Z=a.filter(ne=>!ne[$.name]);let ue={group:E||" ",collapsed:!1,rows:Z,icon:X(ot,{name:"folder",class:"h-4 w-4 flex-shrink-0 text-ink-gray-6"})};N.push(ue)}),N||a}function K(a){if(!a.hasOwnProperty("key"))return a;const $=/([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)/,N=a.key.match($);a.key=N?N[2]:a.key}function P(a){var N,T;if(!((N=h.value)!=null&&N.columnConfig))return a;const $=h.value.columnConfig;return $.hasOwnProperty(a.key)&&(a.prefix=(T=$[a.key])==null?void 0:T.prefix),a}const Y=Ve({url:"helpdesk.api.doc.get_filterable_fields",cache:["DocField",h.value.doctype],auto:!h.value.hideViewControls,params:{doctype:h.value.doctype,append_assign:!0,show_customer_portal_fields:v.show_customer_portal_fields},transform:a=>(a=a.map($=>({label:$.label,value:$.fieldname,...$})),a)}),ye=Ve({url:"helpdesk.api.doc.sort_options",auto:!h.value.hideViewControls,params:{doctype:h.value.doctype,show_customer_portal_fields:v.show_customer_portal_fields}}),ge=Ve({url:"helpdesk.api.doc.get_quick_filters",auto:!h.value.hideViewControls,params:{doctype:h.value.doctype,show_customer_portal_fields:v.show_customer_portal_fields},transform:a=>{if(!a.length)return a=[{name:"name",label:"Name",fieldtype:"Data"}],a}});function Ce(a,$,N,T){var Z,ue;const E=h.value.columnConfig;return E&&((Z=E[a.key])!=null&&Z.custom)?(ue=E[a.key])==null?void 0:ue.custom({column:a,row:$,item:N,idx:T}):T===0?X("span",{class:"truncate text-base text-ink-gray-6",textContent:N}):a.type==="Datetime"?X("span",{class:"text-p-xs",textContent:Jt(N)}):a.type==="MultipleAvatar"?X(ul,{avatars:N,hideName:!0,class:"flex items-center truncate flex-1 flex-row-reverse justify-end"}):a.type==="Rating"?X(ut,{rating:N||0,class:"truncate"}):X("span",{class:"truncate flex-1",textContent:N})}function je(a,$,N,T){var Z,ue;if(["Data","Datetime","Rating","Int","Float"].includes($.type)){if(((Z=h.value.rowRoute)==null?void 0:Z.name)!=="")return;m("rowClick",N.name);return}if(a.stopPropagation(),a.preventDefault(),$.label=="Status"&&h.value.doctype==="HD Ticket"&&(T=(ue=R(T))==null?void 0:ue.label_agent),$.type==="MultipleAvatar"){if(T.length>1){let ne=a.target;ne=ne.closest(".user-avatar"),ne&&(T=ne.getAttribute("data-name"))}else T=T[0].name;A({...v.filters,[$.key]:["LIKE",T]});return}A({...v.filters,[$.key]:T})}const qe=z(()=>!h.value.hideViewControls&&Y.data&&ye.data&&ge.data),r=Le({list:C,filterableFields:Y,quickFilters:ge,sortableFields:ye});Ie("listViewData",r),Ie("listViewActions",{applyFilters:A,applySort:V,updateColumns:O,reload:H});function A(a){j.value=!0,v.filters={...a},C.submit({...v}),v.is_default&&(G(),j.value=!1)}function V(a){j.value=!0,v.order_by=a,C.submit({...v,order_by:a})}function O(a){j.value=!0;const{columns:$,isDefault:N,rows:T}=a;$==null||$.forEach(E=>{K(E),P(E)}),W.value=v.columns=N?"":$,v.rows=N?"":T,C.reload({...v})}function H(a=!1){a&&(v.filters=h.value.defaultFilters||{},v.order_by="modified desc",v.page_length=h.value.default_page_length,v.page_length_count=h.value.default_page_length,v.columns=[],v.rows=[],v.is_default=!0),C.reload({...v})}function S(a,$=!1){if(v.page_length_count=a,$)v.page_length+=a;else{if(a===v.page_length&&a===v.page_length_count)return;v.page_length=a,v.page_length_count=a}C.reload()}function G(){const a={filters:JSON.stringify(v.filters),columns:JSON.stringify(v.columns),rows:JSON.stringify(v.rows),order_by:v.order_by,name:i.query.view||"default",dt:h.value.doctype,route_name:i.name,is_customer_portal:h.value.isCustomerPortal};gt(a,()=>{j.value=!1})}const{findView:B,updateView:gt,defaultView:Fe}=ll(h.value.doctype),_t=z(()=>{let a=B(i.query.view).value;return!!(!a||!a.public||a.public&&u)});function He(){$e(),j.value=!1}function $e(){let a=We();if(!a){d.push({name:i.name}),H(!0);return}v.filters=a.filters,v.order_by=a.order_by||"modified desc",v.columns=a.columns,v.rows=a.rows,C.submit({...v})}function We(){let a;return i.query.view?(a=B(i.query.view).value,v.is_default=!1):Fe.value&&(a=Fe.value,v.is_default=!0),a}Ae(()=>i.query.view,a=>{v.view.name=a,$e(),a||(Se.value.label="List",Se.value.icon="lucide:align-justify")});const Pe=Kt(`list_position+${n.options.doctype}`,0);function bt(a){Pe.value=a.target.scrollTop}function kt(){setTimeout(()=>{const a=document.querySelector(".list-rows");a&&(a.scrollTop=Pe.value)},200)}return st(async()=>{var a,$;if(kt(),((a=Me.data)==null?void 0:a.length)>0&&(($=Me.filters)==null?void 0:$.dt)===h.value.doctype||await Me.list.promise,$e(),i.query.view||Fe.value){if(i.query.view){const N=We();if(!N)return;Se.value.label=N.label||"List",Se.value.icon=Zt(N.icon)}return}}),s(w),(a,$)=>{var T,E,Z,ue,ne,Ke;const N=he("Button");return o(),y(le,null,[qe.value?(o(),y("div",xs,[e(_)?I("",!0):(o(),x(e(ss),{key:0,class:"flex-1"})),e(_)?(o(),y("div",$s,[p(e(Qe),{default_filters:v.filters},null,8,["default_filters"]),f("div",Vs,[p(e(Xe),{onClick:He,loading:e(C).loading},null,8,["loading"]),p(e(Ye),{"hide-label":e(_)},null,8,["hide-label"])])])):(o(),y("div",Cs,[j.value&&_t.value?(o(),x(N,{key:0,label:"Save Changes",onClick:G})):I("",!0),p(e(Xe),{onClick:He,loading:e(C).loading},null,8,["loading"]),p(e(Qe),{default_filters:v.filters},null,8,["default_filters"]),p(e(Ye),{"hide-label":e(_)},null,8,["hide-label"]),h.value.hideColumnSetting?I("",!0):(o(),x(e(hs),{key:1,"hide-label":e(_)},null,8,["hide-label"]))]))])):I("",!0),((T=e(C).data)==null?void 0:T.data.length)>0?(o(),x(e(Nl),{key:1,class:"flex-1",columns:W.value,rows:F.value,"row-key":"name",options:{selectable:h.value.selectable,showTooltip:!1,resizeColumn:!1,getRowRoute:oe=>{var ae,_e,be;return{name:(ae=h.value.rowRoute)==null?void 0:ae.name,params:{[(_e=h.value.rowRoute)==null?void 0:_e.prop]:oe.name},query:{view:(be=e(i).query)==null?void 0:be.view}}},emptyState:q.value}},{default:b(()=>[p(e(ft),{class:"sm:mx-5 mx-3"},{default:b(()=>[(o(!0),y(le,null,se(W.value,oe=>(o(),x(e(dt),{key:oe.key,item:oe,onColumnWidthUpdated:$[0]||($[0]=ae=>console.log(ae))},null,8,["item"]))),128))]),_:1}),p(ks,{rows:F.value,"group-by-actions":h.value.groupByActions,onScrollend:bt,class:"list-rows"},{default:b(({idx:oe,column:ae,item:_e,row:be})=>[p(e(pt),{item:_e,column:ae,row:be},{default:b(()=>[(o(),x(de(Ce(ae,be,_e,oe)),{key:ae.key,onClick:xt=>je(xt,ae,be,_e)},null,8,["onClick"]))]),_:2},1032,["item","column","row"])]),_:1},8,["rows","group-by-actions"]),h.value.showSelectBanner?(o(),x(e(wt),{key:0},{actions:b(({selections:oe,unselectAll:ae})=>[p(e(nt),{options:D(oe,ae)},{default:b(()=>[p(N,{icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"])]),_:1})):I("",!0)]),_:1},8,["columns","rows","options"])):I("",!0),((E=e(C).data)==null?void 0:E.data.length)>0?(o(),y("div",Ss,[p(e(Ol),{options:{rowCount:(ue=(Z=e(C))==null?void 0:Z.data)==null?void 0:ue.row_count,totalCount:(Ke=(ne=e(C))==null?void 0:ne.data)==null?void 0:Ke.total_count},pageLengthCount:v.page_length_count,onLoadMore:$[1]||($[1]=oe=>S(v.page_length_count,!0)),modelValue:v.page_length_count,"onUpdate:modelValue":[$[2]||($[2]=oe=>v.page_length_count=oe),$[3]||($[3]=oe=>{S(oe)})]},null,8,["options","pageLengthCount","modelValue"])])):e(C).loading?(o(),y("div",Ls,[p(e(Gt),{scale:10})])):(o(),x(dl,{key:4,title:q.value.title,icon:q.value.icon,onEmptyStateAction:$[4]||($[4]=oe=>m("emptyStateAction"))},null,8,["title","icon"]))],64)}}});export{lo as E,Us as _};
//# sourceMappingURL=ListViewBuilder.vue_vue_type_script_setup_true_lang-1a82bb67.js.map
