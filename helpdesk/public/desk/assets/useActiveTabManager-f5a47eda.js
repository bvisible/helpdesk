import{d as L,as as ce,c as I,at as Me,N as fe,O as qe,e as r,f as y,w as v,g as b,h as t,au as z,C as B,av as Ve,aw as Be,am as le,ax as Se,ay as me,az as Ae,aA as N,aB as Fe,A as M,aC as Ee,ai as De,y as S,aD as ze,a4 as D,aE as Re,ab as U,z as Q,aF as Ne,K as T,a8 as V,l as m,k as x,G as X,F as R,x as j,t as Pe,v as k,j as O,m as ie,n as Ue,r as K,q as $,aG as je,I as Ke,aH as Oe,W as pe,S as He,a0 as F,aI as Ze,a3 as ne,M as ve,L as P,$ as ye,s as ge,u as be,U as Ge,aJ as Ye,Q as We,i as Y,_ as W,aK as Je,a9 as re,aL as Qe}from"./index-b4c863a6.js";import{i as Xe,R as et,D as ue}from"./Dropdown-f79f7542.js";import{_ as tt,a as at}from"./MultipleAvatar.vue_vue_type_script_setup_true_lang-20371312.js";import{C as lt,D as st,s as ot,a as it,b as nt,_ as he}from"./CallLogModal.vue_vue_type_script_setup_true_lang-a58a218c.js";import{_ as _e}from"./Avatar.vue_vue_type_script_setup_true_lang-89128cfb.js";import{_ as Ce}from"./EmailIcon-c867fb48.js";import{P as xe}from"./PhoneIcon-ea7dd5f1.js";import{u as we}from"./telephony-64d62ea1.js";import{t as ee,f as te}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-c8d975a4.js";import"./dayjs-95f8111d.js";import"./knowledgeBase-2d00b929.js";import{_ as rt}from"./StarRating.vue_vue_type_script_setup_true_lang-4484b1d1.js";import{_ as J}from"./Autocomplete-3ef14fd0.js";import{a as ut}from"./Link-842a8a10.js";import{d as de}from"./utils-4e66359c.js";import{_ as dt,a as ct}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-a14f638d.js";var ft=L({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const l=e,s=Xe(),o=ce(),c=I(()=>l.tabStopId||o),d=I(()=>s.currentTabStopId.value===c.value),{getItems:i,CollectionItem:p}=Me();fe(()=>{l.focusable&&s.onFocusableItemAdd()}),qe(()=>{l.focusable&&s.onFocusableItemRemove()});function f(u){if(u.key==="Tab"&&u.shiftKey){s.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const a=Ve(u,s.orientation.value,s.dir.value);if(a!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||!l.allowShiftKey&&u.shiftKey)return;u.preventDefault();let n=[...i().map(g=>g.ref).filter(g=>g.dataset.disabled!=="")];if(a==="last")n.reverse();else if(a==="prev"||a==="next"){a==="prev"&&n.reverse();const g=n.indexOf(u.currentTarget);n=s.loop.value?Be(n,g+1):n.slice(g+1)}le(()=>Se(n))}}return(u,a)=>(r(),y(t(p),null,{default:v(()=>[b(t(z),{tabindex:d.value?0:-1,"data-orientation":t(s).orientation.value,"data-active":u.active?"":void 0,"data-disabled":u.focusable?void 0:"",as:u.as,"as-child":u.asChild,onMousedown:a[0]||(a[0]=n=>{u.focusable?t(s).onItemFocus(c.value):n.preventDefault()}),onFocus:a[1]||(a[1]=n=>t(s).onItemFocus(c.value)),onKeydown:f},{default:v(()=>[B(u.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),mt=ft;const[H,pt]=Ee("TabsRoot");var vt=L({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const s=e,o=l,{orientation:c,unmountOnHide:d,dir:i}=me(s),p=Ae(i);N();const f=Fe(s,"modelValue",o,{defaultValue:s.defaultValue,passive:s.modelValue===void 0}),u=M();return pt({modelValue:f,changeModelValue:a=>{f.value=a},orientation:c,dir:p,unmountOnHide:d,activationMode:s.activationMode,baseId:ce(void 0,"reka-tabs"),tabsList:u}),(a,n)=>(r(),y(t(z),{dir:t(p),"data-orientation":t(c),"as-child":a.asChild,as:a.as},{default:v(()=>[B(a.$slots,"default",{modelValue:t(f)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),yt=vt;function ke(e,l){return`${e}-trigger-${l}`}function Ie(e,l){return`${e}-content-${l}`}var gt=L({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const l=e,{forwardRef:s}=N(),o=H(),c=I(()=>ke(o.baseId,l.value)),d=I(()=>Ie(o.baseId,l.value)),i=I(()=>l.value===o.modelValue.value),p=M(i.value);return fe(()=>{requestAnimationFrame(()=>{p.value=!1})}),(f,u)=>(r(),y(t(ze),{present:f.forceMount||i.value,"force-mount":""},{default:v(({present:a})=>[b(t(z),{id:d.value,ref:t(s),"as-child":f.asChild,as:f.as,role:"tabpanel","data-state":i.value?"active":"inactive","data-orientation":t(o).orientation.value,"aria-labelledby":c.value,hidden:!a,tabindex:"0",style:De({animationDuration:p.value?"0s":void 0})},{default:v(()=>[!t(o).unmountOnHide.value||a?B(f.$slots,"default",{key:0}):S("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),bt=gt,ht=L({__name:"TabsIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const l=e,s=H();N();const o=M(),c=M({size:null,position:null});D(()=>[s.modelValue.value,s==null?void 0:s.dir.value],async()=>{await le(),d()},{immediate:!0}),Re([s.tabsList,o],d);function d(){var i;o.value=(i=s.tabsList.value)==null?void 0:i.querySelector('[role="tab"][data-state="active"]'),o.value&&(s.orientation.value==="horizontal"?c.value={size:o.value.offsetWidth,position:o.value.offsetLeft}:c.value={size:o.value.offsetHeight,position:o.value.offsetTop})}return(i,p)=>typeof c.value.size=="number"?(r(),y(t(z),U({key:0},l,{style:{"--reka-tabs-indicator-size":`${c.value.size}px`,"--reka-tabs-indicator-position":`${c.value.position}px`}}),{default:v(()=>[B(i.$slots,"default")]),_:3},16,["style"])):S("v-if",!0)}}),_t=ht,Ct=L({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const l=e,{loop:s}=me(l),{forwardRef:o,currentElement:c}=N(),d=H();return d.tabsList=c,(i,p)=>(r(),y(t(et),{"as-child":"",orientation:t(d).orientation.value,dir:t(d).dir.value,loop:t(s)},{default:v(()=>[b(t(z),{ref:t(o),role:"tablist","as-child":i.asChild,as:i.as,"aria-orientation":t(d).orientation.value},{default:v(()=>[B(i.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),xt=Ct,wt=L({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const l=e,{forwardRef:s}=N(),o=H(),c=I(()=>ke(o.baseId,l.value)),d=I(()=>Ie(o.baseId,l.value)),i=I(()=>l.value===o.modelValue.value);return(p,f)=>(r(),y(t(mt),{"as-child":"",focusable:!p.disabled,active:i.value},{default:v(()=>[b(t(z),{id:c.value,ref:t(s),role:"tab",type:p.as==="button"?"button":void 0,as:p.as,"as-child":p.asChild,"aria-selected":i.value?"true":"false","aria-controls":d.value,"data-state":i.value?"active":"inactive",disabled:p.disabled,"data-disabled":p.disabled?"":void 0,"data-orientation":t(o).orientation.value,onMousedown:f[0]||(f[0]=Q(u=>{!p.disabled&&u.ctrlKey===!1?t(o).changeModelValue(p.value):u.preventDefault()},["left"])),onKeydown:f[1]||(f[1]=Ne(u=>t(o).changeModelValue(p.value),["enter","space"])),onFocus:f[2]||(f[2]=()=>{const u=t(o).activationMode!=="manual";!i.value&&!p.disabled&&u&&t(o).changeModelValue(p.value)})},{default:v(()=>[B(p.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),kt=wt;const It=`left-0 bottom-0 h-[2px] w-[--reka-tabs-indicator-size] transition-[width,transform] 
                          translate-x-[--reka-tabs-indicator-position] translate-y-[1px]`,$t=`right-0 w-[1px] h-[--reka-tabs-indicator-size] transition-[height,transform]
                           translate-y-[--reka-tabs-indicator-position] translate-x-[1px]`,qa=L({__name:"Tabs",props:{as:{},tabs:{},vertical:{}},setup(e){const l=e,s=T("button");return(o,c)=>(r(),y(t(yt),{as:l.as,class:"flex flex-1 overflow-hidden flex-col data-[orientation=vertical]:flex-row",orientation:l.vertical?"vertical":"horizontal","default-value":l.tabs[0].label},{default:v(()=>[b(t(xt),{class:V(["relative min-h-fit flex data-[orientation=vertical]:flex-col p-1 border-b data-[orientation=vertical]:border-r",{"overflow-x-auto overflow-y-hidden":!l.vertical}])},{default:v(()=>[b(t(_t),{class:V(["absolute rounded-full duration-300",l.vertical?$t:It])},{default:v(()=>[...c[0]||(c[0]=[m("div",{class:"w-full h-full bg-surface-gray-7"},null,-1)])]),_:1},8,["class"]),(r(!0),x(R,null,X(l.tabs,(d,i)=>(r(),y(t(kt),{as:"template",value:i},{default:v(()=>[B(o.$slots,"tab-item",U({ref_for:!0},{tab:d}),()=>[(r(),y(j(d.route?"router-link":t(s)),{to:d.route,class:V(["flex items-center gap-1.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:text-ink-gray-9 p-2.5 data-[state=active]:text-ink-gray-9",{"py-2.5":l.vertical}])},{default:v(()=>[d.icon?(r(),y(j(d.icon),{key:0,class:"size-4"})):S("",!0),Pe(" "+k(d.label),1)]),_:2},1032,["to","class"]))])]),_:2},1032,["value"]))),256))]),_:3},8,["class"]),(r(!0),x(R,null,X(l.tabs,(d,i)=>(r(),y(t(bt),{value:i,class:"flex flex-col overflow-auto"},{default:v(()=>[B(o.$slots,"tab-panel",U({ref_for:!0},{tab:d}))]),_:2},1032,["value"]))),256))]),_:3},8,["as","orientation","default-value"]))}}),Tt={},Lt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Mt(e,l){return r(),x("svg",Lt,[...l[0]||(l[0]=[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.29021 2.64272C6.68375 0.785763 9.33429 0.785757 9.72783 2.64272L10.3657 5.65238L13.3753 6.29021C15.2323 6.68375 15.2323 9.33429 13.3753 9.72783L10.3657 10.3657L9.72783 13.3753C9.33429 15.2323 6.68375 15.2323 6.29021 13.3753L5.65238 10.3657L2.64272 9.72783C0.785763 9.33429 0.785757 6.68375 2.64272 6.29021L5.65238 5.65238L6.29021 2.64272ZM8.74956 2.85004C8.58 2.04999 7.43804 2.04998 7.26848 2.85004L6.56324 6.17777L6.49584 6.49583L6.17777 6.56324L2.85004 7.26848C2.04999 7.43804 2.04998 8.58 2.85004 8.74956L6.17777 9.4548L6.49584 9.5222L6.56324 9.84027L7.26848 13.168C7.43804 13.9681 8.58 13.9681 8.74956 13.168L9.4548 9.84027L9.5222 9.5222L9.84027 9.4548L13.168 8.74956C13.9681 8.58 13.9681 7.43804 13.168 7.26848L9.84027 6.56324L9.5222 6.49583L9.4548 6.17777L8.74956 2.85004Z",fill:"currentColor"},null,-1)])])}const qt=O(Tt,[["render",Mt]]),Vt={},Bt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function St(e,l){return r(),x("svg",Bt,[...l[0]||(l[0]=[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 2.5C4.2911 2.5 1.5 4.84419 1.5 7.5C1.5 9.14452 2.54729 10.6518 4.25112 11.5816C4.50048 11.7177 4.758 12.0041 4.7326 12.4082C4.71107 12.7508 4.61659 13.2533 4.47175 13.6657C4.44071 13.7541 4.40789 13.8389 4.37434 13.9195C4.62005 13.8524 4.91964 13.7411 5.26646 13.5579C5.48882 13.4404 5.69385 13.2901 5.9102 13.1207C5.95058 13.089 5.9922 13.056 6.03481 13.0222C6.20816 12.8848 6.39803 12.7342 6.58835 12.6102C6.7875 12.4803 7.01146 12.4447 7.20831 12.4631C7.46767 12.4875 7.73186 12.5 8 12.5C11.7089 12.5 14.5 10.1558 14.5 7.5C14.5 4.84419 11.7089 2.5 8 2.5ZM0.5 7.5C0.5 4.08068 3.97691 1.5 8 1.5C12.0231 1.5 15.5 4.08068 15.5 7.5C15.5 10.9193 12.0231 13.5 8 13.5C7.70158 13.5 7.40709 13.4861 7.11751 13.459C6.97583 13.5528 6.83777 13.6621 6.67569 13.7905C6.62832 13.828 6.5789 13.8671 6.52674 13.908C6.30071 14.085 6.03818 14.2812 5.73354 14.4421C4.73389 14.9702 3.9948 15.0302 3.62977 15.0147C3.39759 15.0048 3.20936 14.8646 3.12194 14.6754C3.03801 14.4938 3.05143 14.2816 3.15736 14.1099C3.24804 13.963 3.40655 13.6808 3.52825 13.3343C3.62961 13.0457 3.70134 12.6878 3.72712 12.4347C1.81521 11.3748 0.5 9.58517 0.5 7.5Z",fill:"currentColor"},null,-1)])])}const ae=O(Vt,[["render",St]]),At={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ft=["r"],Et={__name:"DotIcon",props:{radius:{type:Number,default:3.5}},setup(e){return(l,s)=>(r(),x("svg",At,[m("circle",{cx:"8",cy:"8",r:e.radius,fill:"currentColor"},null,8,Ft)]))}},Dt={class:"text-base text-ink-gray-6"},zt={class:"flex flex-col gap-2 mt-6"},Va=L({__name:"SetContactPhoneModal",props:ie({name:{type:String,required:!0}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:ie(["onUpdate"],["update:modelValue"]),setup(e,{emit:l}){const s=l,o=Ue(e,"modelValue"),c=M(""),d=e,i=M({name:"",phone:""}),p=()=>{if(Oe().regex(/^\+(?:[0-9]){6,14}[0-9]$/).safeParse(i.value.phone).success)c.value="";else{c.value=$("Invalid phone number");return}pe({url:"frappe.client.set_value",params:{doctype:"Contact",name:d.name,fieldname:"phone_nos",value:[{phone:i.value.phone,is_primary_phone:!0}]},auto:!0,onSuccess:()=>{s("onUpdate"),He.success($("Contact updated")),o.value=!1}})};return D(o,f=>{f&&(i.value={name:d.name,phone:""})}),(f,u)=>{const a=K("FormControl");return r(),y(t(Ke),{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=n=>o.value=n),options:{title:t($)("Set Phone Number"),actions:[{label:t($)("Set Phone Number"),variant:"solid",onClick:p}]}},{"body-content":v(()=>[m("div",null,[m("div",Dt,k(t($)("{0} does not have a phone number, set one to call them.",[i.value.name])),1),m("div",zt,[b(a,{modelValue:i.value.phone,"onUpdate:modelValue":u[0]||(u[0]=n=>i.value.phone=n),label:t($)("Phone"),type:"text",size:"sm",variant:"subtle",placeholder:"+918956895623",disabled:!1},null,8,["modelValue","label"]),b(t(je),{message:c.value},null,8,["message"])])])]),_:1},8,["modelValue","options"])}}}),Rt={},Nt={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Pt(e,l){return r(),x("svg",Nt,[...l[0]||(l[0]=[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.76527 2.76476L3.76515 2.76469C3.76518 2.76471 3.76516 2.7647 3.76508 2.76466C3.76417 2.76417 3.75528 2.75942 3.73828 2.7571V9.24215C3.75528 9.23982 3.76418 9.23508 3.76508 9.23459C3.76516 9.23455 3.76518 9.23454 3.76515 9.23456L3.76527 9.23448L8.75611 5.99962L3.76527 2.76476ZM9.5471 6.67863L4.30917 10.0736C4.01166 10.2665 3.61363 10.2975 3.28101 10.1538C2.94839 10.01 2.73828 9.71611 2.73828 9.39463V2.60462C2.73828 2.28313 2.94839 1.98924 3.28101 1.84547C3.61363 1.7017 4.01166 1.73272 4.30917 1.92561L9.5471 5.32062C9.79432 5.48091 9.93982 5.73247 9.93982 5.99962C9.93982 6.26677 9.79432 6.51833 9.5471 6.67863Z",fill:"currentColor"},null,-1)])])}const Ut=O(Rt,[["render",Pt]]),jt={class:"w-full"},Kt={class:"mb-1 flex items-center justify-stretch gap-2 py-1 text-base"},Ot={class:"inline-flex items-center flex-wrap gap-1 text-ink-gray-5"},Ht={class:"font-medium text-ink-gray-8 ml-1"},Zt={class:"ml-auto whitespace-nowrap"},Gt={class:"text-sm text-ink-gray-5"},Yt={class:"flex items-center justify-between"},Wt={class:"inline-flex gap-2 items-center text-base font-medium"},Jt={class:"flex items-center flex-wrap gap-2"},Qt=L({__name:"CallArea",props:{activity:Object},setup(e){const l=e,s=M(!1),o=M(!1),c=F("refreshTicket");return(d,i)=>{var p,f,u,a,n,g;return r(),x("div",jt,[m("div",Kt,[m("div",Ot,[b(t(_e),{image:(f=(p=e.activity)==null?void 0:p._caller)==null?void 0:f.image,label:(a=(u=e.activity)==null?void 0:u._caller)==null?void 0:a.label,size:"md"},null,8,["image","label"]),m("span",Ht,k((g=(n=e.activity)==null?void 0:n._caller)==null?void 0:g.label),1),m("span",null,k(e.activity.call_type=="Incoming"?d.__("has reached out"):d.__("has made a call")),1)]),m("div",Zt,[b(t(ve),{text:t(ne)(e.activity.creation,"MMM D, dddd")},{default:v(()=>[m("div",Gt,k(d.__(t(Ze)(e.activity.creation))),1)]),_:1},8,["text"])])]),m("div",{onClick:i[0]||(i[0]=_=>s.value=!0),class:"flex flex-col gap-2 cursor-pointer border-transparent shadow rounded-md bg-surface-cards px-3 py-2.5 text-ink-gray-9"},[m("div",Yt,[m("div",Wt,[m("div",null,k(e.activity.call_type=="Incoming"?d.__("Inbound Call"):d.__("Outbound Call")),1)]),m("div",null,[b(tt,{avatars:[{name:e.activity._caller.label,label:e.activity._caller.label,image:e.activity._caller.image},{name:e.activity._receiver.label,label:e.activity._receiver.label,image:e.activity._receiver.image}],size:"sm"},null,8,["avatars"])])]),m("div",Jt,[b(t(P),{label:t(ne)(e.activity.creation,"MMM D, dddd")},{prefix:v(()=>[b(lt,{class:"size-3"})]),_:1},8,["label"]),e.activity.status=="Completed"?(r(),y(t(P),{key:0,label:e.activity.duration},{prefix:v(()=>[b(st,{class:"size-3"})]),_:1},8,["label"])):S("",!0),e.activity.recording_url?(r(),y(t(P),{key:1,label:d.__("Listen"),class:"cursor-pointer"},{prefix:v(()=>[b(Ut,{class:"size-3"})]),_:1},8,["label"])):S("",!0),b(t(P),{label:t(ot)[e.activity.status],theme:t(it)[e.activity.status]},null,8,["label","theme"])])]),b(nt,{modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=_=>s.value=_),callLogModal:o.value,"onUpdate:callLogModal":i[2]||(i[2]=_=>o.value=_),callLogId:l.activity.name,hideTicket:!0},null,8,["modelValue","callLogModal","callLogId"]),b(he,{modelValue:o.value,"onUpdate:modelValue":i[3]||(i[3]=_=>o.value=_),callLogId:l.activity.name,onAfterInsert:i[4]||(i[4]=_=>t(c)())},null,8,["modelValue","callLogId"])])}}}),Xt={class:"md:mx-10 md:my-4 flex items-center justify-between text-lg font-medium mx-6 mb-4 !mt-8"},ea={class:"flex h-8 items-center text-xl font-semibold text-gray-800"},ta=L({__name:"ActivityHeader",props:{title:{type:String,required:!0}},setup(e){const l=F("communicationArea"),s=F("makeCall"),o=F("refreshTicket"),c=M(!1),{isCallingEnabled:d}=ye(we()),i=F("ticketId"),p=I(()=>{let u=[{icon:T(Ce,{class:"h-4 w-4"}),label:$("Email"),onClick:()=>{var a;return((a=l==null?void 0:l.value)==null?void 0:a.toggleEmailBox())??ee()}},{icon:T(ae,{class:"h-4 w-4"}),label:$("Comment"),onClick:()=>{var a;return((a=l==null?void 0:l.value)==null?void 0:a.toggleCommentBox())??te()}}];return d.value&&u.push(...f.value),u}),f=I(()=>[{icon:T(xe,{class:"h-4 w-4"}),label:$("Make a Call"),onClick:()=>s()},{icon:"edit-3",label:$("Log a Call"),onClick:()=>{c.value=!0}}]);return(u,a)=>{const n=K("FeatherIcon"),g=K("Button");return r(),x(R,null,[m("div",Xt,[m("div",ea,k(e.title),1),e.title=="Emails"?(r(),y(g,{key:0,variant:"solid",onClick:a[0]||(a[0]=_=>{var A;return((A=t(l))==null?void 0:A.toggleEmailBox())??t(ee)()})},{prefix:v(()=>[b(n,{name:"plus",class:"h-4 w-4"})]),default:v(()=>[m("span",null,k(t($)("New Email")),1)]),_:1})):e.title=="Comments"?(r(),y(g,{key:1,variant:"solid",onClick:a[1]||(a[1]=_=>{var A;return((A=t(l))==null?void 0:A.toggleCommentBox())??t(te)()})},{prefix:v(()=>[b(n,{name:"plus",class:"h-4 w-4"})]),default:v(()=>[m("span",null,k(t($)("New Comment")),1)]),_:1})):e.title=="Calls"?(r(),y(t(ue),{key:2,options:f.value,onClick:a[2]||(a[2]=Q(()=>{},["stop"]))},{default:v(({open:_})=>[b(g,{variant:"solid",class:"flex items-center gap-1"},{prefix:v(()=>[b(n,{name:"plus",class:"h-4 w-4"})]),suffix:v(()=>[b(n,{name:_?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),default:v(()=>[m("span",null,k(t($)("New")),1)]),_:2},1024)]),_:1},8,["options"])):(r(),y(t(ue),{key:3,options:p.value,onClick:a[3]||(a[3]=Q(()=>{},["stop"]))},{default:v(({open:_})=>[b(g,{variant:"solid",class:"flex items-center gap-1"},{prefix:v(()=>[b(n,{name:"plus",class:"h-4 w-4"})]),suffix:v(()=>[b(n,{name:_?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),default:v(()=>[m("span",null,k(t($)("New")),1)]),_:2},1024)]),_:1},8,["options"]))]),b(he,{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=_=>c.value=_),ticketId:t(i),onAfterInsert:t(o)},null,8,["modelValue","ticketId","onAfterInsert"])],64)}}}),aa={class:"text-base text-ink-gray-8 font-medium"},la={key:0},sa={class:"mt-2 text-sm text-gray-700"},oa=L({__name:"FeedbackBox",props:{activity:{type:Object,required:!0}},setup(e){const l=e,s=I(()=>l.activity.feedback_rating<=.4?["bg-surface-red-1","red"]:l.activity.feedback_rating<=.6?["bg-surface-amber-1","yellow"]:["bg-surface-green-1","yellow"]);return(o,c)=>(r(),x("div",{class:V(["w-full p-4 rounded",s.value[0]])},[m("div",{class:V(["flex mb-1.5 items-center",e.activity.feedback&&"gap-[9px]"])},[m("p",aa,k(e.activity.feedback),1),b(rt,{rating:e.activity.feedback_rating},null,8,["rating"])],2),e.activity.feedback_extra?(r(),x("div",la,[m("p",sa,k(e.activity.feedback_extra),1)])):S("",!0)],2))}}),ia={key:0,class:"activities flex-1 h-full mt-1"},na={class:"w-full px-6 md:px-10 grid grid-cols-[30px_minmax(auto,_1fr)] gap-2 sm:gap-4"},ra={key:1,class:"h-full flex flex-col items-center justify-center gap-3 text-xl font-medium text-gray-500"},Ba=L({__name:"TicketAgentActivities",props:{activities:{type:Array,required:!0},title:{type:String,required:!0},ticketStatus:{type:String,default:""}},emits:["email:reply","update"],setup(e,{expose:l,emit:s}){const o=e,c=s,d=Y(()=>W(()=>import("./CommentBox-40099ccc.js"),["assets/CommentBox-40099ccc.js","assets/index-b4c863a6.js","assets/index-66cee687.css","assets/AttachmentItem.vue_vue_type_script_setup_true_lang-b54cd9d5.js","assets/TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-c8d975a4.js","assets/TypingIndicator-f6a7560f.css","assets/dayjs-95f8111d.js","assets/knowledgeBase-2d00b929.js","assets/Avatar.vue_vue_type_script_setup_true_lang-89128cfb.js","assets/Dropdown-f79f7542.js","assets/Dropdown-4048bc75.css","assets/file-to-base64-e61fad39.js","assets/popper-0aa08b12.js","assets/chevron-left-d60af664.js","assets/chevron-right-cd59273c.js","assets/plus-3c348a65.js","assets/file-to-base64-e1a7a8ca.css"])),i=Y(()=>W(()=>import("./EmailArea-cbb8d998.js"),["assets/EmailArea-cbb8d998.js","assets/EmailContent.vue_vue_type_script_setup_true_lang-df9fb311.js","assets/index-b4c863a6.js","assets/index-66cee687.css","assets/AttachmentItem.vue_vue_type_script_setup_true_lang-b54cd9d5.js","assets/TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-c8d975a4.js","assets/TypingIndicator-f6a7560f.css","assets/dayjs-95f8111d.js","assets/knowledgeBase-2d00b929.js","assets/Dropdown-f79f7542.js","assets/Dropdown-4048bc75.css"])),p=Y(()=>W(()=>import("./HistoryBox-cbbf1da8.js"),["assets/HistoryBox-cbbf1da8.js","assets/index-b4c863a6.js","assets/index-66cee687.css"])),f=ge(),u=be(),{getUser:a}=Ge(),n=F("communicationArea"),g=F("makeCall"),_=I(()=>{let C="No Activities";if(o.title=="Emails")C="No Email Communications";else{if(o.title=="Comments")return C="No Comments",C;if(o.title=="Calls")return C="No Calls",C}}),A=I(()=>{let C=qt;return o.title=="Emails"?C=Ce:o.title=="Comments"?C=ae:o.title=="Calls"&&(C=xe),T(C,{class:"text-gray-500"})});function Z(){if(f.hash){$e();return}setTimeout(()=>{let C,w=document.getElementsByClassName("activity");C=w[w.length-1],C&&!Ye(C)&&(C.scrollIntoViewIfNeeded(),C.focus())},500)}function $e(){const C=f.hash;if(C){const w=C.substring(1);le(()=>{setTimeout(()=>{const E=document.getElementById(w);E&&(E.scrollIntoViewIfNeeded(),E.classList.add("bg-yellow-100"),setTimeout(()=>{E.classList.remove("bg-yellow-100"),u.replace({hash:""})},2e3))},1e3)})}}return D(()=>f.hash,()=>{Z()}),D(()=>o.title,()=>{Z()},{immediate:!0}),l({scrollToLatestActivity:Z}),(C,w)=>{const E=ta,Te=Qt,G=K("Button");return r(),x(R,null,[b(E,{title:e.title},null,8,["title"]),b(t(at),{class:"flex flex-col flex-1 overflow-y-auto","mask-length":20},{default:v(()=>[e.activities.length?(r(),x("div",ia,[(r(!0),x(R,null,X(e.activities,(h,q)=>{var se,oe;return r(),x("div",{key:h.key,class:"activity"},[m("div",na,[m("div",{class:V(["relative flex justify-center after:absolute after:left-[50%] after:top-2 after:-z-10 after:border-l after:border-gray-200",[q!=e.activities.length-1?"after:h-full":"after:h-4"]])},[m("div",{class:V(["z-1 flex h-7 w-7 items-center justify-center rounded-full bg-white",[["email","feedback"].includes(h.type)&&"mt-2"]])},[h.type==="email"||h.type==="feedback"?(r(),y(t(_e),{key:0,size:"lg",label:(se=h.sender)==null?void 0:se.full_name,image:t(a)((oe=h.sender)==null?void 0:oe.name).user_image,class:"bg-white absolute left-[1px]"},null,8,["label","image"])):h.type==="comment"?(r(),y(t(ae),{key:1,class:"text-gray-600 absolute left-[7.5px]"})):h.type==="call"?(r(),y(t(We),{key:2,name:h.call_type==="Incoming"?"phone-incoming":"phone-outgoing",class:"text-gray-600 absolute left-[7.5px] size-4"},null,8,["name"])):(r(),y(t(Et),{key:3,class:"text-gray-600 absolute left-[7.5px]"}))],2)],2),m("div",{class:V(["mb-4 flex flex-1",[q==e.activities.length-1&&"mb-5"]])},[h.type==="email"?(r(),y(t(i),{key:0,activity:h,"show-split-option":!h.isFirstEmail&&e.ticketStatus!=="Closed",class:"py-2 px-3",onReply:w[0]||(w[0]=Le=>c("email:reply",Le))},null,8,["activity","show-split-option"])):h.type==="comment"?(r(),y(t(d),{key:1,activity:h,onUpdate:w[1]||(w[1]=()=>c("update"))},null,8,["activity"])):h.type==="call"?(r(),y(Te,{key:2,activity:h},null,8,["activity"])):h.type==="feedback"?(r(),y(oa,{key:3,activity:h},null,8,["activity"])):(r(),y(t(p),{key:4,activity:h},null,8,["activity"]))],2)])])}),128))])):(r(),x("div",ra,[(r(),y(j(A.value),{class:"h-10 w-10"})),m("span",null,k(_.value),1),e.title=="Emails"?(r(),y(G,{key:0,label:"New Email",onClick:w[2]||(w[2]=h=>{var q;return((q=t(n))==null?void 0:q.toggleEmailBox())??t(ee)()})})):e.title=="Comments"?(r(),y(G,{key:1,label:"New Comment",onClick:w[3]||(w[3]=h=>{var q;return((q=t(n))==null?void 0:q.toggleCommentBox())??t(te)()})})):e.title=="Calls"?(r(),y(G,{key:2,label:"Make a Call",onClick:w[4]||(w[4]=h=>t(g)())})):S("",!0)]))]),_:1})],64)}}}),ua={class:"flex gap-2 px-5 pb-1 leading-5 first:mt-3 items-center"},da={class:"w-[106px] shrink-0 truncate text-sm text-gray-600"},ca={key:0,class:"text-red-500"},fa={class:"-m-0.5 min-h-[28px] flex-1 items-center overflow-hidden p-0.5 text-base"},ma=L({__name:"TicketField",props:{field:{},value:{type:[String,Number,Boolean,null]}},emits:["change"],setup(e,{emit:l}){const s=e,o=l,c=pe({url:s.field.url_method,auto:!!s.field.url_method,transform:a=>Je(a)}),d=["Long Text","Small Text","Text","Text Editor","Data"],i=["Int","Float","Currency","Percent"],p=I(()=>s.field.url_method?T(J,{options:c.data}):s.field.fieldtype==="Link"&&s.field.options?T(ut,{doctype:s.field.options,hideMe:!0}):s.field.fieldtype==="Select"?T(J,{options:s.field.options.split(`
`).map(a=>({label:a,value:a}))}):s.field.fieldtype==="Check"?T(J,{options:[{label:"Yes",value:1},{label:"No",value:0}]}):d.includes(s.field.fieldtype)?T(re,{type:"textarea",rows:s.field.fieldtype==="Data"?1:2}):s.field.fieldtype==="Datetime"?T(dt,{formatter:a=>a&&de(a).format(`${window.date_format.toUpperCase()} ${window.time_format}`)}):s.field.fieldtype==="Date"?T(ct,{id:s.field.fieldname}):T(re)),f=I(()=>{const a=s.field.fieldtype;return a==="Check"?s.value?"Yes":"No":a==="Date"&&s.value?de(s.value).format(window.date_format.toUpperCase()):s.value});function u(a,n){o("change",{fieldname:a,value:n})}return(a,n)=>(r(),x("div",ua,[m("div",da,[b(t(ve),{text:e.field.label},{default:v(()=>[m("span",null,k(e.field.label),1)]),_:1},8,["text"]),e.field.required?(r(),x("span",ca," * ")):S("",!0)]),m("div",fa,[(r(),y(j(p.value),U({key:e.field.fieldname,readonly:e.field.readonly,disabled:e.field.disabled,class:"form-control",placeholder:e.field.placeholder||`Add ${e.field.label}`,"model-value":f.value,autocomplete:"off"},Qe([...d,...i].includes(e.field.fieldtype)?{blur:g=>{u(e.field.fieldname,g.target.value)}}:{"update:model-value":g=>{var _;u(e.field.fieldname,(g==null?void 0:g.value)||((_=g==null?void 0:g.target)==null?void 0:_.value)||g)}})),null,16,["readonly","disabled","placeholder","model-value"]))])]))}});const Sa=O(ma,[["__scopeId","data-v-1f1123eb"]]);function Aa(e){const l=ge(),s=be(),o=we(),{isLoading:c}=ye(o),d=a=>{var n,g;f.value=a,a==0?s.replace({path:l.path,query:l.query}):i(((g=(n=e.value)==null?void 0:n[a])==null?void 0:g.name)||e.value[0].name)};function i(a){let n="#"+(a==null?void 0:a.toLowerCase());l.hash!==n&&s.push({hash:n,query:l.query})}function p(a){var n;return(n=e.value)==null?void 0:n.findIndex(g=>g.name.toLowerCase()===a)}const f=M(0),u=()=>{let a=l.hash.replace("#","");if(a){let n=p(a);if(n!==-1||n===0){f.value=n,i(e.value[n].name);return}}f.value=0,s.replace({path:l.path,query:l.query})};return D(()=>l.hash,a=>{let n=p(a.replace("#",""));n===-1&&(n=0),n==0&&s.replace({path:l.path,query:l.query}),f.value=n}),D([e,c],([a,n])=>{a!=null&&a.length&&(n||u())},{deep:!0,flush:"post"}),{tabIndex:f,changeTabTo:d}}export{qt as A,ae as C,Sa as T,Va as _,Ba as a,qa as b,Aa as u};
//# sourceMappingURL=useActiveTabManager-f5a47eda.js.map
