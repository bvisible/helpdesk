{"version":3,"file":"DesktopLayout-43bc2137.js","sources":["../../../../desk/node_modules/frappe-ui/src/components/DatePicker/useDatePicker.ts","../../../../desk/node_modules/frappe-ui/icons/StepsIcon.vue","../../../../desk/node_modules/frappe-ui/icons/MinimizeIcon.vue","../../../../desk/node_modules/frappe-ui/icons/MaximizeIcon.vue","../../../../desk/node_modules/frappe-ui/icons/HelpIcon.vue","../../../../desk/node_modules/frappe-ui/frappe/Onboarding/OnboardingSteps.vue","../../../../desk/node_modules/frappe-ui/frappe/HelpCenter/HelpCenter.vue","../../../../desk/node_modules/frappe-ui/frappe/HelpCenter/helpCenter.js","../../../../desk/node_modules/frappe-ui/frappe/Help/HelpModal.vue","../../../../desk/node_modules/frappe-ui/frappe/Onboarding/GettingStartedBanner.vue","../../../../desk/node_modules/frappe-ui/frappe/Onboarding/IntermediateStepModal.vue","../../../../desk/node_modules/frappe-ui/icons/LightningIcon.vue","../../../../desk/node_modules/frappe-ui/frappe/Billing/TrialBanner.vue","../../../../desk/src/components/command-palette/CPGroup.vue","../../../../desk/src/components/command-palette/CP.vue","../../../../desk/src/components/icons/FieldDependencyIcon.vue","../../../../desk/src/components/icons/FrappeCloudIcon.vue","../../../../desk/src/components/icons/InviteCustomer.vue","../../../../desk/src/components/notifications/Notifications.vue","../../../../desk/src/components/layouts/AppHeader.vue","../../../../desk/src/components/modals/ShortcutsModal.vue","../../../../desk/src/components/ConfirmDialog.vue","../../../../desk/src/components/Settings/agents.ts","../../../../desk/src/components/icons/AgentIcon.vue","../../../../desk/src/components/layouts/SettingsLayoutBase.vue","../../../../desk/src/components/Settings/Agents.vue","../../../../desk/src/assets/images/gmail.png","../../../../desk/src/assets/images/outlook.png","../../../../desk/src/assets/images/sendgrid.png","../../../../desk/src/assets/images/sparkpost.webp","../../../../desk/src/assets/images/yahoo.png","../../../../desk/src/assets/images/yandex.png","../../../../desk/src/assets/images/frappe-mail.svg","../../../../desk/src/components/Settings/emailConfig.ts","../../../../desk/src/components/Settings/EmailProviderIcon.vue","../../../../desk/src/components/Settings/EmailAdd.vue","../../../../desk/src/components/Settings/EmailAccountCard.vue","../../../../desk/src/components/Settings/EmailAccountList.vue","../../../../desk/src/components/Settings/EmailEdit.vue","../../../../desk/src/components/Settings/EmailConfig.vue","../../../../desk/src/stores/assignmentRules.ts","../../../../desk/src/components/Settings/AgentCard.vue","../../../../desk/src/components/Settings/Teams/components/AgentSelector.vue","../../../../desk/src/components/Settings/Teams/TeamEdit.vue","../../../../desk/src/components/Settings/NewTeamModal.vue","../../../../desk/src/components/Settings/Teams/RenameTeamModal.vue","../../../../desk/src/components/Settings/Teams/TeamsList.vue","../../../../desk/src/components/Settings/Teams/NewTeam.vue","../../../../desk/src/components/Settings/Teams/TeamsConfig.vue","../../../../desk/src/stores/sla.ts","../../../../desk/src/components/Settings/Sla/SlaPolicyListItem.vue","../../../../desk/src/components/Settings/Sla/SlaPolicyList.vue","../../../../desk/src/components/Settings/Sla/SlaPolicies.vue","../../../../desk/src/components/conditions-filter/filterableFields.ts","../../../../desk/src/components/conditions-filter/CFCondition.vue","../../../../desk/src/components/conditions-filter/CFConditions.vue","../../../../desk/src/components/Settings/Sla/SlaAssignmentConditions.vue","../../../../desk/src/components/Settings/Sla/Modals/WorkDayModal.vue","../../../../desk/src/components/Settings/Sla/SlaWorkDaysListItem.vue","../../../../desk/src/components/Settings/Sla/SlaWorkDaysList.vue","../../../../desk/src/stores/holidayList.ts","../../../../desk/src/components/Settings/Sla/SlaHolidays.vue","../../../../desk/src/components/frappe-ui/DurationPicker.vue","../../../../desk/src/components/Settings/Sla/utils.ts","../../../../desk/src/components/Settings/Sla/Modals/EditResponseResolutionModal.vue","../../../../desk/src/components/Settings/Sla/SlaPriorityListItem.vue","../../../../desk/src/components/Settings/Sla/SlaPriorityList.vue","../../../../desk/src/components/Settings/Sla/SlaStatusList.vue","../../../../desk/src/components/Settings/Sla/SlaPolicyView.vue","../../../../desk/src/components/Settings/Sla/Sla.vue","../../../../desk/src/components/Settings/Holiday/HolidayListItem.vue","../../../../desk/src/components/Settings/Holiday/HolidayList.vue","../../../../desk/src/components/Settings/Holiday/Holidays.vue","../../../../desk/src/components/Settings/Holiday/Modals/AddHolidayModal.vue","../../../../desk/src/components/Settings/Holiday/HolidaysTableView.vue","../../../../node_modules/dayjs/plugin/isSameOrBefore.js","../../../../node_modules/dayjs/plugin/weekday.js","../../../../desk/src/components/Settings/Holiday/utils.ts","../../../../desk/src/components/Settings/Holiday/RecurringHolidaysList.vue","../../../../desk/src/components/Settings/Holiday/HLCalender.vue","../../../../desk/src/components/Settings/Holiday/HolidaysCalendarView.vue","../../../../desk/src/components/Settings/Holiday/HolidayView.vue","../../../../desk/src/components/Settings/Holiday/Holiday.vue","../../../../desk/src/components/Settings/FieldDependency/fieldDependency.ts","../../../../desk/src/components/DocumentationButton.vue","../../../../desk/src/components/frappe-ui/MultiSelectCombobox.vue","../../../../desk/src/components/Settings/FieldDependency/FieldDependencyCriteria.vue","../../../../desk/src/components/Settings/FieldDependency/FieldDependencyFieldsSelection.vue","../../../../desk/src/components/Settings/FieldDependency/FieldDependencyValueSelection.vue","../../../../desk/src/components/Settings/FieldDependency/FieldDependency.vue","../../../../desk/src/components/Settings/FieldDependency/FieldDependencyList.vue","../../../../desk/src/components/Settings/FieldDependency/FieldDependencyConfig.vue","../../../../desk/src/components/Settings/InviteAgents.vue","../../../../desk/src/components/Settings/Assignment Rules/AssignmentRuleListItem.vue","../../../../desk/src/components/Settings/Assignment Rules/AssignmentRulesListView.vue","../../../../desk/src/components/Settings/Assignment Rules/AssignmentRulesList.vue","../../../../desk/src/components/Settings/Assignment Rules/AssigneeSearch.vue","../../../../desk/src/components/Settings/Assignment Rules/AssigneeRules.vue","../../../../desk/src/components/Settings/Assignment Rules/AssignmentRulesSection.vue","../../../../desk/src/components/Settings/Assignment Rules/AssignmentScheduleItem.vue","../../../../desk/src/components/Settings/Assignment Rules/AssignmentSchedule.vue","../../../../desk/src/components/Settings/Assignment Rules/AssignmentRuleView.vue","../../../../desk/src/components/Settings/Assignment Rules/AssignmentRules.vue","../../../../desk/src/components/Password.vue","../../../../desk/src/components/Settings/Telephony/utils.ts","../../../../desk/src/components/Settings/Telephony/Telephony.vue","../../../../desk/src/components/Settings/EmailNotifications/NotificationList.vue","../../../../desk/src/components/Settings/EmailNotifications/Notification.vue","../../../../desk/src/components/Settings/EmailNotifications/Acknowledgement.vue","../../../../desk/src/components/Settings/EmailNotifications/ReplyViaAgent.vue","../../../../desk/src/components/Settings/EmailNotifications/ShareFeedback.vue","../../../../desk/src/components/Settings/EmailNotifications/ReplyToAgents.vue","../../../../desk/src/components/Settings/EmailNotifications/EmailNotifications.vue","../../../../desk/src/components/Settings/Profile/components/ChangePasswordModal.vue","../../../../desk/src/components/Settings/Profile/Profile.vue","../../../../desk/src/components/Settings/General/components/LogoUpload.vue","../../../../desk/src/components/Settings/General/components/Branding.vue","../../../../desk/src/components/SelectDropdown.vue","../../../../desk/src/components/Settings/General/components/TicketSettings.vue","../../../../desk/src/components/Settings/General/components/WorkflowKnowledgebaseSettings.vue","../../../../desk/src/components/Settings/General/General.vue","../../../../desk/src/components/Settings/settingsModal.ts","../../../../desk/src/components/Settings/SettingsModal.vue","../../../../desk/src/composables/fc.ts","../../../../desk/src/components/layouts/Sidebar.vue","../../../../desk/src/components/layouts/DesktopLayout.vue"],"sourcesContent":["import { computed, ref } from 'vue'\nimport { getDate, getDatesAfter, getDaysInMonth } from './utils'\n\nexport function useDatePicker() {\n  const currentYear = ref<number>(0)\n  const currentMonth = ref<number>(0)\n\n  const today = computed(() => getDate())\n\n  const dates = computed(() => {\n    if (!(currentYear.value && currentMonth.value)) {\n      return []\n    }\n    const monthIndex = currentMonth.value - 1\n    const year = currentYear.value\n\n    const firstDayOfMonth = getDate(year, monthIndex, 1)\n    const lastDayOfMonth = getDate(year, monthIndex + 1, 0)\n    const leftPaddingCount = firstDayOfMonth.getDay()\n    const rightPaddingCount = 6 - lastDayOfMonth.getDay()\n\n    const leftPadding = getDatesAfter(firstDayOfMonth, -leftPaddingCount)\n    const rightPadding = getDatesAfter(lastDayOfMonth, rightPaddingCount)\n    const daysInMonth = getDaysInMonth(monthIndex, year)\n    const datesInMonth = getDatesAfter(firstDayOfMonth, daysInMonth - 1)\n\n    let dates = [\n      ...leftPadding,\n      firstDayOfMonth,\n      ...datesInMonth,\n      ...rightPadding,\n    ]\n\n    if (dates.length < 42) {\n      const lastDate = dates.at(-1)\n      if (lastDate) {\n        const finalPadding = getDatesAfter(lastDate, 42 - dates.length)\n        dates = dates.concat(...finalPadding)\n      }\n    }\n    return dates\n  })\n\n  const datesAsWeeks = computed(() => {\n    const datesAsWeeks: Date[][] = []\n    const computedDates = dates.value.slice()\n    while (computedDates.length) {\n      const week = computedDates.splice(0, 7)\n      datesAsWeeks.push(week)\n    }\n    return datesAsWeeks\n  })\n\n  const formattedMonth = computed(() => {\n    if (!(currentYear.value && currentMonth.value)) {\n      return ''\n    }\n    const date = getDate(currentYear.value, currentMonth.value - 1, 1)\n    const month = date.toLocaleString('en-US', {\n      month: 'long',\n    })\n    return `${month}, ${date.getFullYear()}`\n  })\n\n  function prevMonth() {\n    changeMonth(-1)\n  }\n\n  function nextMonth() {\n    changeMonth(1)\n  }\n\n  function changeMonth(adder: number) {\n    currentMonth.value = currentMonth.value + adder\n    if (currentMonth.value < 1) {\n      currentMonth.value = 12\n      currentYear.value = currentYear.value - 1\n    }\n    if (currentMonth.value > 12) {\n      currentMonth.value = 1\n      currentYear.value = currentYear.value + 1\n    }\n  }\n\n  return {\n    currentYear,\n    currentMonth,\n    today,\n    dates,\n    datesAsWeeks,\n    formattedMonth,\n    prevMonth,\n    nextMonth,\n    changeMonth,\n  }\n}\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M8 6.5C9.10457 6.5 10 5.60457 10 4.5C10 3.39543 9.10457 2.5 8 2.5C6.89543 2.5 6 3.39543 6 4.5C6 5.60457 6.89543 6.5 8 6.5ZM8 7.5C9.65685 7.5 11 6.15685 11 4.5C11 2.84315 9.65685 1.5 8 1.5C6.34315 1.5 5 2.84315 5 4.5C5 6.15685 6.34315 7.5 8 7.5ZM12 13.5C13.1046 13.5 14 12.6046 14 11.5C14 10.3954 13.1046 9.5 12 9.5C10.8954 9.5 10 10.3954 10 11.5C10 12.6046 10.8954 13.5 12 13.5ZM12 14.5C13.6569 14.5 15 13.1569 15 11.5C15 9.84315 13.6569 8.5 12 8.5C10.3431 8.5 9 9.84315 9 11.5C9 13.1569 10.3431 14.5 12 14.5ZM6 11.5C6 12.6046 5.10457 13.5 4 13.5C2.89543 13.5 2 12.6046 2 11.5C2 10.3954 2.89543 9.5 4 9.5C5.10457 9.5 6 10.3954 6 11.5ZM7 11.5C7 13.1569 5.65685 14.5 4 14.5C2.34315 14.5 1 13.1569 1 11.5C1 9.84315 2.34315 8.5 4 8.5C5.65685 8.5 7 9.84315 7 11.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"feather feather-minimize-2\"\n  >\n    <polyline points=\"4 14 10 14 10 20\" />\n    <polyline points=\"20 10 14 10 14 4\" />\n    <line x1=\"14\" y1=\"10\" x2=\"21\" y2=\"3\" />\n    <line x1=\"3\" y1=\"21\" x2=\"10\" y2=\"14\" />\n  </svg>\n</template>\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"feather feather-maximize-2\"\n  >\n    <polyline points=\"15 3 21 3 21 9\" />\n    <polyline points=\"9 21 3 21 3 15\" />\n    <line x1=\"21\" y1=\"3\" x2=\"14\" y2=\"10\" />\n    <line x1=\"3\" y1=\"21\" x2=\"10\" y2=\"14\" />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M14.25 8C14.25 11.4518 11.4518 14.25 8 14.25C4.54822 14.25 1.75 11.4518 1.75 8C1.75 4.54822 4.54822 1.75 8 1.75C11.4518 1.75 14.25 4.54822 14.25 8ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM7.37988 9.37695V9.44531H8.39062V9.37695C8.39062 9.10352 8.41992 8.88542 8.47852 8.72266C8.53711 8.55664 8.62826 8.41504 8.75195 8.29785C8.87891 8.18066 9.04329 8.06185 9.24512 7.94141C9.56087 7.74609 9.8099 7.51009 9.99219 7.2334C10.1745 6.95345 10.2656 6.61328 10.2656 6.21289C10.2656 5.82878 10.1745 5.49186 9.99219 5.20215C9.81315 4.91244 9.56087 4.6862 9.23535 4.52344C8.90983 4.36068 8.52734 4.2793 8.08789 4.2793C7.69401 4.2793 7.33268 4.35579 7.00391 4.50879C6.67513 4.65853 6.41146 4.88151 6.21289 5.17773C6.01432 5.4707 5.90853 5.82878 5.89551 6.25195H6.96973C6.986 6.0013 7.04948 5.79785 7.16016 5.6416C7.27083 5.4821 7.40755 5.36491 7.57031 5.29004C7.73633 5.21517 7.90885 5.17773 8.08789 5.17773C8.28971 5.17773 8.47363 5.22005 8.63965 5.30469C8.80892 5.38932 8.94075 5.50814 9.03516 5.66113C9.13281 5.81413 9.18164 5.99479 9.18164 6.20312C9.18164 6.47005 9.11003 6.69954 8.9668 6.8916C8.82357 7.0804 8.64453 7.23828 8.42969 7.36523C8.21159 7.50195 8.02279 7.64193 7.86328 7.78516C7.70703 7.92513 7.58659 8.11556 7.50195 8.35645C7.42057 8.59408 7.37988 8.93425 7.37988 9.37695ZM7.37988 11.5205C7.51986 11.654 7.69076 11.7207 7.89258 11.7207C8.09766 11.7207 8.26855 11.654 8.40527 11.5205C8.54525 11.3838 8.61523 11.2161 8.61523 11.0176C8.61523 10.8158 8.54525 10.6481 8.40527 10.5146C8.26855 10.3779 8.09766 10.3096 7.89258 10.3096C7.69076 10.3096 7.51986 10.3779 7.37988 10.5146C7.24316 10.6481 7.1748 10.8158 7.1748 11.0176C7.1748 11.2161 7.24316 11.3838 7.37988 11.5205Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div class=\"flex flex-col justify-center items-center gap-1 mt-4 mb-7\">\n    <component :is=\"logo\" class=\"size-10 shrink-0 rounded mb-4\" />\n    <div class=\"text-base font-medium\">\n      {{ 'Welcome to ' + title }}\n    </div>\n    <div class=\"text-p-base font-normal\">\n      {{ `${stepsCompleted}/${totalSteps} steps completed` }}\n    </div>\n  </div>\n  <div class=\"flex flex-col gap-2.5 overflow-hidden\">\n    <div class=\"flex justify-between items-center py-0.5\">\n      <Badge\n        :label=\"`${completedPercentage}% completed`\"\n        :theme=\"completedPercentage == 100 ? 'green' : 'orange'\"\n        size=\"lg\"\n      />\n      <div class=\"flex\">\n        <Button\n          v-if=\"completedPercentage != 0\"\n          variant=\"ghost\"\n          :label=\"'Reset all'\"\n          @click=\"() => resetAll(afterResetAll)\"\n        />\n        <Button\n          v-if=\"completedPercentage != 100\"\n          variant=\"ghost\"\n          :label=\"'Skip all'\"\n          @click=\"() => skipAll(afterSkipAll)\"\n        />\n      </div>\n    </div>\n    <div class=\"flex flex-col gap-1.5 overflow-y-auto\">\n      <div\n        v-for=\"step in steps\"\n        :key=\"step.title\"\n        class=\"group w-full flex gap-2 justify-between items-center hover:bg-surface-gray-1 rounded px-2 py-1.5 cursor-pointer\"\n        @click.stop=\"\n          () => !step.completed && !isDependent(step) && step.onClick()\n        \"\n      >\n        <component\n          :is=\"isDependent(step) ? Tooltip : 'div'\"\n          :text=\"dependsOnTooltip(step)\"\n        >\n          <div\n            class=\"flex gap-2 items-center\"\n            :class=\"[\n              step.completed\n                ? 'text-ink-gray-5'\n                : isDependent(step)\n                  ? 'text-ink-gray-4'\n                  : 'text-ink-gray-8',\n            ]\"\n          >\n            <component :is=\"step.icon\" class=\"h-4\" />\n            <div class=\"text-base\" :class=\"{ 'line-through': step.completed }\">\n              {{ step.title }}\n            </div>\n          </div>\n        </component>\n        <Button\n          v-if=\"!step.completed && !isDependent(step)\"\n          :label=\"'Skip'\"\n          class=\"!h-4 text-xs !text-ink-gray-6 hidden group-hover:flex\"\n          @click=\"() => skip(step.name, afterSkip)\"\n        />\n        <Button\n          v-else-if=\"!isDependent(step)\"\n          :label=\"'Reset'\"\n          class=\"!h-4 text-xs !text-ink-gray-6 hidden group-hover:flex\"\n          @click.stop=\"() => reset(step.name, afterReset)\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { useOnboarding } from './onboarding'\nimport Tooltip from '../../src/components/Tooltip/Tooltip.vue'\nimport Button from '../../src/components/Button/Button.vue'\nimport Badge from '../../src/components/Badge/Badge.vue'\n\nconst props = defineProps({\n  appName: {\n    type: String,\n    default: 'frappecrm',\n  },\n  title: {\n    type: String,\n    default: 'Frappe CRM',\n  },\n  logo: {\n    type: Object,\n    required: true,\n  },\n  afterSkip: {\n    type: Function,\n    default: () => {},\n  },\n  afterSkipAll: {\n    type: Function,\n    default: () => {},\n  },\n  afterReset: {\n    type: Function,\n    default: () => {},\n  },\n  afterResetAll: {\n    type: Function,\n    default: () => {},\n  },\n})\n\nfunction isDependent(step) {\n  if (step.dependsOn && !step.completed) {\n    const dependsOnStep = steps.find((s) => s.name === step.dependsOn)\n    if (dependsOnStep && !dependsOnStep.completed) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction dependsOnTooltip(step) {\n  if (step.dependsOn && !step.completed) {\n    const dependsOnStep = steps.find((s) => s.name === step.dependsOn)\n    if (dependsOnStep && !dependsOnStep.completed) {\n      return `You need to complete \"${dependsOnStep.title}\" first.`\n    }\n  }\n  return ''\n}\n\nconst {\n  steps,\n  stepsCompleted,\n  totalSteps,\n  completedPercentage,\n  skip,\n  skipAll,\n  reset,\n  resetAll,\n} = useOnboarding(props.appName)\n</script>\n","<template>\n  <div class=\"flex flex-col gap-2 overflow-hidden\">\n    <div class=\"m-1\">\n      <TextInput\n        ref=\"searchInput\"\n        :placeholder=\"'Search articles...'\"\n        v-model=\"search\"\n        :debounce=\"300\"\n      >\n        <template #prefix>\n          <FeatherIcon name=\"search\" class=\"h-4 text-ink-gray-5\" />\n        </template>\n      </TextInput>\n    </div>\n    <div\n      class=\"flex justify-between items-center text-base text-ink-gray-5 mx-2\"\n    >\n      <div>All articles</div>\n      <Button variant=\"ghost\" @click=\"openDocs\">\n        <FeatherIcon name=\"arrow-up-right\" class=\"h-4 text-ink-gray-5\" />\n      </Button>\n    </div>\n    <div class=\"flex flex-col gap-1.5 overflow-y-auto\">\n      <div\n        v-for=\"a in parsedArticles\"\n        :key=\"a.title\"\n        class=\"flex flex-col gap-1.5\"\n      >\n        <div\n          class=\"flex items-center justify-between p-1.5 hover:bg-surface-gray-1 rounded cursor-pointer\"\n          @click=\"a.opened = !a.opened\"\n        >\n          <div class=\"flex items-center gap-2\">\n            <FeatherIcon\n              :name=\"a.opened ? 'chevron-down' : 'chevron-right'\"\n              class=\"h-4 text-ink-gray-5\"\n            />\n            <div class=\"text-base text-ink-gray-8\">{{ a.title }}</div>\n          </div>\n        </div>\n        <div v-show=\"a.opened\" class=\"flex flex-col gap-1.5 ml-5\">\n          <div\n            v-for=\"subArticle in a.subArticles\"\n            :key=\"subArticle.name\"\n            class=\"group flex items-center justify-between gap-2 p-1.5 hover:bg-surface-gray-1 rounded cursor-pointer\"\n            @click=\"() => openDoc(subArticle.name)\"\n          >\n            <div class=\"flex items-center gap-2\">\n              <FeatherIcon name=\"file-text\" class=\"h-4 text-ink-gray-5\" />\n              <div class=\"text-base text-ink-gray-8\">\n                {{ subArticle.title }}\n              </div>\n            </div>\n            <FeatherIcon\n              name=\"arrow-up-right\"\n              class=\"h-4 hidden group-hover:flex text-ink-gray-5\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport Button from '../../src/components/Button/Button.vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\nimport TextInput from '../../src/components/TextInput/TextInput.vue'\nimport { ref, computed, onMounted } from 'vue'\n\nconst props = defineProps({\n  docsLink: {\n    type: String,\n    default: 'https://docs.frappe.io/crm',\n  },\n})\n\nconst searchInput = ref(null)\nconst search = ref('')\nconst articles = defineModel()\n\nconst parsedArticles = computed(() => {\n  if (!search.value) return articles.value\n\n  return articles.value.filter((a) => {\n    const filteredSubArticles = a.subArticles.filter((subArticle) => {\n      return subArticle.title.toLowerCase().includes(search.value.toLowerCase())\n    })\n\n    if (\n      a.title.toLowerCase().includes(search.value.toLowerCase()) ||\n      filteredSubArticles.length > 0\n    ) {\n      return {\n        ...a,\n        subArticles: filteredSubArticles,\n      }\n    }\n\n    return false\n  })\n})\n\nfunction openDocs() {\n  window.open(props.docsLink, '_blank')\n}\n\nfunction openDoc(name) {\n  window.open(`${props.docsLink}/${name}`, '_blank')\n}\n\nonMounted(() => {\n  searchInput.value?.el?.focus()\n})\n</script>\n","import { ref } from 'vue'\n\nexport const showHelpCenter = ref(false)\n","<template>\n  <div\n    v-show=\"show\"\n    class=\"fixed z-50 right-0 w-80 h-[calc(100%_-_80px)] text-ink-gray-9 m-5 mt-[62px] p-3 flex gap-2 flex-col justify-between rounded-lg bg-surface-modal shadow-2xl\"\n    :class=\"{ 'top-[calc(100%_-_120px)] border': minimize }\"\n    @click.stop\n  >\n    <div class=\"flex items-center justify-between px-2 py-1.5\">\n      <div class=\"text-base font-medium\">\n        {{ headingTitle }}\n      </div>\n      <div class=\"flex gap-1\">\n        <Dropdown v-if=\"options.length\" :options=\"options\">\n          <Button variant=\"ghost\" icon=\"more-horizontal\" />\n        </Dropdown>\n        <Button @click=\"minimize = !minimize\" variant=\"ghost\">\n          <component\n            :is=\"minimize ? MaximizeIcon : MinimizeIcon\"\n            class=\"h-3.5\"\n          />\n        </Button>\n        <Button variant=\"ghost\" @click=\"show = false\">\n          <FeatherIcon name=\"x\" class=\"h-3.5\" />\n        </Button>\n      </div>\n    </div>\n    <div class=\"h-full overflow-hidden flex flex-col\">\n      <OnboardingSteps\n        v-if=\"!isOnboardingStepsCompleted && !showHelpCenter\"\n        :title=\"title\"\n        :logo=\"logo\"\n        :afterSkip=\"afterSkip\"\n        :afterSkipAll=\"afterSkipAll\"\n        :afterReset=\"afterReset\"\n        :afterResetAll=\"afterResetAll\"\n        :appName=\"appName\"\n      />\n      <HelpCenter\n        v-else-if=\"showHelpCenter\"\n        v-model=\"articles\"\n        :docsLink=\"docsLink\"\n      />\n    </div>\n    <div v-for=\"item in footerItems\" class=\"flex flex-col gap-1.5\">\n      <div\n        class=\"w-full flex gap-2 items-center hover:bg-surface-gray-1 text-ink-gray-8 rounded px-2 py-1.5 cursor-pointer\"\n        @click=\"item.onClick\"\n      >\n        <component :is=\"item.icon\" class=\"h-4\" />\n        <div class=\"text-base\">{{ item.label }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport Dropdown from '../../src/components/Dropdown/Dropdown.vue'\nimport Button from '../../src/components/Button/Button.vue'\nimport StepsIcon from '../../icons/StepsIcon.vue'\nimport MinimizeIcon from '../../icons/MinimizeIcon.vue'\nimport MaximizeIcon from '../../icons/MaximizeIcon.vue'\nimport HelpIcon from '../../icons/HelpIcon.vue'\nimport OnboardingSteps from '../Onboarding/OnboardingSteps.vue'\nimport HelpCenter from '../HelpCenter/HelpCenter.vue'\nimport { useOnboarding } from '../Onboarding/onboarding'\nimport { showHelpCenter } from '../HelpCenter/helpCenter'\nimport { minimize } from '../Help/help'\nimport { onMounted, computed } from 'vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\n\nconst props = defineProps({\n  appName: {\n    type: String,\n    default: 'frappecrm',\n  },\n  title: {\n    type: String,\n    default: 'Frappe CRM',\n  },\n  logo: {\n    type: Object,\n    required: true,\n  },\n  afterSkip: {\n    type: Function,\n    default: () => {},\n  },\n  afterSkipAll: {\n    type: Function,\n    default: () => {},\n  },\n  afterReset: {\n    type: Function,\n    default: () => {},\n  },\n  afterResetAll: {\n    type: Function,\n    default: () => {},\n  },\n  docsLink: {\n    type: String,\n    default: 'https://docs.frappe.io/crm',\n  },\n})\n\nconst { syncStatus, resetAll, isOnboardingStepsCompleted } = useOnboarding(\n  props.appName,\n)\n\nconst show = defineModel()\nconst articles = defineModel('articles')\n\nconst headingTitle = computed(() => {\n  if (!isOnboardingStepsCompleted.value && !showHelpCenter.value) {\n    return 'Getting started'\n  } else if (showHelpCenter.value) {\n    return 'Help center'\n  }\n})\n\nconst options = computed(() => {\n  let items = [\n    {\n      icon: StepsIcon,\n      label: 'Reset onboarding steps',\n      onClick: resetOnboardingSteps,\n      condition: () => showHelpCenter.value && isOnboardingStepsCompleted.value,\n    },\n  ]\n\n  return items.filter((item) => item.condition())\n})\n\nconst footerItems = computed(() => {\n  let items = [\n    {\n      icon: HelpIcon,\n      label: 'Help centre',\n      onClick: () => {\n        syncStatus()\n        showHelpCenter.value = true\n      },\n      condition: !isOnboardingStepsCompleted.value && !showHelpCenter.value,\n    },\n    {\n      icon: StepsIcon,\n      label: 'Getting started',\n      onClick: () => (showHelpCenter.value = false),\n      condition: showHelpCenter.value && !isOnboardingStepsCompleted.value,\n    },\n  ]\n\n  return items.filter((item) => item.condition)\n})\n\nfunction resetOnboardingSteps() {\n  resetAll()\n  isOnboardingStepsCompleted.value = false\n  showHelpCenter.value = false\n}\n\nonMounted(() => {\n  if (isOnboardingStepsCompleted.value) {\n    showHelpCenter.value = true\n  }\n})\n</script>\n","<template>\n  <div\n    v-if=\"!isSidebarCollapsed\"\n    class=\"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base\"\n  >\n    <div\n      v-if=\"stepsCompleted != totalSteps\"\n      class=\"inline-flex text-ink-gray-9 gap-2\"\n    >\n      <StepsIcon class=\"h-4 my-0.5 shrink-0\" />\n      <div class=\"flex flex-col text-p-sm gap-0.5\">\n        <div class=\"font-medium\">\n          {{ 'Getting started' }}\n        </div>\n        <div class=\"text-ink-gray-7\">\n          {{ `${stepsCompleted}/${totalSteps} steps` }}\n        </div>\n      </div>\n    </div>\n    <div v-else class=\"flex flex-col gap-1\">\n      <div class=\"flex items-center justify-between gap-1\">\n        <div class=\"flex items-center gap-2 shrink-0\">\n          <StepsIcon class=\"h-4 my-0.5\" />\n          <div class=\"text-ink-gray-9 font-medium\">\n            {{ 'You are all set' }}\n          </div>\n        </div>\n        <FeatherIcon\n          name=\"x\"\n          class=\"h-4 cursor-pointer\"\n          @click=\"\n            () => {\n              showHelpCenter = true\n              isOnboardingStepsCompleted = true\n            }\n          \"\n        />\n      </div>\n      <div class=\"text-p-sm text-ink-gray-7\">\n        {{ 'All steps are completed successfully' }}\n      </div>\n    </div>\n    <Button\n      v-if=\"stepsCompleted != totalSteps\"\n      :label=\"stepsCompleted == 0 ? 'Start now' : 'Continue'\"\n      theme=\"blue\"\n      @click=\"openOnboarding\"\n    >\n      <template #prefix>\n        <FeatherIcon name=\"chevrons-right\" class=\"size-4\" />\n      </template>\n    </Button>\n  </div>\n  <Button v-else-if=\"stepsCompleted != totalSteps\" @click=\"openOnboarding\">\n    <StepsIcon class=\"h-4 my-0.5 shrink-0\" />\n  </Button>\n</template>\n<script setup>\nimport StepsIcon from '../../icons/StepsIcon.vue'\nimport Button from '../../src/components/Button/Button.vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\nimport { useOnboarding } from './onboarding'\nimport { showHelpCenter } from '../HelpCenter/helpCenter'\nimport { showHelpModal, minimize } from '../Help/help'\n\nconst props = defineProps({\n  isSidebarCollapsed: {\n    type: Boolean,\n    default: false,\n  },\n  appName: {\n    type: String,\n    default: 'frappecrm',\n  },\n})\n\nconst { stepsCompleted, totalSteps, isOnboardingStepsCompleted } =\n  useOnboarding(props.appName)\n\nconst openOnboarding = () => {\n  minimize.value = false\n  showHelpModal.value = true\n}\n</script>\n","<template>\n  <Dialog v-model=\"show\" :options=\"options\">\n    <template #boday-header>\n      <slot name=\"body-header\"></slot>\n    </template>\n    <template #body-content>\n      <slot>\n        <div class=\"flex flex-col gap-2 text-ink-gray-9 text-base\">\n          <div v-if=\"currentStep.message\">{{ currentStep.message }}</div>\n          <video\n            v-if=\"currentStep.videoURL\"\n            class=\"w-full rounded\"\n            controls\n            autoplay\n            muted\n          >\n            <source :src=\"currentStep.videoURL\" type=\"video/mp4\" />\n            Your browser does not support the video tag.\n          </video>\n        </div>\n      </slot>\n    </template>\n    <template #actions>\n      <slot name=\"actions\"></slot>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport { Dialog } from '../../src/components/Dialog'\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  currentStep: {\n    type: Object,\n    default: {\n      title: 'Title',\n      message: 'Message',\n      videoURL: '',\n      buttonLabel: 'Button Label',\n      onClick: () => {},\n    },\n  },\n  dialogOptions: {\n    type: Object,\n    default: () => ({}),\n  },\n})\n\nconst show = defineModel()\n\nconst options = computed(() => {\n  if (props.dialogOptions && Object.keys(props.dialogOptions).length) {\n    return props.dialogOptions\n  }\n\n  return {\n    title: props.currentStep.title,\n    size: '2xl',\n    actions: [\n      {\n        label: props.currentStep.buttonLabel,\n        variant: 'solid',\n        onClick: props.currentStep.onClick,\n      },\n    ],\n  }\n})\n</script>\n","<template>\n  <svg\n    width=\"17\"\n    height=\"16\"\n    viewBox=\"0 0 17 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M6.2641 1C5.5758 1 4.97583 1.46845 4.80889 2.1362L3.57555 7.06953C3.33887 8.01625 4.05491 8.93333 5.03077 8.93333H7.50682L6.72168 14.4293C6.68838 14.6624 6.82229 14.8872 7.04319 14.9689C7.26408 15.0507 7.51204 14.9671 7.63849 14.7684L13.2161 6.00354C13.6398 5.33782 13.1616 4.46667 12.3725 4.46667H9.59038L10.3017 1.62127C10.3391 1.4719 10.3055 1.31365 10.2108 1.19229C10.116 1.07094 9.97063 1 9.81666 1H6.2641ZM5.77903 2.37873C5.83468 2.15615 6.03467 2 6.2641 2H9.17627L8.46492 4.8454C8.42758 4.99477 8.46114 5.15302 8.55589 5.27437C8.65064 5.39573 8.79602 5.46667 8.94999 5.46667H12.3725L8.0395 12.2757L8.5783 8.50404C8.5988 8.36056 8.55602 8.21523 8.46105 8.10573C8.36608 7.99623 8.22827 7.93333 8.08332 7.93333H5.03077C4.70548 7.93333 4.4668 7.62764 4.5457 7.31207L5.77903 2.37873Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div\n    v-if=\"!isSidebarCollapsed && showBanner\"\n    class=\"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base\"\n  >\n    <div class=\"flex flex-col gap-1\">\n      <div class=\"inline-flex text-ink-gray-9 gap-2 items-center font-medium\">\n        <FeatherIcon class=\"h-4\" name=\"info\" />\n        {{ trialTitle }}\n      </div>\n      <div class=\"text-ink-gray-7 text-p-sm\">\n        {{ trialMessage }}\n      </div>\n    </div>\n    <Button :label=\"'Upgrade plan'\" theme=\"blue\" @click=\"upgradePlan\">\n      <template #prefix>\n        <LightningIcon class=\"size-4\" />\n      </template>\n    </Button>\n  </div>\n  <Button v-else-if=\"isSidebarCollapsed && showBanner\" @click=\"upgradePlan\">\n    <LightningIcon class=\"h-4 my-0.5 shrink-0\" />\n  </Button>\n</template>\n<script setup>\nimport LightningIcon from '../../icons/LightningIcon.vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\nimport { Button } from '../../src/components/Button'\nimport { createResource } from '../../src/resources'\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  isSidebarCollapsed: {\n    type: Boolean,\n    default: false,\n  },\n  afterUpgrade: {\n    type: Function,\n    default: () => {},\n  },\n})\n\nconst trialEndDays = ref(0)\nconst showBanner = ref(false)\nconst baseEndpoint = ref('https://frappecloud.com')\nconst siteName = ref('')\n\nconst trialTitle = computed(() => {\n  return trialEndDays.value > 1\n    ? 'Trial ends in ' + trialEndDays.value + ' days'\n    : 'Trial ends tomorrow'\n})\n\nconst trialMessage = 'Upgrade to a paid plan for uninterrupted services'\n\ncreateResource({\n  url: 'frappe.integrations.frappe_providers.frappecloud_billing.current_site_info',\n  cache: 'current_site_info_data',\n  auto: true,\n  onSuccess: (data) => {\n    trialEndDays.value = calculateTrialEndDays(data.trial_end_date)\n    baseEndpoint.value = data.base_url\n    siteName.value = data.site_name\n    showBanner.value = data.plan.is_trial_plan && trialEndDays.value > 0\n  },\n})\n\nfunction calculateTrialEndDays(trialEndDate) {\n  if (!trialEndDate) return 0\n\n  trialEndDate = new Date(trialEndDate)\n  const today = new Date()\n  const diffTime = trialEndDate - today\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n  return diffDays\n}\n\nfunction upgradePlan() {\n  window.open(\n    `${baseEndpoint.value}/dashboard/sites/${siteName.value}`,\n    '_blank',\n  )\n  props.afterUpgrade?.()\n}\n</script>\n","<template>\n  <div\n    class=\"flex w-full min-w-0 items-center rounded p-2 text-base font-medium text-gray-800\"\n    :class=\"{ 'bg-gray-200': active }\"\n  >\n    <component\n      :is=\"item.icon\"\n      v-if=\"item.icon\"\n      class=\"mr-3 h-4 w-4 text-gray-700\"\n    />\n    <span class=\"overflow-hidden text-ellipsis whitespace-nowrap\">\n      {{ item.title }}&nbsp;\n    </span>\n    <span\n      v-if=\"item.modified\"\n      class=\"ml-auto whitespace-nowrap pl-2 text-gray-600\"\n    >\n      {{ dayjs(item.modified).fromNow(true) }}\n    </span>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { dayjs } from \"@/dayjs\";\n\ndefineProps({\n  item: {\n    type: Object,\n    required: true,\n  },\n  active: {\n    type: Boolean,\n    required: true,\n  },\n});\n</script>\n","<template>\n  <Dialog v-model=\"show\" :options=\"{ size: 'xl', position: 'top' }\">\n    <template #body>\n      <div>\n        <Combobox nullable @update:model-value=\"onSelection\">\n          <div class=\"relative\">\n            <div class=\"pl-4.5 absolute inset-y-0 left-0 flex items-center\">\n              <LucideSearch class=\"h-4 w-4\" />\n            </div>\n            <ComboboxInput\n              :placeholder=\"__('Search tickets, emails, comments, or #234 to navigate to ticket')\"\n              class=\"pl-11.5 pr-4.5 w-full border-none bg-transparent py-3 text-base text-gray-800 placeholder:text-gray-500 focus:ring-0\"\n              autocomplete=\"off\"\n              @input=\"onInput\"\n            />\n          </div>\n          <ComboboxOptions\n            class=\"max-h-96 overflow-auto border-t border-gray-100\"\n            static\n            :hold=\"true\"\n          >\n            <div\n              v-for=\"group in groupedSearchResults\"\n              :key=\"group.title\"\n              class=\"mt-4.5 mb-2 first:mt-3\"\n            >\n              <div\n                v-if=\"!group.hideTitle\"\n                class=\"px-4.5 mb-2.5 text-base text-gray-600\"\n              >\n                {{ group.title }}\n              </div>\n              <ComboboxOption\n                v-for=\"item in group.items\"\n                :key=\"`${item.doctype}:${item.name}`\"\n                v-slot=\"{ active }\"\n                :value=\"item\"\n                class=\"px-2.5\"\n                :disabled=\"item.disabled\"\n              >\n                <component\n                  :is=\"group.component\"\n                  :item=\"item\"\n                  :active=\"active\"\n                />\n              </ComboboxOption>\n            </div>\n          </ComboboxOptions>\n        </Combobox>\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport { isCustomerPortal } from \"@/utils\";\nimport {\n  Combobox,\n  ComboboxInput,\n  ComboboxOption,\n  ComboboxOptions,\n} from \"@headlessui/vue\";\nimport { useDevice } from \"@/composables\";\nimport { useShortcut } from \"@/composables/shortcuts\";\n\nimport { Dialog } from \"frappe-ui\";\nimport { computed, h, onBeforeUnmount, onMounted, ref, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { __ } from \"@/translation\";\n\nimport LucideBookOpen from \"~icons/lucide/book-open\";\nimport { showCommentBox, showEmailBox } from \"@/pages/ticket/modalStates\";\nimport LucideTicket from \"~icons/lucide/ticket\";\nimport CPGroup from \"./CPGroup.vue\";\nconst router = useRouter();\nconst { isMac } = useDevice();\n\n// Reactive data\nconst show = defineModel();\nconst query = ref(\"\");\n\n// Computed properties\nconst navigationItems = computed(() => {\n  const items = [];\n  if (query.value.startsWith(\"#\")) {\n    items.push({\n      title: __(\"Go to Ticket #{0}\", [query.value.slice(1)]),\n      icon: () => h(LucideTicket),\n      route: {\n        name: \"TicketAgent\",\n        params: { ticketId: query.value.slice(1) },\n      },\n    });\n  } else {\n    items.push({\n      title: __(\"Tickets\"),\n      icon: () => h(LucideTicket),\n      route: { name: \"TicketsAgent\" },\n    });\n  }\n  items.push({\n    title: __(\"Knowledge Base\"),\n    icon: () => h(LucideBookOpen),\n    route: {\n      name: isCustomerPortal.value\n        ? \"CustomerKnowledgeBase\"\n        : \"AgentKnowledgeBase\",\n    },\n  });\n\n  return {\n    title: __(\"Jump to\"),\n    component: h(CPGroup),\n    items,\n  };\n});\n\nconst fullSearchItem = computed(() => ({\n  title: __(\"Search\"),\n  hideTitle: true,\n  component: h(CPGroup),\n  items: [\n    {\n      title: __('Search for \"{0}\"', [query.value]),\n      icon: () => h(LucideFileSearch),\n      route: { name: \"SearchAgent\", query: { q: query.value } },\n    },\n  ],\n}));\n\nconst groupedSearchResults = computed(() => {\n  let results = [navigationItems.value];\n\n  // Add search option if there's a query and we're not in customer portal\n  if (query.value.length > 2 && !isCustomerPortal.value) {\n    results.push(fullSearchItem.value);\n  }\n\n  return results;\n});\n\n// Methods\nconst onInput = (e) => {\n  query.value = e.target.value;\n};\n\nconst onSelection = (value) => {\n  if (value) {\n    router.push(value.route);\n    hideCommandPalette();\n  }\n};\n\nconst addKeyboardShortcut = () => {\n  useShortcut({ key: \"k\", meta: true }, toggleCommandPalette);\n};\n\nfunction hideCommandPalette() {\n  show.value = false;\n}\n\nfunction toggleCommandPalette() {\n  show.value = !show.value;\n}\n\n// Watchers\nwatch(show, (value) => {\n  if (value) {\n    query.value = \"\";\n  }\n});\n\n// Lifecycle hooks\nonMounted(() => {\n  if (isCustomerPortal.value) return;\n  addKeyboardShortcut();\n});\n\nonBeforeUnmount(() => {\n  hideCommandPalette();\n});\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M3 8.5C4.10457 8.5 5 9.39543 5 10.5C5 11.4316 4.3622 12.2113 3.5 12.4336V14C3.5 14.2761 3.27614 14.5 3 14.5C2.72386 14.5 2.5 14.2761 2.5 14V12.4336C1.6378 12.2113 1 11.4316 1 10.5C1 9.39543 1.89543 8.5 3 8.5ZM8 9.5C8.27614 9.5 8.5 9.72386 8.5 10V14C8.5 14.2761 8.27614 14.5 8 14.5C7.72386 14.5 7.5 14.2761 7.5 14V10C7.5 9.72386 7.72386 9.5 8 9.5ZM13 8.5C14.1046 8.5 15 9.39543 15 10.5C15 11.4316 14.3622 12.2113 13.5 12.4336V14C13.5 14.2761 13.2761 14.5 13 14.5C12.7239 14.5 12.5 14.2761 12.5 14V12.4336C11.6378 12.2113 11 11.4316 11 10.5C11 9.39543 11.8954 8.5 13 8.5ZM3 9.5C2.44772 9.5 2 9.94772 2 10.5C2 11.0523 2.44772 11.5 3 11.5C3.55228 11.5 4 11.0523 4 10.5C4 9.94772 3.55228 9.5 3 9.5ZM13 9.5C12.4477 9.5 12 9.94772 12 10.5C12 11.0523 12.4477 11.5 13 11.5C13.5523 11.5 14 11.0523 14 10.5C14 9.94772 13.5523 9.5 13 9.5ZM8 2C8.27614 2 8.5 2.22386 8.5 2.5V4.5C8.5 4.52163 8.49583 4.54257 8.49316 4.56348C9.35898 4.7833 10 5.56581 10 6.5C10 7.60457 9.10457 8.5 8 8.5C6.89543 8.5 6 7.60457 6 6.5C6 5.56614 6.64051 4.78362 7.50586 4.56348C7.50321 4.54261 7.5 4.52158 7.5 4.5V2.5C7.5 2.22386 7.72386 2 8 2ZM8 5.5C7.44772 5.5 7 5.94772 7 6.5C7 7.05228 7.44772 7.5 8 7.5C8.55228 7.5 9 7.05228 9 6.5C9 5.94772 8.55228 5.5 8 5.5ZM3 2C3.27614 2 3.5 2.22386 3.5 2.5V6.5C3.5 6.77614 3.27614 7 3 7C2.72386 7 2.5 6.77614 2.5 6.5V2.5C2.5 2.22386 2.72386 2 3 2ZM13 2C13.2761 2 13.5 2.22386 13.5 2.5V6.5C13.5 6.77614 13.2761 7 13 7C12.7239 7 12.5 6.77614 12.5 6.5V2.5C12.5 2.22386 12.7239 2 13 2Z\"\n      fill=\"#525252\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"32\"\n    height=\"32\"\n    viewBox=\"0 0 32 32\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <rect\n      x=\"0.75\"\n      y=\"0.75\"\n      width=\"30.5\"\n      height=\"30.5\"\n      rx=\"6.25\"\n      stroke=\"currentColor\"\n      stroke-width=\"1.5\"\n    />\n    <path\n      d=\"M24.5011 14.1124C23.3954 12.4873 21.532 11.5477 19.594 11.6747C18.7616 10.1384 17.2211 9.12267 15.4198 9.0084C14.1651 8.93222 12.8979 9.3766 11.9165 10.24C11.2456 10.8367 10.7611 11.5223 10.463 12.2968C10.289 12.7539 9.89151 13.0459 9.46912 13.0459H6.5V15.5852H9.46912C10.9226 15.5852 12.2271 14.6584 12.7737 13.2237C12.9227 12.8301 13.1712 12.4873 13.5439 12.1571C14.0284 11.7255 14.662 11.4969 15.2583 11.535C16.1528 11.5985 16.7863 12.0175 17.1839 12.538C17.6063 13.0205 17.8423 13.7696 17.979 14.5187C18.774 14.2902 19.6437 14.0997 20.476 14.2394C21.1593 14.3536 21.7929 14.7218 22.2525 15.2678C22.327 15.3567 22.4016 15.4456 22.4637 15.5471C23.06 16.4232 23.1718 17.5024 22.7743 18.5689C22.414 19.5592 21.0847 20.4607 19.9791 20.4607H11.3326C10.1524 20.4607 9.18339 19.5592 9.03432 18.4038H6.54969C6.71119 20.9686 8.78585 23 11.3326 23H19.9915C22.1283 23 24.3769 21.451 25.1098 19.4704C25.7931 17.6167 25.5695 15.6614 24.5135 14.0997L24.5011 14.1124Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10 11C12.2091 11 14 9.20914 14 7C14 4.79086 12.2091 3 10 3C7.79086 3 6 4.79086 6 7C6 9.20914 7.79086 11 10 11Z\"\n      stroke=\"currentColor\"\n      stroke-width=\"1.5\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M10.3 15H7C5.93913 15 4.92172 15.4214 4.17157 16.1716C3.42143 16.9217 3 17.9391 3 19V21H11.5\"\n      stroke=\"currentColor\"\n      stroke-width=\"1.5\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M22.166 13.834H14.8327C14.3264 13.834 13.916 14.2444 13.916 14.7507V20.2507C13.916 20.7569 14.3264 21.1673 14.8327 21.1673H22.166C22.6723 21.1673 23.0827 20.7569 23.0827 20.2507V14.7507C23.0827 14.2444 22.6723 13.834 22.166 13.834Z\"\n      stroke=\"currentColor\"\n      stroke-width=\"1.5\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M23.0827 15.209L18.9714 17.8215C18.8299 17.9101 18.6663 17.9572 18.4993 17.9572C18.3324 17.9572 18.1688 17.9101 18.0273 17.8215L13.916 15.209\"\n      stroke=\"currentColor\"\n      stroke-width=\"1.5\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <g clip-path=\"url(#clip0_368_1881)\">\n      <path\n        d=\"M16.667 5H21.3337\"\n        stroke=\"currentColor\"\n        stroke-width=\"1.5\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n      />\n      <path\n        d=\"M19 2.66699V7.33366\"\n        stroke=\"currentColor\"\n        stroke-width=\"1.5\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_368_1881\">\n        <rect width=\"8\" height=\"8\" fill=\"white\" transform=\"translate(15 1)\" />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n","<template>\n  <span\n    v-if=\"notificationStore.visible\"\n    ref=\"target\"\n    class=\"fixed z-10 h-screen overflow-auto bg-white\"\n    :style=\"{\n      'box-shadow': '8px 0px 8px rgba(0, 0, 0, 0.1)',\n      'max-width': '350px',\n      'min-width': '350px',\n      left: sidebarStore.width,\n    }\"\n  >\n    <div\n      class=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5\"\n    >\n      <span class=\"text-lg font-medium\">Notifications</span>\n      <div>\n        <Button\n          theme=\"blue\"\n          variant=\"ghost\"\n          @click=\"() => notificationStore.clear.submit()\"\n          v-if=\"notificationStore.data.length\"\n        >\n          <template #icon>\n            <LucideCheckCheck class=\"h-4 w-4\" />\n          </template>\n        </Button>\n        <Button\n          theme=\"gray\"\n          variant=\"ghost\"\n          @click=\"() => notificationStore.toggle()\"\n        >\n          <template #icon>\n            <LucideX class=\"h-4 w-4\" />\n          </template>\n        </Button>\n      </div>\n    </div>\n    <div class=\"divide-y text-base\" v-if=\"notificationStore.data.length\">\n      <RouterLink\n        v-for=\"n in notificationStore.data\"\n        :key=\"n.name\"\n        class=\"flex cursor-pointer items-start gap-3.5 px-5 py-2.5 hover:bg-gray-100\"\n        :to=\"getRoute(n)\"\n        @click=\"\n          () => {\n            handleNotificationClick(n);\n          }\n        \"\n      >\n        <UserAvatar :name=\"n.user_from\" />\n        <span>\n          <div class=\"mb-2 leading-5\">\n            <span class=\"space-x-1 text-gray-700\">\n              <span class=\"font-medium text-gray-900\">{{ n.user_from }}</span>\n              <span v-if=\"n.notification_type === 'Mention'\"\n                >mentioned you in ticket</span\n              >\n              <span v-if=\"n.notification_type === 'Assignment'\"\n                >assigned you a ticket</span\n              >\n              <span v-if=\"n.notification_type === 'Reaction'\"\n                >has reopened the ticket</span\n              >\n              <span class=\"font-medium text-gray-900\">{{\n                n.reference_ticket\n              }}</span>\n            </span>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <div class=\"text-sm text-gray-600\">\n              {{ dayjs.tz(n.creation).fromNow() }}\n            </div>\n            <div v-if=\"!n.read\" class=\"h-1.5 w-1.5 rounded-full bg-blue-400\" />\n          </div>\n        </span>\n      </RouterLink>\n    </div>\n    <div\n      class=\"p-5 text-center text-gray-500 flex flex-col items-center justify-center gap-2 mt-20\"\n      v-else\n    >\n      <LucideBell class=\"size-6\" />\n      <p class=\"text-base text-ink-gray-8\">You are all caught up!</p>\n    </div>\n  </span>\n</template>\n\n<script setup lang=\"ts\">\nimport { UserAvatar } from \"@/components\";\nimport { dayjs } from \"@/dayjs\";\nimport { useNotificationStore } from \"@/stores/notification\";\nimport { useSidebarStore } from \"@/stores/sidebar\";\nimport { Notification } from \"@/types\";\nimport { onClickOutside } from \"@vueuse/core\";\nimport { ref } from \"vue\";\n\nconst notificationStore = useNotificationStore();\nconst sidebarStore = useSidebarStore();\nconst target = ref(null);\nonClickOutside(\n  target,\n  () => {\n    if (notificationStore.visible) {\n      notificationStore.toggle();\n    }\n  },\n  {\n    ignore: [\"#notifications-btn\"],\n  }\n);\n\nfunction handleNotificationClick(n: Notification) {\n  notificationStore.toggle();\n  if (n.read) return;\n  notificationStore.read(n.reference_ticket);\n}\n\nfunction getRoute(n: Notification) {\n  switch (n.notification_type) {\n    case \"Mention\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n        hash: \"#\" + n.reference_comment,\n      };\n    case \"Assignment\":\n    case \"Reaction\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n      };\n  }\n}\n</script>\n","<template>\n  <div class=\"flex border-b pr-5\">\n    <div id=\"app-header\" class=\"flex-1 w-full\"></div>\n    <div class=\"flex items-start justify-center\">\n      <CallUI :userEmail=\"user\" />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport CallUI from \"@/components/telephony/CallUI.vue\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { useTelephonyStore } from \"@/stores/telephony\";\nimport { onMounted } from \"vue\";\n\nconst { user } = useAuthStore();\n\nconst telephonyStore = useTelephonyStore();\n\nonMounted(() => {\n  telephonyStore.fetchCallIntegrationStatus();\n});\n</script>\n","<template>\n  <Dialog\n    v-model=\"open\"\n    :options=\"{ title: __('Keyboard Shortcuts'), size: '4xl' }\"\n  >\n    <template #body-content>\n      <div class=\"w-full grid grid-cols-2 gap-10 py-1 shortcutsModal\">\n        <div\n          v-for=\"group in shortcutGroups\"\n          :key=\"group.title\"\n          class=\"pb-4\"\n          :class=\"!group.hideBorder && 'border-b border-outline-gray-2'\"\n        >\n          <h2 class=\"text-lg font-semibold text-ink-gray-9 mb-4\">\n            {{ group.title }}\n          </h2>\n          <ul class=\"space-y-2\">\n            <li\n              v-for=\"(shortcut, index) in group.shortcuts\"\n              :key=\"index\"\n              class=\"flex items-start justify-between gap-4\"\n            >\n              <div class=\"text-ink-gray-7 text-base flex-1\">\n                {{ shortcut.description }}\n              </div>\n              <div class=\"flex space-x-1 gap-1 justify-end\">\n                <span\n                  v-for=\"(key, kIndex) in shortcut.keys\"\n                  :key=\"kIndex\"\n                  class=\"bg-surface-gray-2 border border-outline-gray-2 text-xs rounded-sm text-ink-gray-8 shadow-sm min-w-5 h-5 flex items-center justify-center\"\n                  :class=\"[\n                    ![metaIcon, shiftKey].includes(key) && 'w-5 ',\n                    key === shiftKey && '!px-2',\n                  ]\"\n                >\n                  {{ key }}\n                </span>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { useDevice } from \"@/composables/device\";\nimport { useShortcut } from \"@/composables/shortcuts\";\nimport { isCustomerPortal } from \"@/utils\";\nimport { Dialog } from \"frappe-ui\";\nimport { computed, onMounted } from \"vue\";\nimport { __ } from \"@/translation\";\n\nconst props = defineProps({\n  modelValue: Boolean,\n});\nconst emit = defineEmits([\"update:modelValue\"]);\nconst open = defineModel<boolean>();\n\nconst { metaIcon } = useDevice();\n\n// const shiftKey = \"\";\nconst shiftKey = \"Shift\";\n\ninterface Shortcut {\n  keys: string[];\n  description: string;\n}\n\ninterface ShortcutGroup {\n  title: string;\n  shortcuts: Shortcut[];\n  hideBorder?: boolean;\n}\n\nconst shortcutGroups = computed<ShortcutGroup[]>(() => [\n  {\n    title: __(\"General\"),\n    shortcuts: [\n      { keys: [metaIcon, \"K\"], description: __(\"Open command palette\") },\n      { keys: [metaIcon, \",\"], description: __(\"Open settings\") },\n      { keys: [metaIcon, \"/\"], description: __(\"Show keyboard shortcuts\") },\n      { keys: [metaIcon, \"H\"], description: __(\"Open help\") },\n    ],\n  },\n  {\n    title: __(\"Ticket Management\"),\n    shortcuts: [\n      { keys: [\"T\"], description: __(\"Change ticket type\") },\n      { keys: [\"P\"], description: __(\"Change priority\") },\n      { keys: [shiftKey, \"T\"], description: __(\"Change team\") },\n      { keys: [\"A\"], description: __(\"Assign ticket\") },\n      { keys: [\"S\"], description: __(\"Change status\") },\n      { keys: [metaIcon, \".\"], description: __(\"Copy ticket id\") },\n      { keys: [metaIcon, shiftKey, \".\"], description: __(\"Copy ticket URL\") },\n    ],\n  },\n  {\n    title: __(\"Communication\"),\n    shortcuts: [\n      { keys: [\"R\"], description: __(\"Open reply box\") },\n      { keys: [\"C\"], description: __(\"Open comment box\") },\n    ],\n    hideBorder: true,\n  },\n  {\n    title: __(\"Navigation\"),\n    shortcuts: [\n      { keys: [shiftKey, \">\"], description: __(\"Next ticket\") },\n      { keys: [shiftKey, \"<\"], description: __(\"Previous ticket\") },\n    ],\n    hideBorder: true,\n  },\n]);\n\nonMounted(() => {\n  if (isCustomerPortal.value) return;\n  useShortcut({ key: \"/\", meta: true }, () => {\n    open.value = !open.value;\n  });\n});\n</script>\n<style>\n/* Hack to remove focus ring from buttons in shortcuts modal */\n.bg-surface-modal:has(.shortcutsModal) button {\n  @apply focus-visible:ring-0;\n}\n</style>\n","<template>\n  <Dialog v-model=\"showDialog\" :options=\"{ title }\" @close=\"closeDialog\">\n    <template #body-content>\n      <div class=\"space-y-4\">\n        <p class=\"text-p-base text-gray-800\" v-if=\"message\" v-html=\"message\" />\n      </div>\n    </template>\n    <template #actions>\n      <Button\n        class=\"w-full\"\n        label=\"Confirm\"\n        variant=\"solid\"\n        :loading=\"isLoading\"\n        @click=\"onConfirm\"\n      />\n    </template>\n  </Dialog>\n</template>\n<script>\nimport { Button, Dialog } from \"frappe-ui\";\n\nexport default {\n  name: \"ConfirmDialog\",\n  props: {\n    title: {\n      type: String,\n    },\n    message: {\n      type: String,\n    },\n    onConfirm: {\n      type: Function,\n      default: null,\n    },\n    onCancel: {\n      type: Function,\n      default: null,\n    },\n  },\n  expose: [\"show\", \"hide\"],\n  components: {\n    Dialog,\n    Button,\n  },\n  data() {\n    return {\n      showDialog: true,\n      isLoading: false,\n    };\n  },\n  methods: {\n    async handleConfirmation() {\n      if (this.isLoading) return;\n      this.isLoading = true;\n      try {\n        if (this.onConfirm) {\n          await this.onConfirm({\n            hideDialog: this.hide,\n          });\n        }\n        this.hide();\n      } catch (error) {\n        console.error(\"Error in confirmation:\", error);\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    show() {\n      this.showDialog = true;\n    },\n    closeDialog() {\n      this.hide();\n      this.onCancel?.();\n    },\n    hide() {\n      this.showDialog = false;\n    },\n  },\n};\n</script>\n","import { isCustomerPortal } from \"@/utils\";\nimport { createListResource, createResource } from \"frappe-ui\";\nimport { reactive, ref, watch } from \"vue\";\n\nconst PAGE_LENGTH = 20;\n\nexport const agents = createListResource({\n  doctype: \"HD Agent\",\n  fields: [\"name\", \"user_image\", \"agent_name\", \"is_active\"],\n  start: 0,\n  pageLength: PAGE_LENGTH,\n  orderBy: \"creation desc\",\n  auto: !isCustomerPortal.value,\n});\n\nexport const activeFilter = ref(\"Active\");\nexport const showNewAgentsDialog = ref(false);\n\nexport const useAgents = () => {\n  const search = ref(\"\");\n  const filters = reactive({});\n  watch(search, (newValue) => {\n    agents.filters = {\n      agent_name: [\"like\", `%${newValue}%`],\n      ...filters,\n    };\n    if (!newValue) {\n      agents.filters = {\n        ...filters,\n      };\n      agents.start = 0;\n      agents.pageLength = PAGE_LENGTH;\n    }\n    agents.reload();\n  });\n  watch(\n    filters,\n    (newVal) => {\n      agents.filters = {\n        ...agents.filters,\n        ...newVal,\n      };\n      agents.start = 0;\n      agents.pageLength = PAGE_LENGTH;\n      agents.reload();\n    },\n    { deep: true }\n  );\n  watch(\n    activeFilter,\n    (newVal) => {\n      if (newVal === \"Active\") {\n        agents.filters = {\n          ...agents.filters,\n          is_active: 1,\n        };\n      } else if (newVal === \"Inactive\") {\n        agents.filters = {\n          ...agents.filters,\n          is_active: 0,\n        };\n      } else {\n        agents.filters = {\n          ...agents.filters,\n          is_active: [\"in\", [0, 1]],\n        };\n      }\n      agents.start = 0;\n      agents.pageLength = PAGE_LENGTH;\n      agents.reload();\n    },\n    { immediate: true }\n  );\n\n  async function updateAgent(agent: string, isActive: boolean | number) {\n    const res = createResource({\n      url: \"frappe.client.set_value\",\n      params: {\n        doctype: \"HD Agent\",\n        name: agent,\n        fieldname: \"is_active\",\n        value: isActive,\n      },\n    });\n    await res.submit();\n  }\n\n  return {\n    search,\n    agents,\n    filters,\n    updateAgent,\n  };\n};\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"28\"\n    height=\"28\"\n    viewBox=\"0 0 28 28\"\n    fill=\"none\"\n  >\n    <g>\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M14 4.26331C15.9848 4.26331 17.5938 5.87228 17.5938 7.85706C17.5938 9.84183 15.9848 11.4508 14 11.4508C12.0152 11.4508 10.4063 9.84183 10.4063 7.85706C10.4063 5.87228 12.0152 4.26331 14 4.26331ZM13.7637 12.4449L14 12.4508C16.4578 12.4508 18.4649 10.5206 18.5879 8.09338L18.5938 7.85706C18.5938 5.39926 16.6636 3.39216 14.2363 3.26917L14 3.26331C11.463 3.26331 9.40627 5.32 9.40627 7.85706L9.41213 8.09338C9.53116 10.4423 11.4147 12.3259 13.7637 12.4449ZM11.999 14.4264L11.8643 14.1383H11.5459C8.15643 14.1385 5.22182 16.4927 4.48635 19.8014L4.32424 20.5319C3.78771 22.9462 5.62447 25.2367 8.09768 25.2369H19.9024C22.3758 25.2369 24.2133 22.9464 23.6768 20.5319L23.5147 19.8014C22.7792 16.4925 19.8438 14.1383 16.4541 14.1383H16.1358L16.001 14.4264L14 18.7067L11.999 14.4264ZM14 20.3883C14.1941 20.3883 14.3709 20.276 14.4531 20.1002L16.7676 15.1461C19.5547 15.2852 21.9272 17.2701 22.5381 20.0192L22.7002 20.7487C23.098 22.5386 21.736 24.2369 19.9024 24.2369H8.09768C6.26422 24.2367 4.90208 22.5385 5.29982 20.7487L5.46193 20.0192C6.07273 17.2706 8.44503 15.2859 11.2315 15.1461L13.5469 20.1002C13.6291 20.276 13.806 20.3882 14 20.3883Z\"\n        fill=\"#525252\"\n      />\n    </g>\n  </svg>\n</template>\n","<template>\n  <div class=\"flex flex-col h-full w-full pb-8\">\n    <div class=\"px-10 py-8\">\n      <div class=\"flex items-start justify-between\">\n        <div class=\"flex flex-col gap-1\">\n          <slot name=\"title\">\n            <h1 class=\"text-lg font-semibold text-ink-gray-8\">\n              {{ title }}\n            </h1>\n          </slot>\n          <slot\n            name=\"description\"\n            v-if=\"Boolean($slots['description']) || Boolean(description)\"\n          >\n            <p class=\"text-p-sm text-gray-700 max-w-md text-ink-gray-6\">\n              {{ description }}\n            </p>\n          </slot>\n        </div>\n        <slot name=\"header-actions\" v-if=\"Boolean($slots['header-actions'])\" />\n      </div>\n      <div class=\"mt-6\" v-if=\"Boolean($slots['header-bottom'])\">\n        <slot name=\"header-bottom\" />\n      </div>\n    </div>\n    <div class=\"px-10 pb-8 overflow-y-auto h-full flex flex-col\">\n      <slot name=\"content\" />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst props = defineProps({\n  title: {\n    type: String,\n  },\n  description: {\n    type: String,\n  },\n});\n</script>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Agents')\"\n    :description=\"__('Add, manage agents and assign roles to them.')\"\n  >\n    <template #header-actions>\n      <Button\n        @click=\"() => setActiveSettingsTab('Invite Agents')\"\n        label=\"New\"\n        variant=\"solid\"\n      >\n        <template #prefix>\n          <LucidePlus class=\"h-4 w-4 stroke-1.5\" />\n        </template>\n      </Button>\n    </template>\n    <template #header-bottom>\n      <div class=\"flex items-center gap-2 justify-between\">\n        <div class=\"relative grow\">\n          <Input\n            :model-value=\"search\"\n            @input=\"search = $event\"\n            :placeholder=\"__('Search')\"\n            type=\"text\"\n            class=\"bg-white hover:bg-white focus:ring-0 border-outline-gray-2\"\n            icon-left=\"search\"\n            debounce=\"300\"\n            inputClass=\"p-4 pr-12\"\n          />\n          <Button\n            v-if=\"search\"\n            icon=\"x\"\n            variant=\"ghost\"\n            @click=\"search = ''\"\n            class=\"absolute right-1 top-1/2 -translate-y-1/2\"\n          />\n        </div>\n        <Dropdown :options=\"dropdownOptions\" placement=\"right\">\n          <template #default=\"{ open }\">\n            <Button\n              :label=\"activeFilter\"\n              class=\"flex items-center justify-between w-fit p-4\"\n            >\n              <template #suffix>\n                <FeatherIcon\n                  :name=\"open ? 'chevron-up' : 'chevron-down'\"\n                  class=\"h-4\"\n                />\n              </template>\n            </Button>\n          </template>\n          <template #item=\"{ item }\">\n            <button\n              class=\"group flex text-ink-gray-6 gap-4 h-7 w-full justify-between items-center rounded p-2 text-base hover:bg-surface-gray-3\"\n              @click=\"item.onClick\"\n            >\n              <div class=\"flex items-center justify-between flex-1\">\n                <span class=\"whitespace-nowrap\">\n                  {{ item.label }}\n                </span>\n                <FeatherIcon\n                  v-if=\"activeFilter === item.label\"\n                  name=\"check\"\n                  class=\"size-4 text-ink-gray-7\"\n                />\n              </div>\n            </button>\n          </template>\n        </Dropdown>\n      </div>\n    </template>\n    <template #content>\n      <div class=\"grow\">\n        <!-- loading state -->\n        <div\n          v-if=\"agents.loading\"\n          class=\"flex mt-28 justify-between w-full h-full\"\n        >\n          <Button\n            :loading=\"agents.loading\"\n            variant=\"ghost\"\n            class=\"w-full\"\n            size=\"2xl\"\n          />\n        </div>\n        <!-- Empty State -->\n        <div\n          v-if=\"!agents.loading && !agents.data?.length\"\n          class=\"flex flex-col items-center justify-center gap-4 h-full\"\n        >\n          <div\n            class=\"p-4 size-14.5 rounded-full bg-surface-gray-1 flex items-center justify-center\"\n          >\n            <AgentIcon class=\"size-6 text-ink-gray-6\" />\n          </div>\n          <div class=\"flex flex-col items-center gap-1\">\n            <div class=\"text-base font-medium text-ink-gray-6\">\n              {{ __(\"No agent found\") }}\n            </div>\n            <div class=\"text-p-sm text-ink-gray-5 max-w-60 text-center\">\n              {{\n                activeFilter.length\n                  ? __(\"Change your search terms or filters\")\n                  : __(\"Add one to get started.\")\n              }}\n            </div>\n          </div>\n          <Button\n            :label=\"__('New')\"\n            variant=\"outline\"\n            icon-left=\"plus\"\n            @click=\"setActiveSettingsTab('Invite Agents')\"\n          />\n        </div>\n        <!-- Agent List -->\n        <div\n          class=\"w-full\"\n          v-if=\"!agents.loading && Boolean(agents.data?.length)\"\n        >\n          <div\n            class=\"grid grid-cols-8 items-center gap-3 text-sm text-gray-600\"\n          >\n            <div class=\"col-span-6 text-p-sm\">{{ __(\"Agent Name\") }}</div>\n          </div>\n          <hr class=\"mt-2\" />\n          <div v-for=\"(agent, index) in agents.data\" :key=\"agent.agent_name\">\n            <div class=\"flex items-center justify-between h-14 group rounded\">\n              <div class=\"flex items-center space-x-3 grow\">\n                <Avatar\n                  :image=\"agent.user_image\"\n                  :label=\"agent.agent_name\"\n                  size=\"xl\"\n                />\n                <div>\n                  <div class=\"flex items-center gap-2\">\n                    <p class=\"text-base\">\n                      {{ agent.agent_name }}\n                    </p>\n                    <Badge\n                      :label=\"__('Inactive')\"\n                      :theme=\"'gray'\"\n                      :class=\"!agent.is_active ? 'opacity-100' : 'opacity-0'\"\n                      variant=\"subtle\"\n                    />\n                  </div>\n                  <div class=\"text-base text-ink-gray-6 mt-1\">\n                    {{ agent.name }}\n                  </div>\n                </div>\n              </div>\n              <div class=\"flex items-center gap-2\">\n                <Dropdown\n                  v-if=\"isManager\"\n                  class=\"flex justify-end items-center\"\n                  :options=\"getRoles(agent.name)\"\n                  :label=\"getUserRole(agent.name)\"\n                  :button=\"{\n                    label: getUserRole(agent.name),\n                    iconRight: 'chevron-down',\n                    iconLeft:\n                      getUserRole(agent.name) === 'Agent'\n                        ? 'user'\n                        : getUserRole(agent.name) === 'Manager'\n                        ? 'briefcase'\n                        : null,\n                  }\"\n                  placement=\"right\"\n                />\n                <Dropdown\n                  :options=\"getOptions(agent)\"\n                  :key=\"agent\"\n                  class=\"ml-2\"\n                  placement=\"right\"\n                >\n                  <Button icon=\"more-horizontal\" variant=\"ghost\" />\n                </Dropdown>\n              </div>\n            </div>\n            <hr v-if=\"index !== agents.data.length - 1\" />\n          </div>\n          <!-- Load More Button -->\n          <div class=\"flex justify-center\">\n            <Button\n              v-if=\"!agents.loading && agents.hasNextPage\"\n              class=\"mt-3.5 p-2\"\n              @click=\"() => agents.next()\"\n              :loading=\"agents.loading\"\n              :label=\"__('Load More')\"\n              icon-left=\"refresh-cw\"\n            />\n          </div>\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { useAuthStore } from \"@/stores/auth\";\nimport { useUserStore } from \"@/stores/user\";\nimport { Avatar, Button, call, Dropdown, FeatherIcon, toast } from \"frappe-ui\";\nimport { h, onUnmounted } from \"vue\";\nimport LucideCheck from \"~icons/lucide/check\";\nimport { activeFilter, useAgents } from \"./agents\";\nimport AgentIcon from \"../icons/AgentIcon.vue\";\nimport { setActiveSettingsTab } from \"./settingsModal\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\nconst { getUserRole, updateUserRoleCache } = useUserStore();\nconst { isManager } = useAuthStore();\n\nconst agentStore = useAgents();\nconst search = agentStore.search;\nconst agents = agentStore.agents;\n\nfunction getRoles(agent: string) {\n  const agentRole = getUserRole(agent);\n  const roles = [\n    {\n      label: \"Agent\",\n      component: (props) =>\n        RoleOption({\n          role: \"Agent\",\n          active: props.active,\n          selected: agentRole === \"Agent\",\n          icon: \"user\",\n          onClick: () => {\n            updateRole(agent, \"Agent\");\n          },\n        }),\n    },\n  ];\n  if (isManager) {\n    roles.unshift({\n      label: \"Manager\",\n      component: (props) =>\n        RoleOption({\n          role: \"Manager\",\n          active: props.active,\n          selected: agentRole === \"Manager\",\n          icon: \"briefcase\",\n          onClick: () => {\n            updateRole(agent, \"Manager\");\n          },\n        }),\n    });\n  }\n\n  return roles;\n}\n\nfunction RoleOption({ active, role, onClick, selected, icon = null }) {\n  return h(\n    \"button\",\n    {\n      class: [\n        active ? \"bg-surface-gray-2\" : \"text-ink-gray-7\",\n\n        \"group flex w-full text-ink-gray-8 justify-between items-center rounded-md px-2 py-2 text-sm hover:bg-surface-gray-3\",\n      ],\n      onClick: !selected ? onClick : null,\n    },\n    [\n      h(\"div\", { class: \"flex gap-2\" }, [\n        icon\n          ? h(FeatherIcon, {\n              name: icon,\n              class: [\"h-4 w-4 shrink-0\"],\n              \"aria-hidden\": true,\n            })\n          : null,\n        h(\"span\", { class: \"whitespace-nowrap\" }, role),\n      ]),\n      selected\n        ? h(LucideCheck, {\n            class: [\"h-4 w-4 shrink-0 text-ink-gray-7\"],\n            \"aria-hidden\": true,\n          })\n        : null,\n    ]\n  );\n}\nfunction updateRole(agent: string, newRole: string) {\n  const currentRole = getUserRole(agent);\n  if (currentRole === newRole) {\n    return;\n  }\n\n  call(\"helpdesk.helpdesk.doctype.hd_agent.hd_agent.update_agent_role\", {\n    user: agent,\n    new_role: newRole,\n  }).then(() => {\n    updateUserRoleCache(agent, newRole);\n    toast.success(`Role updated to ${newRole}`);\n  });\n}\n\nfunction getOptions(agent) {\n  let filters = agentStore.filters;\n  return [\n    {\n      label: \"Disable Agent\",\n      icon: \"x-circle\",\n      onClick: async () => {\n        await agentStore.updateAgent(agent.name, 0);\n        agents.reload({ ...filters, search: search.value });\n      },\n      condition: () => agent.is_active,\n    },\n    {\n      label: \"Enable Agent\",\n      icon: \"check-circle\",\n      onClick: async () => {\n        await agentStore.updateAgent(agent.name, 1);\n        agents.reload({ ...filters, search: search.value });\n      },\n      condition: () => !agent.is_active,\n    },\n  ];\n}\n\nconst dropdownOptions = [\n  {\n    label: \"All\",\n    onClick: () => {\n      agentStore.filters[\"is_active\"] = [\"in\", [0, 1]];\n      activeFilter.value = \"All\";\n    },\n  },\n  {\n    label: \"Active\",\n    onClick: () => {\n      agentStore.filters[\"is_active\"] = [\"=\", 1];\n      activeFilter.value = \"Active\";\n    },\n  },\n  {\n    label: \"Inactive\",\n    onClick: () => {\n      agentStore.filters[\"is_active\"] = [\"=\", 0];\n      activeFilter.value = \"Inactive\";\n    },\n  },\n];\n\nonUnmounted(() => {\n  agents.filters = {};\n});\n</script>\n","export default \"__VITE_ASSET__ae42638a__\"","export default \"__VITE_ASSET__7cc0e65d__\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwMAAALUBAMAAAClQPMzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAACRQTFRFR3BMNqzpdMXvXb3tr+f3o+P1AJ/ZGoPjALPjmeH1dc3uBqfjM5e/jQAAAAZ0Uk5TAPVwwVLTgnc47wAABIBJREFUeNrt1rEJwlAYhdEHNpZa2UpwAxewcAXtbdJYpQo4gATsBVdwAOcTd/DyknC+9zY4XPhLkSRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJGmGL/cTazo5gOWR69KFWCBAgQIAAAQIECBAgmArBHYEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAMHfO4U6X9tP4reb9aX77/v9rqtH8Ar1bEOl1oWgNsGAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjqEfShbu9QTajD/AhS8yqzCwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIKheE2p3DFUkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZLG2Bet4fvU2eVggAAAAABJRU5ErkJggg==\"","export default \"__VITE_ASSET__b6543205__\"","export default \"__VITE_ASSET__14b6d168__\"","export default \"__VITE_ASSET__d995bd23__\"","export default \"__VITE_ASSET__61f532d2__\"","import LogoGmail from \"@/assets/images/gmail.png\";\nimport LogoOutlook from \"@/assets/images/outlook.png\";\nimport LogoSendgrid from \"@/assets/images/sendgrid.png\";\nimport LogoSparkpost from \"@/assets/images/sparkpost.webp\";\nimport LogoYahoo from \"@/assets/images/yahoo.png\";\nimport LogoYandex from \"@/assets/images/yandex.png\";\nimport LogoFrappeMail from \"@/assets/images/frappe-mail.svg\";\nimport { RenderField, EmailService, EmailAccount } from \"@/types\";\nimport { validateEmailWithZod } from \"@/utils\";\nconst fixedFields: RenderField[] = [\n  {\n    label: \"Account Name\",\n    name: \"email_account_name\",\n    type: \"text\",\n    placeholder: \"Support / Sales\",\n  },\n  {\n    label: \"Email ID\",\n    name: \"email_id\",\n    type: \"email\",\n    placeholder: \"johndoe@example.com\",\n  },\n];\n\nexport const incomingOutgoingFields: RenderField[] = [\n  {\n    label: \"Enable Incoming\",\n    name: \"enable_incoming\",\n    type: \"checkbox\",\n    description:\n      \"If enabled, tickets can be created from the incoming emails on this account.\",\n  },\n  {\n    label: \"Enable Outgoing\",\n    name: \"enable_outgoing\",\n    type: \"checkbox\",\n    description: \"If enabled, outgoing emails can be sent from this account.\",\n  },\n  {\n    label: \"Default Incoming\",\n    name: \"default_incoming\",\n    type: \"checkbox\",\n    description:\n      \"If enabled, all replies to your company (eg: replies@yourcomany.com) will come to this account. Note: Only one account can be default incoming.\",\n  },\n  {\n    label: \"Default Outgoing\",\n    name: \"default_outgoing\",\n    type: \"checkbox\",\n    description:\n      \"If enabled, all outgoing emails will be sent from this account. Note: Only one account can be default outgoing.\",\n  },\n];\n\nexport const popularProviderFields = [\n  ...fixedFields,\n  {\n    label: \"Password\",\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"********\",\n  },\n];\n\nexport const customProviderFields = [\n  ...fixedFields,\n  {\n    label: \"Frappe Mail Site\",\n    name: \"frappe_mail_site\",\n    type: \"text\",\n    placeholder: \"https://frappemail.com\",\n  },\n  {\n    label: \"API Key\",\n    name: \"api_key\",\n    type: \"text\",\n    placeholder: \"********\",\n  },\n  {\n    label: \"API Secret\",\n    name: \"api_secret\",\n    type: \"password\",\n    placeholder: \"********\",\n  },\n];\n\nexport const services: EmailService[] = [\n  {\n    name: \"GMail\",\n    icon: LogoGmail,\n    info: `Setting up GMail requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more`,\n    link: \"https://support.google.com/accounts/answer/185833\",\n    custom: false,\n  },\n  {\n    name: \"Outlook\",\n    icon: LogoOutlook,\n    info: `Setting up Outlook requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more`,\n    link: \"https://support.microsoft.com/en-us/account-billing/how-to-get-and-use-app-passwords-5896ed9b-4263-e681-128a-a6f2979a7944\",\n    custom: false,\n  },\n  {\n    name: \"Sendgrid\",\n    icon: LogoSendgrid,\n    info: `Setting up Sendgrid requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `,\n    link: \"https://sendgrid.com/docs/ui/account-and-settings/two-factor-authentication/\",\n    custom: false,\n  },\n  {\n    name: \"SparkPost\",\n    icon: LogoSparkpost,\n    info: `Setting up SparkPost requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `,\n    link: \"https://support.sparkpost.com/docs/my-account-and-profile/enabling-two-factor-authentication\",\n    custom: false,\n  },\n  {\n    name: \"Yahoo\",\n    icon: LogoYahoo,\n    info: `Setting up Yahoo requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `,\n    link: \"https://help.yahoo.com/kb/SLN15241.html\",\n    custom: false,\n  },\n  {\n    name: \"Yandex\",\n    icon: LogoYandex,\n    info: `Setting up Yandex requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `,\n    link: \"https://yandex.com/support/id/authorization/app-passwords.html\",\n    custom: false,\n  },\n  {\n    name: \"Frappe Mail\",\n    icon: LogoFrappeMail,\n    info: `Setting up Frappe Mail requires you to have an API key and API Secret of your email account. Read more `,\n    link: \"https://github.com/frappe/mail\",\n    custom: true,\n  },\n];\n\nexport const emailIcon = {\n  GMail: LogoGmail,\n  Outlook: LogoOutlook,\n  Sendgrid: LogoSendgrid,\n  SparkPost: LogoSparkpost,\n  Yahoo: LogoYahoo,\n  Yandex: LogoYandex,\n  \"Frappe Mail\": LogoFrappeMail,\n};\n\nexport function validateInputs(state: EmailAccount, isCustom: boolean) {\n  if (!state.email_account_name) {\n    return \"Account name is required\";\n  }\n  if (!state.email_id) {\n    return \"Email ID is required\";\n  }\n  const validEmail = validateEmailWithZod(state.email_id);\n  if (!validEmail) {\n    return \"Invalid email ID\";\n  }\n  if (!isCustom && !state.password) {\n    return \"Password is required\";\n  }\n  if (isCustom) {\n    if (!state.api_key) {\n      return \"API Key is required\";\n    }\n    if (!state.api_secret) {\n      return;\n    }\n  }\n  return \"\";\n}\n","<template>\n  <div\n    class=\"flex size-8 cursor-pointer items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200\"\n    :class=\"{ 'ring-2 ring-blue-500': selected }\"\n  >\n    <img :src=\"logo\" class=\"size-4.5\" />\n  </div>\n  <p v-if=\"serviceName\" class=\"text-center text-p-xs text-gray-700\">\n    {{ serviceName }}\n  </p>\n</template>\n\n<script setup lang=\"ts\">\ninterface P {\n  serviceName?: string;\n  logo?: string;\n  selected?: boolean;\n}\n\nwithDefaults(defineProps<P>(), {\n  serviceName: \"\",\n  selected: false,\n  logo: \"\",\n});\n</script>\n\n<style scoped></style>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Setup Email')\"\n    :description=\"\n      __('Choose the email service provider you want to configure.')\n    \"\n  >\n    <template #content>\n      <div class=\"flex h-full flex-col gap-4\">\n        <div class=\"flex flex-col gap-4 overflow-y-auto p-0.5\">\n          <!-- email service provider selection -->\n          <div class=\"flex flex-wrap items-center gap-4\">\n            <div\n              v-for=\"s in services\"\n              :key=\"s.name\"\n              class=\"min-w-3 flex flex-col items-center gap-1\"\n              @click=\"handleSelect(s)\"\n            >\n              <EmailProviderIcon\n                :service-name=\"s.name\"\n                :logo=\"s.icon\"\n                :selected=\"selectedService?.name === s?.name\"\n              />\n            </div>\n          </div>\n          <div v-if=\"selectedService\" class=\"flex flex-col gap-4\">\n            <!-- email service provider info -->\n            <div>\n              <div\n                class=\"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200\"\n              >\n                <CircleAlert\n                  class=\"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-blue-500\"\n                />\n                <div class=\"text-wrap text-xs text-gray-700\">\n                  {{ selectedService.info }}\n                  <a\n                    :href=\"selectedService.link\"\n                    target=\"_blank\"\n                    class=\"text-blue-500 underline\"\n                    >here</a\n                  >\n                  .\n                </div>\n              </div>\n            </div>\n            <!-- service provider fields -->\n            <div class=\"flex flex-col gap-4\">\n              <div class=\"grid grid-cols-1 gap-4\">\n                <div\n                  v-for=\"field in fields\"\n                  :key=\"field.name\"\n                  class=\"flex flex-col gap-1\"\n                >\n                  <FormControl\n                    v-model=\"state[field.name]\"\n                    :label=\"field.label\"\n                    :name=\"field.name\"\n                    :type=\"field.type\"\n                    :placeholder=\"field.placeholder\"\n                  />\n                </div>\n              </div>\n              <div class=\"grid grid-cols-2 gap-4\">\n                <div\n                  v-for=\"field in incomingOutgoingFields\"\n                  :key=\"field.name\"\n                  class=\"flex flex-col gap-1\"\n                >\n                  <FormControl\n                    v-model=\"state[field.name]\"\n                    :label=\"field.label\"\n                    :name=\"field.name\"\n                    :type=\"field.type\"\n                  />\n                  <p class=\"text-gray-500 text-p-sm\">{{ field.description }}</p>\n                </div>\n              </div>\n              <ErrorMessage v-if=\"error\" class=\"ml-1\" :message=\"error\" />\n            </div>\n          </div>\n        </div>\n\n        <!-- action button -->\n        <div class=\"mt-auto flex justify-between -mb-8\">\n          <Button\n            :label=\"__('Back')\"\n            theme=\"gray\"\n            variant=\"outline\"\n            :disabled=\"addEmailRes.loading\"\n            @click=\"emit('update:step', 'email-list')\"\n          />\n          <Button\n            :label=\"__('Create')\"\n            variant=\"solid\"\n            :loading=\"addEmailRes.loading\"\n            @click=\"createEmailAccount\"\n          />\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { EmailAccount, EmailService, EmailStep } from \"@/types\";\nimport { createResource, toast } from \"frappe-ui\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport { computed, Reactive, reactive, Ref, ref } from \"vue\";\nimport CircleAlert from \"~icons/lucide/circle-alert\";\nimport {\n  customProviderFields,\n  incomingOutgoingFields,\n  popularProviderFields,\n  services,\n  validateInputs,\n} from \"./emailConfig\";\nimport EmailProviderIcon from \"./EmailProviderIcon.vue\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\ninterface E {\n  (event: \"update:step\", value: EmailStep): void;\n}\n\nconst emit = defineEmits<E>();\n\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\n\nconst state: Reactive<EmailAccount> = reactive({\n  service: \"\",\n  email_account_name: \"\",\n  email_id: \"\",\n  password: \"\",\n  api_key: \"\",\n  api_secret: \"\",\n  frappe_mail_site: \"\",\n  enable_incoming: false,\n  enable_outgoing: false,\n  default_incoming: false,\n  default_outgoing: false,\n});\n\nconst selectedService: Ref<EmailService> = ref(null);\nconst fields = computed(() =>\n  selectedService.value.custom ? customProviderFields : popularProviderFields\n);\n\nfunction handleSelect(service: EmailService) {\n  selectedService.value = service;\n  state.service = service.name;\n}\n\nconst addEmailRes = createResource({\n  url: \"helpdesk.api.settings.email.create_email_account\",\n  makeParams: (val: EmailAccount) => {\n    return {\n      ...val,\n    };\n  },\n  onSuccess: () => {\n    toast.success(__(\"Email account created\"));\n    emit(\"update:step\", \"email-list\");\n    updateOnboardingStep(\"setup_email_account\");\n  },\n  onError: () => {\n    error.value = __(\"Failed to create email account, Invalid credentials\");\n  },\n});\n\nconst error = ref<string | undefined>();\nfunction createEmailAccount() {\n  error.value = validateInputs(state, selectedService.value.custom);\n  if (error.value) return;\n\n  addEmailRes.submit({ data: state });\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    class=\"flex justify-between items-center border-gray-200 p-2 cursor-pointer hover:bg-gray-50 rounded h-14\"\n  >\n    <!-- avatar and name -->\n    <div class=\"flex justify-between items-center gap-2\">\n      <EmailProviderIcon :logo=\"emailIcon[emailAccount.service]\" />\n      <div>\n        <p class=\"text-base text-ink-gray-7 font-medium\">\n          {{ emailAccount.email_account_name }}\n        </p>\n        <div class=\"text-sm w-full text-ink-gray-5 mt-1\">\n          {{ emailAccount.email_id }}\n        </div>\n      </div>\n    </div>\n    <div>\n      <Badge\n        variant=\"subtle\"\n        :label=\"badgeTitleColor[0]\"\n        :theme=\"badgeTitleColor[1]\"\n      />\n    </div>\n    <!-- email id -->\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { EmailAccount } from \"@/types\";\nimport { emailIcon } from \"./emailConfig\";\nimport EmailProviderIcon from \"./EmailProviderIcon.vue\";\nimport { computed } from \"vue\";\nimport { __ } from \"@/translation\";\n\ninterface P {\n  emailAccount: EmailAccount;\n}\n\nconst props = defineProps<P>();\n\nconst badgeTitleColor = computed(() => {\n  if (\n    props.emailAccount.default_incoming &&\n    props.emailAccount.default_outgoing\n  ) {\n    const color =\n      props.emailAccount.enable_incoming && props.emailAccount.enable_outgoing\n        ? \"blue\"\n        : \"gray\";\n    return [__(\"Default Sending and Inbox\"), color];\n  } else if (props.emailAccount.default_incoming) {\n    const color = props.emailAccount.enable_incoming ? \"blue\" : \"gray\";\n    return [__(\"Default Inbox\"), color];\n  } else if (props.emailAccount.default_outgoing) {\n    const color = props.emailAccount.enable_outgoing ? \"blue\" : \"gray\";\n    return [__(\"Default Sending\"), color];\n  } else {\n    const color = props.emailAccount.enable_incoming ? \"blue\" : \"gray\";\n    return [__(\"Inbox\"), color];\n  }\n});\n</script>\n\n<style scoped></style>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Email Accounts')\"\n    :description=\"\n      __(\n        'Manage your email accounts and configure incoming and outgoing settings.'\n      )\n    \"\n  >\n    <template #header-actions>\n      <Button\n        :label=\"__('New')\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"emit('update:step', 'email-add')\"\n        icon-left=\"plus\"\n      />\n    </template>\n    <template #content>\n      <!-- list accounts -->\n      <div\n        class=\"-ml-2 grow\"\n        v-if=\"!emailAccounts.loading && Boolean(emailAccounts.data?.length)\"\n      >\n        <div class=\"flex text-sm text-gray-600\">\n          <div class=\"ml-2\">{{ __(\"Email Account name\") }}</div>\n        </div>\n        <hr class=\"mx-2 mt-2\" />\n        <div\n          v-for=\"emailAccount in emailAccounts.data\"\n          :key=\"emailAccount.name\"\n        >\n          <EmailAccountCard\n            :emailAccount=\"emailAccount\"\n            @click=\"emit('update:step', 'email-edit', emailAccount)\"\n          />\n          <hr class=\"mx-2\" />\n        </div>\n      </div>\n      <!-- fallback if no email accounts -->\n      <div\n        v-else\n        class=\"flex flex-col items-center justify-center gap-4 h-full\"\n      >\n        <div\n          class=\"p-4 size-14.5 rounded-full bg-surface-gray-1 flex justify-center items-center\"\n        >\n          <EmailIcon class=\"size-6 text-ink-gray-6\" />\n        </div>\n        <div class=\"flex flex-col items-center gap-1\">\n          <div class=\"text-base font-medium text-ink-gray-6\">\n            {{ __(\"No email account found\") }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5 max-w-60 text-center\">\n            {{ __(\"Add one to get started.\") }}\n          </div>\n        </div>\n        <Button\n          :label=\"__('New')\"\n          variant=\"outline\"\n          icon-left=\"plus\"\n          @click=\"emit('update:step', 'email-add')\"\n        />\n      </div>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { EmailAccount } from \"@/types\";\nimport { createListResource } from \"frappe-ui\";\nimport EmailAccountCard from \"./EmailAccountCard.vue\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\nconst emit = defineEmits([\"update:step\"]);\n\nconst emailAccounts = createListResource({\n  doctype: \"Email Account\",\n  cache: [\"Email Accounts\"],\n  fields: [\"*\"],\n  filters: {\n    email_id: [\"Not Like\", \"%example%\"],\n  },\n  pageLength: 10,\n  auto: true,\n  onSuccess: (accounts: EmailAccount[]) => {\n    // convert 0 to false to handle boolean fields\n    accounts.forEach((account) => {\n      account.enable_incoming = Boolean(account.enable_incoming);\n      account.enable_outgoing = Boolean(account.enable_outgoing);\n      account.default_incoming = Boolean(account.default_incoming);\n      account.default_outgoing = Boolean(account.default_outgoing);\n    });\n  },\n});\n</script>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Edit Email')\"\n    :description=\"__('Edit your email account')\"\n  >\n    <template #content>\n      <div class=\"flex h-full flex-col gap-4\">\n        <div class=\"overflow-y-auto flex flex-col gap-4 p-0.5\">\n          <div class=\"w-fit\">\n            <EmailProviderIcon\n              :logo=\"emailIcon[accountData.service]\"\n              :service-name=\"accountData.service\"\n            />\n          </div>\n          <!-- banner for setting up email account -->\n          <div\n            class=\"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200\"\n          >\n            <CircleAlert\n              class=\"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-ink-blue-2\"\n            />\n            <div class=\"text-wrap text-xs text-gray-700\">\n              {{ info.description }}\n              <a\n                :href=\"info.link\"\n                target=\"_blank\"\n                class=\"text-ink-blue-2 underline\"\n                >here</a\n              >\n              .\n            </div>\n          </div>\n          <!-- fields -->\n          <div class=\"flex flex-col gap-4\">\n            <div class=\"grid grid-cols-1 gap-4\">\n              <div\n                v-for=\"field in fields\"\n                :key=\"field.name\"\n                class=\"flex flex-col gap-1\"\n              >\n                <FormControl\n                  v-model=\"state[field.name]\"\n                  :label=\"field.label\"\n                  :name=\"field.name\"\n                  :type=\"field.type\"\n                  :placeholder=\"field.placeholder\"\n                />\n              </div>\n            </div>\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div\n                v-for=\"field in incomingOutgoingFields\"\n                :key=\"field.name\"\n                class=\"flex flex-col gap-1\"\n              >\n                <FormControl\n                  v-model=\"state[field.name]\"\n                  :label=\"field.label\"\n                  :name=\"field.name\"\n                  :type=\"field.type\"\n                />\n                <p class=\"text-p-sm text-gray-500\">{{ field.description }}</p>\n              </div>\n            </div>\n            <ErrorMessage v-if=\"error\" class=\"ml-1\" :message=\"error\" />\n          </div>\n        </div>\n\n        <!-- action buttons -->\n        <div class=\"mt-auto flex justify-between -mb-8\">\n          <Button\n            :label=\"__('Back')\"\n            theme=\"gray\"\n            variant=\"outline\"\n            :disabled=\"loading\"\n            @click=\"emit('update:step', 'email-list')\"\n          />\n          <div class=\"flex gap-2\">\n            <Button\n              :label=\"__('Update Account')\"\n              variant=\"solid\"\n              @click=\"updateAccount\"\n              :loading=\"loading\"\n            />\n            <Button\n              v-if=\"accountData.enable_incoming\"\n              :label=\"__('Pull Emails')\"\n              variant=\"subtle\"\n              @click=\"pullEmails\"\n              :loading=\"loadingPull\"\n              :disabled=\"loading\"\n            />\n          </div>\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { EmailAccount, EmailStep } from \"@/types\";\nimport { useStorage } from \"@vueuse/core\";\nimport { call, toast } from \"frappe-ui\";\nimport { computed, h, reactive, ref } from \"vue\";\nimport CircleAlert from \"~icons/lucide/circle-alert\";\nimport EmailProviderIcon from \"./EmailProviderIcon.vue\";\nimport {\n  customProviderFields,\n  emailIcon,\n  incomingOutgoingFields,\n  popularProviderFields,\n  services,\n  validateInputs,\n} from \"./emailConfig\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\ninterface P {\n  accountData: EmailAccount;\n}\n\ninterface E {\n  (event: \"update:step\", step: EmailStep): void;\n}\n\nconst props = withDefaults(defineProps<P>(), {\n  accountData: null,\n});\n\nconst emit = defineEmits<E>();\n\nconst state = reactive({\n  email_account_name: props.accountData.email_account_name || \"\",\n  service: props.accountData.service || \"\",\n  email_id: props.accountData.email_id || \"\",\n  api_key: props.accountData?.api_key || null,\n  api_secret: props.accountData?.api_secret || null,\n  password: props.accountData?.password || null,\n  frappe_mail_site: props.accountData?.frappe_mail_site || \"\",\n  enable_incoming: props.accountData.enable_incoming || false,\n  enable_outgoing: props.accountData.enable_outgoing || false,\n  default_outgoing: props.accountData.default_outgoing || false,\n  default_incoming: props.accountData.default_incoming || false,\n});\n\nconst info = {\n  description: __(\"To know more about setting up email accounts, click\"),\n  link: \"https://docs.erpnext.com/docs/user/manual/en/email-account\",\n};\n\nconst isCustomService = computed(() => {\n  return services.find((s) => s.name === props.accountData.service).custom;\n});\n\nconst fields = computed(() => {\n  if (isCustomService.value) {\n    return customProviderFields;\n  }\n  return popularProviderFields;\n});\n\nconst error = ref<string | undefined>();\nconst loading = ref(false);\nconst loadingPull = useStorage(\n  `loading-emails-${state.email_account_name}`,\n  false\n);\nasync function updateAccount() {\n  error.value = validateInputs(state, isCustomService.value);\n  if (error.value) return;\n  const old = { ...props.accountData };\n  const updatedEmailAccount = { ...state };\n\n  const nameChanged =\n    old.email_account_name !== updatedEmailAccount.email_account_name;\n  delete old.email_account_name;\n  delete updatedEmailAccount.email_account_name;\n\n  const otherFieldsChanged = isDirty.value;\n  const values = updatedEmailAccount;\n\n  if (!nameChanged && !otherFieldsChanged) {\n    toast.create({\n      message: __(\"No changes made\"),\n      icon: h(CircleAlert, { class: \"text-ink-blue-2\" }),\n    });\n    return;\n  }\n\n  if (nameChanged) {\n    try {\n      loading.value = true;\n      await callRenameDoc();\n      succesHandler();\n    } catch (err) {\n      errorHandler();\n    }\n  }\n  if (otherFieldsChanged) {\n    try {\n      loading.value = true;\n      await callSetValue(values);\n      succesHandler();\n    } catch (err) {\n      errorHandler();\n    }\n  }\n}\n\nfunction pullEmails() {\n  loadingPull.value = true;\n\n  toast.create({\n    message: __(\"Pulling emails, this may take a few minutes.\"),\n    icon: h(CircleAlert, { class: \"text-blue-500\" }),\n  });\n\n  call(\"frappe.email.doctype.email_account.email_account.pull_emails\", {\n    email_account: state.email_account_name,\n  })\n    .then(() => {\n      localStorage.removeItem(`loading-emails-${state.email_account_name}`);\n      loadingPull.value = null;\n      toast.success(__(\"Emails pulled successfully\"));\n    })\n    .catch(() => {\n      localStorage.removeItem(`loading-emails-${state.email_account_name}`);\n      loadingPull.value = null;\n      error.value = __(\"Failed to pull emails\");\n    });\n}\n\nconst isDirty = computed(() => {\n  return (\n    state.email_id !== props.accountData.email_id ||\n    state.api_key !== props.accountData.api_key ||\n    state.api_secret !== props.accountData.api_secret ||\n    state.password !== props.accountData.password ||\n    state.enable_incoming !== props.accountData.enable_incoming ||\n    state.enable_outgoing !== props.accountData.enable_outgoing ||\n    state.default_outgoing !== props.accountData.default_outgoing ||\n    state.default_incoming !== props.accountData.default_incoming ||\n    state.frappe_mail_site !== props.accountData.frappe_mail_site\n  );\n});\n\nasync function callRenameDoc() {\n  const d = await call(\"frappe.client.rename_doc\", {\n    doctype: \"Email Account\",\n    old_name: props.accountData.email_account_name,\n    new_name: state.email_account_name,\n  });\n  return d;\n}\n\nasync function callSetValue(values) {\n  const d = await call(\"frappe.client.set_value\", {\n    doctype: \"Email Account\",\n    name: state.email_account_name,\n    fieldname: values,\n  });\n  return d.name;\n}\n\nfunction succesHandler() {\n  emit(\"update:step\", \"email-list\");\n  toast.success(__(\"Email account updated successfully\"));\n}\n\nfunction errorHandler() {\n  loading.value = false;\n  error.value = __(\"Failed to update email account, Invalid credentials\");\n}\n</script>\n","<template>\n  <div v-if=\"step === 'email-add'\" class=\"h-full\">\n    <EmailAdd @update:step=\"updateStep\" />\n  </div>\n  <div v-else-if=\"step === 'email-list'\" class=\"h-full\">\n    <EmailAccountList @update:step=\"updateStep\" />\n  </div>\n  <div v-else-if=\"step === 'email-edit'\" class=\"h-full\">\n    <EmailEdit :account-data=\"accountData\" @update:step=\"updateStep\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Ref, ref } from \"vue\";\nimport EmailAdd from \"./EmailAdd.vue\";\nimport EmailAccountList from \"./EmailAccountList.vue\";\nimport EmailEdit from \"./EmailEdit.vue\";\nimport { EmailAccount, EmailStep } from \"@/types\";\n\nconst step: Ref<EmailStep> = ref(\"email-list\");\nconst accountData: Ref<EmailAccount> = ref(null);\nfunction updateStep(newStep: EmailStep, data?: EmailAccount) {\n  step.value = newStep;\n  accountData.value = data;\n}\n</script>\n","import { validateConditions } from \"@/utils\";\nimport { ref } from \"vue\";\n\nconst defaultAssignmentDays = [\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\",\n  \"Sunday\",\n];\n\nexport const assignmentRuleData = ref<Record<string, any> | null>({\n  assignCondition: \"\",\n  unassignCondition: \"\",\n  assignConditionJson: [],\n  unassignConditionJson: [],\n  rule: \"Round Robin\",\n  priority: 1,\n  users: [],\n  disabled: false,\n  description: \"\",\n  name: \"\",\n  assignmentRuleName: \"\",\n  assignmentDays: defaultAssignmentDays,\n});\n\nexport const resetAssignmentRuleData = () => {\n  assignmentRuleData.value = {\n    assignCondition: \"\",\n    unassignCondition: \"\",\n    assignConditionJson: [],\n    unassignConditionJson: [],\n    rule: \"Round Robin\",\n    priority: 1,\n    users: [],\n    disabled: false,\n    description: \"\",\n    name: \"\",\n    assignmentRuleName: \"\",\n    assignmentDays: defaultAssignmentDays,\n  };\n};\n\nexport const assignmentRulesActiveScreen = ref<{\n  screen: \"list\" | \"view\";\n  data: Record<string, any> | null;\n}>({ screen: \"list\", data: null });\n\nexport const validateAssignmentRule = (\n  key?: string,\n  skipAssignConditionCheck = false,\n  skipUnAssignConditionCheck = false\n) => {\n  const validateField = (field: string) => {\n    if (key && field !== key) return;\n\n    switch (field) {\n      case \"assignmentRuleName\":\n        if (assignmentRuleData.value.assignmentRuleName?.length == 0) {\n          assignmentRulesErrors.value.assignmentRuleName = \"Name is required\";\n        } else {\n          assignmentRulesErrors.value.assignmentRuleName = \"\";\n        }\n        break;\n      case \"description\":\n        assignmentRulesErrors.value.description =\n          assignmentRuleData.value.description?.length > 0\n            ? \"\"\n            : \"Description is required\";\n        break;\n      case \"assignCondition\":\n        if (skipAssignConditionCheck) {\n          break;\n        }\n        assignmentRulesErrors.value.assignCondition =\n          assignmentRuleData.value.assignConditionJson?.length > 0\n            ? \"\"\n            : \"Assign condition is required\";\n\n        if (!validateConditions(assignmentRuleData.value.assignConditionJson)) {\n          assignmentRulesErrors.value.assignConditionError =\n            \"Assign conditions are invalid\";\n        } else {\n          assignmentRulesErrors.value.assignConditionError = \"\";\n        }\n\n        break;\n      case \"unassignCondition\":\n        if (skipUnAssignConditionCheck) {\n          break;\n        }\n        if (\n          assignmentRuleData.value.unassignConditionJson?.length > 0 &&\n          !validateConditions(assignmentRuleData.value.unassignConditionJson)\n        ) {\n          assignmentRulesErrors.value.unassignConditionError =\n            \"Unassign conditions are invalid\";\n        } else {\n          assignmentRulesErrors.value.unassignConditionError = \"\";\n        }\n        break;\n      case \"users\":\n        assignmentRulesErrors.value.users =\n          assignmentRuleData.value.users?.length > 0\n            ? \"\"\n            : \"Users are required\";\n        break;\n      case \"assignmentDays\":\n        assignmentRulesErrors.value.assignmentDays =\n          assignmentRuleData.value.assignmentDays?.length > 0\n            ? \"\"\n            : \"Assignment days are required\";\n        break;\n      default:\n        break;\n    }\n  };\n\n  if (key) {\n    validateField(key);\n  } else {\n    (Object.keys(assignmentRulesErrors.value) as string[]).forEach(\n      validateField\n    );\n  }\n\n  return assignmentRulesErrors.value;\n};\n\nexport const assignmentRulesErrors = ref<Record<string, any> | null>({\n  assignmentRuleName: \"\",\n  assignCondition: \"\",\n  assignConditionError: \"\",\n  unassignConditionError: \"\",\n  users: \"\",\n  description: \"\",\n  assignmentDays: \"\",\n});\n\nexport const resetAssignmentRuleErrors = () => {\n  (Object.keys(assignmentRulesErrors.value) as string[]).forEach((key) => {\n    assignmentRulesErrors.value[key] = \"\";\n  });\n};\n","<template>\n  <div class=\"flex items-center justify-between py-2\" v-bind:class=\"$attrs\">\n    <div class=\"flex items-center space-x-3 w-4/5\">\n      <Avatar :image=\"agent.user_image\" :label=\"agent.agent_name\" size=\"xl\" />\n      <div>\n        <div class=\"flex items-center gap-2\">\n          <p class=\"text-base\">\n            {{ agent.agent_name }}\n          </p>\n          <Badge\n            v-if=\"showStatus\"\n            :label=\"'Inactive'\"\n            :theme=\"'gray'\"\n            :class=\"\n              showStatus && !agent.is_active ? 'opacity-100' : 'opacity-0'\n            \"\n            variant=\"subtle\"\n          />\n        </div>\n        <div class=\"text-base text-ink-gray-6 mt-1\">\n          {{ agent.name }}\n        </div>\n      </div>\n    </div>\n    <!-- slot here -->\n    <slot name=\"right\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Avatar } from \"frappe-ui\";\n\ndefineProps({\n  agent: {\n    type: Object,\n    required: true,\n  },\n  showStatus: {\n    type: Boolean,\n    default: false,\n  },\n});\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    class=\"flex flex-wrap gap-1 bg-surface-gray-2 p-0.5 border rounded w-full\"\n  >\n    <Button\n      ref=\"emails\"\n      v-for=\"value in values\"\n      :key=\"value\"\n      :label=\"value\"\n      theme=\"gray\"\n      variant=\"outline\"\n      @keydown.delete.capture.stop=\"removeLastValue\"\n      class=\"active:bg-surface-gray-1 active:border-outline-gray-2 hover:border-outline-gray-2 hover:bg-surface-gray-1\"\n    >\n      <template #prefix>\n        <UserAvatar :name=\"value\" size=\"xs\" />\n      </template>\n      <template #suffix>\n        <FeatherIcon class=\"h-3.5\" name=\"x\" @click.stop=\"removeValue(value)\" />\n      </template>\n    </Button>\n    <div class=\"flex-1\">\n      <ComboboxRoot\n        :model-value=\"tempSelection\"\n        :open=\"showOptions\"\n        @update:open=\"(o) => (showOptions = o)\"\n        :ignore-filter=\"true\"\n        @update:modelValue=\"onSelect\"\n      >\n        <ComboboxAnchor\n          class=\"flex h-7 w-full items-center gap-2 rounded px-2 py-1 border border-transparent bg-surface-gray-2 hover:bg-surface-gray-2\"\n        >\n          <ComboboxInput\n            ref=\"search\"\n            :value=\"query\"\n            autocomplete=\"off\"\n            class=\"bg-transparent p-0 outline-none border-0 text-base text-ink-gray-8 h-full placeholder:text-ink-gray-4 focus:outline-none focus:ring-0 focus:border-0 w-full select-none\"\n            placeholder=\"Type agent name or email\"\n            @focus=\"showOptions = true\"\n            @click=\"showOptions = true\"\n            @input=\"onInput\"\n            @keydown.delete.capture.stop=\"removeLastValue\"\n            @keydown.enter.prevent=\"handleEnter\"\n          />\n        </ComboboxAnchor>\n        <ComboboxPortal>\n          <ComboboxContent\n            class=\"z-10 mt-1 min-w-48 w-auto max-w-96 bg-surface-modal overflow-hidden rounded-lg shadow-2xl ring-1 ring-black ring-opacity-5\"\n            position=\"popper\"\n            :align=\"'start'\"\n            @openAutoFocus.prevent\n            @closeAutoFocus.prevent\n          >\n            <ComboboxViewport class=\"max-h-60 overflow-auto p-1.5\">\n              <ComboboxEmpty\n                class=\"flex gap-2 rounded px-2 py-1 text-base text-ink-gray-5\"\n              >\n                Agent not found\n              </ComboboxEmpty>\n              <ComboboxItem\n                v-for=\"agent in agentsList\"\n                :key=\"agent.name\"\n                :value=\"agent.name\"\n                class=\"text-base leading-none text-ink-gray-7 rounded flex items-center px-2 py-1 relative select-none data-[highlighted]:outline-none data-[highlighted]:bg-surface-gray-3 cursor-pointer\"\n              >\n                <UserAvatar class=\"mr-1\" :name=\"agent.agent_name\" size=\"lg\" />\n                <div class=\"flex flex-col gap-1 p-1 text-ink-gray-8\">\n                  <div class=\"text-base font-medium\">\n                    {{ agent.agent_name }}\n                  </div>\n                  <div class=\"text-sm text-ink-gray-5\">\n                    {{ agent.name }}\n                  </div>\n                </div>\n              </ComboboxItem>\n            </ComboboxViewport>\n          </ComboboxContent>\n        </ComboboxPortal>\n      </ComboboxRoot>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { UserAvatar } from \"@/components\";\nimport { useAgentStore } from \"@/stores/agent\";\nimport { Button } from \"frappe-ui\";\nimport { storeToRefs } from \"pinia\";\nimport {\n  ComboboxRoot,\n  ComboboxAnchor,\n  ComboboxInput,\n  ComboboxPortal,\n  ComboboxContent,\n  ComboboxViewport,\n  ComboboxItem,\n  ComboboxEmpty,\n} from \"reka-ui\";\nimport { computed, nextTick, ref } from \"vue\";\n\nconst values = defineModel<any[]>();\n\nconst emit = defineEmits([\"change\"]);\n\nconst props = defineProps({\n  existingAgents: {\n    type: Array,\n    default: () => [],\n  },\n});\n\nconst emails = ref([]);\nconst search = ref(null);\nconst query = ref(\"\");\nconst showOptions = ref(false);\nconst tempSelection = ref(null);\n\nconst { agents } = storeToRefs(useAgentStore());\n\nconst agentsList = computed(() => {\n  let list = agents.value.data;\n  if (query.value) {\n    list = list.filter(\n      (agent) =>\n        agent.agent_name.toLowerCase().includes(query.value.toLowerCase()) ||\n        agent.name.toLowerCase().includes(query.value.toLowerCase())\n    );\n  }\n\n  if (props.existingAgents.length) {\n    list = list.filter((agent) => !props.existingAgents.includes(agent.name));\n  }\n  if (values.value.length) {\n    list = list.filter((agent) => !values.value.includes(agent.name));\n  }\n  return list;\n});\n\nfunction removeValue(value) {\n  values.value = values.value.filter((v) => v !== value);\n}\n\nfunction removeLastValue() {\n  if (query.value) return;\n  let emailRef = emails.value[emails.value.length - 1]?.rootRef;\n  if (document.activeElement === emailRef) {\n    values.value.pop();\n    nextTick(() => {\n      if (values.value.length) {\n        emailRef = emails.value[emails.value.length - 1].rootRef;\n        emailRef?.focus();\n      } else {\n        setFocus();\n      }\n    });\n  } else {\n    emailRef?.focus();\n  }\n}\n\nfunction onSelect(val) {\n  if (!val) return;\n\n  if (!values.value) values.value.push(val);\n  else values.value.push(val);\n  query.value = \"\";\n  emit(\"change\", values.value);\n}\n\nfunction onInput(e) {\n  query.value = e.target.value;\n  showOptions.value = true;\n}\n\nfunction handleEnter() {\n  if (query.value) onSelect(query.value);\n}\n\nfunction setFocus() {\n  search.value?.focus?.();\n}\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <div class=\"flex items-center justify-between w-full\">\n        <div class=\"flex items-center gap-1 justify-center -ml-[16px]\">\n          <Button\n            variant=\"ghost\"\n            icon-left=\"chevron-left\"\n            :label=\"teamName\"\n            size=\"md\"\n            @click=\"() => emit('update:step', 'team-list')\"\n            class=\"cursor-pointer hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-ink-gray-7 text-lg hover:opacity-70 !pr-0\"\n          />\n        </div>\n      </div>\n    </template>\n    <template #header-actions>\n      <Dropdown placement=\"right\" :options=\"options\">\n        <Button variant=\"ghost\">\n          <template #icon>\n            <LucideMoreHorizontal class=\"h-4 w-4\" />\n          </template>\n        </Button>\n      </Dropdown>\n    </template>\n    <template #header-bottom>\n      <!-- Add member -->\n      <div class=\"flex gap-2 items-center\">\n        <!-- Form control for search -->\n        <div class=\"flex flex-col gap-1.5 w-full\">\n          <div class=\"flex gap-2\">\n            <div class=\"flex flex-1\">\n              <AgentSelector\n                v-model=\"invitees\"\n                :existing-agents=\"teamMembers.map((m) => m.name)\"\n              />\n            </div>\n            <Button\n              label=\"Add Member\"\n              variant=\"solid\"\n              :disabled=\"!invitees.length\"\n              @click=\"addMember(invitees)\"\n              class=\"h-8\"\n            >\n              <template #prefix>\n                <LucidePlus class=\"h-4 w-4 stroke-1.5\" />\n              </template>\n            </Button>\n          </div>\n        </div>\n      </div>\n    </template>\n    <template #content>\n      <div class=\"w-full h-full\" v-if=\"teamMembers?.length > 0\">\n        <div class=\"grid grid-cols-8 items-center gap-3 text-sm text-gray-600\">\n          <div class=\"col-span-6 text-p-sm\">\n            {{ __(\"Members ({0})\", teamMembers.length) }}\n          </div>\n        </div>\n        <hr class=\"mt-2\" />\n        <div v-for=\"(member, idx) in teamMembers\" :key=\"member.name\">\n          <div class=\"grid grid-cols-8 items-center gap-4 group\">\n            <div class=\"w-full p-2 pl-0 col-span-8\">\n              <AgentCard :agent=\"member\" class=\"!py-0\">\n                <template #right>\n                  <Dropdown\n                    :options=\"memberDropdownOptions(member)\"\n                    placement=\"right\"\n                  >\n                    <Button\n                      icon=\"more-horizontal\"\n                      variant=\"ghost\"\n                      @click=\"isConfirmingDelete = false\"\n                    />\n                  </Dropdown>\n                </template>\n              </AgentCard>\n            </div>\n          </div>\n          <hr v-if=\"member !== teamMembers.at(-1)\" />\n        </div>\n      </div>\n      <div\n        v-else\n        class=\"flex flex-col items-center justify-center gap-4 h-full\"\n      >\n        <div\n          class=\"p-4 size-14.5 rounded-full bg-surface-gray-1 flex justify-center items-center\"\n        >\n          <UserIcon class=\"size-6 text-ink-gray-6\" />\n        </div>\n        <div class=\"flex flex-col items-center gap-1\">\n          <div class=\"text-base font-medium text-ink-gray-6\">\n            {{ __(\"No members found\") }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5 max-w-60 text-center\">\n            {{ __(\"Add members to this team to get started.\") }}\n          </div>\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n  <Dialog v-model=\"showDelete\" :options=\"{ title: 'Delete team' }\">\n    <template #body-content>\n      <p class=\"text-p-base text-ink-gray-7\">\n        {{\n          __(\n            \"Are you sure you want to delete this team? This action cannot be reversed!\"\n          )\n        }}\n      </p>\n      <Button\n        variant=\"solid\"\n        class=\"mt-4 float-right\"\n        :label=\"__('Confirm')\"\n        theme=\"red\"\n        @click=\"\n          () => {\n            team.delete.submit();\n            showDelete = false;\n            emit('update:step', 'team-list');\n          }\n        \"\n      />\n    </template>\n  </Dialog>\n  <Dialog v-model=\"showRename\" :options=\"renameDialogOptions\">\n    <template #body-content>\n      <FormControl\n        v-model=\"_teamName\"\n        :label=\"__('Title')\"\n        :placeholder=\"__('Product Experts')\"\n        maxlength=\"50\"\n      />\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { useAgentStore } from \"@/stores/agent\";\nimport { assignmentRulesActiveScreen } from \"@/stores/assignmentRules\";\nimport { useConfigStore } from \"@/stores/config\";\nimport { useUserStore } from \"@/stores/user\";\nimport { __ } from \"@/translation\";\nimport { TeamListResourceSymbol } from \"@/types\";\nimport { ConfirmDelete } from \"@/utils\";\nimport {\n  Button,\n  createDocumentResource,\n  createResource,\n  Dialog,\n  Dropdown,\n  toast,\n  Tooltip,\n} from \"frappe-ui\";\nimport { computed, h, inject, markRaw, onMounted, ref } from \"vue\";\nimport LucideLock from \"~icons/lucide/lock\";\nimport Settings from \"~icons/lucide/settings-2\";\nimport LucideUnlock from \"~icons/lucide/unlock\";\nimport UserIcon from \"~icons/lucide/user\";\nimport AgentCard from \"../AgentCard.vue\";\nimport { setActiveSettingsTab } from \"../settingsModal\";\nimport AgentSelector from \"./components/AgentSelector.vue\";\n\nconst props = defineProps<{\n  teamName: string;\n}>();\n\ninterface E {\n  (event: \"update:step\", step: string, team?: string): void;\n}\nconst emit = defineEmits<E>();\n\nconst { getUser } = useUserStore();\nconst { agents } = useAgentStore();\nconst teamsList = inject(TeamListResourceSymbol);\n\nconst { teamRestrictionApplied } = useConfigStore();\nconst invitees = ref<string[]>([]);\n\nconst _teamName = ref(props.teamName);\nconst team = createDocumentResource({\n  doctype: \"HD Team\",\n  name: props.teamName,\n  auto: true,\n  delete: {\n    onSuccess() {\n      toast.success(__(\"Team deleted\"));\n      emit(\"update:step\", \"team-list\");\n    },\n  },\n});\n\nconst ignoreRestrictions = computed({\n  get() {\n    return !!team.doc?.ignore_restrictions;\n  },\n  set(value: boolean) {\n    if (!team.doc) return;\n    team.setValue.submit({\n      ignore_restrictions: value,\n    });\n  },\n});\n\nconst teamMembers = computed(() => {\n  let users = team.doc?.users || [];\n  return users.map((user) => {\n    let _user = getUser(user.user);\n    return {\n      name: user.user,\n      user_image: _user.user_image,\n      agent_name: _user.full_name,\n    };\n  });\n});\n\nfunction removeMemberFromTeam(member: string) {\n  const users = team.doc?.users?.filter((u) => u.user !== member);\n  team.setValue.submit({\n    users,\n  });\n}\n\nfunction addMember(users: string[]) {\n  const _users = team.doc.users.concat(users.map((user) => ({ user })));\n  team.setValue.submit({\n    users: _users,\n  });\n  invitees.value = [];\n}\n\nconst showRename = ref(false);\n\nconst renameDialogOptions = {\n  title: __(\"Rename team\"),\n  message: __(\"Enter the new name for the team\"),\n  actions: [\n    {\n      label: __(\"Confirm\"),\n      variant: \"solid\",\n      loading: team.loading,\n      onClick: ({ close }) => {\n        renameTeam(close);\n      },\n    },\n  ],\n};\n\nfunction renameTeam(close) {\n  const r = createResource({\n    url: \"frappe.client.rename_doc\",\n    makeParams() {\n      return {\n        doctype: \"HD Team\",\n        old_name: props.teamName,\n        new_name: _teamName.value,\n      };\n    },\n    validate(params) {\n      if (!params.new_name) return __(\"New title is required\");\n      if (params.new_name === params.old_name)\n        return __(\"New and old title cannot be same\");\n    },\n    onSuccess() {\n      teamsList.reload();\n      toast.success(__(\"Team renamed\"));\n      close();\n      emit(\"update:step\", \"team-list\");\n    },\n  });\n\n  r.submit();\n}\n\nconst showDelete = ref(false);\n\nconst options = [\n  {\n    label: __(\"View Assignment rule\"),\n    icon: markRaw(h(Settings, { class: \"rotate-90\" })),\n    onClick: () => {\n      assignmentRulesActiveScreen.value = {\n        data: { name: team.doc?.assignment_rule },\n        screen: \"view\",\n      };\n      setActiveSettingsTab(\"Assignment Rules\");\n    },\n  },\n  {\n    label: __(\"Rename\"),\n    icon: \"edit-3\",\n    onClick: () => (showRename.value = !showRename.value),\n  },\n  {\n    condition: () => teamRestrictionApplied,\n    label: team.doc?.ignore_restrictions\n      ? __(\"Disable Bypass Restrictions\")\n      : __(\"Enable Bypass Restrictions\"),\n    component: () =>\n      h(\n        Tooltip,\n        {\n          text: ignoreRestrictions.value\n            ? __(\n                \"Members of this team will see the tickets assigned to this team only\"\n              )\n            : __(\n                \"Members of this team will be able to see the tickets assigned to all the teams\"\n              ),\n        },\n        {\n          default: () => [\n            //create a div with 2 columns, one for icon and one for label\n            h(\n              \"div\",\n              {\n                class:\n                  \"flex items-center gap-2 p-2 cursor-pointer hover:bg-gray-100 rounded\",\n                onClick: () =>\n                  (ignoreRestrictions.value = !ignoreRestrictions.value),\n              },\n              [\n                h(team.doc?.ignore_restrictions ? LucideLock : LucideUnlock, {\n                  class: \"h-4 w-4 text-gray-700\",\n                  stroke: \"currentColor\",\n                  \"aria-hidden\": \"true\",\n                }),\n                h(\n                  \"span\",\n                  {\n                    class: \"whitespace-nowrap text-ink-gray-7 text-p-base\",\n                  },\n                  [\n                    team.doc?.ignore_restrictions\n                      ? __(\"Access only this team's tickets\")\n                      : __(\"Access all team tickets\"),\n                  ]\n                ),\n              ]\n            ),\n          ],\n        }\n      ),\n  },\n  {\n    label: __(\"Delete\"),\n    component: h(Button, {\n      label: __(\"Delete\"),\n      variant: \"ghost\",\n      iconLeft: \"trash-2\",\n      theme: \"red\",\n      style: \"width: 100%; justify-content: flex-start;\",\n      onClick: () => {\n        showDelete.value = !showDelete.value;\n      },\n    }),\n  },\n];\n\nconst isConfirmingDelete = ref(false);\n\nconst memberDropdownOptions = (member) => {\n  return ConfirmDelete({\n    onConfirmDelete: () => removeMemberFromTeam(member.name),\n    isConfirmingDelete,\n  });\n};\n\nonMounted(() => {\n  if (agents.loading || agents.data?.length || agents.list.promise) {\n    return;\n  }\n  agents.fetch();\n});\n</script>\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      title: __('New team'),\n      actions: [\n        {\n          label: __('Create'),\n          variant: 'solid',\n          onClick: () => {\n            newTeam.submit();\n          },\n        },\n      ],\n    }\"\n  >\n    <template #body-content>\n      <form class=\"space-y-2\" @submit.prevent=\"newTeam.submit\">\n        <FormControl\n          v-model=\"newTeamTitle\"\n          :label=\"__('Title')\"\n          :placeholder=\"__('Product experts')\"\n          type=\"text\"\n        />\n      </form>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { createResource, toast } from \"frappe-ui\";\nimport { ref } from \"vue\";\nimport { __ } from \"@/translation\";\n\nconst emit = defineEmits([\"create\"]);\nconst show = defineModel();\n\nconst newTeamTitle = ref(null);\nconst newTeam = createResource({\n  url: \"frappe.client.insert\",\n  makeParams() {\n    return {\n      doc: {\n        doctype: \"HD Team\",\n        team_name: newTeamTitle.value,\n      },\n    };\n  },\n  validate(params) {\n    if (!params.doc.team_name) return __(\"Title is required\");\n  },\n  auto: false,\n  onSuccess() {\n    toast.success(__(\"Team created\"));\n    newTeamTitle.value = null;\n    show.value = false;\n    emit(\"create\");\n  },\n});\n</script>\n\n<style scoped></style>\n","<template>\n  <Dialog v-model=\"dialog.show\" :options=\"renameDialogOptions\">\n    <template #body-content>\n      <FormControl\n        v-model=\"teamName\"\n        :label=\"__('Title')\"\n        :placeholder=\"__('Product Experts')\"\n      />\n    </template>\n    <template #actions>\n      <Button\n        variant=\"solid\"\n        @click=\"renameTeam\"\n        :loading=\"renameTeamResource.loading\"\n        :disabled=\"teamName == dialog.teamName || teamName.trim() == ''\"\n      >\n        Confirm\n      </Button>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { __ } from \"@/translation\";\nimport { createResource, Dialog, toast } from \"frappe-ui\";\nimport { computed, ref, watch } from \"vue\";\n\nconst emit = defineEmits([\"onRename\"]);\n\nconst dialog = defineModel<{\n  show: boolean;\n  teamName: string;\n}>();\nconst teamName = ref(dialog.value.teamName);\n\nconst renameTeamResource = createResource({\n  url: \"frappe.client.rename_doc\",\n  makeParams() {\n    return {\n      doctype: \"HD Team\",\n      old_name: dialog.value.teamName,\n      new_name: teamName.value,\n    };\n  },\n  validate(params) {\n    if (!params.new_name) return __(\"New title is required\");\n    if (params.new_name === params.old_name)\n      return __(\"New and old title cannot be same\");\n  },\n  onSuccess(data) {\n    toast.success(__(\"Team renamed\"));\n    dialog.value.show = false;\n    emit(\"onRename\", data);\n  },\n});\n\nconst renameDialogOptions = computed(() => ({\n  title: __(\"Rename team\"),\n  message: __(\"Enter the new name for the team\"),\n}));\n\nfunction renameTeam() {\n  renameTeamResource.submit();\n}\n\nwatch(\n  () => dialog.value.show,\n  () => {\n    teamName.value = dialog.value.teamName;\n  }\n);\n</script>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Teams')\"\n    :description=\"\n      __('Create and manage teams and assign agents to specific teams.')\n    \"\n  >\n    <template #header-actions>\n      <Button\n        :label=\"__('New')\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"emit('update:step', 'new-team', '')\"\n        icon-left=\"plus\"\n      />\n    </template>\n    <template\n      v-if=\"teams.data?.length > 9 || teamsSearchQuery.length\"\n      #header-bottom\n    >\n      <div class=\"relative\">\n        <Input\n          :model-value=\"teamsSearchQuery\"\n          @input=\"teamsSearchQuery = $event\"\n          :placeholder=\"__('Search')\"\n          type=\"text\"\n          class=\"bg-white hover:bg-white focus:ring-0 border-outline-gray-2\"\n          icon-left=\"search\"\n          debounce=\"300\"\n          inputClass=\"p-4 pr-12\"\n        />\n        <Button\n          v-if=\"teamsSearchQuery\"\n          icon=\"x\"\n          variant=\"ghost\"\n          @click=\"teamsSearchQuery = ''\"\n          class=\"absolute right-1 top-1/2 -translate-y-1/2\"\n        />\n      </div>\n    </template>\n    <template #content>\n      <!-- List -->\n      <div\n        v-if=\"!teams.loading && teams.data?.length > 0\"\n        class=\"w-full h-full -ml-2\"\n      >\n        <div class=\"flex text-sm text-gray-600\">\n          <div class=\"ml-2\">{{ __(\"Team name\") }}</div>\n        </div>\n        <hr class=\"mx-2 mt-2\" />\n        <div v-for=\"(team, index) in teams.data\" :key=\"team.name\">\n          <div\n            class=\"flex items-center cursor-pointer hover:bg-gray-50 rounded h-12.5\"\n          >\n            <div\n              class=\"w-full py-3 pl-2\"\n              @click=\"() => emit('update:step', 'team-edit', team.name)\"\n            >\n              <div class=\"text-base text-ink-gray-7 font-medium\">\n                {{ team.name }}\n              </div>\n            </div>\n            <div class=\"flex justify-between items-center pr-2\">\n              <div>\n                <Dropdown placement=\"right\" :options=\"dropdownOptions(team)\">\n                  <Button\n                    icon=\"more-horizontal\"\n                    variant=\"ghost\"\n                    @click=\"isConfirmingDelete = false\"\n                  />\n                </Dropdown>\n              </div>\n            </div>\n          </div>\n          <hr v-if=\"index !== teams.data.length - 1\" class=\"mx-2\" />\n        </div>\n        <!-- Load More Button -->\n        <div class=\"flex justify-center\">\n          <Button\n            v-if=\"!teams.loading && teams.hasNextPage\"\n            class=\"mt-3.5 p-2\"\n            @click=\"() => teams.next()\"\n            :loading=\"teams.loading\"\n            :label=\"__('Load More')\"\n            icon-left=\"refresh-cw\"\n          />\n        </div>\n      </div>\n      <!-- Loading State -->\n      <div\n        v-if=\"teams.loading\"\n        class=\"flex mt-28 justify-between w-full h-full\"\n      >\n        <Button\n          :loading=\"teams.loading\"\n          variant=\"ghost\"\n          class=\"w-full\"\n          size=\"2xl\"\n        />\n      </div>\n      <!-- Empty State -->\n      <div\n        v-if=\"!teams.loading && !teams.data?.length\"\n        class=\"flex flex-col items-center justify-center gap-4 h-full\"\n      >\n        <div\n          class=\"p-4 size-14.5 rounded-full bg-surface-gray-1 flex justify-center items-center\"\n        >\n          <AgentIcon class=\"size-6 text-ink-gray-6\" />\n        </div>\n        <div class=\"flex flex-col items-center gap-1\">\n          <div class=\"text-base font-medium text-ink-gray-6\">\n            {{ __(\"No team found\") }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5 max-w-60 text-center\">\n            {{\n              teamsSearchQuery.length\n                ? __(\"Change your search terms to find teams.\")\n                : __(\"Add one to get started.\")\n            }}\n          </div>\n        </div>\n        <Button\n          :label=\"__('New')\"\n          variant=\"outline\"\n          icon-left=\"plus\"\n          @click=\"showForm = true\"\n        />\n      </div>\n    </template>\n  </SettingsLayoutBase>\n  <NewTeamModal\n    v-model=\"showForm\"\n    @create=\"\n      () => {\n        teams.reload();\n      }\n    \"\n  />\n  <RenameTeamModal v-model=\"showRename\" @onRename=\"() => teams.reload()\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { Dropdown, Input, toast } from \"frappe-ui\";\nimport { inject, markRaw, Ref, ref, watch } from \"vue\";\nimport NewTeamModal from \"../NewTeamModal.vue\";\nimport { ConfirmDelete } from \"@/utils\";\nimport EditIcon from \"@/components/icons/EditIcon.vue\";\nimport RenameTeamModal from \"./RenameTeamModal.vue\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { TeamListResourceSymbol } from \"@/types\";\n\ninterface E {\n  (event: \"update:step\", step: string, team: string): void;\n}\n\nconst emit = defineEmits<E>();\nconst teamsSearchQuery = inject<Ref>(\"teamsSearchQuery\");\n\nconst teams = inject(TeamListResourceSymbol);\nconst showForm = ref(false);\nconst showRename = ref({\n  show: false,\n  teamName: \"\",\n});\nconst isConfirmingDelete = ref(false);\n\nconst dropdownOptions = (team: any) => {\n  return [\n    {\n      label: __(\"Rename\"),\n      icon: markRaw(EditIcon),\n      onClick: () => {\n        showRename.value = {\n          show: true,\n          teamName: team.name,\n        };\n      },\n    },\n    ...ConfirmDelete({\n      onConfirmDelete: () => deleteTeam(team),\n      isConfirmingDelete,\n    }),\n  ];\n};\n\nconst deleteTeam = (team: any) => {\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n\n  teams.delete.submit(team.name, {\n    onSuccess: () => {\n      toast.success(__(\"Team deleted\"));\n    },\n  });\n};\n\nwatch(teamsSearchQuery, (newValue) => {\n  teams.filters = {\n    ...teams.filters,\n    name: [\"like\", `%${newValue}%`],\n  };\n  teams.reload();\n});\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <div class=\"flex items-center gap-2\">\n        <Button\n          variant=\"ghost\"\n          icon-left=\"chevron-left\"\n          :label=\"teamData.name || __('New Team')\"\n          size=\"md\"\n          @click=\"goBack()\"\n          class=\"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-ink-gray-7 text-lg hover:opacity-70 !pr-0\"\n        />\n        <Badge\n          variant=\"subtle\"\n          theme=\"orange\"\n          size=\"sm\"\n          :label=\"__('Unsaved')\"\n          v-if=\"isDirty\"\n        />\n      </div>\n    </template>\n    <template #header-actions>\n      <Button\n        :label=\"__('Save')\"\n        variant=\"solid\"\n        @click=\"saveTeam()\"\n        :disabled=\"!isDirty\"\n        :loading=\"teamsList.insert.loading\"\n      />\n    </template>\n    <template #content>\n      <div class=\"flex flex-col gap-4\">\n        <div class=\"space-y-1.5\">\n          <FormControl\n            v-model=\"teamData.name\"\n            :label=\"__('Team Name')\"\n            :placeholder=\"__('Product Experts')\"\n            maxlength=\"50\"\n            required\n            @change=\"validateData('name')\"\n          />\n          <ErrorMessage :message=\"errors.name\" />\n        </div>\n        <div class=\"flex flex-col gap-1.5\">\n          <FormLabel :label=\"__('Members')\" required />\n          <div class=\"flex\">\n            <AgentSelector\n              v-model=\"teamData.agents\"\n              @change=\"validateData('agents')\"\n            />\n          </div>\n          <ErrorMessage :message=\"errors.agents\" />\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, inject, onMounted, ref } from \"vue\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { Badge, ErrorMessage, FormControl, FormLabel, toast } from \"frappe-ui\";\nimport { __ } from \"@/translation\";\nimport AgentSelector from \"./components/AgentSelector.vue\";\nimport { useAgentStore } from \"@/stores/agent\";\nimport { TeamListResourceSymbol } from \"@/types\";\n\ninterface E {\n  (event: \"update:step\", step: string, team?: string): void;\n}\n\nconst emit = defineEmits<E>();\n\nconst teamsList = inject(TeamListResourceSymbol);\nconst { agents } = useAgentStore();\n\nconst isDirty = computed(() => {\n  return teamData.value.name || teamData.value.agents.length;\n});\nconst showConfirmDialog = ref({\n  show: false,\n  title: \"\",\n  message: \"\",\n  onConfirm: () => {},\n});\n\nconst teamData = ref({\n  name: \"\",\n  agents: [],\n});\n\nconst errors = ref({\n  name: \"\",\n  agents: \"\",\n});\n\nconst goBack = () => {\n  const confirmDialogInfo = {\n    show: true,\n    title: __(\"Unsaved changes\"),\n    message: __(\n      \"Are you sure you want to go back? Unsaved changes will be lost.\"\n    ),\n    onConfirm: goBack,\n  };\n  if (isDirty.value && !showConfirmDialog.value.show) {\n    showConfirmDialog.value = confirmDialogInfo;\n    return;\n  }\n\n  // Workaround fix for settings modal not closing after going back\n  setTimeout(() => {\n    emit(\"update:step\", \"team-list\");\n  }, 250);\n  showConfirmDialog.value.show = false;\n};\n\nconst saveTeam = () => {\n  validateData();\n  if (Object.values(errors.value).some((error) => error)) {\n    toast.error(__(\"Please fill all required fields\"));\n    return;\n  }\n  teamsList.insert.submit(\n    {\n      team_name: teamData.value.name,\n      users: teamData.value.agents.map((agent) => ({ user: agent })),\n    },\n    {\n      onSuccess: (data) => {\n        toast.success(__(\"Team created\"));\n        emit(\"update:step\", \"team-edit\", data.name);\n      },\n    }\n  );\n};\n\nconst validateData = (key?: string) => {\n  const validateField = (field: string) => {\n    if (key && field !== key) return;\n\n    switch (field) {\n      case \"name\":\n        teamData.value.name?.length == 0\n          ? (errors.value.name = \"Name is required\")\n          : (errors.value.name = \"\");\n        break;\n      case \"agents\":\n        teamData.value.agents.length == 0\n          ? (errors.value.agents = \"At least one team member is required\")\n          : (errors.value.agents = \"\");\n        break;\n    }\n  };\n\n  if (key) {\n    validateField(key);\n  } else {\n    (Object.keys(errors.value) as string[]).forEach(validateField);\n  }\n\n  return errors.value;\n};\n\nonMounted(() => {\n  if (agents.loading || agents.data?.length || agents.list.promise) {\n    return;\n  }\n  agents.fetch();\n});\n</script>\n","<template>\n  <TeamsList v-if=\"step === 'team-list'\" @update:step=\"updateStep\" />\n  <NewTeam v-else-if=\"step === 'new-team'\" @update:step=\"updateStep\" />\n  <TeamEdit\n    v-else-if=\"step === 'team-edit'\"\n    @update:step=\"updateStep\"\n    :team-name=\"teamName\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { onUnmounted, provide, Ref, ref } from \"vue\";\nimport TeamEdit from \"./TeamEdit.vue\";\nimport TeamsList from \"./TeamsList.vue\";\nimport { createListResource } from \"frappe-ui\";\nimport NewTeam from \"./NewTeam.vue\";\nimport { TeamListResourceSymbol } from \"@/types\";\n\ntype TeamStep = \"team-list\" | \"team-edit\" | \"new-team\";\n\nconst step: Ref<TeamStep> = ref(\"team-list\");\nconst teamName: Ref<string> = ref(\"\");\nfunction updateStep(newStep: TeamStep, team?: string): void {\n  step.value = newStep;\n  teamName.value = team;\n}\nconst teamsSearchQuery = ref(\"\");\n\nconst teams = createListResource({\n  doctype: \"HD Team\",\n  cache: [\"Teams\"],\n  fields: [\"name\"],\n  auto: true,\n  orderBy: \"modified desc\",\n  start: 0,\n  pageLength: 20,\n});\n\nprovide(\"teamsSearchQuery\", teamsSearchQuery);\nprovide(TeamListResourceSymbol, teams);\n\nonUnmounted(() => {\n  teamsSearchQuery.value = \"\";\n  teams.filters = {};\n});\n</script>\n\n<style scoped></style>\n","import { SlaValidationErrors } from \"@/components/Settings/Sla/types\";\nimport { validateConditions } from \"@/utils\";\nimport { ref } from \"vue\";\n\nconst defaultSupportAndResolution = [\n  {\n    workday: \"Monday\",\n    start_time: \"09:00:00\",\n    end_time: \"17:00:00\",\n    id: Math.random().toString(36).substring(2, 9),\n  },\n  {\n    workday: \"Tuesday\",\n    start_time: \"09:00:00\",\n    end_time: \"17:00:00\",\n    id: Math.random().toString(36).substring(2, 9),\n  },\n  {\n    workday: \"Wednesday\",\n    start_time: \"09:00:00\",\n    end_time: \"17:00:00\",\n    id: Math.random().toString(36).substring(2, 9),\n  },\n  {\n    workday: \"Thursday\",\n    start_time: \"09:00:00\",\n    end_time: \"17:00:00\",\n    id: Math.random().toString(36).substring(2, 9),\n  },\n  {\n    workday: \"Friday\",\n    start_time: \"09:00:00\",\n    end_time: \"17:00:00\",\n    id: Math.random().toString(36).substring(2, 9),\n  },\n];\n\nexport const slaData = ref({\n  name: \"\",\n  service_level: \"\",\n  description: \"\",\n  enabled: true,\n  default_sla: false,\n  apply_sla_for_resolution: true,\n  priorities: [],\n  holiday_list: \"Default\",\n  default_priority: \"\",\n  start_date: \"\",\n  end_date: \"\",\n  loading: false,\n  support_and_resolution: defaultSupportAndResolution,\n  default_ticket_status: \"\",\n  reopen_ticket_status: \"\",\n  condition: [],\n  condition_json: [],\n});\n\nexport const resetSlaData = () => {\n  slaData.value = {\n    name: \"\",\n    service_level: \"\",\n    description: \"\",\n    enabled: true,\n    default_sla: false,\n    apply_sla_for_resolution: true,\n    priorities: [],\n    holiday_list: \"Default\",\n    default_priority: \"\",\n    start_date: \"\",\n    end_date: \"\",\n    loading: false,\n    support_and_resolution: defaultSupportAndResolution,\n    default_ticket_status: \"\",\n    reopen_ticket_status: \"\",\n    condition: [],\n    condition_json: [],\n  };\n};\n\nexport const slaActiveScreen = ref<{\n  screen: \"list\" | \"view\";\n  data: Record<string, any> | null;\n  fetchData: boolean;\n}>({ screen: \"list\", data: null, fetchData: true });\n\nexport const slaDataErrors = ref<SlaValidationErrors>({\n  service_level: \"\",\n  description: \"\",\n  enabled: \"\",\n  default_sla: \"\",\n  apply_sla_for_resolution: \"\",\n  priorities: \"\",\n  holiday_list: \"\",\n  default_priority: \"\",\n  start_date: \"\",\n  end_date: \"\",\n  support_and_resolution: \"\",\n  condition: \"\",\n});\n\nexport const resetSlaDataErrors = () => {\n  slaDataErrors.value = {\n    service_level: \"\",\n    description: \"\",\n    enabled: \"\",\n    default_sla: \"\",\n    apply_sla_for_resolution: \"\",\n    priorities: \"\",\n    holiday_list: \"\",\n    default_priority: \"\",\n    start_date: \"\",\n    end_date: \"\",\n    support_and_resolution: \"\",\n    condition: \"\",\n  };\n};\n\ntype SlaField = keyof SlaValidationErrors;\n\nexport function validateSlaData(\n  key?: SlaField,\n  skipConditionCheck = false\n): SlaValidationErrors {\n  // Reset all errors\n  resetSlaDataErrors();\n\n  const validateField = (field: SlaField) => {\n    if (key && field !== key) return;\n\n    switch (field) {\n      case \"service_level\":\n        if (!slaData.value.service_level?.trim()) {\n          slaDataErrors.value.service_level = \"SLA policy name is required\";\n        } else {\n          slaDataErrors.value.service_level = \"\";\n        }\n        break;\n      case \"priorities\":\n        if (\n          !Array.isArray(slaData.value.priorities) ||\n          slaData.value.priorities.length === 0\n        ) {\n          slaDataErrors.value.priorities = \"At least one priority is required\";\n        } else {\n          const prioritiesError: string[] = [];\n          slaData.value.priorities.forEach((priority, index) => {\n            const priorityNum = index + 1;\n            if (!priority.priority?.trim()) {\n              prioritiesError.push(\n                `Priority ${priorityNum}: Priority name is required`\n              );\n            }\n            if (!priority.response_time || priority.response_time == 0) {\n              prioritiesError.push(\n                `Priority ${priorityNum}: Response time is required`\n              );\n            }\n            if (Boolean(slaData.value.apply_sla_for_resolution)) {\n              if (!priority.resolution_time || priority.resolution_time == 0) {\n                prioritiesError.push(\n                  `Priority ${priorityNum}: Resolution time is required`\n                );\n              }\n            }\n            if (\n              priority.response_time > priority.resolution_time &&\n              Boolean(slaData.value.apply_sla_for_resolution)\n            ) {\n              prioritiesError.push(\n                `Priority ${priorityNum}: Response time cannot be greater than resolution time`\n              );\n            }\n          });\n\n          // Check for duplicate priorities\n          const priorityNames = slaData.value.priorities\n            .map((p) => p.priority?.trim().toLowerCase())\n            .filter(Boolean);\n          const uniquePriorities = new Set(priorityNames);\n\n          if (priorityNames.length !== uniquePriorities.size) {\n            prioritiesError.push(\"Priorities must be unique\");\n          }\n\n          if (prioritiesError.length > 0) {\n            slaDataErrors.value.priorities = prioritiesError.join(\", \");\n          } else {\n            slaDataErrors.value.priorities = \"\";\n          }\n\n          const hasDefaultPriority = slaData.value.priorities.some((p) =>\n            Boolean(p.default_priority)\n          );\n          if (!hasDefaultPriority) {\n            slaDataErrors.value.default_priority =\n              \"Default priority is required\";\n          } else {\n            slaDataErrors.value.default_priority = \"\";\n          }\n        }\n        break;\n      case \"holiday_list\":\n        if (!slaData.value.holiday_list) {\n          slaDataErrors.value.holiday_list = \"Holiday list is required\";\n        } else {\n          slaDataErrors.value.holiday_list = \"\";\n        }\n        break;\n      case \"start_date\":\n        if (\n          new Date(slaData.value.end_date) < new Date(slaData.value.start_date)\n        ) {\n          slaDataErrors.value.start_date =\n            \"Start date cannot be after end date\";\n        } else {\n          slaDataErrors.value.start_date = \"\";\n        }\n        break;\n      case \"end_date\":\n        if (\n          slaData.value.end_date &&\n          new Date(slaData.value.end_date) < new Date(slaData.value.start_date)\n        ) {\n          slaDataErrors.value.end_date = \"End date cannot be before start date\";\n        } else {\n          slaDataErrors.value.end_date = \"\";\n        }\n        break;\n      case \"condition\":\n        if (skipConditionCheck) {\n          break;\n        }\n        if (\n          slaData.value.condition_json.length > 0 &&\n          !validateConditions(slaData.value.condition_json)\n        ) {\n          slaDataErrors.value.condition = \"Valid conditions are required\";\n        } else {\n          slaDataErrors.value.condition = \"\";\n        }\n        break;\n      case \"support_and_resolution\":\n        const validWorkdays = slaData.value.support_and_resolution?.filter(\n          (day) =>\n            day.workday &&\n            day.workday.trim() !== \"\" &&\n            day.start_time &&\n            day.end_time &&\n            day.start_time.trim() !== \"\" &&\n            day.end_time.trim() !== \"\"\n        );\n\n        if (!validWorkdays?.length) {\n          slaDataErrors.value.support_and_resolution =\n            \"At least one valid workday with workday, start time, and end time is required\";\n        } else {\n          // Check for duplicate workdays\n          const workdayMap = new Map();\n          const duplicateWorkdays = [];\n\n          for (const day of validWorkdays) {\n            if (workdayMap.has(day.workday)) {\n              duplicateWorkdays.push(day.workday);\n            } else {\n              workdayMap.set(day.workday, true);\n            }\n          }\n\n          if (duplicateWorkdays.length > 0) {\n            slaDataErrors.value.support_and_resolution = `Duplicate workday found: ${duplicateWorkdays.join(\n              \", \"\n            )}. Each workday should be unique.`;\n            return slaDataErrors.value;\n          } else {\n            slaDataErrors.value.support_and_resolution = \"\";\n          }\n\n          const invalidTimeRanges = [];\n          for (const day of validWorkdays) {\n            const startTimeStr = day.start_time.trim();\n            const endTimeStr = day.end_time.trim();\n\n            const parseTime = (timeStr: string) => {\n              const [hours, minutes] = timeStr.split(\":\").map(Number);\n              const date = new Date();\n              date.setHours(hours, minutes || 0, 0, 0);\n              return date;\n            };\n\n            try {\n              const startTime = parseTime(startTimeStr);\n              const endTime = parseTime(endTimeStr);\n\n              if (startTime >= endTime) {\n                invalidTimeRanges.push(\n                  `${day.workday} (${startTimeStr} - ${endTimeStr})`\n                );\n              }\n            } catch (error) {\n              // If time parsing fails, mark as invalid\n              invalidTimeRanges.push(`${day.workday} (Invalid time format)`);\n            }\n          }\n\n          if (invalidTimeRanges.length > 0) {\n            slaDataErrors.value.support_and_resolution = `End time must be after start time for: ${invalidTimeRanges.join(\n              \", \"\n            )}`;\n          } else {\n            slaDataErrors.value.support_and_resolution = \"\";\n          }\n        }\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  if (key) {\n    validateField(key);\n  } else {\n    (Object.keys(slaDataErrors.value) as SlaField[]).forEach(validateField);\n  }\n\n  return slaDataErrors.value;\n}\n","<template>\n  <div\n    class=\"grid grid-cols-6 items-center gap-4 cursor-pointer hover:bg-gray-50 rounded\"\n  >\n    <div\n      @click=\"slaActiveScreen = { screen: 'view', data: data, fetchData: true }\"\n      class=\"w-full pl-2 col-span-5 flex flex-col justify-center h-14\"\n    >\n      <div\n        class=\"text-base text-ink-gray-7 font-medium flex items-center gap-2\"\n      >\n        {{ data.name }}\n        <Badge v-if=\"data.default_sla\" color=\"gray\" size=\"sm\">Default</Badge>\n      </div>\n      <div\n        v-if=\"data.description && data.description.length > 0\"\n        class=\"text-sm w-full text-ink-gray-5 mt-1 truncate\"\n      >\n        {{ data.description }}\n      </div>\n    </div>\n    <div class=\"flex justify-between items-center w-full pr-2\">\n      <div>\n        <Switch\n          size=\"sm\"\n          :modelValue=\"data.enabled\"\n          @update:modelValue=\"onToggle\"\n        />\n      </div>\n      <div>\n        <Dropdown placement=\"right\" :options=\"dropdownOptions\">\n          <Button\n            icon=\"more-horizontal\"\n            variant=\"ghost\"\n            @click=\"isConfirmingDelete = false\"\n          />\n        </Dropdown>\n      </div>\n    </div>\n  </div>\n  <Dialog\n    :options=\"{ title: __('Duplicate SLA Policy') }\"\n    v-model=\"duplicateDialog.show\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <FormControl\n          :label=\"__('New SLA Policy Name')\"\n          type=\"text\"\n          v-model=\"duplicateDialog.name\"\n        />\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex gap-2 justify-end\">\n        <Button\n          variant=\"subtle\"\n          :label=\"__('Close')\"\n          @click=\"duplicateDialog.show = false\"\n        />\n        <Button variant=\"solid\" :label=\"__('Duplicate')\" @click=\"duplicate()\" />\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup lang=\"ts\">\nimport {\n  Switch,\n  Button,\n  createResource,\n  toast,\n  Dialog,\n  Badge,\n  Dropdown,\n} from \"frappe-ui\";\nimport { ref, inject } from \"vue\";\nimport { slaActiveScreen } from \"@/stores/sla\";\nimport { ConfirmDelete } from \"@/utils\";\nimport { __ } from \"@/translation\";\nimport { SlaPolicyListResourceSymbol } from \"@/types\";\n\nconst slaPolicyList = inject(SlaPolicyListResourceSymbol);\n\nconst duplicateDialog = ref({\n  show: false,\n  name: \"\",\n});\n\nconst props = defineProps({\n  data: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst isConfirmingDelete = ref(false);\n\nconst dropdownOptions = [\n  {\n    label: __(\"Duplicate\"),\n    onClick: () => {\n      duplicateDialog.value = {\n        show: true,\n        name: props.data.name + \" (Copy)\",\n      };\n    },\n    icon: \"copy\",\n  },\n  ...ConfirmDelete({\n    onConfirmDelete: () => deleteSla(),\n    isConfirmingDelete,\n  }),\n];\n\nconst duplicate = () => {\n  createResource({\n    url: \"helpdesk.api.sla.duplicate_sla\",\n    params: {\n      docname: props.data.name,\n      new_name: duplicateDialog.value.name,\n    },\n    onSuccess: (data) => {\n      slaPolicyList.reload();\n      toast.success(__(\"SLA policy duplicated\"));\n      duplicateDialog.value = {\n        show: false,\n        name: \"\",\n      };\n      setTimeout(() => {\n        slaActiveScreen.value = {\n          screen: \"view\",\n          data: data,\n          fetchData: true,\n        };\n      }, 250);\n    },\n    auto: true,\n  });\n};\n\nconst deleteSla = () => {\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n\n  slaPolicyList.delete.submit(props.data.name, {\n    onSuccess: () => {\n      toast.success(__(\"SLA policy deleted\"));\n    },\n  });\n};\n\nconst onToggle = () => {\n  if (props.data.default_sla) {\n    toast.error(__(\"SLA set as default cannot be disabled\"));\n    return;\n  }\n  slaPolicyList.setValue.submit(\n    {\n      name: props.data.name,\n      enabled: !props.data.enabled,\n    },\n    {\n      onSuccess: () => {\n        toast.success(__(\"SLA policy status updated\"));\n      },\n    }\n  );\n};\n</script>\n","<template>\n  <div\n    v-if=\"slaPolicyList.list.loading && !slaPolicyList.list.data\"\n    class=\"flex items-center justify-center mt-12\"\n  >\n    <LoadingIndicator class=\"w-4\" />\n  </div>\n  <div v-else class=\"grow\">\n    <div\n      v-if=\"!slaPolicyList.list.loading && !slaPolicyList.list.data?.length\"\n      class=\"flex flex-col items-center justify-center gap-4 h-full\"\n    >\n      <div\n        class=\"p-4 size-14.5 rounded-full bg-surface-gray-1 flex justify-center items-center\"\n      >\n        <ShieldCheck class=\"size-6 text-ink-gray-6\" />\n      </div>\n      <div class=\"flex flex-col items-center gap-1\">\n        <div class=\"text-base font-medium text-ink-gray-6\">\n          {{ __(\"No SLA found\") }}\n        </div>\n        <div class=\"text-p-sm text-ink-gray-5 max-w-60 text-center\">\n          {{ __(\"Add one to get started.\") }}\n        </div>\n      </div>\n      <Button\n        :label=\"__('New')\"\n        variant=\"outline\"\n        icon-left=\"plus\"\n        @click=\"goToNew()\"\n      />\n    </div>\n    <div v-else class=\"-ml-2\">\n      <div\n        class=\"grid grid-cols-6 items-center gap-3 text-sm text-gray-600 ml-2\"\n      >\n        <div class=\"col-span-5\">\n          {{ __(\"Policy Name\") }}\n        </div>\n        <div class=\"col-span-1\">{{ __(\"Enabled\") }}</div>\n      </div>\n      <hr class=\"mt-2 mx-2\" />\n      <div v-for=\"(sla, index) in slaPolicyList.list.data\" :key=\"sla.name\">\n        <SlaPolicyListItem :data=\"sla\" />\n        <hr v-if=\"index !== slaPolicyList.list.data.length - 1\" class=\"mx-2\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Button, LoadingIndicator } from \"frappe-ui\";\nimport SlaPolicyListItem from \"./SlaPolicyListItem.vue\";\nimport { inject } from \"vue\";\nimport { resetSlaData, slaActiveScreen } from \"@/stores/sla\";\nimport ShieldCheck from \"~icons/lucide/shield-check\";\nimport { SlaPolicyListResourceSymbol } from \"@/types\";\n\nconst slaPolicyList = inject(SlaPolicyListResourceSymbol);\n\nconst goToNew = () => {\n  resetSlaData();\n  slaActiveScreen.value = {\n    screen: \"view\",\n    data: null,\n    fetchData: true,\n  };\n};\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <h1 class=\"text-lg font-semibold text-ink-gray-8\">\n        {{ __(\"Service Level Agreements (SLAs)\") }}\n      </h1>\n    </template>\n    <template #description>\n      <p class=\"text-p-sm max-w-md text-ink-gray-6\">\n        {{\n          __(\n            \"SLAs align your team and customers with defined timelines for a reliable experience.\"\n          )\n        }}\n        <a\n          href=\"https://docs.frappe.io/helpdesk/service-level-agreement\"\n          target=\"_blank\"\n          class=\"underline\"\n          >{{ __(\"Learn more about SLA\") }}\n        </a>\n      </p>\n    </template>\n    <template #header-actions>\n      <Button\n        :label=\"__('New')\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"goToNew()\"\n        icon-left=\"plus\"\n      />\n    </template>\n    <template\n      v-if=\"slaPolicyList.data?.length > 9 || slaSearchQuery.length\"\n      #header-bottom\n    >\n      <div class=\"relative\">\n        <Input\n          :model-value=\"slaSearchQuery\"\n          @input=\"slaSearchQuery = $event\"\n          :placeholder=\"__('Search')\"\n          type=\"text\"\n          class=\"bg-white hover:bg-white focus:ring-0 border-outline-gray-2\"\n          icon-left=\"search\"\n          debounce=\"300\"\n          inputClass=\"p-4 pr-12\"\n        />\n        <Button\n          v-if=\"slaSearchQuery\"\n          icon=\"x\"\n          variant=\"ghost\"\n          @click=\"slaSearchQuery = ''\"\n          class=\"absolute right-1 top-1/2 -translate-y-1/2\"\n        />\n      </div>\n    </template>\n    <template #content>\n      <SlaPolicyList />\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { resetSlaData, slaActiveScreen } from \"@/stores/sla\";\nimport { Button } from \"frappe-ui\";\nimport SlaPolicyList from \"./SlaPolicyList.vue\";\nimport { inject, Ref, watch } from \"vue\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { SlaPolicyListResourceSymbol } from \"@/types\";\n\nconst slaPolicyList = inject(SlaPolicyListResourceSymbol);\nconst slaSearchQuery = inject<Ref>(\"slaSearchQuery\");\n\nconst goToNew = () => {\n  resetSlaData();\n  slaActiveScreen.value = {\n    screen: \"view\",\n    data: null,\n    fetchData: true,\n  };\n};\n\nwatch(slaSearchQuery, (newValue) => {\n  slaPolicyList.filters = {\n    name: [\"like\", `%${newValue}%`],\n  };\n  if (!newValue) {\n    slaPolicyList.start = 0;\n    slaPolicyList.pageLength = 10;\n  }\n  slaPolicyList.reload();\n});\n</script>\n","import { createResource } from \"frappe-ui\";\n\nexport const filterableFields = createResource({\n  url: \"helpdesk.api.doc.get_filterable_fields\",\n  params: {\n    doctype: \"HD Ticket\",\n    ignore_team_restrictions: true,\n  },\n  transform: (data) => {\n    data = data\n      .filter((field) => !field.fieldname.startsWith(\"_\"))\n      .map((field) => {\n        return {\n          label: field.label,\n          value: field.fieldname,\n          ...field,\n        };\n      });\n    return data;\n  },\n});\n","<template>\n  <div\n    class=\"flex gap-2\"\n    :class=\"[\n      {\n        'items-center': !props.isGroup,\n      },\n    ]\"\n  >\n    <div\n      class=\"flex gap-2 w-full\"\n      :class=\"[\n        {\n          'items-center justify-between': !props.isGroup,\n        },\n      ]\"\n    >\n      <div :class=\"'text-end text-base text-gray-600'\">\n        <div v-if=\"props.itemIndex == 0\" class=\"min-w-[66px] text-start\">\n          Where\n        </div>\n        <div v-else class=\"min-w-[66px] flex items-start\">\n          <Button\n            variant=\"subtle\"\n            class=\"w-max\"\n            @click=\"toggleConjunction\"\n            icon-right=\"refresh-cw\"\n            :disabled=\"props.itemIndex > 2\"\n            :label=\"conjunction\"\n          />\n        </div>\n      </div>\n      <div v-if=\"!props.isGroup\" class=\"flex items-center gap-2 w-full\">\n        <div id=\"fieldname\" class=\"w-full\">\n          <Autocomplete\n            :options=\"filterableFields.data\"\n            v-model=\"props.condition[0]\"\n            :placeholder=\"'Field'\"\n            @update:modelValue=\"updateField\"\n          />\n        </div>\n        <div id=\"operator\">\n          <FormControl\n            v-if=\"!props.condition[0]\"\n            disabled\n            type=\"text\"\n            :placeholder=\"'operator'\"\n            class=\"w-[100px]\"\n          />\n          <FormControl\n            v-else\n            :disabled=\"!props.condition[0]\"\n            type=\"select\"\n            v-model=\"props.condition[1]\"\n            @change=\"updateOperator\"\n            :options=\"getOperators()\"\n            class=\"w-max min-w-[100px]\"\n          />\n        </div>\n        <div id=\"value\" class=\"w-full\">\n          <FormControl\n            v-if=\"!props.condition[0]\"\n            disabled\n            type=\"text\"\n            :placeholder=\"'condition'\"\n            class=\"w-full\"\n          />\n          <component\n            v-else\n            :is=\"getValueControl()\"\n            v-model=\"props.condition[2]\"\n            @change=\"updateValue\"\n            :placeholder=\"'condition'\"\n          />\n        </div>\n      </div>\n      <CFConditions\n        v-if=\"props.isGroup && !(props.level == 2 || props.level == 4)\"\n        :conditions=\"props.condition\"\n        :isChild=\"true\"\n        :level=\"props.level\"\n        :disableAddCondition=\"props.disableAddCondition\"\n      />\n      <Button\n        variant=\"outline\"\n        v-if=\"props.isGroup && (props.level == 2 || props.level == 4)\"\n        @click=\"show = true\"\n        label=\"Open nested conditions\"\n      />\n    </div>\n    <div :class=\"'w-max'\">\n      <Dropdown placement=\"right\" :options=\"dropdownOptions\">\n        <Button variant=\"ghost\" icon=\"more-horizontal\" />\n      </Dropdown>\n    </div>\n  </div>\n  <Dialog v-model=\"show\" :options=\"{ size: '3xl', title: 'Nested conditions' }\">\n    <template #body-content>\n      <CFConditions\n        :conditions=\"props.condition\"\n        :isChild=\"true\"\n        :level=\"props.level\"\n        :disableAddCondition=\"props.disableAddCondition\"\n      />\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { Link, StarRating } from \"@/components\";\nimport { TemplateOption } from \"@/utils\";\nimport {\n  Autocomplete,\n  Button,\n  DatePicker,\n  DateRangePicker,\n  DateTimePicker,\n  Dialog,\n  Dropdown,\n  FormControl,\n} from \"frappe-ui\";\nimport { computed, defineEmits, h, ref } from \"vue\";\nimport GroupIcon from \"~icons/lucide/group\";\nimport UnGroupIcon from \"~icons/lucide/ungroup\";\nimport CFConditions from \"./CFConditions.vue\";\nimport { filterableFields } from \"./filterableFields\";\n\nconst show = ref(false);\nconst emit = defineEmits([\n  \"remove\",\n  \"unGroupConditions\",\n  \"toggleConjunction\",\n  \"turnIntoGroup\",\n]);\n\nconst props = defineProps({\n  condition: {\n    type: Array<any>,\n    required: true,\n  },\n  isChild: {\n    type: Boolean,\n    default: false,\n  },\n  itemIndex: {\n    type: Number,\n  },\n  level: {\n    type: Number,\n    default: 0,\n  },\n  isGroup: {\n    type: Boolean,\n    default: false,\n  },\n  conjunction: {\n    type: String,\n  },\n  disableAddCondition: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst dropdownOptions = computed(() => {\n  const options = [];\n\n  if (!props.isGroup && props.level < 4) {\n    options.push({\n      label: \"Turn into a group\",\n      icon: () => h(GroupIcon),\n      onClick: () => {\n        emit(\"turnIntoGroup\");\n      },\n    });\n  }\n\n  if (props.isGroup) {\n    options.push({\n      label: \"Ungroup conditions\",\n      icon: () => h(UnGroupIcon),\n      onClick: () => {\n        emit(\"unGroupConditions\");\n      },\n    });\n  }\n\n  options.push({\n    label: \"Remove\",\n    component: (props) =>\n      TemplateOption({\n        option: \"Remove\",\n        icon: \"trash-2\",\n        active: props.active,\n        variant: \"danger\",\n        onClick: () => {\n          emit(\"remove\");\n        },\n      }),\n    condition: () => !props.isGroup,\n  });\n\n  options.push({\n    label: \"Remove group\",\n    component: (props) =>\n      TemplateOption({\n        option: \"Remove group\",\n        icon: \"trash-2\",\n        active: props.active,\n        variant: \"danger\",\n        onClick: () => {\n          emit(\"remove\");\n        },\n      }),\n    condition: () => props.isGroup,\n  });\n\n  return options;\n});\n\nconst typeCheck = [\"Check\"];\nconst typeLink = [\"Link\", \"Dynamic Link\"];\nconst typeNumber = [\"Float\", \"Int\", \"Currency\", \"Percent\"];\nconst typeSelect = [\"Select\"];\nconst typeString = [\"Data\", \"Long Text\", \"Small Text\", \"Text Editor\", \"Text\"];\nconst typeDate = [\"Date\", \"Datetime\"];\nconst typeRating = [\"Rating\"];\n\nfunction toggleConjunction() {\n  emit(\"toggleConjunction\", props.conjunction);\n}\n\nconst updateField = (field) => {\n  props.condition[0] = field?.fieldname;\n  resetConditionValue();\n};\n\nconst resetConditionValue = () => {\n  props.condition[2] = \"\";\n};\n\nfunction getValueControl() {\n  const [field, operator] = props.condition;\n  if (!field) return null;\n  const fieldData = filterableFields.data?.find((f) => f.fieldname == field);\n  if (!fieldData) return null;\n  const { fieldtype, options } = fieldData;\n  if (operator == \"is\") {\n    return h(FormControl, {\n      type: \"select\",\n      options: [\n        {\n          label: \"Set\",\n          value: \"set\",\n        },\n        {\n          label: \"Not Set\",\n          value: \"not set\",\n        },\n      ],\n    });\n  } else if ([\"like\", \"not like\", \"in\", \"not in\"].includes(operator)) {\n    return h(FormControl, { type: \"text\" });\n  } else if (typeSelect.includes(fieldtype) || typeCheck.includes(fieldtype)) {\n    const _options =\n      fieldtype == \"Check\" ? [\"Yes\", \"No\"] : getSelectOptions(options);\n    return h(FormControl, {\n      type: \"select\",\n      options: _options.map((o) => ({\n        label: o,\n        value: o,\n      })),\n    });\n  } else if (typeLink.includes(fieldtype)) {\n    if (fieldtype == \"Dynamic Link\") {\n      return h(FormControl, { type: \"text\" });\n    }\n    return h(Link, {\n      class: \"form-control\",\n      doctype: options,\n      value: props.condition[2],\n    });\n  } else if (typeNumber.includes(fieldtype)) {\n    return h(FormControl, { type: \"number\" });\n  } else if (typeDate.includes(fieldtype) && operator == \"between\") {\n    return h(DateRangePicker, { value: props.condition[2], iconLeft: \"\" });\n  } else if (typeDate.includes(fieldtype)) {\n    return h(fieldtype == \"Date\" ? DatePicker : DateTimePicker, {\n      value: props.condition[2],\n      iconLeft: \"\",\n    });\n  } else if (typeRating.includes(fieldtype)) {\n    return h(StarRating, {\n      rating: props.condition[2] || 0,\n      static: false,\n      class: \"truncate\",\n      \"onUpdate:modelValue\": (v) => updateValue(v),\n    });\n  } else {\n    return h(FormControl, { type: \"text\" });\n  }\n}\n\nfunction updateValue(value) {\n  value = value.target ? value.target.value : value;\n  if (props.condition[1] === \"between\") {\n    props.condition[2] = [value.split(\",\")[0], value.split(\",\")[1]];\n  } else {\n    props.condition[2] = value + \"\";\n  }\n}\n\nfunction getSelectOptions(options) {\n  return options.split(\"\\n\");\n}\n\nfunction updateOperator(event) {\n  let oldOperatorValue = event.target._value;\n  let newOperatorValue = event.target.value;\n  props.condition[1] = event.target.value;\n  if (!isSameTypeOperator(oldOperatorValue, newOperatorValue)) {\n    props.condition[2] = getDefaultValue(props.condition[0]);\n  }\n  resetConditionValue();\n}\n\nfunction getOperators() {\n  let options = [];\n  const field = props.condition[0];\n  if (!field) return options;\n  const fieldData = filterableFields.data?.find((f) => f.fieldname == field);\n  if (!fieldData) return options;\n  const { fieldtype, fieldname } = fieldData;\n  if (typeString.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: \"Equals\", value: \"==\" },\n        { label: \"Not Equals\", value: \"!=\" },\n        { label: \"Like\", value: \"like\" },\n        { label: \"Not Like\", value: \"not like\" },\n        { label: \"In\", value: \"in\" },\n        { label: \"Not In\", value: \"not in\" },\n        { label: \"Is\", value: \"is\" },\n      ]\n    );\n  }\n  if (fieldname === \"_assign\") {\n    options = [\n      { label: \"Like\", value: \"like\" },\n      { label: \"Not Like\", value: \"not like\" },\n      { label: \"Is\", value: \"is\" },\n    ];\n  }\n  if (typeNumber.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: \"Equals\", value: \"==\" },\n        { label: \"Not Equals\", value: \"!=\" },\n        { label: \"Like\", value: \"like\" },\n        { label: \"Not Like\", value: \"not like\" },\n        { label: \"In\", value: \"in\" },\n        { label: \"Not In\", value: \"not in\" },\n        { label: \"Is\", value: \"is\" },\n        { label: \"<\", value: \"<\" },\n        { label: \">\", value: \">\" },\n        { label: \"<=\", value: \"<=\" },\n        { label: \">=\", value: \">=\" },\n      ]\n    );\n  }\n  if (typeSelect.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: \"Equals\", value: \"==\" },\n        { label: \"Not Equals\", value: \"!=\" },\n        { label: \"In\", value: \"in\" },\n        { label: \"Not In\", value: \"not in\" },\n        { label: \"Is\", value: \"is\" },\n      ]\n    );\n  }\n  if (typeLink.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: \"Equals\", value: \"==\" },\n        { label: \"Not Equals\", value: \"!=\" },\n        { label: \"Like\", value: \"like\" },\n        { label: \"Not Like\", value: \"not like\" },\n        { label: \"In\", value: \"in\" },\n        { label: \"Not In\", value: \"not in\" },\n        { label: \"Is\", value: \"is\" },\n      ]\n    );\n  }\n  if (typeCheck.includes(fieldtype)) {\n    options.push(...[{ label: \"Equals\", value: \"==\" }]);\n  }\n  if ([\"Duration\"].includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: \"Like\", value: \"like\" },\n        { label: \"Not Like\", value: \"not like\" },\n        { label: \"In\", value: \"in\" },\n        { label: \"Not In\", value: \"not in\" },\n        { label: \"Is\", value: \"is\" },\n      ]\n    );\n  }\n  if (typeDate.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: \"Equals\", value: \"==\" },\n        { label: \"Not Equals\", value: \"!=\" },\n        { label: \"Is\", value: \"is\" },\n        { label: \">\", value: \">\" },\n        { label: \"<\", value: \"<\" },\n        { label: \">=\", value: \">=\" },\n        { label: \"<=\", value: \"<=\" },\n        { label: \"Between\", value: \"between\" },\n      ]\n    );\n  }\n  if (typeRating.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: \"Equals\", value: \"==\" },\n        { label: \"Not Equals\", value: \"!=\" },\n        { label: \"Is\", value: \"is\" },\n        { label: \">\", value: \">\" },\n        { label: \"<\", value: \"<\" },\n        { label: \">=\", value: \">=\" },\n        { label: \"<=\", value: \"<=\" },\n      ]\n    );\n  }\n  const op = options.find((o) => o.value == props.condition[1]);\n  props.condition[1] = op?.value || options[0].value;\n  return options;\n}\n\nfunction getDefaultValue(field) {\n  if (typeSelect.includes(field.fieldtype)) {\n    return getSelectOptions(field.options)[0];\n  }\n  if (typeCheck.includes(field.fieldtype)) {\n    return \"Yes\";\n  }\n  if (typeDate.includes(field.fieldtype)) {\n    return null;\n  }\n  if (typeRating.includes(field.fieldtype)) {\n    return 0;\n  }\n  return \"\";\n}\n\nfunction isSameTypeOperator(oldOperator, newOperator) {\n  let textOperators = [\"==\", \"!=\", \"in\", \"not in\", \">\", \"<\", \">=\", \"<=\"];\n  if (\n    textOperators.includes(oldOperator) &&\n    textOperators.includes(newOperator)\n  )\n    return true;\n  return false;\n}\n</script>\n","<template>\n  <div class=\"rounded-lg border border-gray-300 p-3 flex flex-col gap-4 w-full\">\n    <template v-for=\"(condition, i) in props.conditions\" :key=\"condition.field\">\n      <CFCondition\n        v-if=\"Array.isArray(condition)\"\n        :condition=\"condition\"\n        :isChild=\"props.isChild\"\n        :itemIndex=\"i\"\n        @remove=\"removeCondition(condition)\"\n        @unGroupConditions=\"unGroupConditions(condition)\"\n        :level=\"props.level + 1\"\n        @toggleConjunction=\"toggleConjunction\"\n        :isGroup=\"isGroupCondition(condition[0])\"\n        :conjunction=\"getConjunction()\"\n        @turnIntoGroup=\"turnIntoGroup(condition)\"\n        :disableAddCondition=\"props.disableAddCondition\"\n      />\n    </template>\n    <div v-if=\"props.isChild\" class=\"flex\">\n      <Dropdown v-slot=\"{ open }\" :options=\"dropdownOptions\">\n        <Button\n          :disabled=\"props.disableAddCondition\"\n          label=\"Add condition\"\n          icon-left=\"plus\"\n          :icon-right=\"open ? 'chevron-up' : 'chevron-down'\"\n        />\n      </Dropdown>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Button, Dropdown } from \"frappe-ui\";\nimport { computed, onMounted } from \"vue\";\nimport CFCondition from \"./CFCondition.vue\";\nimport { filterableFields } from \"./filterableFields\";\n\nconst props = defineProps({\n  conditions: {\n    type: Array<any>,\n    required: true,\n  },\n  isChild: {\n    type: Boolean,\n    default: false,\n  },\n  level: {\n    type: Number,\n    default: 0,\n  },\n  disableAddCondition: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst getConjunction = () => {\n  let conjunction = \"and\";\n  props.conditions.forEach((condition) => {\n    if (typeof condition == \"string\") {\n      conjunction = condition;\n    }\n  });\n  return conjunction;\n};\n\nconst turnIntoGroup = (condition) => {\n  props.conditions.splice(props.conditions.indexOf(condition), 1, [condition]);\n};\n\nconst isGroupCondition = (condition) => {\n  return Array.isArray(condition);\n};\n\nconst dropdownOptions = computed(() => {\n  const options = [\n    {\n      label: \"Add condition\",\n      onClick: () => {\n        const conjunction = getConjunction();\n        props.conditions.push(conjunction, [\"\", \"\", \"\"]);\n      },\n    },\n  ];\n  if (props.level < 3) {\n    options.push({\n      label: \"Add condition group\",\n      onClick: () => {\n        const conjunction = getConjunction();\n        props.conditions.push(conjunction, [[]]);\n      },\n    });\n  }\n  return options;\n});\n\nfunction removeCondition(condition) {\n  const conditionIndex = props.conditions.indexOf(condition);\n  if (conditionIndex == 0) {\n    props.conditions.splice(conditionIndex, 2);\n  } else {\n    props.conditions.splice(conditionIndex - 1, 2);\n  }\n}\n\nfunction unGroupConditions(condition) {\n  const conjunction = getConjunction();\n  const newConditions = condition.map((c) => {\n    if (typeof c == \"string\") {\n      return conjunction;\n    }\n    return c;\n  });\n\n  const index = props.conditions.indexOf(condition);\n  if (index !== -1) {\n    props.conditions.splice(index, 1, ...newConditions);\n  }\n}\n\nfunction toggleConjunction(conjunction) {\n  for (let i = 0; i < props.conditions.length; i++) {\n    if (typeof props.conditions[i] == \"string\") {\n      props.conditions[i] = conjunction == \"and\" ? \"or\" : \"and\";\n    }\n  }\n}\n\nonMounted(() => {\n  if (!filterableFields.fetched) {\n    filterableFields.submit();\n  }\n});\n</script>\n","<template>\n  <CFConditions\n    v-if=\"props.conditions.length > 0\"\n    :conditions=\"props.conditions\"\n    :level=\"0\"\n    :disableAddCondition=\"slaDataErrors.condition != ''\"\n  />\n  <div\n    v-if=\"props.conditions.length == 0\"\n    class=\"flex p-4 items-center cursor-pointer justify-center gap-2 text-sm border border-gray-300 text-gray-600 rounded-md\"\n    @click=\"props.conditions.push(['', '', ''])\"\n  >\n    <FeatherIcon name=\"plus\" class=\"h-4\" />\n    {{ __(\"Add a custom condition\") }}\n  </div>\n  <div class=\"flex items-center justify-between mt-2\">\n    <Dropdown\n      v-if=\"props.conditions.length > 0\"\n      v-slot=\"{ open }\"\n      :options=\"dropdownOptions\"\n    >\n      <Button\n        :disabled=\"slaDataErrors.condition != ''\"\n        :icon-right=\"open ? 'chevron-up' : 'chevron-down'\"\n        :label=\"__('Add condition')\"\n      />\n    </Dropdown>\n    <ErrorMessage :message=\"slaDataErrors.condition\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Button, Dropdown, ErrorMessage, FeatherIcon } from \"frappe-ui\";\nimport { slaDataErrors, validateSlaData } from \"@/stores/sla\";\nimport { watchDebounced } from \"@vueuse/core\";\nimport CFConditions from \"@/components/conditions-filter/CFConditions.vue\";\nimport { validateConditions } from \"@/utils\";\n\nconst props = defineProps({\n  conditions: {\n    type: Array<any>,\n    required: true,\n  },\n});\n\nconst getConjunction = () => {\n  let conjunction = \"and\";\n  props.conditions.forEach((condition) => {\n    if (typeof condition == \"string\") {\n      conjunction = condition;\n    }\n  });\n  return conjunction;\n};\n\nconst dropdownOptions = [\n  {\n    label: \"Add condition\",\n    onClick: () => {\n      addCondition();\n    },\n  },\n  {\n    label: \"Add condition group\",\n    onClick: () => {\n      const conjunction = getConjunction();\n      props.conditions.push(conjunction, [[]]);\n    },\n  },\n];\n\nconst addCondition = () => {\n  const isValid = validateConditions(props.conditions);\n\n  if (!isValid) {\n    return;\n  }\n  const conjunction = getConjunction();\n\n  props.conditions.push(conjunction, [\"\", \"\", \"\"]);\n};\n\nwatchDebounced(\n  () => [...props.conditions],\n  () => {\n    validateSlaData(\"condition\");\n  },\n  { deep: true, debounce: 100 }\n);\n</script>\n","<template>\n  <Dialog\n    v-model=\"dialog.show\"\n    @after-leave=\"resetForm\"\n    :options=\"{ title: dialog.isEditing ? 'Edit workday' : 'Add workday' }\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <div>\n          <FormControl\n            :type=\"'select'\"\n            size=\"sm\"\n            variant=\"subtle\"\n            placeholder=\"Select Workday\"\n            label=\"Workday\"\n            v-model=\"workDayData.workday\"\n            :options=\"[\n              {\n                label: 'Monday',\n                value: 'Monday',\n              },\n              {\n                label: 'Tuesday',\n                value: 'Tuesday',\n              },\n              {\n                label: 'Wednesday',\n                value: 'Wednesday',\n              },\n              {\n                label: 'Thursday',\n                value: 'Thursday',\n              },\n              {\n                label: 'Friday',\n                value: 'Friday',\n              },\n              {\n                label: 'Saturday',\n                value: 'Saturday',\n              },\n              {\n                label: 'Sunday',\n                value: 'Sunday',\n              },\n            ]\"\n            :class=\"{ 'border-red-500': errors.workday }\"\n            @blur=\"validateField('workday')\"\n          />\n          <ErrorMessage :message=\"errors.workday\" class=\"mt-2\" />\n        </div>\n\n        <div>\n          <FormControl\n            :type=\"'time'\"\n            size=\"sm\"\n            variant=\"subtle\"\n            placeholder=\"Start Time\"\n            label=\"Start Time\"\n            v-model=\"workDayData.start_time\"\n            :class=\"{ 'border-red-500': errors.start_time }\"\n            @blur=\"validateField('start_time')\"\n          />\n          <ErrorMessage :message=\"errors.start_time\" class=\"mt-2\" />\n        </div>\n\n        <div>\n          <FormControl\n            :type=\"'time'\"\n            size=\"sm\"\n            variant=\"subtle\"\n            placeholder=\"End Time\"\n            label=\"End Time\"\n            v-model=\"workDayData.end_time\"\n            :class=\"{ 'border-red-500': errors.end_time }\"\n            @blur=\"validateTimeRange\"\n          />\n          <ErrorMessage :message=\"errors.end_time\" class=\"mt-2\" />\n        </div>\n      </div>\n    </template>\n    <template #actions>\n      <div\n        class=\"flex\"\n        :class=\"{\n          'justify-between': dialog.isEditing,\n          'justify-end': !dialog.isEditing,\n        }\"\n      >\n        <div v-if=\"dialog.isEditing\">\n          <Button\n            variant=\"subtle\"\n            :theme=\"isConfirmingDelete ? 'red' : 'gray'\"\n            :label=\"isConfirmingDelete ? 'Confirm Delete' : 'Delete'\"\n            @click=\"deleteWorkDay\"\n            icon-left=\"trash-2\"\n          />\n        </div>\n        <div class=\"flex gap-2\">\n          <Button\n            variant=\"subtle\"\n            theme=\"gray\"\n            @click=\"dialog.show = false\"\n            label=\"Cancel\"\n          />\n          <Button variant=\"solid\" @click=\"onSave\" label=\"Save\" />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, defineModel, reactive, watch } from \"vue\";\nimport { Dialog, FormControl, Button, toast } from \"frappe-ui\";\n\nconst isConfirmingDelete = ref(false);\nconst props = defineProps({\n  workDaysList: {\n    type: Array<any>,\n    required: true,\n  },\n});\n\ninterface DialogData {\n  show: boolean;\n  isEditing: boolean;\n  data?: any;\n}\n\nconst dialog = defineModel<DialogData>({\n  required: true,\n  default: () => ({\n    show: false,\n    isEditing: false,\n    data: {\n      workday: \"\",\n      start_time: \"\",\n      end_time: \"\",\n    },\n  }),\n});\n\nconst workDayData = reactive({\n  workday: \"\",\n  start_time: \"\",\n  end_time: \"\",\n});\n\nconst errors = reactive({\n  workday: \"\",\n  start_time: \"\",\n  end_time: \"\",\n});\n\nconst deleteWorkDay = (event) => {\n  event.preventDefault();\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n\n  const item = props.workDaysList.findIndex(\n    (item) => item.workday === workDayData.workday\n  );\n  if (item !== -1) {\n    props.workDaysList.splice(item, 1);\n  }\n};\n\nfunction formatTimeToHHMMSS(timeStr: string) {\n  if (!timeStr) return \"\";\n\n  if (/^\\d{1,2}:\\d{2}:\\d{2}$/.test(timeStr)) {\n    const [hours, minutes, seconds] = timeStr.split(\":\");\n    return `${hours.padStart(2, \"0\")}:${minutes.padStart(\n      2,\n      \"0\"\n    )}:${seconds.padStart(2, \"0\")}`;\n  }\n\n  if (/^\\d{1,2}:\\d{2}$/.test(timeStr)) {\n    const [hours, minutes] = timeStr.split(\":\");\n    return `${hours.padStart(2, \"0\")}:${minutes.padStart(2, \"0\")}:00`;\n  }\n\n  return \"\";\n}\n\nfunction resetForm() {\n  workDayData.workday = \"\";\n  workDayData.start_time = \"\";\n  workDayData.end_time = \"\";\n  errors.workday = \"\";\n  errors.start_time = \"\";\n  errors.end_time = \"\";\n  isConfirmingDelete.value = false;\n}\n\nconst validateField = (field: string) => {\n  if (!workDayData[field as keyof typeof workDayData]) {\n    errors[field as keyof typeof errors] = \"This field is required\";\n    return false;\n  }\n  errors[field as keyof typeof errors] = \"\";\n  return true;\n};\n\nconst validateTimeRange = () => {\n  if (!workDayData.start_time || !workDayData.end_time) {\n    if (!workDayData.start_time) errors.start_time = \"Start time is required\";\n    if (!workDayData.end_time) errors.end_time = \"End time is required\";\n    return false;\n  }\n\n  const [startHours, startMinutes] = workDayData.start_time\n    .split(\":\")\n    .map(Number);\n  const [endHours, endMinutes] = workDayData.end_time.split(\":\").map(Number);\n\n  if (\n    endHours < startHours ||\n    (endHours === startHours && endMinutes <= startMinutes)\n  ) {\n    errors.end_time = \"End time must be after start time\";\n    return false;\n  }\n\n  errors.end_time = \"\";\n  return true;\n};\n\nconst validateForm = () => {\n  const isWorkdayValid = validateField(\"workday\");\n  const isStartTimeValid = validateField(\"start_time\");\n  const isEndTimeValid = validateField(\"end_time\") && validateTimeRange();\n\n  return isWorkdayValid && isStartTimeValid && isEndTimeValid;\n};\n\nconst onSave = () => {\n  if (!validateForm()) {\n    toast.error(\"Please fix the errors in the form\");\n    return;\n  }\n\n  try {\n    if (dialog.value.isEditing) {\n      const itemIndex = props.workDaysList.findIndex(\n        (item) => item.workday === dialog.value.data?.workday\n      );\n      if (itemIndex !== -1) {\n        const updatedItem = {\n          ...props.workDaysList[itemIndex],\n          ...workDayData,\n        };\n        props.workDaysList.splice(itemIndex, 1, updatedItem);\n        toast.success(\"Workday updated\");\n      }\n    } else {\n      const isDuplicate = props.workDaysList.some(\n        (item) => item.workday === workDayData.workday\n      );\n\n      if (isDuplicate) {\n        errors.workday = \"This workday already exists\";\n        toast.error(\"A workday with this name already exists\");\n        return;\n      }\n\n      const newWorkDay = { ...workDayData };\n      props.workDaysList.push(newWorkDay);\n      toast.success(\"Workday added\");\n    }\n    dialog.value.show = false;\n  } catch (error) {\n    toast.error(`Failed to save workday: ${error}`);\n  }\n};\n\nwatch(\n  () => dialog.value.show,\n  (isOpen) => {\n    if (isOpen) {\n      if (dialog.value.isEditing && dialog.value.data) {\n        workDayData.workday = dialog.value.data.workday;\n        workDayData.start_time = formatTimeToHHMMSS(\n          dialog.value.data.start_time\n        );\n        workDayData.end_time = formatTimeToHHMMSS(dialog.value.data.end_time);\n      } else {\n        resetForm();\n      }\n    }\n  }\n);\n</script>\n","<template>\n  <div\n    class=\"grid gap-2 py-3.5 px-4 items-center\"\n    :style=\"{\n      gridTemplateColumns: getGridTemplateColumnsForTable(props.columns),\n    }\"\n  >\n    <div\n      v-for=\"column in props.columns\"\n      :key=\"column.key\"\n      class=\"w-full overflow-hidden whitespace-nowrap text-ellipsis\"\n    >\n      <div v-if=\"column.key === 'start_time' || column.key === 'end_time'\">\n        {{ formatTime(props.row[column.key]) }}\n      </div>\n      <div v-else class=\"ml-2\">\n        <select\n          class=\"w-full h-7 text-base hover:bg-surface-gray-3 rounded-md p-0 pl-2 pr-5 bg-transparent -ml-2 border-0 text-ink-gray-8 focus-visible:!ring-0 bg-none truncate\"\n          v-model=\"props.row[column.key]\"\n        >\n          <option\n            v-for=\"option in workDayOptions\"\n            :key=\"option.value\"\n            :value=\"option.value\"\n          >\n            {{ option.label }}\n          </option>\n        </select>\n      </div>\n    </div>\n    <div class=\"flex justify-end\">\n      <Dropdown placement=\"right\" :options=\"dropdownOptions\">\n        <Button\n          icon=\"more-horizontal\"\n          variant=\"ghost\"\n          @click=\"isConfirmingDelete = false\"\n        />\n      </Dropdown>\n    </div>\n  </div>\n  <hr v-if=\"!props.isLast\" />\n  <WorkDayModal\n    v-model=\"dialog\"\n    :workDaysList=\"slaData.support_and_resolution\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { Button, Dropdown } from \"frappe-ui\";\nimport WorkDayModal from \"./Modals/WorkDayModal.vue\";\nimport { ConfirmDelete, getGridTemplateColumnsForTable } from \"@/utils\";\nimport { slaData } from \"@/stores/sla\";\n\ninterface Column {\n  key: string;\n  label: string;\n  isRequired?: boolean;\n}\n\ninterface WorkDay {\n  id: string;\n  workday: string;\n  start_time: string;\n  end_time: string;\n}\n\nconst props = defineProps<{\n  columns: Column[];\n  row: WorkDay;\n  isLast?: boolean;\n}>();\n\nconst workDayOptions = [\n  { label: \"Monday\", value: \"Monday\" },\n  { label: \"Tuesday\", value: \"Tuesday\" },\n  { label: \"Wednesday\", value: \"Wednesday\" },\n  { label: \"Thursday\", value: \"Thursday\" },\n  { label: \"Friday\", value: \"Friday\" },\n  { label: \"Saturday\", value: \"Saturday\" },\n  { label: \"Sunday\", value: \"Sunday\" },\n];\n\nconst dialog = ref({\n  show: false,\n  isEditing: false,\n  data: {},\n});\n\nconst isConfirmingDelete = ref(false);\n\nconst dropdownOptions = [\n  {\n    label: \"Edit\",\n    onClick: () => editWorkDay(),\n    icon: \"edit\",\n  },\n  ...ConfirmDelete({\n    onConfirmDelete: () => deleteWorkDay(),\n    isConfirmingDelete,\n  }),\n];\n\nconst deleteWorkDay = () => {\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n\n  const item = slaData.value.support_and_resolution.indexOf(props.row);\n  if (item !== -1) {\n    slaData.value.support_and_resolution.splice(item, 1);\n  }\n};\n\nconst editWorkDay = () => {\n  dialog.value.show = true;\n  dialog.value.isEditing = true;\n  dialog.value.data = {\n    workday: props.row.workday,\n    start_time: props.row.start_time,\n    end_time: props.row.end_time,\n  };\n};\n\nconst formatTime = (time) => {\n  if (!time) return \"00:00\";\n  const [hours, minutes] = time.split(\":\");\n  const date = new Date();\n  date.setHours(parseInt(hours) || 0, parseInt(minutes) || 0, 0);\n\n  return date.toLocaleTimeString([], {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    hour12: true,\n  });\n};\n</script>\n","<template>\n  <div class=\"rounded-md border px-2 border-gray-300 text-sm\">\n    <div\n      class=\"grid p-2 px-4 items-center\"\n      :style=\"{\n        gridTemplateColumns: getGridTemplateColumnsForTable(columns),\n      }\"\n      v-if=\"slaData.support_and_resolution?.length !== 0\"\n    >\n      <div\n        v-for=\"column in columns\"\n        :key=\"column.key\"\n        class=\"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis\"\n        :class=\"{\n          'ml-2': column.key === 'workday',\n        }\"\n      >\n        {{ column.label }}\n        <span v-if=\"column.isRequired\" class=\"text-red-500\">*</span>\n      </div>\n    </div>\n    <hr v-if=\"slaData.support_and_resolution?.length !== 0\" />\n    <SlaWorkDaysListItem\n      v-for=\"(row, index) in slaData.support_and_resolution\"\n      :key=\"index + row.workday + row.id\"\n      :row=\"row\"\n      :columns=\"columns\"\n      :isLast=\"index === slaData.support_and_resolution.length - 1\"\n    />\n    <div\n      v-if=\"slaData.support_and_resolution?.length === 0\"\n      class=\"text-center p-4 text-gray-600\"\n    >\n      No workdays in the list\n    </div>\n  </div>\n  <div class=\"flex items-center justify-between mt-2.5\">\n    <Button\n      v-if=\"slaData.support_and_resolution.length < 7\"\n      variant=\"subtle\"\n      label=\"Add row\"\n      @click=\"addWorkDay\"\n      icon-left=\"plus\"\n    />\n    <ErrorMessage :message=\"slaDataErrors.support_and_resolution\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Button } from \"frappe-ui\";\nimport SlaWorkDaysListItem from \"./SlaWorkDaysListItem.vue\";\nimport { slaData, slaDataErrors } from \"@/stores/sla\";\nimport { getGridTemplateColumnsForTable } from \"@/utils\";\n\ninterface Column {\n  key: string;\n  label: string;\n  isRequired?: boolean;\n}\n\nconst allDays = [\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\",\n  \"Sunday\",\n];\n\nconst addWorkDay = () => {\n  const usedDays = new Set(\n    slaData.value.support_and_resolution.map((day) => day.workday)\n  );\n  const nextDay = allDays.find((day) => !usedDays.has(day)) || allDays[0];\n\n  slaData.value.support_and_resolution.push({\n    workday: nextDay,\n    start_time: \"09:00:00\",\n    end_time: \"17:00:00\",\n    id: Math.random().toString(36).substring(2, 9),\n  });\n};\n\nconst columns: Column[] = [\n  {\n    label: \"Day\",\n    key: \"workday\",\n    isRequired: true,\n  },\n  {\n    label: \"Start time\",\n    key: \"start_time\",\n    isRequired: true,\n  },\n  {\n    label: \"End time\",\n    key: \"end_time\",\n    isRequired: true,\n  },\n];\n</script>\n","import {\n  Holiday,\n  HolidayErrors,\n  RepetitionPattern,\n} from \"@/components/Settings/Holiday/types\";\nimport dayjs, { Dayjs } from \"dayjs\";\nimport { ref } from \"vue\";\n\nexport const holidayListActiveScreen = ref<{\n  screen: \"list\" | \"view\";\n  data: Record<string, any> | null;\n  previousScreen?: {\n    screen: \"list\" | \"view\";\n    data: string;\n  };\n}>({ screen: \"list\", data: null });\n\nexport const holidayDataErrors = ref<HolidayErrors>({\n  holiday_list_name: \"\",\n  from_date: \"\",\n  to_date: \"\",\n});\n\nexport const holidayData = ref({\n  holiday_list_name: \"\",\n  description: \"\",\n  associate_holiday_list: true,\n  loading: false,\n  total_holidays: 0,\n  holidays: [],\n  from_date: null,\n  to_date: null,\n  recurring_holidays: [],\n});\n\nexport const resetHolidayData = () => {\n  holidayData.value = {\n    holiday_list_name: \"\",\n    description: \"\",\n    associate_holiday_list: true,\n    loading: false,\n    total_holidays: 0,\n    holidays: [],\n    from_date: null,\n    to_date: null,\n    recurring_holidays: [],\n  };\n};\n\ntype HolidayField = keyof HolidayErrors;\n\nexport const validateHoliday = (key?: HolidayField) => {\n  const validateField = (field: HolidayField) => {\n    if (key && field !== key) return;\n\n    switch (field) {\n      case \"holiday_list_name\":\n        if (!holidayData.value.holiday_list_name?.trim()) {\n          holidayDataErrors.value.holiday_list_name =\n            \"Holiday list name is required\";\n        } else {\n          holidayDataErrors.value.holiday_list_name = \"\";\n        }\n        break;\n      case \"from_date\":\n        if (!holidayData.value.from_date) {\n          holidayDataErrors.value.from_date = \"Start date is required\";\n        } else {\n          holidayDataErrors.value.from_date = \"\";\n        }\n\n        if (holidayData.value.to_date) {\n          const startDate = new Date(holidayData.value.from_date);\n          const endDate = new Date(holidayData.value.to_date);\n\n          if (startDate > endDate) {\n            holidayDataErrors.value.dateRange =\n              \"Start date cannot be after end date\";\n          } else {\n            holidayDataErrors.value.dateRange = \"\";\n          }\n        }\n        break;\n      case \"to_date\":\n        if (!holidayData.value.to_date) {\n          holidayDataErrors.value.to_date = \"End date is required\";\n        } else {\n          holidayDataErrors.value.to_date = \"\";\n        }\n\n        if (holidayData.value.from_date) {\n          const startDate = new Date(holidayData.value.from_date);\n          const endDate = new Date(holidayData.value.to_date);\n\n          if (startDate > endDate) {\n            holidayDataErrors.value.dateRange =\n              \"Start date cannot be after end date\";\n          } else {\n            holidayDataErrors.value.dateRange = \"\";\n          }\n        }\n        break;\n      default:\n        break;\n    }\n  };\n\n  if (key) {\n    validateField(key);\n  } else {\n    (Object.keys(holidayDataErrors.value) as HolidayField[]).forEach(\n      validateField\n    );\n  }\n\n  return holidayDataErrors.value;\n};\n\nexport function updateWeeklyOffDates() {\n  const newHolidays = holidayData.value.holidays.filter((h) => !h.weekly_off);\n\n  for (const day of holidayData.value.recurring_holidays) {\n    const weeklyOffs = getWeeklyOffDates(\n      holidayData.value.from_date,\n      holidayData.value.to_date,\n      day.day,\n      newHolidays,\n      day.repetition\n    );\n    newHolidays.push(...weeklyOffs);\n  }\n  holidayData.value.holidays = newHolidays;\n}\n\nfunction getWeekOfMonth(date: Dayjs): number {\n  const firstDayOfMonth = date.startOf(\"month\");\n  const firstDayOfWeek = firstDayOfMonth.day();\n  const offset = (date.date() + firstDayOfWeek - 1) / 7;\n  return Math.ceil(offset);\n}\n\nfunction getWeeklyOffDateList(\n  startDate: string | Date,\n  endDate: string | Date,\n  weeklyOff: string,\n  holidays: Holiday[] = [],\n  repetition?: RepetitionPattern\n): Date[] {\n  const start = dayjs(startDate);\n  const end = dayjs(endDate);\n  const dateList: Date[] = [];\n\n  const dayMap: Record<string, number> = {\n    sunday: 0,\n    monday: 1,\n    tuesday: 2,\n    wednesday: 3,\n    thursday: 4,\n    friday: 5,\n    saturday: 6,\n  };\n\n  const targetDay = dayMap[weeklyOff.toLowerCase()];\n  if (targetDay === undefined) {\n    return dateList;\n  }\n\n  const existingDates = holidays.map((h) =>\n    dayjs(h.holiday_date).startOf(\"day\").toDate()\n  );\n\n  let currentDate = start.day(targetDay);\n  if (currentDate.isBefore(start, \"day\")) {\n    currentDate = currentDate.add(1, \"week\");\n  }\n  const useAllOccurrences = !repetition || repetition.all;\n\n  while (currentDate.isSameOrBefore(end, \"day\")) {\n    const currentDateObj = currentDate.toDate();\n    const currentDateStart = dayjs(currentDateObj).startOf(\"day\");\n\n    if (useAllOccurrences || shouldIncludeDate(currentDate, repetition)) {\n      if (\n        !existingDates.some((d) =>\n          dayjs(d).startOf(\"day\").isSame(currentDateStart)\n        )\n      ) {\n        dateList.push(currentDateObj);\n      }\n    }\n    currentDate = currentDate.add(1, \"week\");\n  }\n\n  return dateList;\n}\n\nfunction shouldIncludeDate(\n  date: Dayjs,\n  repetition: RepetitionPattern\n): boolean {\n  if (repetition.all) return true;\n\n  const weekOfMonth = getWeekOfMonth(date);\n\n  switch (weekOfMonth) {\n    case 1:\n      return repetition.first;\n    case 2:\n      return repetition.second;\n    case 3:\n      return repetition.third;\n    case 4:\n      return repetition.fourth;\n    case 5:\n      return repetition.fifth;\n    default:\n      return false;\n  }\n}\n\nfunction getWeeklyOffDates(\n  startDate: string | Date,\n  endDate: string | Date,\n  weeklyOff: string,\n  holidays: Holiday[] = [],\n  repetition: RepetitionPattern = {\n    all: true,\n    first: false,\n    second: false,\n    third: false,\n    fourth: false,\n    fifth: false,\n  }\n): Holiday[] {\n  const dateList = getWeeklyOffDateList(\n    startDate,\n    endDate,\n    weeklyOff,\n    holidays,\n    repetition\n  );\n  return dateList.map((date, index) => ({\n    description: weeklyOff.charAt(0).toUpperCase() + weeklyOff.slice(1),\n    holiday_date: date,\n    weekly_off: 1,\n    idx: index + 1,\n    repetition: repetition,\n  }));\n}\n","<template>\n  <div class=\"flex items-center justify-between\">\n    <div class=\"flex flex-col gap-1\">\n      <div class=\"text-lg font-semibold text-ink-gray-8\">\n        {{ __(\"Work schedule and holidays\") }}\n      </div>\n      <div class=\"text-p-sm text-ink-gray-6 max-w-lg\">\n        {{\n          __(\n            \"Set working days, hours, and holidays by selecting a predefined schedule or creating a new one\"\n          )\n        }}\n      </div>\n    </div>\n    <NestedPopover>\n      <template #target=\"{ open }\">\n        <Button\n          class=\"text-sm\"\n          :icon-right=\"open ? 'chevron-up' : 'chevron-down'\"\n          :label=\"slaData.holiday_list\"\n        />\n      </template>\n      <template #body>\n        <div\n          class=\"my-2 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none\"\n        >\n          <div class=\"max-h-52 overflow-y-auto p-1\">\n            <div\n              v-for=\"holiday in holidayListData.data\"\n              :key=\"holiday.name\"\n              class=\"flex items-center justify-between gap-4 rounded px-2 py-1.5 text-base text-ink-gray-8 cursor-pointer hover:bg-surface-gray-3\"\n              @click=\"slaData.holiday_list = holiday.name\"\n            >\n              <div class=\"flex items-center gap-2 w-full\">\n                <input\n                  name=\"holiday_list\"\n                  :checked=\"holiday.name === slaData.holiday_list\"\n                  type=\"radio\"\n                />\n                <div class=\"select-none\">{{ holiday.holiday_list_name }}</div>\n              </div>\n              <div class=\"flex cursor-pointer items-center gap-1\">\n                <Button\n                  variant=\"ghost\"\n                  @click.stop=\"editHolidayList(holiday)\"\n                  icon=\"edit\"\n                />\n              </div>\n            </div>\n          </div>\n          <div\n            class=\"mt-1.5 flex flex-col gap-1 border-t border-outline-gray-modals pt-1.5 p-1\"\n          >\n            <Button\n              class=\"w-full !justify-start !text-ink-gray-5\"\n              variant=\"ghost\"\n              :label=\"__('Create new business holiday')\"\n              @click=\"createNewHolidayList()\"\n              icon-left=\"plus\"\n            />\n          </div>\n        </div>\n      </template>\n    </NestedPopover>\n  </div>\n  <div class=\"mt-5\">\n    <SlaWorkDaysList />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { NestedPopover, Button, createListResource } from \"frappe-ui\";\nimport SlaWorkDaysList from \"./SlaWorkDaysList.vue\";\nimport { setActiveSettingsTab } from \"../settingsModal\";\nimport {\n  holidayListActiveScreen,\n  resetHolidayData,\n} from \"@/stores/holidayList\";\nimport { watchDebounced } from \"@vueuse/core\";\nimport { slaData, validateSlaData } from \"@/stores/sla\";\n\nconst createNewHolidayList = () => {\n  setActiveSettingsTab(\"Business Holidays\");\n  holidayListActiveScreen.value = {\n    screen: \"view\",\n    data: null,\n    previousScreen: {\n      screen: \"view\",\n      data: slaData.value.name,\n    },\n  };\n  resetHolidayData();\n};\n\nconst editHolidayList = (data: any) => {\n  setActiveSettingsTab(\"Business Holidays\");\n  holidayListActiveScreen.value = {\n    screen: \"view\",\n    data: data,\n    previousScreen: {\n      screen: \"view\",\n      data: slaData.value.name,\n    },\n  };\n};\n\nconst holidayListData = createListResource({\n  doctype: \"HD Service Holiday List\",\n  fields: [\"name\", \"holiday_list_name\"],\n  auto: true,\n});\n\nwatchDebounced(\n  slaData.value.support_and_resolution,\n  () => {\n    validateSlaData(\"support_and_resolution\");\n  },\n  { debounce: 300 }\n);\n</script>\n\n<style scoped>\ninput[type=\"radio\"] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  border: 2px solid #c5c2c2;\n  border-radius: 50%;\n  outline: none;\n  transition: all 0.2s ease;\n  background-color: white;\n}\n\ninput[type=\"radio\"]:checked {\n  background-color: black;\n  border: 2px solid #000;\n}\n\ninput[type=\"radio\"]:checked::after {\n  content: \"\";\n  background-color: #fff;\n}\n\ninput[type=\"radio\"]:focus {\n  outline: none !important;\n  box-shadow: none !important;\n}\n</style>\n","<template>\n  <div\n    class=\"flex gap-2 border border-gray-300 rounded w-fit min-w-max px-4 select-none shadow-sm\"\n  >\n    <div\n      v-if=\"displayOptions.hours\"\n      class=\"p-2 flex flex-col items-center group relative\"\n    >\n      <div class=\"flex items-center gap-1\">\n        <input\n          ref=\"hoursInput\"\n          v-model.number=\"hoursValue\"\n          type=\"number\"\n          min=\"0\"\n          class=\"w-8 text-sm bg-transparent border-0 p-0 text-center focus:ring-0 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none\"\n          @blur=\"validateAndUpdateTime('hours')\"\n          @keyup.enter=\"handleEnter\"\n        />\n        <div\n          class=\"flex flex-col group-hover:opacity-100 opacity-0 absolute top-1/2 -translate-y-1/2 -right-3\"\n        >\n          <button\n            @mousedown=\"startAction(() => increment('hours'))\"\n            @touchstart=\"startAction(() => increment('hours'))\"\n            @mouseup=\"clearActiveInterval\"\n            @mouseleave=\"clearActiveInterval\"\n            @touchend=\"clearActiveInterval\"\n            @touchcancel=\"clearActiveInterval\"\n            class=\"hover:bg-gray-100 rounded-sm select-none\"\n          >\n            <FeatherIcon name=\"chevron-up\" class=\"size-3.5\" />\n          </button>\n          <button\n            @mousedown=\"startAction(() => decrement('hours'))\"\n            @touchstart=\"startAction(() => decrement('hours'))\"\n            @mouseup=\"clearActiveInterval\"\n            @mouseleave=\"clearActiveInterval\"\n            @touchend=\"clearActiveInterval\"\n            @touchcancel=\"clearActiveInterval\"\n            class=\"hover:bg-gray-100 rounded-sm select-none\"\n          >\n            <FeatherIcon name=\"chevron-down\" class=\"size-3.5\" />\n          </button>\n        </div>\n      </div>\n      <div class=\"text-xs text-gray-600 mt-1\">Hrs</div>\n    </div>\n    <div\n      v-if=\"displayOptions.minutes\"\n      class=\"p-2 flex flex-col items-center group relative\"\n    >\n      <div class=\"flex items-center gap-1\">\n        <input\n          ref=\"minutesInput\"\n          v-model.number=\"minutesValue\"\n          type=\"number\"\n          min=\"0\"\n          max=\"59\"\n          class=\"w-8 text-sm bg-transparent border-0 p-0 text-center focus:ring-0 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none\"\n          @blur=\"validateAndUpdateTime('minutes')\"\n          @keyup.enter=\"handleEnter\"\n        />\n        <div\n          class=\"flex flex-col group-hover:opacity-100 opacity-0 absolute top-1/2 -translate-y-1/2 -right-3\"\n        >\n          <button\n            @mousedown=\"startAction(() => increment('minutes'))\"\n            @touchstart=\"startAction(() => increment('minutes'))\"\n            @mouseup=\"clearActiveInterval\"\n            @mouseleave=\"clearActiveInterval\"\n            @touchend=\"clearActiveInterval\"\n            @touchcancel=\"clearActiveInterval\"\n            class=\"hover:bg-gray-100 rounded-sm select-none\"\n          >\n            <FeatherIcon name=\"chevron-up\" class=\"size-3.5\" />\n          </button>\n          <button\n            @mousedown=\"startAction(() => decrement('minutes'))\"\n            @touchstart=\"startAction(() => decrement('minutes'))\"\n            @mouseup=\"clearActiveInterval\"\n            @mouseleave=\"clearActiveInterval\"\n            @touchend=\"clearActiveInterval\"\n            @touchcancel=\"clearActiveInterval\"\n            class=\"hover:bg-gray-100 rounded-sm select-none\"\n          >\n            <FeatherIcon name=\"chevron-down\" class=\"size-3.5\" />\n          </button>\n        </div>\n      </div>\n      <div class=\"text-xs text-gray-600 mt-1\">Min</div>\n    </div>\n    <div\n      v-if=\"displayOptions.seconds\"\n      class=\"p-2 flex flex-col items-center group relative\"\n    >\n      <div class=\"flex items-center gap-1\">\n        <input\n          ref=\"secondsInput\"\n          v-model.number=\"secondsValue\"\n          type=\"number\"\n          min=\"0\"\n          max=\"59\"\n          class=\"w-8 text-sm bg-transparent border-0 p-0 text-center focus:ring-0 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none\"\n          @blur=\"validateAndUpdateTime('seconds')\"\n          @keyup.enter=\"handleEnter\"\n        />\n        <div\n          class=\"flex flex-col group-hover:opacity-100 opacity-0 absolute top-1/2 -translate-y-1/2 -right-3\"\n        >\n          <button\n            @mousedown=\"startAction(() => increment('seconds'))\"\n            @touchstart=\"startAction(() => increment('seconds'))\"\n            @mouseup=\"clearActiveInterval\"\n            @mouseleave=\"clearActiveInterval\"\n            @touchend=\"clearActiveInterval\"\n            @touchcancel=\"clearActiveInterval\"\n            class=\"hover:bg-gray-100 rounded-sm select-none\"\n          >\n            <FeatherIcon name=\"chevron-up\" class=\"size-3.5\" />\n          </button>\n          <button\n            @mousedown=\"startAction(() => decrement('seconds'))\"\n            @touchstart=\"startAction(() => decrement('seconds'))\"\n            @mouseup=\"clearActiveInterval\"\n            @mouseleave=\"clearActiveInterval\"\n            @touchend=\"clearActiveInterval\"\n            @touchcancel=\"clearActiveInterval\"\n            class=\"hover:bg-gray-100 rounded-sm select-none\"\n          >\n            <FeatherIcon name=\"chevron-down\" class=\"size-3.5\" />\n          </button>\n        </div>\n      </div>\n      <div class=\"text-xs text-gray-600 mt-1\">Sec</div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref,\n  computed,\n  watch,\n  defineEmits,\n  defineProps,\n  withDefaults,\n  onUnmounted,\n} from \"vue\";\n\ninterface Options {\n  hours?: boolean;\n  minutes?: boolean;\n  seconds?: boolean;\n}\n\nconst props = withDefaults(\n  defineProps<{\n    modelValue?: number;\n    min?: number;\n    max?: number;\n    options?: Partial<Options>;\n  }>(),\n  {\n    modelValue: 0,\n    min: 0,\n    max: Number.MAX_SAFE_INTEGER,\n    options: () => ({}),\n  }\n);\n\nconst normalizedOptions = computed<Required<Options>>(() => ({\n  hours: props.options?.hours ?? true,\n  minutes: props.options?.minutes ?? true,\n  seconds: props.options?.seconds ?? false,\n}));\n\nconst displayOptions = computed(() => {\n  const { hours, minutes, seconds } = normalizedOptions.value;\n  if (!hours && !minutes && !seconds) {\n    return { hours: true, minutes: true, seconds: false };\n  }\n  return { hours, minutes, seconds };\n});\nconst emit = defineEmits<{\n  (e: \"update:modelValue\", value: number): void;\n  (e: \"change\", value: number): void;\n}>();\n\nconst time = ref(props.modelValue);\nconst hoursInput = ref<HTMLInputElement | null>(null);\nconst minutesInput = ref<HTMLInputElement | null>(null);\nconst secondsInput = ref<HTMLInputElement | null>(null);\nconst activeInterval = ref<number | null>(null);\nconst activeAction = ref<(() => void) | null>(null);\nconst initialDelay = 300;\nconst repeatDelay = 50;\nlet isMouseDown = false;\nlet actionTimeout: number | null = null;\n\nconst hoursValue = computed({\n  get: () => Math.floor(time.value / 3600).toString(),\n  set: (value) => {\n    if (value === \"\") return;\n    const num = parseInt(value, 10);\n    if (!isNaN(num) && num >= 0) {\n      const newTime = num * 3600 + getMinutes() * 60 + getSeconds();\n      updateTime(newTime);\n    }\n  },\n});\n\nconst minutesValue = computed({\n  get: () => Math.floor((time.value % 3600) / 60).toString(),\n  set: (value) => {\n    if (value === \"\") return;\n    const num = parseInt(value, 10);\n    if (!isNaN(num) && num >= 0 && num <= 59) {\n      const newTime = getHours() * 3600 + num * 60 + getSeconds();\n      updateTime(newTime);\n    }\n  },\n});\n\nconst secondsValue = computed({\n  get: () => (time.value % 60).toString(),\n  set: (value) => {\n    if (value === \"\") return;\n    const num = parseInt(value, 10);\n    if (!isNaN(num) && num >= 0 && num <= 59) {\n      const newTime = getHours() * 3600 + getMinutes() * 60 + num;\n      updateTime(newTime);\n    }\n  },\n});\n\nfunction getHours() {\n  return Math.floor(time.value / 3600);\n}\n\nfunction getMinutes() {\n  return Math.floor((time.value % 3600) / 60);\n}\n\nfunction getSeconds() {\n  return time.value % 60;\n}\n\n// Clear any active intervals when component unmounts\nonUnmounted(() => {\n  clearActiveInterval();\n  if (actionTimeout) {\n    clearTimeout(actionTimeout);\n  }\n});\n\nfunction clearActiveInterval() {\n  if (activeInterval.value !== null) {\n    clearInterval(activeInterval.value);\n    activeInterval.value = null;\n  }\n  if (actionTimeout) {\n    clearTimeout(actionTimeout);\n    actionTimeout = null;\n  }\n  isMouseDown = false;\n}\n\nfunction startAction(action: () => void) {\n  if (isMouseDown) return;\n\n  isMouseDown = true;\n\n  action();\n\n  actionTimeout = window.setTimeout(() => {\n    if (!isMouseDown) return;\n\n    activeAction.value = action;\n    activeInterval.value = window.setInterval(() => {\n      if (activeAction.value) {\n        activeAction.value();\n      }\n    }, repeatDelay);\n  }, initialDelay);\n}\n\nfunction handlePointerUp() {\n  clearActiveInterval();\n}\n\ndocument.addEventListener(\"mouseup\", handlePointerUp);\ndocument.addEventListener(\"touchend\", handlePointerUp);\nonUnmounted(() => {\n  document.removeEventListener(\"mouseup\", handlePointerUp);\n  document.removeEventListener(\"touchend\", handlePointerUp);\n});\n\nfunction updateTime(newTime: number, emitEvent = true) {\n  newTime = Math.max(props.min, Math.min(props.max, newTime));\n  if (newTime !== time.value) {\n    time.value = newTime;\n    if (emitEvent) {\n      emit(\"update:modelValue\", time.value);\n      emit(\"change\", time.value);\n    }\n  }\n}\n\nfunction validateAndUpdateTime(unit: \"hours\" | \"minutes\" | \"seconds\") {\n  switch (unit) {\n    case \"hours\":\n      hoursValue.value = hoursValue.value;\n      break;\n    case \"minutes\":\n      minutesValue.value = minutesValue.value;\n      break;\n    case \"seconds\":\n      secondsValue.value = secondsValue.value;\n      break;\n  }\n}\n\nfunction handleEnter(e: KeyboardEvent) {\n  (e.target as HTMLInputElement).blur();\n}\n\nfunction increment(unit: \"hours\" | \"minutes\" | \"seconds\") {\n  let newTime = time.value;\n  switch (unit) {\n    case \"hours\":\n      newTime += 3600;\n      break;\n    case \"minutes\":\n      newTime += 60;\n      break;\n    case \"seconds\":\n      newTime += 1;\n      break;\n  }\n  updateTime(newTime);\n}\n\nfunction decrement(unit: \"hours\" | \"minutes\" | \"seconds\") {\n  let newTime = time.value;\n  switch (unit) {\n    case \"hours\":\n      newTime -= 3600;\n      break;\n    case \"minutes\":\n      newTime -= 60;\n      break;\n    case \"seconds\":\n      newTime -= 1;\n      break;\n  }\n  updateTime(newTime);\n}\n\nwatch(\n  () => props.modelValue,\n  (newValue) => {\n    if (newValue !== time.value) {\n      time.value = Math.max(props.min, Math.min(props.max, newValue));\n    }\n  },\n  { immediate: true }\n);\n</script>\n\n<style scoped>\nbutton {\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n</style>\n","export function formatTimeHMS(seconds) {\n  const days = Math.floor(seconds / (3600 * 24));\n  const hours = Math.floor((seconds % (3600 * 24)) / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const remainingSeconds = Math.floor(seconds % 60);\n\n  let formattedTime = \"\";\n\n  if (days > 0) {\n    formattedTime += `${days} days `;\n  }\n\n  if (hours > 0) {\n    formattedTime += `${hours} hours `;\n  }\n\n  if (minutes > 0) {\n    formattedTime += `${minutes} minutes `;\n  }\n\n  if (remainingSeconds > 0) {\n    formattedTime += `${remainingSeconds} seconds`;\n  }\n\n  return formattedTime.trim();\n}\n","<template>\n  <Dialog\n    v-model=\"dialog\"\n    :options=\"{\n      title: 'Edit response and resolution',\n    }\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <FormControl\n          :type=\"'select'\"\n          size=\"sm\"\n          variant=\"subtle\"\n          placeholder=\"Select Priority\"\n          label=\"Priority\"\n          v-model=\"priorityData.priority\"\n          :options=\"priorityOptions\"\n          required\n        />\n        <div>\n          <FormLabel label=\"Response time\" required />\n          <Popover class=\"mt-2\">\n            <template #target=\"{ togglePopover }\" class=\"w-max\">\n              <div\n                @click=\"togglePopover()\"\n                class=\"w-full bg-gray-100 rounded p-1.5 px-2 text-base text-gray-800\"\n              >\n                <div v-if=\"priorityData.response_time\">\n                  {{ formatTimeHMS(priorityData.response_time) }}\n                </div>\n                <div v-else class=\"text-gray-500\">Select time</div>\n              </div>\n            </template>\n            <template #body>\n              <div class=\"absolute bg-white top-2\">\n                <DurationPicker\n                  v-model=\"priorityData.response_time\"\n                  :options=\"{ seconds: false }\"\n                />\n              </div>\n            </template>\n          </Popover>\n        </div>\n        <div>\n          <FormLabel label=\"Resolution time\" required />\n          <Popover class=\"mt-2\">\n            <template #target=\"{ togglePopover }\" class=\"w-max\">\n              <div\n                @click=\"togglePopover()\"\n                class=\"w-full bg-gray-100 rounded p-1.5 px-2 text-base text-gray-800\"\n              >\n                <div v-if=\"priorityData.resolution_time\">\n                  {{ formatTimeHMS(priorityData.resolution_time) }}\n                </div>\n                <div v-else class=\"text-gray-500\">Select time</div>\n              </div>\n            </template>\n            <template #body>\n              <div class=\"absolute bg-white top-2\">\n                <DurationPicker\n                  v-model=\"priorityData.resolution_time\"\n                  :options=\"{ seconds: false }\"\n                />\n              </div>\n            </template>\n          </Popover>\n        </div>\n        <Checkbox\n          v-model=\"priorityData.default_priority\"\n          label=\"Set default priority\"\n        />\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex justify-between\">\n        <div>\n          <Button\n            variant=\"subtle\"\n            :theme=\"isConfirmingDelete ? 'red' : 'gray'\"\n            :label=\"isConfirmingDelete ? 'Confirm Delete' : 'Delete'\"\n            @click=\"deleteItem\"\n            icon-left=\"trash-2\"\n          />\n        </div>\n        <div class=\"flex gap-2\">\n          <Button\n            variant=\"subtle\"\n            theme=\"gray\"\n            @click=\"dialog = false\"\n            label=\"Cancel\"\n          />\n          <Button variant=\"solid\" @click=\"onSave\" label=\"Save\" />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  Button,\n  Checkbox,\n  Dialog,\n  FormControl,\n  FormLabel,\n  Popover,\n  toast,\n} from \"frappe-ui\";\nimport { inject, ref } from \"vue\";\nimport { formatTimeHMS } from \"../utils\";\nimport DurationPicker from \"@/components/frappe-ui/DurationPicker.vue\";\nimport { slaData } from \"@/stores/sla\";\n\nconst dialog = defineModel<boolean>();\nconst emit = defineEmits([\"onDefaultPriorityChange\"]);\nconst isConfirmingDelete = ref(false);\n\nconst props = defineProps({\n  row: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst priorityOptions = inject(\"priorityOptions\");\n\nconst priorityData = ref({\n  priority: props.row.priority,\n  resolution_time: props.row.resolution_time,\n  response_time: props.row.response_time,\n  default_priority: props.row.default_priority,\n});\n\nconst validateForm = () => {\n  if (!priorityData.value.priority) {\n    toast.error(\"Please select a priority\");\n    return false;\n  }\n\n  const resolutionTime = parseInt(priorityData.value.resolution_time);\n  if (isNaN(resolutionTime) || resolutionTime <= 0) {\n    toast.error(\"Resolution time must be a positive number\");\n    return false;\n  }\n\n  const responseTime = parseInt(priorityData.value.response_time);\n  if (isNaN(responseTime) || responseTime <= 0) {\n    toast.error(\"Response time must be a positive number\");\n    return false;\n  }\n\n  if (priorityData.value.default_priority) {\n    slaData.value.priorities.forEach((priority) => {\n      priority.default_priority = false;\n    });\n  }\n\n  return true;\n};\n\nconst deleteItem = (event) => {\n  event.preventDefault();\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n\n  slaData.value.priorities.splice(\n    slaData.value.priorities.indexOf(props.row),\n    1\n  );\n};\n\nconst onSave = () => {\n  if (!validateForm()) return;\n  props.row.priority = priorityData.value.priority;\n  props.row.resolution_time = priorityData.value.resolution_time;\n  props.row.response_time = priorityData.value.response_time;\n  props.row.default_priority = priorityData.value.default_priority;\n\n  dialog.value = false;\n};\n</script>\n","<template>\n  <div\n    class=\"grid gap-2 py-3.5 px-4 items-center\"\n    :style=\"{\n      gridTemplateColumns,\n    }\"\n  >\n    <div\n      v-for=\"column in props.columns\"\n      :key=\"column.key\"\n      class=\"w-full overflow-hidden whitespace-nowrap text-ellipsis\"\n    >\n      <div v-if=\"column.key === 'default_priority'\">\n        <Checkbox\n          v-model=\"props.row.default_priority\"\n          @update:modelValue=\"(e) => onDefaultPriorityChange(e)\"\n        />\n      </div>\n      <div\n        v-else-if=\"\n          column.key === 'response_time' || column.key === 'resolution_time'\n        \"\n      >\n        <Popover>\n          <template #target=\"{ togglePopover }\">\n            <div\n              @click=\"togglePopover()\"\n              class=\"min-h-7 w-full cursor-pointer select-none leading-5 p-1 px-2 hover:bg-gray-200 rounded\"\n            >\n              {{ formatTimeHMS(props.row[column.key]) }}\n            </div>\n          </template>\n          <template #body>\n            <div class=\"absolute bg-white top-2\">\n              <DurationPicker v-model=\"props.row[column.key]\" />\n            </div>\n          </template>\n        </Popover>\n      </div>\n      <div v-else class=\"ml-2\">\n        <select\n          class=\"w-full h-7 text-base hover:bg-surface-gray-3 rounded-md p-0 pl-2 pr-5 bg-transparent -ml-2 border-0 text-ink-gray-8 focus-visible:!ring-0 bg-none truncate\"\n          v-model=\"props.row[column.key]\"\n        >\n          <option\n            v-for=\"option in priorityOptions\"\n            :key=\"option.value\"\n            :value=\"option.value\"\n          >\n            {{ option.label }}\n          </option>\n        </select>\n      </div>\n    </div>\n    <div class=\"flex justify-end\">\n      <Dropdown placement=\"right\" :options=\"dropdownOptions\">\n        <Button\n          icon=\"more-horizontal\"\n          variant=\"ghost\"\n          @click=\"isConfirmingDelete = false\"\n        />\n      </Dropdown>\n    </div>\n  </div>\n  <hr v-if=\"!props.isLast\" />\n  <EditResponseResolutionModal v-model=\"dialog\" :row=\"props.row\" />\n</template>\n\n<script setup lang=\"ts\">\nimport DurationPicker from \"@/components/frappe-ui/DurationPicker.vue\";\nimport { slaData } from \"@/stores/sla\";\nimport { ConfirmDelete } from \"@/utils\";\nimport { Button, Checkbox, Dropdown, Popover } from \"frappe-ui\";\nimport { inject, ref } from \"vue\";\nimport EditResponseResolutionModal from \"./Modals/EditResponseResolutionModal.vue\";\nimport { formatTimeHMS } from \"./utils\";\n\nconst props = defineProps({\n  columns: {\n    type: Array<any>,\n    required: true,\n  },\n  row: {\n    type: Object,\n    required: true,\n  },\n  isLast: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst isConfirmingDelete = ref(false);\nconst dialog = ref(false);\nconst priorityData = ref({\n  priority: props.row.priority,\n  resolution_time: props.row.resolution_time,\n  response_time: props.row.response_time,\n  default_priority: props.row.default_priority,\n});\n\nconst priorityOptions = inject<Array<any>>(\"priorityOptions\");\n\nconst dropdownOptions = [\n  {\n    label: \"Edit\",\n    onClick: () => editItem(),\n    icon: \"edit\",\n  },\n  ...ConfirmDelete({\n    onConfirmDelete: () => deleteItem(),\n    isConfirmingDelete,\n  }),\n];\n\nconst gridTemplateColumns = inject<string>(\"gridTemplateColumns\");\n\nconst deleteItem = () => {\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n\n  slaData.value.priorities.splice(\n    slaData.value.priorities.indexOf(props.row),\n    1\n  );\n};\n\nconst editItem = () => {\n  dialog.value = true;\n  priorityData.value = {\n    priority: props.row.priority,\n    resolution_time: props.row.resolution_time,\n    response_time: props.row.response_time,\n    default_priority: props.row.default_priority,\n  };\n};\n\nconst onDefaultPriorityChange = (defaultPriority) => {\n  slaData.value.priorities.forEach((priority) => {\n    priority.default_priority = false;\n  });\n  props.row.default_priority = defaultPriority;\n};\n</script>\n","<template>\n  <div class=\"rounded-md border px-2 border-gray-300 text-sm\">\n    <div\n      class=\"grid p-2 px-4 items-center\"\n      :style=\"{\n        gridTemplateColumns,\n      }\"\n      v-if=\"slaData.priorities?.length !== 0\"\n    >\n      <div\n        v-for=\"column in columns\"\n        :key=\"column.key\"\n        class=\"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis\"\n        :class=\"{\n          'ml-2':\n            column.key === 'priority' ||\n            column.key === 'response_time' ||\n            column.key === 'resolution_time',\n        }\"\n      >\n        {{ column.label }}\n        <span v-if=\"column.isRequired\" class=\"text-red-500\">*</span>\n      </div>\n    </div>\n    <hr v-if=\"slaData.priorities?.length !== 0\" />\n    <SlaPriorityListItem\n      v-for=\"(row, index) in slaData.priorities\"\n      :key=\"row.priority\"\n      :row=\"row\"\n      :columns=\"columns\"\n      :isLast=\"index === slaData.priorities.length - 1\"\n    />\n    <div\n      v-if=\"slaData.priorities?.length === 0\"\n      class=\"text-center p-4 text-gray-600\"\n    >\n      No priorities in the list\n    </div>\n  </div>\n  <div\n    class=\"flex items-center justify-between mt-2.5\"\n    v-if=\"\n      slaData.priorities.length !== priorityOptions.length ||\n      slaDataErrors.default_priority ||\n      slaDataErrors.priorities\n    \"\n  >\n    <div>\n      <Button\n        v-if=\"slaData.priorities.length !== priorityOptions.length\"\n        variant=\"subtle\"\n        label=\"Add row\"\n        @click=\"addRow\"\n        icon-left=\"plus\"\n      />\n    </div>\n    <ErrorMessage\n      :message=\"slaDataErrors.default_priority || slaDataErrors.priorities\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Button, createResource, toast } from \"frappe-ui\";\nimport SlaPriorityListItem from \"./SlaPriorityListItem.vue\";\nimport { computed, provide, reactive } from \"vue\";\nimport {\n  slaActiveScreen,\n  slaData,\n  slaDataErrors,\n  validateSlaData,\n} from \"@/stores/sla\";\nimport { watchDebounced } from \"@vueuse/core\";\nimport { getGridTemplateColumnsForTable } from \"@/utils\";\n\ncreateResource({\n  url: \"frappe.client.get_list\",\n  params: {\n    doctype: \"HD Ticket Priority\",\n    fields: [\"name\"],\n    order_by: \"integer_value desc\",\n  },\n  auto: true,\n  onSuccess(data) {\n    priorityOptions.push(\n      ...data.map((p) => {\n        return {\n          label: p.name,\n          value: p.name,\n        };\n      })\n    );\n    if (!slaActiveScreen.value.data) {\n      slaData.value.priorities = priorityOptions.map((p, index) => {\n        return {\n          priority: p.value,\n          resolution_time: 60 * 60,\n          response_time: 60 * 60,\n          default_priority: index === 0,\n        };\n      });\n    }\n  },\n});\n\nconst priorityOptions = reactive([]);\n\nprovide(\"priorityOptions\", priorityOptions);\n\nconst addRow = () => {\n  const existingPriorities = slaData.value.priorities.map((p) => p.priority);\n  const availablePriorities = priorityOptions.filter(\n    (p) => !existingPriorities.includes(p.value)\n  );\n\n  if (availablePriorities.length === 0) {\n    toast.error(\"All available priorities have already been added\");\n    return;\n  }\n\n  const newPriority = availablePriorities[0].value;\n\n  slaData.value.priorities.push({\n    priority: newPriority,\n    resolution_time: 60 * 60,\n    response_time: 60 * 60,\n    default_priority: slaData.value.priorities.length === 0,\n  });\n};\n\nconst columns = computed(() => [\n  {\n    label: \"Priority\",\n    key: \"priority\",\n    isRequired: true,\n  },\n  {\n    label: \"Default priority\",\n    key: \"default_priority\",\n    isRequired: true,\n  },\n  {\n    label: \"First response time\",\n    key: \"response_time\",\n    isRequired: true,\n  },\n  {\n    label: \"Resolution time\",\n    key: \"resolution_time\",\n    isRequired: true,\n  },\n  //   slaData.value.apply_sla_for_resolution && {\n  //     label: \"Resolution time\",\n  //     key: \"resolution_time\",\n  //     isRequired: Boolean(slaData.value.apply_sla_for_resolution),\n  //   },\n  // ].filter((c) => c)\n]);\n\nconst gridTemplateColumns = computed(() => {\n  // return getGridTemplateColumnsForTable(columns.value.filter((c) => c));\n  return getGridTemplateColumnsForTable(columns.value);\n});\n\nprovide(\"gridTemplateColumns\", gridTemplateColumns);\n\nwatchDebounced(\n  () => [...slaData.value.priorities],\n  () => {\n    validateSlaData(\"priorities\");\n  },\n  { deep: true, debounce: 300 }\n);\n</script>\n","<template>\n  <div class=\"flex gap-5 w-full\">\n    <FormControl\n      type=\"autocomplete\"\n      label=\"Default ticket status\"\n      :options=\"openStatuses\"\n      class=\"flex-1\"\n      v-model=\"slaData.default_ticket_status\"\n    />\n    <FormControl\n      type=\"autocomplete\"\n      label=\"Ticket reopen status\"\n      :options=\"openStatuses\"\n      class=\"flex-1\"\n      v-model=\"slaData.reopen_ticket_status\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ComputedRef } from \"vue\";\nimport { slaData } from \"@/stores/sla\";\nimport { useTicketStatusStore } from \"@/stores/ticketStatus\";\nimport { HDTicketStatus } from \"@/types/doctypes\";\n\nconst { statuses } = useTicketStatusStore();\n\nconst openStatuses: ComputedRef<HDTicketStatus[]> = computed(() => {\n  return (\n    statuses?.data\n      ?.filter((s: HDTicketStatus) => s.category === \"Open\")\n      ?.map((s: HDTicketStatus) => {\n        return {\n          label: s.label_agent,\n          value: s.label_agent,\n        };\n      }) || []\n  );\n});\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <div class=\"flex items-center gap-2\">\n        <Button\n          variant=\"ghost\"\n          icon-left=\"chevron-left\"\n          :label=\"slaData.service_level || __('New SLA Policy')\"\n          size=\"md\"\n          @click=\"goBack()\"\n          class=\"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-ink-gray-7 text-lg hover:opacity-70 !pr-0\"\n        />\n        <Badge\n          :variant=\"'subtle'\"\n          :theme=\"'orange'\"\n          size=\"sm\"\n          :label=\"__('Unsaved')\"\n          v-if=\"isDirty\"\n        />\n      </div>\n    </template>\n    <template #header-actions>\n      <div class=\"flex gap-4 items-center\">\n        <div\n          class=\"flex items-center justify-between gap-2 cursor-pointer\"\n          @click=\"toggleEnabled\"\n        >\n          <Switch size=\"sm\" v-model=\"slaData.enabled\" />\n          <span class=\"text-sm text-ink-gray-7 font-medium\">\n            {{ __(\"Enabled\") }}\n          </span>\n        </div>\n        <Button\n          :label=\"__('Save')\"\n          theme=\"gray\"\n          variant=\"solid\"\n          @click=\"saveSla()\"\n          :disabled=\"Boolean(!isDirty && slaActiveScreen.data)\"\n          :loading=\"slaData.loading || slaPolicyList.setValue.loading\"\n        />\n      </div>\n    </template>\n    <template #content>\n      <div\n        v-if=\"slaData.loading\"\n        class=\"flex items-center h-full justify-center\"\n      >\n        <LoadingIndicator class=\"w-4\" />\n      </div>\n      <div v-if=\"!slaData.loading\">\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n          <div>\n            <FormControl\n              :type=\"'text'\"\n              size=\"sm\"\n              variant=\"subtle\"\n              :placeholder=\"__('Name')\"\n              :label=\"__('Name')\"\n              v-model=\"slaData.service_level\"\n              required\n              @change=\"validateSlaData('service_level')\"\n              :disabled=\"Boolean(slaActiveScreen.data)\"\n              maxlength=\"50\"\n            />\n            <ErrorMessage :message=\"slaDataErrors.service_level\" class=\"mt-2\" />\n          </div>\n          <FormControl\n            :type=\"'textarea'\"\n            size=\"sm\"\n            variant=\"subtle\"\n            :placeholder=\"__('Description')\"\n            :label=\"__('Description')\"\n            v-model=\"slaData.description\"\n            maxlength=\"140\"\n          />\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n              __(\"Assignment conditions\")\n            }}</span>\n            <span class=\"text-p-sm text-ink-gray-6\">\n              {{ __(\"Choose which tickets are affected by this policy.\") }}\n            </span>\n          </div>\n          <div class=\"mt-3\">\n            <div class=\"flex items-center justify-between\">\n              <Checkbox\n                :label=\"__('Set as default SLA')\"\n                :model-value=\"slaData.default_sla\"\n                @update:model-value=\"toggleDefaultSla\"\n                class=\"text-ink-gray-6 text-base font-medium\"\n              />\n              <div\n                v-if=\"isOldSla && slaActiveScreen.data && !slaData.default_sla\"\n              >\n                <Popover trigger=\"hover\" :hoverDelay=\"0.25\" placement=\"top-end\">\n                  <template #target>\n                    <div\n                      class=\"text-sm text-ink-gray-6 flex gap-1 cursor-default\"\n                    >\n                      {{ __(\"Old Conditions\") }}\n                      <FeatherIcon name=\"info\" class=\"size-4\" />\n                    </div>\n                  </template>\n                  <template #body-main>\n                    <div\n                      class=\"text-sm text-ink-gray-6 p-2 bg-white rounded-md max-w-96 text-wrap whitespace-pre-wrap leading-5\"\n                    >\n                      <code>{{ slaData.condition }}</code>\n                    </div>\n                  </template>\n                </Popover>\n              </div>\n            </div>\n            <div class=\"mt-5\" v-if=\"!slaData.default_sla\">\n              <div\n                class=\"flex flex-col gap-3 items-center text-center text-ink-gray-7 text-sm mb-2 border border-gray-300 rounded-md p-3 py-4\"\n                v-if=\"!useNewUI\"\n              >\n                <span class=\"text-p-sm\">\n                  Conditions for this SLA were created from\n                  <a :href=\"deskUrl\" target=\"_blank\" class=\"underline\">desk</a>\n                  which are not compatible with this UI, you will need to\n                  recreate the conditions here if you want to manage and add new\n                  conditions from this UI.\n                </span>\n                <Button\n                  :label=\"__('I understand, add conditions')\"\n                  variant=\"subtle\"\n                  theme=\"gray\"\n                  @click=\"useNewUI = true\"\n                />\n              </div>\n              <SlaAssignmentConditions\n                :conditions=\"slaData.condition_json\"\n                v-if=\"useNewUI\"\n              />\n            </div>\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-lg font-semibold text-ink-gray-8\">\n              {{ __(\"Valid from\") }}\n            </span>\n            <span class=\"text-p-sm text-ink-gray-6\">\n              {{ __(\"Choose how long this SLA policy will be active.\") }}\n            </span>\n          </div>\n          <div class=\"mt-3.5 flex gap-5 flex-col md:flex-row\">\n            <div class=\"w-full space-y-1.5\">\n              <FormLabel :label=\"__('From date')\" for=\"from_date\" />\n              <DatePicker\n                v-model=\"slaData.start_date\"\n                variant=\"subtle\"\n                placeholder=\"11/01/2025\"\n                class=\"w-full\"\n                id=\"from_date\"\n                @change=\"validateSlaData('start_date')\"\n                :formatter=\"(date) => getFormattedDate(date)\"\n              >\n                <template #prefix>\n                  <LucideCalendar class=\"size-4\" />\n                </template>\n              </DatePicker>\n              <ErrorMessage :message=\"slaDataErrors.start_date\" />\n            </div>\n            <div class=\"w-full space-y-1.5\">\n              <FormLabel :label=\"__('To date')\" for=\"to_date\" />\n              <DatePicker\n                v-model=\"slaData.end_date\"\n                variant=\"subtle\"\n                placeholder=\"25/12/2025\"\n                class=\"w-full\"\n                id=\"to_date\"\n                @change=\"validateSlaData('end_date')\"\n                :formatter=\"(date) => getFormattedDate(date)\"\n              >\n                <template #prefix>\n                  <LucideCalendar class=\"size-4\" />\n                </template>\n              </DatePicker>\n              <ErrorMessage :message=\"slaDataErrors.end_date\" />\n            </div>\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-lg font-semibold text-ink-gray-8\">\n              {{ __(\"Response and resolution\") }}\n            </span>\n            <span class=\"text-p-sm text-ink-gray-6\">\n              {{\n                __(\n                  \"Add time targets around support milestones like first reply and resolution times\"\n                )\n              }}\n            </span>\n          </div>\n          <div class=\"mt-5\">\n            <!-- <div class=\"flex gap-6\">\n          <div\n            class=\"flex items-center gap-2\"\n            @click=\"onApplySlaForChange(false)\"\n          >\n            <input\n              name=\"apply_sla_for\"\n              :checked=\"!slaData.apply_sla_for_resolution\"\n              type=\"radio\"\n            />\n            <div class=\"select-none text-ink-gray-6 text-sm font-medium\">\n              Apply SLA for response time\n            </div>\n          </div>\n          <div\n            class=\"flex items-center gap-2\"\n            @click=\"onApplySlaForChange(true)\"\n          >\n            <input\n              name=\"apply_sla_for\"\n              :checked=\"slaData.apply_sla_for_resolution\"\n              type=\"radio\"\n            />\n            <div class=\"select-none text-ink-gray-6 text-sm font-medium\">\n              Apply SLA for response time and resolution time\n            </div>\n          </div>\n        </div> -->\n            <div class=\"mt-5\">\n              <SlaPriorityList />\n            </div>\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-lg font-semibold text-ink-gray-8\">\n              {{ __(\"Status details\") }}\n            </span>\n            <span class=\"text-p-sm text-ink-gray-6\">\n              {{\n                __(\n                  \"Set the default status assigned when a ticket is created, and the status to apply when a ticket is reopened. If not specified, the default status from HD Settings will be used.\"\n                )\n              }}\n            </span>\n          </div>\n          <div class=\"mt-5\">\n            <SlaStatusList />\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <SlaHolidays />\n      </div>\n    </template>\n  </SettingsLayoutBase>\n  <ConfirmDialog\n    v-model=\"showConfirmDialog.show\"\n    :title=\"showConfirmDialog.title\"\n    :message=\"showConfirmDialog.message\"\n    :onConfirm=\"showConfirmDialog.onConfirm\"\n    :onCancel=\"() => (showConfirmDialog.show = false)\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport {\n  resetSlaDataErrors,\n  slaActiveScreen,\n  slaData,\n  slaDataErrors,\n  validateSlaData,\n} from \"@/stores/sla\";\nimport { convertToConditions, getFormattedDate } from \"@/utils\";\nimport {\n  Badge,\n  Button,\n  Checkbox,\n  createResource,\n  DatePicker,\n  ErrorMessage,\n  FormLabel,\n  LoadingIndicator,\n  Popover,\n  Switch,\n  toast,\n} from \"frappe-ui\";\nimport { inject, nextTick, onMounted, onUnmounted, ref, watch } from \"vue\";\nimport SlaAssignmentConditions from \"./SlaAssignmentConditions.vue\";\nimport SlaHolidays from \"./SlaHolidays.vue\";\nimport SlaPriorityList from \"./SlaPriorityList.vue\";\nimport SlaStatusList from \"./SlaStatusList.vue\";\nimport { disableSettingModalOutsideClick } from \"../settingsModal\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { SlaPolicyListResourceSymbol } from \"@/types\";\n\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\n\nconst showConfirmDialog = ref({\n  show: false,\n  title: \"\",\n  message: \"\",\n  onConfirm: () => {},\n});\nconst isDirty = ref(false);\nconst initialData = ref(null);\n\nconst useNewUI = ref(true);\nconst isOldSla = ref(false);\n\nconst slaPolicyList = inject(SlaPolicyListResourceSymbol);\nconst deskUrl = `${window.location.origin}/app/hd-service-level-agreement/${slaActiveScreen.value.data?.name}`;\n\nconst getSlaData = createResource({\n  url: \"helpdesk.api.sla.get_sla\",\n  params: {\n    docname: slaActiveScreen.value.data?.name,\n  },\n  onSuccess(data) {\n    let condition_json;\n    try {\n      condition_json = JSON.parse(data.condition_json || \"[]\");\n    } catch (error) {\n      toast.error(\n        \"Assignment conditions are invalid or corrupt, recreate the conditions.\"\n      );\n      condition_json = [];\n    }\n\n    const newData = {\n      ...data,\n      loading: false,\n      condition_json: condition_json,\n    };\n    slaData.value = newData;\n    slaData.value.apply_sla_for_resolution = true;\n    initialData.value = JSON.stringify(newData);\n    const conditionsAvailable = slaData.value.condition?.length > 0;\n    const conditionsJsonAvailable = slaData.value.condition_json?.length > 0;\n    if (conditionsAvailable && !conditionsJsonAvailable) {\n      useNewUI.value = false;\n      isOldSla.value = true;\n    } else {\n      useNewUI.value = true;\n      isOldSla.value = false;\n    }\n  },\n});\n\nif (slaActiveScreen.value.data && slaActiveScreen.value.fetchData) {\n  slaData.value.loading = true;\n  getSlaData.submit();\n} else {\n  disableSettingModalOutsideClick.value = true;\n}\n\nconst goBack = () => {\n  const confirmDialogInfo = {\n    show: true,\n    title: __(\"Unsaved changes\"),\n    message: __(\n      \"Are you sure you want to go back? Unsaved changes will be lost.\"\n    ),\n    onConfirm: goBack,\n  };\n  if (isDirty.value && !showConfirmDialog.value.show) {\n    showConfirmDialog.value = confirmDialogInfo;\n    return;\n  }\n  if (!slaActiveScreen.value.data && !showConfirmDialog.value.show) {\n    showConfirmDialog.value = confirmDialogInfo;\n    return;\n  }\n  // Workaround fix for settings modal not closing after going back\n  setTimeout(() => {\n    slaActiveScreen.value = {\n      screen: \"list\",\n      data: null,\n      fetchData: true,\n    };\n  }, 250);\n  showConfirmDialog.value.show = false;\n};\n\nconst saveSla = () => {\n  const validationErrors = validateSlaData(undefined, !useNewUI.value);\n\n  if (Object.values(validationErrors).some((error) => error)) {\n    toast.error(\n      __(\"Invalid fields, check if all are filled in and values are correct.\")\n    );\n    return;\n  }\n\n  if (slaActiveScreen.value.data) {\n    if (isOldSla.value && useNewUI.value) {\n      showConfirmDialog.value = {\n        show: true,\n        title: __(\"Confirm overwrite\"),\n        message: __(\n          \"Your old conditions will be overwritten. Are you sure you want to save?\"\n        ),\n        onConfirm: () => {\n          updateSla();\n          showConfirmDialog.value.show = false;\n        },\n      };\n      return;\n    }\n    updateSla();\n  } else {\n    createSla();\n  }\n};\n\nconst createSla = () => {\n  const defaultTicketStatus = slaData.value.default_ticket_status\n    ? slaData.value.default_ticket_status?.value\n    : null;\n  const ticketReopenStatus = slaData.value.reopen_ticket_status\n    ? slaData.value.reopen_ticket_status?.value\n    : null;\n  slaPolicyList.insert.submit(\n    {\n      ...slaData.value,\n      default_ticket_status: defaultTicketStatus,\n      ticket_reopen_status: ticketReopenStatus,\n      condition: convertToConditions({\n        conditions: slaData.value.condition_json,\n        fieldPrefix: \"doc\",\n      }),\n      condition_json: JSON.stringify(slaData.value.condition_json),\n    },\n    {\n      onSuccess(data) {\n        toast.success(__(\"SLA policy created\"));\n        slaActiveScreen.value.data = data;\n        slaActiveScreen.value.screen = \"view\";\n        getSlaData.submit({\n          docname: data.name,\n        });\n        updateOnboardingStep(\"setup_sla\", true);\n      },\n    }\n  );\n};\n\nconst updateSla = () => {\n  const defaultTicketStatus = slaData.value.default_ticket_status\n    ? slaData.value.default_ticket_status?.value\n    : null;\n  const ticketReopenStatus = slaData.value.reopen_ticket_status\n    ? slaData.value.reopen_ticket_status?.value\n    : null;\n  slaPolicyList.setValue.submit(\n    {\n      ...slaData.value,\n      name: slaActiveScreen.value.data.name,\n      default_ticket_status: defaultTicketStatus,\n      ticket_reopen_status: ticketReopenStatus,\n      condition: useNewUI.value\n        ? convertToConditions({\n            conditions: slaData.value.condition_json,\n            fieldPrefix: \"doc\",\n          })\n        : slaData.value.condition,\n      condition_json: useNewUI.value\n        ? JSON.stringify(slaData.value.condition_json)\n        : null,\n    },\n    {\n      onSuccess() {\n        getSlaData.submit();\n        toast.success(__(\"SLA policy updated\"));\n        slaPolicyList.reload();\n      },\n    }\n  );\n};\n\nconst toggleEnabled = () => {\n  if (slaData.value.default_sla) {\n    toast.error(__(\"SLA set as default cannot be disabled\"));\n    return;\n  }\n  slaData.value.enabled = !slaData.value.enabled;\n};\n\nconst toggleDefaultSla = () => {\n  slaData.value.default_sla = !slaData.value.default_sla;\n  if (slaData.value.default_sla) {\n    slaData.value.enabled = true;\n  }\n};\n\nconst onApplySlaForChange = (applyForResolution: boolean) => {\n  slaData.value.apply_sla_for_resolution = applyForResolution;\n  nextTick(() => {\n    validateSlaData(\"priorities\");\n  });\n};\n\nwatch(\n  slaData,\n  (newVal) => {\n    if (!initialData.value) return;\n    isDirty.value = JSON.stringify(newVal) != initialData.value;\n    if (isDirty.value) {\n      disableSettingModalOutsideClick.value = true;\n    } else {\n      disableSettingModalOutsideClick.value = false;\n    }\n  },\n  { deep: true }\n);\n\nconst beforeUnloadHandler = (event) => {\n  if (!isDirty.value) return;\n  event.preventDefault();\n  event.returnValue = true;\n};\nonMounted(() => {\n  addEventListener(\"beforeunload\", beforeUnloadHandler);\n});\n\nonUnmounted(() => {\n  removeEventListener(\"beforeunload\", beforeUnloadHandler);\n  resetSlaDataErrors();\n  disableSettingModalOutsideClick.value = false;\n});\n</script>\n<style scoped>\ninput[type=\"radio\"] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  border: 2px solid #c5c2c2;\n  border-radius: 50%;\n  outline: none;\n  transition: all 0.2s ease;\n  background-color: white;\n}\n\ninput[type=\"radio\"]:checked {\n  background-color: black;\n  border: 2px solid #000;\n}\n\ninput[type=\"radio\"]:checked::after {\n  content: \"\";\n  background-color: #fff;\n}\n\ninput[type=\"radio\"]:focus {\n  outline: none !important;\n  box-shadow: none !important;\n}\n</style>\n","<template>\n  <SlaPolicies v-if=\"slaActiveScreen.screen == 'list'\" />\n  <SlaPolicyView v-else-if=\"slaActiveScreen.screen == 'view'\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { slaActiveScreen } from \"@/stores/sla\";\nimport SlaPolicies from \"./SlaPolicies.vue\";\nimport SlaPolicyView from \"./SlaPolicyView.vue\";\nimport { createListResource } from \"frappe-ui\";\nimport { onUnmounted, provide, ref } from \"vue\";\nimport { SlaPolicyListResourceSymbol } from \"@/types\";\n\nconst slaPolicyListData = createListResource({\n  doctype: \"HD Service Level Agreement\",\n  fields: [\"name\", \"default_sla\", \"enabled\", \"description\"],\n  cache: [\"SLAPolicyList\"],\n  orderBy: \"modified desc\",\n  start: 0,\n  pageLength: 999,\n  auto: true,\n});\nconst slaSearchQuery = ref(\"\");\n\nprovide(\"slaSearchQuery\", slaSearchQuery);\nprovide(SlaPolicyListResourceSymbol, slaPolicyListData);\n\nonUnmounted(() => {\n  slaSearchQuery.value = \"\";\n  slaPolicyListData.filters = {};\n});\n</script>\n","<template>\n  <div class=\"flex items-center cursor-pointer hover:bg-gray-50 rounded\">\n    <div\n      class=\"w-full pl-2 flex flex-col justify-center h-14\"\n      @click=\"holidayListActiveScreen = { screen: 'view', data: data }\"\n    >\n      <div class=\"text-base text-ink-gray-7 font-medium\">{{ data.name }}</div>\n      <div\n        v-if=\"data.description && data.description.length > 0\"\n        class=\"text-sm text-ink-gray-5 mt-1 truncate\"\n      >\n        {{ data.description }}\n      </div>\n    </div>\n    <div class=\"flex justify-between items-center pr-2\">\n      <div>\n        <Dropdown placement=\"right\" :options=\"dropdownOptions\">\n          <Button\n            icon=\"more-horizontal\"\n            variant=\"ghost\"\n            @click=\"isConfirmingDelete = false\"\n          />\n        </Dropdown>\n      </div>\n    </div>\n  </div>\n  <Dialog\n    :options=\"{ title: __('Duplicate Holiday List') }\"\n    v-model=\"duplicateDialog.show\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <FormControl\n          :label=\"__('New Holiday List Name')\"\n          type=\"text\"\n          v-model=\"duplicateDialog.name\"\n        />\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex gap-2 justify-end\">\n        <Button\n          variant=\"subtle\"\n          :label=\"__('Close')\"\n          @click=\"duplicateDialog.show = false\"\n        />\n        <Button variant=\"solid\" :label=\"__('Duplicate')\" @click=\"duplicate()\" />\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup lang=\"ts\">\nimport { Button, createResource, Dropdown, toast } from \"frappe-ui\";\nimport { inject, ref } from \"vue\";\nimport { holidayListActiveScreen } from \"@/stores/holidayList\";\nimport { ConfirmDelete } from \"@/utils\";\nimport { __ } from \"@/translation\";\nimport { HolidayListResourceSymbol } from \"@/types\";\n\nconst props = defineProps({\n  data: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst holidayList = inject(HolidayListResourceSymbol);\n\nconst duplicateDialog = ref({\n  show: false,\n  name: \"\",\n});\n\nconst isConfirmingDelete = ref(false);\n\nconst dropdownOptions = [\n  {\n    label: __(\"Duplicate\"),\n    onClick: () => {\n      duplicateDialog.value.show = true;\n      duplicateDialog.value.name = props.data.name + \" (Copy)\";\n    },\n    icon: \"copy\",\n  },\n  ...ConfirmDelete({\n    onConfirmDelete: () => deleteHolidayList(),\n    isConfirmingDelete,\n  }),\n];\n\nconst duplicate = () => {\n  createResource({\n    url: \"helpdesk.api.holiday_list.duplicate_holiday_list\",\n    params: {\n      docname: props.data.name,\n      new_name: duplicateDialog.value.name,\n    },\n    onSuccess: (data) => {\n      holidayList.reload();\n      toast.success(__(\"Holiday list duplicated\"));\n      duplicateDialog.value = {\n        show: false,\n        name: \"\",\n      };\n      setTimeout(() => {\n        holidayListActiveScreen.value = {\n          screen: \"view\",\n          data: data,\n        };\n      }, 250);\n    },\n    auto: true,\n  });\n};\n\nconst deleteHolidayList = () => {\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n\n  holidayList.delete.submit(props.data.name, {\n    onSuccess: () => {\n      toast.success(__(\"Holiday list deleted\"));\n    },\n  });\n};\n</script>\n","<template>\n  <div\n    v-if=\"holidayList.list.loading && !holidayList.list.data\"\n    class=\"flex items-center justify-center mt-12\"\n  >\n    <LoadingIndicator class=\"w-4\" />\n  </div>\n  <div v-else class=\"-ml-2 grow\">\n    <div\n      v-if=\"!holidayList.list.loading && !holidayList.list.data?.length\"\n      class=\"flex flex-col items-center justify-center gap-4 h-full\"\n    >\n      <div\n        class=\"p-4 size-14.5 rounded-full bg-surface-gray-1 flex justify-center items-center\"\n      >\n        <Briefcase class=\"size-6 text-ink-gray-6\" />\n      </div>\n      <div class=\"flex flex-col items-center gap-1\">\n        <div class=\"text-base font-medium text-ink-gray-6\">\n          {{ __(\"No Holiday list found\") }}\n        </div>\n        <div class=\"text-p-sm text-ink-gray-5 max-w-60 text-center\">\n          {{ __(\"Add one to get started.\") }}\n        </div>\n      </div>\n      <Button\n        :label=\"__('New')\"\n        variant=\"outline\"\n        icon-left=\"plus\"\n        @click=\"goToNew()\"\n      />\n    </div>\n    <div v-else>\n      <div class=\"flex text-sm text-gray-600\">\n        <div class=\"ml-2\">{{ __(\"Schedule name\") }}</div>\n      </div>\n      <hr class=\"mx-2 mt-2\" />\n      <div>\n        <div\n          v-for=\"(holiday, index) in holidayList.list.data\"\n          :key=\"holiday.name\"\n        >\n          <HolidayListItem :data=\"holiday\" />\n          <hr v-if=\"index !== holidayList.list.data.length - 1\" class=\"mx-2\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport HolidayListItem from \"./HolidayListItem.vue\";\nimport { Button, LoadingIndicator } from \"frappe-ui\";\nimport Briefcase from \"~icons/lucide/briefcase\";\n\nimport { inject } from \"vue\";\nimport {\n  holidayListActiveScreen,\n  resetHolidayData,\n} from \"@/stores/holidayList\";\nimport { HolidayListResourceSymbol } from \"@/types\";\n\nconst holidayList = inject(HolidayListResourceSymbol);\n\nconst goToNew = () => {\n  resetHolidayData();\n  holidayListActiveScreen.value = {\n    screen: \"view\",\n    data: null,\n  };\n};\n</script>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Business Holidays')\"\n    :description=\"\n      __(\n        'Set your teams working days, hours, and holidays using a template or custom schedule.'\n      )\n    \"\n  >\n    <template #header-actions>\n      <Button\n        :label=\"__('New')\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"goToNew()\"\n        icon-left=\"plus\"\n      />\n    </template>\n    <template\n      v-if=\"holidayList.data?.length > 9 || holidaySearchRef.length\"\n      #header-bottom\n    >\n      <div class=\"relative\">\n        <Input\n          :model-value=\"holidaySearchRef\"\n          @input=\"holidaySearchRef = $event\"\n          :placeholder=\"__('Search')\"\n          type=\"text\"\n          class=\"bg-white hover:bg-white focus:ring-0 border-outline-gray-2\"\n          icon-left=\"search\"\n          debounce=\"300\"\n          inputClass=\"p-4 pr-12\"\n        />\n        <Button\n          v-if=\"holidaySearchRef\"\n          icon=\"x\"\n          variant=\"ghost\"\n          @click=\"holidaySearchRef = ''\"\n          class=\"absolute right-1 top-1/2 -translate-y-1/2\"\n        />\n      </div>\n    </template>\n    <template #content>\n      <HolidayList />\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  holidayListActiveScreen,\n  resetHolidayData,\n} from \"@/stores/holidayList\";\nimport HolidayList from \"./HolidayList.vue\";\nimport { inject, Ref, ref, watch } from \"vue\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { HolidayListResourceSymbol } from \"@/types\";\n\nconst holidayList = inject(HolidayListResourceSymbol);\nconst holidaySearchRef = inject<Ref<string>>(\"holidaySearchRef\");\n\nconst goToNew = () => {\n  resetHolidayData();\n  holidayListActiveScreen.value = {\n    screen: \"view\",\n    data: null,\n  };\n};\n\nwatch(holidaySearchRef, (newValue) => {\n  holidayList.filters = {\n    name: [\"like\", `%${newValue}%`],\n  };\n  if (!newValue) {\n    holidayList.start = 0;\n    holidayList.pageLength = 10;\n  }\n  holidayList.reload();\n});\n</script>\n","<template>\n  <Dialog\n    v-model=\"dialog.show\"\n    :options=\"{\n      size: 'sm',\n      title: dialog.editing ? 'Edit Holiday' : 'Add Holiday',\n    }\"\n    @after-leave=\"resetForm\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col gap-4 mt-4\">\n        <div class=\"flex flex-col gap-1.5\">\n          <FormLabel label=\"Date\" required />\n          <DatePicker\n            :value=\"dayjs(dialog.holiday_date).format('MM-DD-YYYY')\"\n            @update:model-value=\"dialog.holiday_date = $event\"\n            :formatter=\"(date) => getFormattedDate(date)\"\n            variant=\"subtle\"\n            placeholder=\"Date\"\n            class=\"w-full\"\n            id=\"holiday_date\"\n            required\n            @change=\"errors.holiday_date = ''\"\n          />\n          <ErrorMessage :message=\"errors.holiday_date\" />\n        </div>\n        <div class=\"flex flex-col gap-1.5\">\n          <FormControl\n            :type=\"'textarea'\"\n            size=\"sm\"\n            variant=\"subtle\"\n            placeholder=\"National holiday, etc.\"\n            label=\"Description\"\n            v-model=\"dialog.description\"\n            required\n            @change=\"errors.description = ''\"\n          />\n          <ErrorMessage :message=\"errors.description\" />\n        </div>\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex justify-end gap-2\">\n        <Button\n          variant=\"subtle\"\n          theme=\"gray\"\n          label=\"Cancel\"\n          @click=\"dialog.show = false\"\n        />\n        <Button\n          variant=\"solid\"\n          icon-left=\"plus\"\n          label=\"Add Holiday\"\n          @click=\"onSave\"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { getFormattedDate } from \"@/utils\";\nimport {\n  Dialog,\n  FormControl,\n  Button,\n  FormLabel,\n  toast,\n  ErrorMessage,\n  DatePicker,\n} from \"frappe-ui\";\nimport { ref } from \"vue\";\nimport dayjs from \"dayjs\";\nimport { holidayData } from \"@/stores/holidayList\";\n\ninterface ModelType {\n  show: boolean;\n  holiday_date: null | string | Date;\n  description: string;\n  editing: null | any;\n}\n\nconst dialog = defineModel<ModelType>();\n\nconst errors = ref({\n  holiday_date: \"\",\n  description: \"\",\n});\n\nconst resetForm = () => {\n  dialog.value.holiday_date = new Date();\n  dialog.value.description = \"\";\n  errors.value = {\n    holiday_date: \"\",\n    description: \"\",\n  };\n};\n\nconst onSave = () => {\n  if (dialog.value.description?.trim() === \"\") {\n    errors.value.description = \"Please enter a description\";\n  }\n  if (!dialog.value.holiday_date) {\n    errors.value.holiday_date = \"Please enter a valid date\";\n  }\n\n  if (errors.value.holiday_date || errors.value.description) {\n    return;\n  }\n\n  const holidayDate = dayjs(dialog.value.holiday_date).startOf(\"day\");\n  const fromDate = dayjs(holidayData.value.from_date).startOf(\"day\");\n  const toDate = dayjs(holidayData.value.to_date).startOf(\"day\");\n\n  if (holidayDate.isBefore(fromDate) || holidayDate.isAfter(toDate)) {\n    toast.error(\n      `Holiday date must be between ${getFormattedDate(\n        holidayData.value.from_date\n      )} and ${getFormattedDate(holidayData.value.to_date)}`\n    );\n    return;\n  }\n\n  if (dialog.value.editing) {\n    const holidayExists = holidayData.value.holidays.find(\n      (h) =>\n        getFormattedDate(h.holiday_date) ===\n        getFormattedDate(dialog.value.holiday_date)\n    );\n\n    // If the holiday exists and user is trying to add a new holiday on the same date, show error\n    if (\n      holidayExists &&\n      getFormattedDate(holidayExists.holiday_date) !==\n        getFormattedDate(dialog.value.editing.holiday_date)\n    ) {\n      toast.error(\"Holiday already exists\");\n      return;\n    }\n    const holidayIndex = holidayData.value.holidays.indexOf(\n      dialog.value.editing\n    );\n    holidayData.value.holidays.splice(holidayIndex, 1, {\n      ...dialog.value,\n      weekly_off: 0,\n    });\n  } else {\n    const index = holidayData.value.holidays.findIndex(\n      (h) =>\n        getFormattedDate(h.holiday_date) ===\n        getFormattedDate(dialog.value.holiday_date)\n    );\n    if (index !== -1) {\n      toast.error(\"Holiday already exists\");\n      return;\n    }\n    holidayData.value.holidays.push({\n      ...dialog.value,\n      weekly_off: 0,\n    });\n  }\n\n  dialog.value = {\n    show: false,\n    holiday_date: null,\n    description: \"\",\n    editing: null,\n  };\n};\n</script>\n","<template>\n  <div class=\"rounded-md border px-2 border-gray-300 text-sm\">\n    <div\n      class=\"grid p-2 px-4 items-center gap-2\"\n      :style=\"{\n        gridTemplateColumns: '1fr 4fr 22px',\n      }\"\n    >\n      <div\n        v-for=\"column in columns\"\n        :key=\"column.key\"\n        class=\"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis\"\n      >\n        {{ column.label }}\n      </div>\n    </div>\n    <hr />\n    <div v-for=\"(holiday, index) in holidays\" :key=\"holiday.name\">\n      <div\n        class=\"grid gap-2 py-3.5 px-4 items-center\"\n        :style=\"{ gridTemplateColumns: '1fr 4fr 22px' }\"\n      >\n        <div\n          v-for=\"column in columns\"\n          :key=\"column.key\"\n          class=\"w-full overflow-hidden whitespace-nowrap text-ellipsis\"\n        >\n          <input\n            v-if=\"column.key === 'description'\"\n            :type=\"'text'\"\n            placeholder=\"Description\"\n            v-model=\"holiday[column.key]\"\n            class=\"!bg-white w-full text-base px-0 focus:!ring-0 border-none hover:bg-white outline-none no-underline focus:!outline-none\"\n          />\n          <div v-else>\n            {{ dayjs(holiday[column.key]).format(\"DD MMM YYYY\") }}\n          </div>\n        </div>\n        <div class=\"flex justify-end\">\n          <Dropdown placement=\"right\" :options=\"dropdownOptions(holiday)\">\n            <Button\n              icon=\"more-horizontal\"\n              variant=\"ghost\"\n              @click=\"isConfirmingDelete = false\"\n            />\n          </Dropdown>\n        </div>\n      </div>\n      <hr v-if=\"index !== holidays.length - 1\" />\n    </div>\n    <div v-if=\"holidays?.length === 0\" class=\"text-center p-4 text-gray-600\">\n      No items in the list\n    </div>\n  </div>\n  <AddHolidayModal v-model=\"dialog\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport dayjs from \"dayjs\";\nimport { ConfirmDelete, getFormattedDate } from \"@/utils\";\nimport { holidayData } from \"@/stores/holidayList\";\nimport AddHolidayModal from \"./Modals/AddHolidayModal.vue\";\nimport { Dropdown } from \"frappe-ui\";\n\nconst isConfirmingDelete = ref(false);\n\ninterface Holiday {\n  holiday_date: string | null;\n  description: string;\n  weekly_off?: number;\n}\n\nconst dropdownOptions = (holiday: Holiday) => [\n  {\n    label: \"Edit\",\n    onClick: () => editHoliday(holiday),\n    icon: \"edit\",\n  },\n  ...ConfirmDelete({\n    onConfirmDelete: () => deleteHoliday(holiday),\n    isConfirmingDelete,\n  }),\n];\n\nconst dialog = ref({\n  show: false,\n  holiday_date: null,\n  description: \"\",\n  editing: null,\n});\n\nconst holidays = computed(() => {\n  return holidayData.value.holidays.filter((item) => {\n    return item.weekly_off == 0;\n  });\n});\n\nconst columns = [\n  {\n    label: \"Date\",\n    key: \"holiday_date\",\n  },\n  {\n    label: \"Description\",\n    key: \"description\",\n  },\n];\n\nconst editHoliday = (holiday: Holiday) => {\n  dialog.value = {\n    show: true,\n    holiday_date: holiday.holiday_date,\n    description: holiday.description,\n    editing: holiday,\n  };\n};\n\nconst deleteHoliday = (holidayToDelete?: Holiday) => {\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n  const index = holidayData.value.holidays.findIndex((h: Holiday) => {\n    const holidayDate = getFormattedDate(h.holiday_date);\n    const editDate = getFormattedDate(holidayToDelete?.holiday_date);\n    return holidayDate === editDate;\n  });\n\n  holidayData.value.holidays.splice(index, 1);\n  isConfirmingDelete.value = false;\n};\n</script>\n","!function(e,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isSameOrBefore=i()}(this,(function(){\"use strict\";return function(e,i){i.prototype.isSameOrBefore=function(e,i){return this.isSame(e,i)||this.isBefore(e,i)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekday=t()}(this,(function(){\"use strict\";return function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,i=this.$W,n=(i<t?i+7:i)-t;return this.$utils().u(e)?n:this.subtract(n,\"day\").add(e,\"day\")}}}));","export const getRepetitionText = (repetition: any) => {\n  const parts: string[] = [];\n\n  if (repetition.all) {\n    parts.push(\"week\");\n  } else {\n    if (repetition.first) parts.push(\"first\");\n    if (repetition.second) parts.push(\"second\");\n    if (repetition.third) parts.push(\"third\");\n    if (repetition.fourth) parts.push(\"fourth\");\n    if (repetition.fifth) parts.push(\"fifth\");\n\n    if (parts.length === 0) return \"\";\n\n    if (parts.length > 1) {\n      const last = parts.pop();\n      parts[parts.length - 1] = `${parts[parts.length - 1]} and ${last}`;\n    }\n\n    parts[0] = parts[0].charAt(0) + parts[0].slice(1);\n    return `Every ${parts.join(\", \")} week`;\n  }\n\n  return parts[0] ? `Every ${parts[0]}` : \"\";\n};\n","<template>\n  <div class=\"rounded-md border p-1 border-gray-300 text-sm\">\n    <div\n      class=\"grid p-2 items-center\"\n      :style=\"{\n        gridTemplateColumns: '1fr 4fr 22px',\n      }\"\n      v-if=\"holidays?.length !== 0\"\n    >\n      <div\n        v-for=\"column in columns\"\n        :key=\"column.key\"\n        class=\"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis\"\n      >\n        {{ column.label }}\n      </div>\n    </div>\n    <hr class=\"my-0.5\" v-if=\"holidays?.length !== 0\" />\n    <div v-for=\"(holiday, index) in holidays\" :key=\"holiday.day\">\n      <div\n        class=\"grid gap-2 px-2 py-2 items-center\"\n        :style=\"{ gridTemplateColumns: '1fr 4fr 22px' }\"\n      >\n        <div\n          v-for=\"column in columns\"\n          :key=\"column.key\"\n          class=\"w-full py-2 overflow-hidden whitespace-nowrap text-ellipsis\"\n        >\n          <div v-if=\"column.key === 'repetition'\">\n            {{ getRepetitionText(holiday[column.key]) }}\n          </div>\n          <div v-else>{{ holiday[column.key] }}</div>\n        </div>\n        <div class=\"flex justify-end\">\n          <Dropdown placement=\"right\" :options=\"dropdownOptions(holiday)\">\n            <Button\n              icon=\"more-horizontal\"\n              variant=\"ghost\"\n              @click=\"isConfirmingDelete = false\"\n            />\n          </Dropdown>\n        </div>\n      </div>\n      <hr class=\"my-0.5\" v-if=\"index !== holidays.length - 1\" />\n    </div>\n    <div v-if=\"holidays?.length === 0\" class=\"text-center p-4 text-gray-600\">\n      No items in the list\n    </div>\n  </div>\n  <Button\n    variant=\"subtle\"\n    @click=\"addHoliday\"\n    class=\"mt-2.5\"\n    label=\"Add Recurring Holiday\"\n    icon-left=\"plus\"\n  />\n  <Dialog\n    v-model=\"dialog\"\n    :options=\"{\n      size: 'md',\n      title: recurringHolidayData.isEditing\n        ? 'Edit Recurring Holiday'\n        : 'Add Recurring Holiday',\n    }\"\n  >\n    <template #body-content>\n      <div v-if=\"!props.holidayData.from_date || !props.holidayData.to_date\">\n        <div class=\"text-center p-4 text-gray-600\">\n          Please select start and end date first\n        </div>\n      </div>\n      <div v-else class=\"flex flex-col gap-4\">\n        <div class=\"flex flex-col gap-1.5\">\n          <FormLabel label=\"Day\" required />\n          <Select\n            :options=\"availableWorkDays\"\n            v-model=\"recurringHolidayData.day\"\n            :disabled=\"availableWorkDays.length === 0\"\n          />\n        </div>\n        <div class=\"flex flex-col gap-1.5\">\n          <FormLabel label=\"Repetition\" required />\n          <div class=\"grid grid-cols-2 gap-2 mt-2\">\n            <Checkbox\n              v-model=\"recurringHolidayData.repetition.all\"\n              label=\"Every week\"\n              :disabled=\"\n                recurringHolidayData.repetition.first ||\n                recurringHolidayData.repetition.second ||\n                recurringHolidayData.repetition.third ||\n                recurringHolidayData.repetition.fourth\n              \"\n            />\n            <Checkbox\n              v-model=\"recurringHolidayData.repetition.first\"\n              label=\"Every first week\"\n              :disabled=\"recurringHolidayData.repetition.all\"\n            />\n            <Checkbox\n              v-model=\"recurringHolidayData.repetition.second\"\n              label=\"Every second week\"\n              :disabled=\"recurringHolidayData.repetition.all\"\n            />\n            <Checkbox\n              v-model=\"recurringHolidayData.repetition.third\"\n              label=\"Every third week\"\n              :disabled=\"recurringHolidayData.repetition.all\"\n            />\n            <Checkbox\n              v-model=\"recurringHolidayData.repetition.fourth\"\n              label=\"Every fourth week\"\n              :disabled=\"recurringHolidayData.repetition.all\"\n            />\n            <Checkbox\n              v-model=\"recurringHolidayData.repetition.fifth\"\n              label=\"Every fifth week\"\n              :disabled=\"recurringHolidayData.repetition.all\"\n            />\n          </div>\n        </div>\n      </div>\n    </template>\n    <template #actions>\n      <Button\n        variant=\"solid\"\n        @click=\"saveHoliday\"\n        class=\"w-full\"\n        v-if=\"props.holidayData.from_date && props.holidayData.to_date\"\n        :label=\"\n          recurringHolidayData.isEditing ? 'Update Holiday' : 'Add Holiday'\n        \"\n        :icon-left=\"recurringHolidayData.isEditing ? 'edit-2' : 'plus'\"\n      />\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { updateWeeklyOffDates } from \"@/stores/holidayList\";\nimport { ConfirmDelete } from \"@/utils\";\nimport dayjs from \"dayjs\";\nimport isSameOrBefore from \"dayjs/plugin/isSameOrBefore\";\nimport weekday from \"dayjs/plugin/weekday\";\nimport { Checkbox, Dropdown, FormLabel, Select, toast } from \"frappe-ui\";\nimport { computed, ref } from \"vue\";\nimport { getRepetitionText } from \"./utils\";\n\ndayjs.extend(weekday);\ndayjs.extend(isSameOrBefore);\n\nconst dialog = ref(false);\nconst recurringHolidayData = ref({\n  day: null,\n  repetition: {\n    all: false,\n    first: false,\n    second: false,\n    third: false,\n    fourth: false,\n    fifth: false,\n  },\n  isEditing: false,\n  editIndex: -1,\n});\n\nconst props = defineProps({\n  holidays: {\n    type: Array<any>,\n    default: () => [],\n    required: true,\n  },\n  holidayData: {\n    type: Object,\n    default: () => {},\n    required: true,\n  },\n});\n\nconst columns = [\n  {\n    label: \"Day\",\n    key: \"day\",\n  },\n  {\n    label: \"Repetition\",\n    key: \"repetition\",\n  },\n];\n\nconst workDays = ref([\n  {\n    label: \"Monday\",\n    value: \"Monday\",\n  },\n  {\n    label: \"Tuesday\",\n    value: \"Tuesday\",\n  },\n  {\n    label: \"Wednesday\",\n    value: \"Wednesday\",\n  },\n  {\n    label: \"Thursday\",\n    value: \"Thursday\",\n  },\n  {\n    label: \"Friday\",\n    value: \"Friday\",\n  },\n  {\n    label: \"Saturday\",\n    value: \"Saturday\",\n  },\n  {\n    label: \"Sunday\",\n    value: \"Sunday\",\n  },\n]);\n\nconst dropdownOptions = (holiday: any) => [\n  {\n    label: \"Edit\",\n    onClick: () => editHoliday(holiday),\n    icon: \"edit\",\n  },\n  ...ConfirmDelete({\n    onConfirmDelete: () => deleteHoliday(holiday),\n    isConfirmingDelete,\n  }),\n];\n\nconst availableWorkDays = computed(() => {\n  const usedDays = new Set(\n    props.holidays\n      .filter(\n        (_, index) =>\n          !recurringHolidayData.value.isEditing ||\n          index !== recurringHolidayData.value.editIndex\n      )\n      .map((h) => h.day)\n  );\n\n  if (recurringHolidayData.value.isEditing && recurringHolidayData.value.day) {\n    usedDays.delete(recurringHolidayData.value.day);\n  }\n\n  return workDays.value.filter((day) => !usedDays.has(day.value));\n});\n\nconst isConfirmingDelete = ref(false);\n\nconst addHoliday = () => {\n  recurringHolidayData.value = {\n    day: null,\n    repetition: {\n      all: false,\n      first: false,\n      second: false,\n      third: false,\n      fourth: false,\n      fifth: false,\n    },\n    isEditing: false,\n    editIndex: -1,\n  };\n  dialog.value = true;\n};\n\nconst editHoliday = (holiday: any) => {\n  const index = props.holidays.findIndex((h) => h.day === holiday.day);\n  recurringHolidayData.value = {\n    ...JSON.parse(JSON.stringify(holiday)),\n    isEditing: true,\n    editIndex: index,\n  };\n  dialog.value = true;\n};\n\nconst saveHoliday = () => {\n  if (!recurringHolidayData.value.day) {\n    toast.error(\"Please select a day of the week\");\n    return;\n  }\n\n  const { all, first, second, third, fourth, fifth } =\n    recurringHolidayData.value.repetition;\n  if (!all && !first && !second && !third && !fourth && !fifth) {\n    toast.error(\"Please select at least one repetition option\");\n    return;\n  }\n\n  const holidayData = { ...recurringHolidayData.value };\n\n  if (holidayData.isEditing) {\n    if (holidayData.editIndex !== undefined && holidayData.editIndex >= 0) {\n      props.holidays[holidayData.editIndex] = { ...holidayData };\n      updateWeeklyOffDates();\n    } else {\n      toast.error(\"Error: Unable to find the holiday to update\");\n      return;\n    }\n  } else {\n    const isDuplicate = props.holidays.some(\n      (holiday) =>\n        holiday.day === holidayData.day &&\n        JSON.stringify(holiday.repetition) ===\n          JSON.stringify(holidayData.repetition)\n    );\n\n    if (isDuplicate) {\n      toast.error(\"Holiday with the same day and repetition already exists\");\n      return;\n    }\n\n    props.holidays.push({\n      ...holidayData,\n      isEditing: false,\n    });\n    updateWeeklyOffDates();\n  }\n  dialog.value = false;\n};\n\nconst deleteHoliday = (holiday: any) => {\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n  const index = props.holidays.findIndex((h: any) => {\n    return h.day === holiday.day;\n  });\n  props.holidays.splice(index, 1);\n  updateWeeklyOffDates();\n  dialog.value = false;\n  isConfirmingDelete.value = false;\n};\n</script>\n","<template>\n  <div class=\"w-max mx-auto\">\n    <div class=\"text-base font-medium mb-2 text-gray-800 ml-2.5\">\n      {{ formattedMonth }}\n    </div>\n    <div class=\"rounded-md text-sm\">\n      <div class=\"flex items-center text-xs uppercase\">\n        <div\n          class=\"flex size-7.5 items-center justify-center text-center text-gray-600\"\n          v-for=\"(d, i) in ['s', 'm', 't', 'w', 't', 'f', 's']\"\n          :key=\"i\"\n        >\n          {{ d }}\n        </div>\n      </div>\n      <div class=\"flex items-center\" v-for=\"(week, i) in datesAsWeeks\" :key=\"i\">\n        <div v-for=\"date in week\" :key=\"getFormattedDate(date)\">\n          <Popover v-if=\"isHoliday(date)\">\n            <template #target=\"{ open, close }\">\n              <div\n                class=\"flex size-7 cursor-pointer text-orange-700 bg-yellow-100 items-center justify-center rounded hover:bg-yellow-100 select-none m-[1px]\"\n                :class=\"{\n                  '!text-ink-gray-4 !bg-gray-100': isWeekOff(date),\n                }\"\n                @mouseover=\"handleMouseEnter(getFormattedDate(date), open)\"\n                @mouseleave=\"handleMouseLeave(getFormattedDate(date), close)\"\n                @click=\"\n                  () => {\n                    if (isWeekOff(date)) return;\n                    close();\n                    editHoliday(date);\n                  }\n                \"\n              >\n                {{ date.getDate() }}\n              </div>\n            </template>\n            <template #body-main=\"{ close: closePopover, open: openPopover }\">\n              <div\n                class=\"p-3 flex gap-2.5 text-ink-gray-9 w-80 border border-gray-100 rounded-md\"\n                @mouseover=\"\n                  handleMouseEnter(getFormattedDate(date), openPopover)\n                \"\n                @mouseleave=\"\n                  handleMouseLeave(getFormattedDate(date), closePopover)\n                \"\n              >\n                <div class=\"w-[5%]\">\n                  <div class=\"size-3.5 bg-orange-500 rounded-sm mt-1\" />\n                </div>\n                <div class=\"grow\">\n                  <div class=\"text-sm font-semibold\">\n                    {{ getHolidayDescription(date) }}\n                  </div>\n                  <div class=\"text-xs mt-1\">\n                    {{ date.toLocaleDateString() }}\n                  </div>\n                </div>\n                <Popover\n                  v-if=\"!isWeekOff(date)\"\n                  @close=\"isConfirmingDelete = false\"\n                >\n                  <template #target=\"{ open, close }\">\n                    <Button\n                      icon=\"more-horizontal\"\n                      variant=\"ghost\"\n                      @click=\"open\"\n                      @mouseleave=\"\n                        handleMouseLeave(\n                          getFormattedDate(date) + 'dropdown',\n                          close\n                        )\n                      \"\n                    />\n                  </template>\n                  <template\n                    #body-main=\"{ close: closeDropdown, open: openDropdown }\"\n                  >\n                    <div\n                      class=\"p-2 flex flex-col gap-1 w-40 text-ink-gray-9 border border-gray-100 rounded-md\"\n                      @mouseover=\"\n                        handleMouseEnter(getFormattedDate(date), openPopover);\n                        handleMouseEnter(\n                          getFormattedDate(date) + 'dropdown',\n                          openDropdown\n                        );\n                      \"\n                      @mouseleave=\"\n                        handleMouseLeave(getFormattedDate(date), closePopover);\n                        handleMouseLeave(\n                          getFormattedDate(date) + 'dropdown',\n                          closeDropdown\n                        );\n                      \"\n                    >\n                      <Button\n                        class=\"w-full flex !justify-start\"\n                        icon-left=\"edit\"\n                        variant=\"ghost\"\n                        label=\"Edit\"\n                        @click=\"\n                          () => {\n                            closePopover();\n                            closeDropdown();\n                            editHoliday(date);\n                          }\n                        \"\n                      />\n                      <Button\n                        class=\"w-full flex !justify-start\"\n                        icon-left=\"trash-2\"\n                        variant=\"ghost\"\n                        :label=\"\n                          isConfirmingDelete ? 'Confirm Delete' : 'Delete'\n                        \"\n                        :theme=\"isConfirmingDelete ? 'red' : 'gray'\"\n                        @click=\"\n                          (e) => {\n                            deleteHoliday(e, date, () => {\n                              closePopover();\n                              closeDropdown();\n                            });\n                          }\n                        \"\n                      />\n                    </div>\n                  </template>\n                </Popover>\n              </div>\n            </template>\n          </Popover>\n          <div\n            v-else\n            class=\"flex size-7 items-center justify-center rounded m-[1px] select-none\"\n            :class=\"{\n              'cursor-pointer hover:bg-surface-gray-2': isDateInRange(date),\n              'text-ink-gray-3':\n                // @ts-ignore\n                date.getMonth() !== currentMonth - 1 || !isDateInRange(date),\n              'bg-black text-ink-white hover:!bg-black/80 hover:text-ink-white':\n                getFormattedDate(date) === dateValue && isDateInRange(date),\n              'opacity-50 cursor-not-allowed': !isDateInRange(date),\n            }\"\n            @click=\"isDateInRange(date) ? addHoliday(date) : null\"\n          >\n            {{ date.getDate() }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <AddHolidayModal v-model=\"dialog\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { holidayData } from \"@/stores/holidayList\";\nimport { getFormattedDate, htmlToText } from \"@/utils\";\nimport dayjs from \"dayjs\";\nimport { Popover, useDatePicker } from \"frappe-ui\";\nimport { ref, watch } from \"vue\";\nimport AddHolidayModal from \"./Modals/AddHolidayModal.vue\";\n\nconst dialog = ref({\n  show: false,\n  holiday_date: null,\n  description: \"\",\n  editing: null,\n});\n\nconst {\n  currentYear,\n  currentMonth,\n  today,\n  datesAsWeeks: daw,\n  formattedMonth,\n} = useDatePicker();\n// Workaround to fix type errors\nconst datesAsWeeks = daw as unknown as Date[][];\nconst isConfirmingDelete = ref(false);\nconst popoverTimeouts = ref({});\n\nconst props = defineProps({\n  year: {\n    type: Number,\n    required: true,\n  },\n  month: {\n    type: Number,\n    required: true,\n  },\n  holidays: {\n    type: Array<any>,\n    required: true,\n  },\n});\n\nconst dateValue = ref(getFormattedDate(today.value));\n\nconst handleMouseEnter = (date, callback) => {\n  if (popoverTimeouts.value[date]) {\n    clearTimeout(popoverTimeouts.value[date]);\n  }\n  popoverTimeouts.value[date] = setTimeout(() => {\n    callback();\n  }, 350);\n};\n\nconst handleMouseLeave = (date, callback) => {\n  if (popoverTimeouts.value[date]) {\n    clearTimeout(popoverTimeouts.value[date]);\n  }\n  popoverTimeouts.value[date] = setTimeout(() => {\n    callback();\n  }, 350);\n};\n\nconst addHoliday = (date) => {\n  dialog.value = {\n    holiday_date: date,\n    description: \"\",\n    show: true,\n    editing: null,\n  };\n};\n\nconst isDateInRange = (date: Date): boolean => {\n  if (!holidayData.value.from_date || !holidayData.value.to_date) return false;\n\n  const checkDate = dayjs(date).startOf(\"day\");\n  const from = dayjs(holidayData.value.from_date).startOf(\"day\");\n  const to = dayjs(holidayData.value.to_date).endOf(\"day\");\n\n  return (\n    (checkDate.isAfter(from) || checkDate.isSame(from, \"day\")) &&\n    (checkDate.isBefore(to) || checkDate.isSame(to, \"day\"))\n  );\n};\n\nconst isHoliday = (date: Date): boolean => {\n  if (!props.holidays?.length) return false;\n  const inputDate = dayjs(date).startOf(\"day\");\n\n  return props.holidays.some((holiday) => {\n    const holidayDate = dayjs(holiday.holiday_date).startOf(\"day\");\n    return holidayDate.isSame(inputDate);\n  });\n};\n\nconst isWeekOff = (date: Date): boolean => {\n  if (!props.holidays?.length) return false;\n\n  const inputDate = dayjs(date).startOf(\"day\");\n  return props.holidays.some((holiday) => {\n    const holidayDate = dayjs(holiday.holiday_date).startOf(\"day\");\n    return holidayDate.isSame(inputDate) && holiday.weekly_off == 1;\n  });\n};\n\nconst editHoliday = (date) => {\n  const holiday = props.holidays.find((h) => {\n    const holidayDate = getFormattedDate(h.holiday_date);\n    const editDate = getFormattedDate(date);\n    return holidayDate === editDate;\n  });\n  dialog.value = {\n    show: true,\n    holiday_date: holiday.holiday_date,\n    description: holiday.description,\n    editing: holiday,\n  };\n};\n\nconst deleteHoliday = (event, date, callback) => {\n  event.stopPropagation();\n  event.preventDefault();\n  if (!isConfirmingDelete.value) {\n    isConfirmingDelete.value = true;\n    return;\n  }\n  const holidayToDelete = props.holidays.find((h) => {\n    const holidayDate = getFormattedDate(h.holiday_date);\n    const editDate = getFormattedDate(date);\n    return holidayDate === editDate;\n  });\n  const index = props.holidays.findIndex((h) => {\n    const holidayDate = getFormattedDate(h.holiday_date);\n    const editDate = getFormattedDate(holidayToDelete.holiday_date);\n    return holidayDate === editDate;\n  });\n\n  props.holidays.splice(index, 1);\n  dialog.value = {\n    show: false,\n    holiday_date: null,\n    description: \"\",\n    editing: null,\n  };\n  isConfirmingDelete.value = false;\n  callback();\n};\n\nconst getHolidayDescription = (date: Date): string => {\n  const holiday = props.holidays.find((h) => {\n    const holidayDate = getFormattedDate(h.holiday_date);\n    const editDate = getFormattedDate(date);\n    return holidayDate === editDate;\n  });\n\n  const text = holiday?.weekly_off\n    ? `${htmlToText(holiday?.description || \"\")}: Recurring holiday`\n    : htmlToText(holiday?.description || \"\");\n\n  return text;\n};\n\nwatch(\n  () => [props.year, props.month],\n  ([newYear, newMonth]) => {\n    currentYear.value = newYear;\n    currentMonth.value = newMonth;\n  },\n  { immediate: true }\n);\n</script>\n","<template>\n  <div class=\"p-6.5 px-5 rounded-xl border border-gray-300\">\n    <div class=\"mb-6.5 flex justify-between items-center\">\n      <div class=\"ml-1\">\n        <Popover v-if=\"startYear !== endYear\">\n          <template #target=\"{ togglePopover }\">\n            <Button\n              class=\"flex items-center gap-2 font-semibold text-xl cursor-pointer select-none\"\n              variant=\"ghost\"\n              @click=\"togglePopover\"\n              :label=\"currentYear + ''\"\n              icon-right=\"chevron-down\"\n            />\n          </template>\n          <template #body-main=\"{ togglePopover }\">\n            <div class=\"w-24\">\n              <div ref=\"yearsContainer\" class=\"max-h-60 overflow-y-auto py-1\">\n                <div\n                  v-for=\"year in yearsList\"\n                  :key=\"year\"\n                  ref=\"yearItems\"\n                  class=\"cursor-pointer px-3 py-1.5 text-sm hover:bg-gray-100 flex items-center justify-between\"\n                  @click=\"onYearChange(togglePopover, year)\"\n                >\n                  {{ year }}\n                  <FeatherIcon\n                    name=\"check\"\n                    class=\"size-4\"\n                    v-if=\"year === currentYear\"\n                  />\n                </div>\n              </div>\n            </div>\n          </template>\n        </Popover>\n        <div\n          v-else\n          class=\"flex items-center gap-2 px-2 font-semibold text-xl select-none\"\n        >\n          {{ startYear }}\n        </div>\n      </div>\n      <div class=\"flex gap-2 items-center\">\n        <Button\n          variant=\"ghost\"\n          icon=\"chevron-left\"\n          :disabled=\"visibleMonths === 'first-half'\"\n          @click=\"visibleMonths = 'first-half'\"\n        />\n        <Button variant=\"ghost\" label=\"Today\" @click=\"goToToday()\" />\n        <Button\n          variant=\"ghost\"\n          icon=\"chevron-right\"\n          :disabled=\"visibleMonths === 'second-half'\"\n          @click=\"visibleMonths = 'second-half'\"\n        />\n      </div>\n    </div>\n    <div\n      class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\"\n      v-if=\"visibleMonths === 'first-half'\"\n    >\n      <HLCalender\n        v-for=\"month in months.slice(0, 6)\"\n        :key=\"month\"\n        :year=\"currentYear\"\n        :month=\"month\"\n        :holidays=\"holidayData.holidays\"\n      />\n    </div>\n    <div\n      class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 justify-between gap-5\"\n      v-else\n    >\n      <HLCalender\n        v-for=\"month in months.slice(6, 12)\"\n        :key=\"month\"\n        :year=\"currentYear\"\n        :month=\"month\"\n        :holidays=\"holidayData.holidays\"\n      />\n    </div>\n    <div class=\"flex gap-2 items-center w-full justify-center mt-8\">\n      <div\n        :class=\"[\n          'size-1.5 rounded-full cursor-pointer',\n          {\n            'bg-black': visibleMonths === 'first-half',\n            'bg-gray-400': visibleMonths === 'second-half',\n          },\n        ]\"\n        @click=\"visibleMonths = 'first-half'\"\n      />\n      <div\n        :class=\"[\n          'size-1.5 rounded-full cursor-pointer',\n          {\n            'bg-black': visibleMonths === 'second-half',\n            'bg-gray-400': visibleMonths === 'first-half',\n          },\n        ]\"\n        @click=\"visibleMonths = 'second-half'\"\n      />\n    </div>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from \"vue\";\nimport HLCalender from \"./HLCalender.vue\";\nimport dayjs from \"dayjs\";\nimport { holidayData } from \"@/stores/holidayList\";\nimport { Button, Popover } from \"frappe-ui\";\n\nconst visibleMonths = ref<\"first-half\" | \"second-half\">(\"first-half\");\nconst months = ref([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]);\nconst currentYear = ref(dayjs().year());\n\nconst startYear = ref(dayjs(holidayData.value.from_date || dayjs()).year());\nconst endYear = ref(dayjs(holidayData.value.to_date || dayjs()).year());\n\nconst yearsList = computed(() => {\n  const yearList = [];\n  for (let year = startYear.value; year <= endYear.value; year++) {\n    yearList.push(year);\n  }\n  return yearList;\n});\n\nconst onYearChange = (togglePopover: () => void, year: number) => {\n  currentYear.value = year;\n  if (year === dayjs(holidayData.value.from_date).year()) {\n    if (dayjs(holidayData.value.from_date).month() >= 6) {\n      visibleMonths.value = \"second-half\";\n    }\n  } else if (year === dayjs(holidayData.value.to_date).year()) {\n    if (dayjs(holidayData.value.to_date).month() >= 6) {\n      visibleMonths.value = \"first-half\";\n    }\n  } else {\n    visibleMonths.value = \"first-half\";\n  }\n  togglePopover();\n};\n\nconst goToToday = () => {\n  const today = dayjs();\n  currentYear.value = today.year();\n  visibleMonths.value = today.month() >= 6 ? \"second-half\" : \"first-half\";\n};\n\nwatch(\n  () => [holidayData.value.from_date, holidayData.value.to_date],\n  ([fromDate, toDate]) => {\n    fromDate = dayjs(fromDate);\n    toDate = dayjs(toDate);\n    startYear.value = fromDate.year();\n    endYear.value = toDate.year();\n    currentYear.value = fromDate.year();\n    visibleMonths.value = fromDate.month() >= 6 ? \"second-half\" : \"first-half\";\n  }\n);\n\nonMounted(() => {\n  const fromDate = dayjs(holidayData.value.from_date || dayjs());\n  visibleMonths.value = fromDate.month() >= 6 ? \"second-half\" : \"first-half\";\n});\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <div class=\"flex items-center gap-2\">\n        <Button\n          variant=\"ghost\"\n          icon-left=\"chevron-left\"\n          :label=\"holidayData?.holiday_list_name || __('New Business Holiday')\"\n          size=\"md\"\n          @click=\"goBack()\"\n          class=\"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-ink-gray-7 text-lg hover:opacity-70 !pr-0\"\n        />\n        <Badge\n          variant=\"subtle\"\n          theme=\"orange\"\n          size=\"sm\"\n          :label=\"__('Unsaved')\"\n          v-if=\"isDirty\"\n        />\n      </div>\n    </template>\n    <template #header-actions>\n      <Button\n        :label=\"__('Save')\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"saveHoliday()\"\n        :disabled=\"Boolean(!isDirty && holidayListActiveScreen.data)\"\n        :loading=\"\n          holidayList.list.loading ||\n          updateHolidayResource.loading ||\n          getHolidayData.loading\n        \"\n      />\n    </template>\n    <template #content>\n      <div v-if=\"!holidayData.loading\" class=\"h-full\">\n        <div class=\"flex items-center gap-2 mt-2\">\n          <span class=\"text-sm\">\n            There are in total <b>{{ holidayData.holidays.length }}</b> holidays\n            in this list</span\n          >\n        </div>\n        <hr class=\"mb-8 mt-2\" />\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n          <div>\n            <FormControl\n              type=\"text\"\n              size=\"sm\"\n              variant=\"subtle\"\n              :placeholder=\"__('Name')\"\n              :label=\"__('Name')\"\n              v-model=\"holidayData.holiday_list_name\"\n              required\n              maxlength=\"50\"\n              @change=\"validateHoliday('holiday_list_name')\"\n            />\n            <ErrorMessage\n              :message=\"holidayDataErrors.holiday_list_name\"\n              class=\"mt-2\"\n            />\n          </div>\n          <FormControl\n            type=\"textarea\"\n            size=\"sm\"\n            variant=\"subtle\"\n            :placeholder=\"__('Description')\"\n            :label=\"__('Description')\"\n            v-model=\"holidayData.description\"\n            maxlength=\"140\"\n          />\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n              __(\"Valid from\")\n            }}</span>\n            <span class=\"text-p-sm text-ink-gray-6\">\n              {{ __(\"Choose the duration of this holiday list.\") }}\n            </span>\n          </div>\n          <div class=\"mt-3.5 flex gap-5 flex-col md:flex-row\">\n            <div class=\"w-full space-y-1.5\">\n              <FormLabel :label=\"__('From date')\" for=\"from_date\" required />\n              <DatePicker\n                v-model=\"holidayData.from_date\"\n                variant=\"subtle\"\n                placeholder=\"11/01/2025\"\n                class=\"w-full\"\n                id=\"from_date\"\n                :formatter=\"(date) => getFormattedDate(date)\"\n                :debounce=\"300\"\n                @update:model-value=\"updateDuration('from_date')\"\n              >\n                <template #prefix>\n                  <LucideCalendar class=\"size-4\" />\n                </template>\n              </DatePicker>\n              <ErrorMessage\n                :message=\"\n                  holidayDataErrors.from_date || holidayDataErrors.dateRange\n                \"\n              />\n            </div>\n            <div class=\"w-full space-y-1.5\">\n              <FormLabel :label=\"__('To date')\" for=\"to_date\" required />\n              <DatePicker\n                v-model=\"holidayData.to_date\"\n                variant=\"subtle\"\n                placeholder=\"25/12/2025\"\n                class=\"w-full\"\n                id=\"to_date\"\n                :formatter=\"(date) => getFormattedDate(date)\"\n                :debounce=\"300\"\n                @update:model-value=\"updateDuration('to_date')\"\n              >\n                <template #prefix>\n                  <LucideCalendar class=\"size-4\" />\n                </template>\n              </DatePicker>\n              <ErrorMessage :message=\"holidayDataErrors.to_date\" />\n            </div>\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <div class=\"text-lg font-semibold text-ink-gray-8\">\n              {{ __(\"Recurring holidays\") }}\n            </div>\n            <div class=\"text-p-sm text-ink-gray-6\">\n              {{ __(\"Add recurring holidays such as weekends.\") }}\n            </div>\n          </div>\n          <div class=\"mt-5\">\n            <RecurringHolidaysList\n              :holidayData=\"holidayData\"\n              :holidays=\"holidayData.recurring_holidays\"\n            />\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex justify-between items-center\">\n            <div class=\"flex justify-between flex-col gap-1\">\n              <span class=\"text-lg font-semibold text-ink-gray-8\">\n                {{ __(\"Holidays\") }}\n              </span>\n              <div class=\"text-p-sm text-ink-gray-6\">\n                {{\n                  __(\n                    \"Add holidays here to make sure theyre excluded from SLA calculations.\"\n                  )\n                }}\n              </div>\n            </div>\n            <TabButtons\n              :buttons=\"[\n                {\n                  value: 'calendar',\n                  icon: 'calendar',\n                },\n                {\n                  value: 'list',\n                  icon: 'list',\n                },\n              ]\"\n              v-model=\"holidayListView\"\n            />\n          </div>\n          <div class=\"mt-5\">\n            <HolidaysTableView v-if=\"holidayListView === 'list'\" />\n            <HolidaysCalendarView v-else />\n          </div>\n          <div class=\"mt-2.5 flex justify-between items-center\">\n            <Button\n              variant=\"subtle\"\n              :label=\"__('Add Holiday')\"\n              @click=\"dialog.show = true\"\n              icon-left=\"plus\"\n            />\n            <!-- Indicators -->\n            <div class=\"flex gap-4\" v-if=\"holidayListView === 'calendar'\">\n              <div class=\"gap-1 flex items-center\">\n                <span class=\"bg-yellow-100 size-4 rounded-sm\" />\n                <span class=\"text-sm text-ink-gray-6\">{{\n                  __(\"Holidays\")\n                }}</span>\n              </div>\n              <div class=\"gap-1 flex items-center\">\n                <span class=\"bg-gray-100 size-4 rounded-sm\" />\n                <span class=\"text-sm text-ink-gray-6\">{{\n                  __(\"Recurring holidays\")\n                }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n  <AddHolidayModal v-model=\"dialog\" />\n  <ConfirmDialog\n    v-model=\"showConfirmDialog\"\n    :title=\"__('Unsaved changes')\"\n    :message=\"\n      __('Are you sure you want to go back? Unsaved changes will be lost.')\n    \"\n    :onConfirm=\"goBack\"\n    :onCancel=\"() => (showConfirmDialog = false)\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  holidayData,\n  holidayDataErrors,\n  holidayListActiveScreen,\n  updateWeeklyOffDates,\n  validateHoliday,\n} from \"@/stores/holidayList\";\nimport {\n  Button,\n  createResource,\n  DatePicker,\n  FormControl,\n  LoadingIndicator,\n  TabButtons,\n  toast,\n} from \"frappe-ui\";\nimport { inject, onMounted, onUnmounted, ref, watch } from \"vue\";\nimport HolidaysTableView from \"./HolidaysTableView.vue\";\nimport RecurringHolidaysList from \"./RecurringHolidaysList.vue\";\n\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport { slaActiveScreen } from \"@/stores/sla\";\nimport { getFormattedDate, htmlToText } from \"@/utils\";\nimport dayjs from \"dayjs\";\nimport { FormLabel } from \"frappe-ui\";\nimport {\n  disableSettingModalOutsideClick,\n  setActiveSettingsTab,\n} from \"../settingsModal\";\nimport HolidaysCalendarView from \"./HolidaysCalendarView.vue\";\nimport AddHolidayModal from \"./Modals/AddHolidayModal.vue\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { HolidayListResourceSymbol } from \"@/types\";\n\nconst dialog = ref({\n  show: false,\n  holiday_date: new Date(),\n  description: \"\",\n  editing: null,\n});\n\nconst isDirty = ref(false);\nconst initialData = ref(null);\nconst holidayListView = ref(\"calendar\");\n\nconst showConfirmDialog = ref(false);\n\nconst holidayList = inject(HolidayListResourceSymbol);\n\nconst getHolidayData = createResource({\n  url: \"helpdesk.api.holiday_list.get_holiday_list\",\n  params: {\n    docname: holidayListActiveScreen.value.data?.name,\n  },\n  onSuccess(data) {\n    holidayData.value = data;\n    initialData.value = JSON.stringify(data);\n  },\n  transform(data) {\n    for (let holiday of data.holidays) {\n      holiday.description = htmlToText(holiday.description);\n    }\n    data.recurring_holidays = JSON.parse(data.recurring_holidays || \"[]\");\n    return data;\n  },\n});\n\nif (holidayListActiveScreen.value.data?.name) {\n  holidayData.value.loading = true;\n  getHolidayData.fetch();\n} else {\n  initialData.value = JSON.stringify(holidayData.value);\n}\n\nconst updateDuration = (key) => {\n  validateHoliday(key);\n  if (\n    !holidayDataErrors.value.dateRange ||\n    holidayDataErrors.value.dateRange === \"\"\n  ) {\n    updateWeeklyOffDates();\n  }\n};\n\nconst goBack = () => {\n  if (isDirty.value && !showConfirmDialog.value) {\n    showConfirmDialog.value = true;\n    return;\n  }\n  if (holidayListActiveScreen.value.previousScreen) {\n    setActiveSettingsTab(\"SLA Policies\");\n\n    slaActiveScreen.value = {\n      screen: \"view\",\n      data: { name: holidayListActiveScreen.value.previousScreen.data },\n      fetchData: false,\n    };\n  }\n  showConfirmDialog.value = false;\n  // Workaround fix for settings modal not closing after going back\n  setTimeout(() => {\n    holidayListActiveScreen.value = {\n      screen: \"list\",\n      data: null,\n    };\n  }, 250);\n};\n\nconst saveHoliday = () => {\n  const validationErrors = validateHoliday();\n  if (Object.values(validationErrors).some((error) => error)) {\n    toast.error(\n      __(\"Invalid fields, check if all are filled in and values are correct.\")\n    );\n    return;\n  }\n\n  if (holidayListActiveScreen.value.data) {\n    updateHoliday();\n  } else {\n    createHoliday();\n  }\n};\n\nconst createHoliday = () => {\n  const holidays = holidayData.value.holidays.map((holiday) => {\n    return {\n      ...holiday,\n      holiday_date: dayjs(holiday.holiday_date).format(\"YYYY-MM-DD\"),\n    };\n  });\n  holidayList.insert.submit(\n    {\n      holiday_list_name: holidayData.value.holiday_list_name,\n      description: holidayData.value.description,\n      from_date: holidayData.value.from_date,\n      to_date: holidayData.value.to_date,\n      holidays: holidays,\n      recurring_holidays: JSON.stringify(holidayData.value.recurring_holidays),\n    },\n    {\n      onSuccess(data) {\n        toast.success(__(\"Holiday list created\"));\n        holidayListActiveScreen.value.data = data;\n        holidayListActiveScreen.value.screen = \"view\";\n        getHolidayData.submit({\n          docname: data.name,\n        });\n      },\n    }\n  );\n};\n\nconst updateHolidayResource = createResource({\n  url: \"helpdesk.api.holiday_list.update_holiday_list\",\n  onSuccess(data) {\n    holidayListActiveScreen.value.data = data;\n    getHolidayData.submit({\n      docname: data.name,\n    });\n    toast.success(__(\"Holiday list updated\"));\n  },\n});\n\nconst updateHoliday = () => {\n  const holidays = holidayData.value.holidays.map((holiday) => {\n    return {\n      ...holiday,\n      holiday_date: dayjs(holiday.holiday_date).format(\"YYYY-MM-DD\"),\n    };\n  });\n\n  updateHolidayResource.submit({\n    docname: holidayListActiveScreen.value.data.name,\n    doc: {\n      holiday_list_name: holidayData.value.holiday_list_name,\n      description: holidayData.value.description,\n      from_date: holidayData.value.from_date,\n      to_date: holidayData.value.to_date,\n      holidays: holidays,\n      recurring_holidays: JSON.stringify(holidayData.value.recurring_holidays),\n    },\n  });\n};\n\nwatch(\n  holidayData,\n  (newVal) => {\n    if (!initialData.value) return;\n    isDirty.value = JSON.stringify(newVal) != initialData.value;\n    if (isDirty.value) {\n      disableSettingModalOutsideClick.value = true;\n    } else {\n      disableSettingModalOutsideClick.value = false;\n    }\n  },\n  { deep: true }\n);\n\nconst beforeUnloadHandler = (event) => {\n  if (!isDirty.value) return;\n  event.preventDefault();\n  event.returnValue = true;\n};\n\nonMounted(() => {\n  addEventListener(\"beforeunload\", beforeUnloadHandler);\n});\n\nonUnmounted(() => {\n  removeEventListener(\"beforeunload\", beforeUnloadHandler);\n  holidayDataErrors.value = {\n    holiday_list_name: \"\",\n    from_date: \"\",\n    to_date: \"\",\n  };\n  disableSettingModalOutsideClick.value = false;\n});\n</script>\n\n<style scoped>\ninput[type=\"radio\"] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  border: 2px solid #c5c2c2;\n  border-radius: 50%;\n  outline: none;\n  transition: all 0.2s ease;\n  background-color: white;\n}\n\ninput[type=\"radio\"]:checked {\n  background-color: black;\n  border: 2px solid #000;\n}\n\ninput[type=\"radio\"]:checked::after {\n  content: \"\";\n  background-color: #fff;\n}\n\ninput[type=\"radio\"]:focus {\n  outline: none !important;\n  box-shadow: none !important;\n}\n</style>\n","<template>\n  <Holidays v-if=\"holidayListActiveScreen.screen == 'list'\" />\n  <HolidayView v-else-if=\"holidayListActiveScreen.screen == 'view'\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { holidayListActiveScreen } from \"@/stores/holidayList\";\nimport Holidays from \"./Holidays.vue\";\nimport HolidayView from \"./HolidayView.vue\";\nimport { createListResource } from \"frappe-ui\";\nimport { onUnmounted, provide, ref } from \"vue\";\nimport { HolidayListResourceSymbol } from \"@/types\";\n\nconst holidayListData = createListResource({\n  doctype: \"HD Service Holiday List\",\n  fields: [\"name\", \"description\"],\n  cache: [\"HolidayList\"],\n  orderBy: \"modified desc\",\n  start: 0,\n  pageLength: 999,\n  auto: true,\n});\nconst holidaySearchRef = ref(\"\");\n\nprovide(\"holidaySearchRef\", holidaySearchRef);\nprovide(HolidayListResourceSymbol, holidayListData);\n\nonUnmounted(() => {\n  holidaySearchRef.value = \"\";\n  holidayListData.filters = {};\n});\n</script>\n","import { call, createListResource } from \"frappe-ui\";\nimport { computed, reactive } from \"vue\";\n\nexport const fieldDependenciesList = createListResource({\n  doctype: \"HD Form Script\",\n  filters: { is_standard: 1, name: [\"like\", \"%Field Dependency%\"] },\n  fields: [\"name\", \"enabled\", \"owner\"],\n  auto: true,\n  cache: [\"FD\", \"List\"],\n  orderBy: \"modified desc\",\n  start: 0,\n  pageLength: 999,\n});\n\nexport const hiddenChildFields = computed(() => {\n  let _fields = [];\n  fieldDependenciesList.data?.forEach((item) => {\n    let [_, parent, child] = item.name.split(\"-\");\n    if (parent && child) {\n      _fields.push(child);\n      _fields.push(parent);\n    }\n  });\n  return _fields;\n});\n\nconst optionsMap = reactive({});\n\nexport async function getFieldOptions(field: any): Promise<string[]> {\n  if (optionsMap[field.value]) {\n    return optionsMap[field.value];\n  }\n\n  if (field.type === \"Select\") {\n    optionsMap[field.value] = field.options.split(\"\\n\");\n    return optionsMap[field.value];\n  } else if (field.type === \"Link\") {\n    let options = await call(\"frappe.client.get_list\", {\n      doctype: field.options,\n      fields: [\"name\"],\n      limit_page_length: 999,\n    });\n    optionsMap[field.value] = options.map((o) => o.name);\n    return optionsMap[field.value];\n  }\n}\n","<template>\n  <Tooltip text=\"View documentation\">\n    <a :href=\"url\" target=\"_blank\">\n      <lucide-info class=\"h-4 w-4 text-ink-gray-6\" :class=\"color\" />\n    </a>\n  </Tooltip>\n</template>\n\n<script setup lang=\"ts\">\ndefineProps<{\n  url: string;\n  color?: string;\n}>();\n</script>\n\n<style scoped></style>\n","<template>\n  <Combobox\n    v-model=\"selectedValue\"\n    :multiple=\"multiple\"\n    nullable\n    v-slot=\"{ open: isComboboxOpen }\"\n  >\n    <Popover class=\"w-full\" v-model:show=\"showOptions\" :placement=\"placement\">\n      <template\n        #target=\"{ open: openPopover, togglePopover, close: closePopover }\"\n      >\n        <slot\n          name=\"target\"\n          v-bind=\"{\n            open: openPopover,\n            close: closePopover,\n            togglePopover,\n            isOpen: isComboboxOpen,\n          }\"\n        >\n          <div class=\"w-full space-y-1.5\">\n            <label v-if=\"$props.label\" class=\"block text-xs text-gray-600\">\n              {{ $props.label }}\n            </label>\n            <button\n              class=\"flex h-7 w-full items-center justify-between gap-2 rounded bg-gray-100 py-1 px-2 transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-400\"\n              :class=\"[\n                isComboboxOpen ? 'bg-gray-200' : '',\n                $props.buttonClasses,\n                disabled ? 'cursor-not-allowed opacity-50' : '',\n              ]\"\n              @click=\"\n                () => {\n                  !disabled && togglePopover();\n                }\n              \"\n            >\n              <div class=\"flex flex-1 items-center gap-2 overflow-hidden\">\n                <slot name=\"prefix\" />\n                <span\n                  v-if=\"selectedValue\"\n                  class=\"flex-1 truncate text-left text-base leading-5\"\n                >\n                  {{ displayValue(selectedValue) }}\n                </span>\n                <span v-else class=\"text-base leading-5 text-gray-600\">\n                  {{ placeholder || \"\" }}\n                </span>\n                <slot name=\"suffix\" />\n              </div>\n              <FeatherIcon\n                v-show=\"!loading\"\n                name=\"chevron-down\"\n                class=\"h-4 w-4 text-gray-600\"\n                aria-hidden=\"true\"\n              />\n              <LoadingIndicator\n                class=\"h-4 w-4 text-gray-600\"\n                v-show=\"loading\"\n              />\n            </button>\n          </div>\n        </slot>\n      </template>\n      <template #body=\"{ isOpen, togglePopover }\">\n        <div v-show=\"isOpen\">\n          <div\n            class=\"relative mt-1 overflow-hidden rounded-lg bg-white text-base shadow-2xl\"\n            :class=\"bodyClasses\"\n          >\n            <ComboboxOptions\n              class=\"flex max-h-[15rem] flex-col overflow-hidden p-1.5\"\n              static\n            >\n              <div\n                v-if=\"!hideSearch\"\n                class=\"relative mb-1 w-full flex-shrink-0\"\n              >\n                <ComboboxInput\n                  ref=\"searchInput\"\n                  class=\"form-input w-full\"\n                  type=\"text\"\n                  :value=\"query\"\n                  @change=\"query = $event.target.value\"\n                  autocomplete=\"off\"\n                  placeholder=\"Search\"\n                />\n                <button\n                  class=\"absolute right-0 inline-flex h-7 w-7 items-center justify-center\"\n                  @click=\"selectedValue = null\"\n                >\n                  <FeatherIcon name=\"x\" class=\"w-4\" />\n                </button>\n              </div>\n              <div class=\"w-full flex-1 overflow-y-auto\">\n                <div\n                  v-for=\"group in groups\"\n                  :key=\"group.key\"\n                  v-show=\"group.items.length > 0\"\n                >\n                  <div\n                    v-if=\"group.group && !group.hideLabel\"\n                    class=\"sticky top-0 truncate bg-white px-2.5 py-1.5 text-sm font-medium text-gray-600\"\n                  >\n                    {{ group.group }}\n                  </div>\n                  <ComboboxOption\n                    as=\"template\"\n                    v-for=\"(option, idx) in group.items.slice(0, 50)\"\n                    :key=\"option?.value || idx\"\n                    :value=\"option\"\n                    v-slot=\"{ active, selected }\"\n                  >\n                    <li\n                      :class=\"[\n                        'flex h-7 cursor-pointer items-center justify-between rounded px-2.5 text-base',\n                        { 'bg-gray-100': active },\n                      ]\"\n                    >\n                      <div\n                        class=\"flex flex-1 items-center gap-2 overflow-hidden\"\n                      >\n                        <div\n                          v-if=\"$slots['item-prefix'] || $props.multiple\"\n                          class=\"flex-shrink-0\"\n                        >\n                          <slot\n                            name=\"item-prefix\"\n                            v-bind=\"{ active, selected, option }\"\n                          >\n                            <LucideSquare\n                              v-show=\"!isOptionSelected(option)\"\n                              class=\"h-4 w-4 text-gray-700\"\n                            />\n                            <LucideCheckSquare\n                              v-show=\"isOptionSelected(option)\"\n                              class=\"h-4 w-4 text-gray-700\"\n                            />\n                          </slot>\n                        </div>\n                        <span class=\"flex-1 truncate\">\n                          {{ getLabel(option) }}\n                        </span>\n                      </div>\n\n                      <div\n                        v-if=\"$slots['item-suffix'] || option?.description\"\n                        class=\"ml-2 flex-shrink-0\"\n                      >\n                        <slot\n                          name=\"item-suffix\"\n                          v-bind=\"{ active, selected, option }\"\n                        >\n                          <div\n                            v-if=\"option?.description\"\n                            class=\"text-sm text-gray-600\"\n                          >\n                            {{ option.description }}\n                          </div>\n                        </slot>\n                      </div>\n                    </li>\n                  </ComboboxOption>\n                </div>\n              </div>\n              <li\n                v-if=\"groups.length == 0\"\n                class=\"rounded-md px-2.5 py-1.5 text-base text-gray-600\"\n              >\n                No results found\n              </li>\n            </ComboboxOptions>\n\n            <div\n              v-if=\"$slots.footer || showFooter || multiple\"\n              class=\"border-t p-1\"\n            >\n              <slot name=\"footer\" v-bind=\"{ togglePopover }\">\n                <div\n                  v-if=\"multiple\"\n                  class=\"flex items-center justify-end gap-1\"\n                >\n                  <Button\n                    v-if=\"!areAllOptionsSelected\"\n                    label=\"Select All\"\n                    @click.stop=\"selectAll\"\n                  />\n                </div>\n                <div v-else class=\"flex items-center justify-end\">\n                  <Button label=\"Clear\" @click.stop=\"selectedValue = null\" />\n                </div>\n              </slot>\n            </div>\n          </div>\n        </div>\n      </template>\n    </Popover>\n  </Combobox>\n</template>\n\n<script>\nimport {\n  Combobox,\n  ComboboxButton,\n  ComboboxInput,\n  ComboboxOption,\n  ComboboxOptions,\n} from \"@headlessui/vue\";\nimport { LoadingIndicator, Popover } from \"frappe-ui\";\nimport { nextTick } from \"vue\";\nimport LucideCheckSquare from \"~icons/lucide/check-square\";\nimport LucideSquare from \"~icons/lucide/square\";\n\nexport default {\n  name: \"Autocomplete\",\n  props: [\n    \"label\",\n    \"modelValue\",\n    \"options\",\n    \"placeholder\",\n    \"bodyClasses\",\n    \"multiple\",\n    \"loading\",\n    \"hideSearch\",\n    \"autoFocus\",\n    \"placement\",\n    \"showFooter\",\n    \"buttonClasses\",\n    \"disabled\",\n  ],\n  emits: [\"update:modelValue\", \"update:query\", \"change\"],\n  components: {\n    Popover,\n    Combobox,\n    ComboboxInput,\n    ComboboxOptions,\n    ComboboxOption,\n    ComboboxButton,\n    LucideCheckSquare,\n    LucideSquare,\n  },\n  expose: [\"togglePopover\"],\n  data() {\n    return {\n      query: \"\",\n      showOptions: false,\n    };\n  },\n  computed: {\n    selectedValue: {\n      get() {\n        let _selectedOptions;\n        if (!this.multiple) {\n          _selectedOptions = this.findOption(this.modelValue);\n          if (this.modelValue && !_selectedOptions) {\n            _selectedOptions = this.sanitizeOption(this.modelValue);\n          }\n          return _selectedOptions;\n        }\n\n        _selectedOptions = this.modelValue?.map((v) => {\n          const option = this.findOption(v);\n          if (option) return option;\n          return this.sanitizeOption(v);\n        });\n        if (this.modelValue && !_selectedOptions.length) {\n          _selectedOptions = this.sanitizeOptions(this.modelValue);\n        }\n        return _selectedOptions;\n      },\n      set(val) {\n        this.query = \"\";\n        if (val && !this.multiple) this.showOptions = false;\n        this.$emit(\"update:modelValue\", val);\n      },\n    },\n    groups() {\n      if (!this.options || this.options.length == 0) return [];\n\n      let groups = this.options[0]?.group\n        ? this.options\n        : [{ group: \"\", items: this.sanitizeOptions(this.options) }];\n\n      return groups\n        .map((group, i) => {\n          return {\n            key: i,\n            group: group.group,\n            hideLabel: group.hideLabel || false,\n            items: this.filterOptions(this.sanitizeOptions(group.items)),\n          };\n        })\n        .filter((group) => group.items.length > 0);\n    },\n    allOptions() {\n      return this.groups.flatMap((group) => group.items);\n    },\n    areAllOptionsSelected() {\n      if (!this.multiple) return false;\n      return this.allOptions.length === this.selectedValue?.length;\n    },\n  },\n  watch: {\n    query(q) {\n      this.$emit(\"update:query\", q);\n    },\n    showOptions(val) {\n      if (val) nextTick(() => this.$refs.searchInput?.$el?.focus());\n    },\n  },\n  methods: {\n    togglePopover(val) {\n      this.showOptions = val ?? !this.showOptions;\n    },\n    findOption(option) {\n      if (!option) return option;\n      return this.allOptions.find((o) => o.value === (option.value || option));\n    },\n    filterOptions(options) {\n      if (!this.query) return options;\n      return fuzzySearch(options, {\n        term: this.query,\n        keys: [\"label\", \"value\"],\n      });\n    },\n    displayValue(option) {\n      if (!option) return \"\";\n\n      if (!this.multiple) {\n        if (typeof option === \"object\") {\n          return this.getLabel(option);\n        }\n        let selectedOption = this.allOptions.find((o) => o.value === option);\n        return this.getLabel(selectedOption);\n      }\n\n      if (!Array.isArray(option)) return \"\";\n\n      if (option.length === 0) return \"\";\n      if (option.length === 1) return this.getLabel(option[0]);\n      return `${option.length} values`;\n      // in case of `multiple`, option is an array of values\n      // so the display value should be comma separated labels\n      // return option\n      // \t.map((v) => {\n      // \t\tif (typeof v === 'object') {\n      // \t\t\treturn this.getLabel(v)\n      // \t\t}\n      // \t\tlet selectedOption = this.allOptions.find((o) => o.value === v)\n      // \t\treturn this.getLabel(selectedOption)\n      // \t})\n      // \t.join(', ')\n    },\n    getLabel(option) {\n      if (typeof option !== \"object\") return option;\n      return option?.label || option?.value || \"No label\";\n    },\n    sanitizeOptions(options) {\n      if (!options) return [];\n      // in case the options are just strings, convert them to objects\n      return options.map((option) => this.sanitizeOption(option));\n    },\n    sanitizeOption(option) {\n      return typeof option === \"string\"\n        ? { label: option, value: option }\n        : option;\n    },\n    isOptionSelected(option) {\n      if (!this.multiple) {\n        return this.selectedValue?.value === option.value;\n      }\n      return this.selectedValue?.find((v) => v && v.value === option.value);\n    },\n    selectAll() {\n      this.selectedValue = this.allOptions;\n    },\n    fuzzySearch(arr, { term, keys }) {\n      // search for term in all keys of arr items and sort by relevance\n      const lowerCaseTerm = term.toLowerCase();\n      const results = arr.reduce((acc, item) => {\n        const score = keys.reduce((acc, key) => {\n          const value = item[key];\n          if (value) {\n            const match = value.toLowerCase().indexOf(lowerCaseTerm);\n            if (match !== -1) {\n              return acc + match + 1;\n            }\n          }\n          return acc;\n        }, 0);\n        if (score) {\n          acc.push({ item, score });\n        }\n        return acc;\n      }, []);\n      return results.sort((a, b) => a.score - b.score).map((item) => item.item);\n    },\n  },\n};\n</script>\n","<template>\n  <div class=\"flex justify-between items-start flex-col gap-6\">\n    <span class=\"text-sm text-ink-gray-5 pt-4 w-full\"\n      >Set visibility and mandatory criteria for\n      {{ selections.childField || \"child\" }} field:</span\n    >\n    <div class=\"flex flex-col gap-4 w-full pb-2\">\n      <!-- Display Criteria -->\n      <div class=\"flex items-center gap-3 justify-between\">\n        <div class=\"flex gap-3 items-center\">\n          <Switch v-model=\"fieldCriteriaState.display.enabled\" />\n          <div class=\"flex items-center gap-1\">\n            <span class=\"text-sm text-ink-gray-5\"\n              >Show {{ selections.childField }} if\n              {{ selections.parentField }} is set to</span\n            >\n            <DocumentationButton\n              url=\"https://docs.frappe.io/helpdesk/field-dependency#handling-visibility-of-child-field\"\n              color=\"!text-ink-gray-6\"\n            />\n          </div>\n        </div>\n        <MultiSelectCombobox\n          :disabled=\"!fieldCriteriaState.display.enabled\"\n          class=\"min-w-[120px] max-w-[120px]\"\n          :options=\"fieldCriteriaOptions\"\n          :model-value=\"fieldCriteriaState.display.value\"\n          @update:model-value=\"handleCriteriaSelection($event, 'display')\"\n          :multiple=\"true\"\n          placeholder=\"Select Child Field values\"\n          placement=\"top\"\n        />\n      </div>\n      <!-- Mandatory Criteria -->\n      <div class=\"flex items-center gap-3 justify-between w-full\">\n        <div class=\"flex gap-3 items-center\">\n          <Switch v-model=\"fieldCriteriaState.mandatory.enabled\" />\n          <div class=\"flex items-center gap-1\">\n            <span class=\"text-sm text-ink-gray-5\"\n              >Make {{ selections.childField }} mandatory if\n              {{ selections.parentField }} is set to</span\n            >\n            <DocumentationButton\n              url=\"https://docs.frappe.io/helpdesk/field-dependency#handling-if-the-child-field-is-mandatory\"\n              color=\"!text-ink-gray-6\"\n            />\n          </div>\n        </div>\n        <MultiSelectCombobox\n          :disabled=\"!fieldCriteriaState.mandatory.enabled\"\n          class=\"min-w-[120px] max-w-[120px]\"\n          :options=\"fieldCriteriaOptions\"\n          :model-value=\"fieldCriteriaState.mandatory.value\"\n          @update:model-value=\"handleCriteriaSelection($event, 'mandatory')\"\n          :multiple=\"true\"\n          placeholder=\"Select Child Field values\"\n          placement=\"top\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport DocumentationButton from \"@/components/DocumentationButton.vue\";\nimport MultiSelectCombobox from \"@/components/frappe-ui/MultiSelectCombobox.vue\";\nimport { getMeta } from \"@/stores/meta\";\nimport { Switch } from \"frappe-ui\";\nimport { computed } from \"vue\";\n\nconst props = defineProps<{\n  parentFieldValues: string[];\n}>();\n\nconst fieldCriteriaState = defineModel<{\n  display: { enabled: boolean; value: Record<\"label\" | \"value\", string>[] };\n  mandatory: { enabled: boolean; value: Record<\"label\" | \"value\", string>[] };\n}>();\nconst state = defineModel(\"selections\") as any;\n\nconst { getField } = getMeta(\"HD Ticket\");\n\nconst selections = computed(() => {\n  let childField = state.value.selectedChildField;\n  let parentField = state.value.selectedParentField;\n  childField = getField(childField)?.label;\n  parentField = getField(parentField)?.label;\n  return { childField, parentField };\n});\n\nconst fieldCriteriaOptions = computed(() => {\n  const _options = [{ label: \"Any\", value: \"Any\" }];\n  props.parentFieldValues.forEach((value) => {\n    if (!_options.some((o) => o.value === value)) {\n      _options.push({ label: value, value });\n    }\n  });\n  return _options;\n});\n\nfunction handleCriteriaSelection(\n  values: { label: string; value: string }[],\n  stateKey: \"display\" | \"mandatory\"\n) {\n  const _values = values.map((v) => v.value);\n  fieldCriteriaState.value[stateKey].value = values;\n  if (_values.length === 0) {\n    fieldCriteriaState.value[stateKey].value = [{ label: \"Any\", value: \"Any\" }];\n  } else if (_values[0] === \"Any\" && _values.length > 1) {\n    fieldCriteriaState.value[stateKey].value = _values\n      .filter((value) => value !== \"Any\")\n      .map((value) => ({ label: value, value }));\n  } else if (_values.at(-1) === \"Any\" && _values.length > 1) {\n    fieldCriteriaState.value[stateKey].value = [{ label: \"Any\", value: \"Any\" }];\n  }\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <div class=\"flex gap-3 w-full justify-between flex-1\">\n    <div class=\"flex-1 flex flex-col gap-1.5\">\n      <span class=\"block text-xs text-ink-gray-5\"\n        >Parent Field <span class=\"text-ink-red-3 select-none\">*</span>\n      </span>\n      <Combobox\n        v-model=\"state.selectedParentField\"\n        :options=\"parentFields\"\n        :disabled=\"!isNew\"\n      />\n    </div>\n    <div class=\"flex-1 flex flex-col gap-1.5\">\n      <span class=\"block text-xs text-ink-gray-5\"\n        >Child Field <span class=\"text-ink-red-3 select-none\">*</span>\n      </span>\n      <Combobox\n        v-model=\"state.selectedChildField\"\n        :options=\"state.childFields\"\n        :disabled=\"!state.selectedParentField || !isNew\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { FieldCriteriaState } from \"@/types\";\nimport { Combobox } from \"frappe-ui\";\n\nconst state = defineModel<FieldCriteriaState>();\n\nconst props = defineProps<{\n  isNew: boolean;\n  parentFields: any[];\n}>();\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    class=\"flex w-full flex-1 justify-between h-full h-[420px] max-h-[420px] min-h-[420px]\"\n  >\n    <!-- left box -->\n    <div class=\"flex-1 flex flex-col gap-1.5\">\n      <span class=\"block text-xs text-ink-gray-5\">\n        Select parent field value\n      </span>\n      <div class=\"border flex-1 border-r-0 rounded-l p-2 flex flex-col gap-2\">\n        <template v-if=\"state.selectedParentField\">\n          <FormControl\n            v-model=\"state.parentSearch\"\n            :placeholder=\"parentPlaceholder\"\n            type=\"text\"\n            class=\"w-full\"\n          >\n            <template #prefix>\n              <LucideSearch class=\"h-4 w-4 text-gray-500\" />\n            </template>\n          </FormControl>\n          <div class=\"flex-1 overflow-y-auto hide-scrollbar basis-0\">\n            <ul class=\"max-w-[350px] overflow-y-auto\">\n              <li\n                v-for=\"value in filteredParentFieldValues\"\n                :key=\"value\"\n                class=\"py-2 mb-1 px-2.5 cursor-pointer rounded flex justify-between items-center hover:bg-surface-gray-1 overflow-hidden max-w-full\"\n                :class=\"{\n                  'bg-surface-gray-2 hover:bg-surface-gray-3':\n                    state.currentParentSelection === value,\n                }\"\n                @click=\"handleParentValueClick(value)\"\n              >\n                <span class=\"text-base text-ink-gray-6 max-w-[90%] truncate\">{{\n                  value\n                }}</span>\n                <LucideChevronRight\n                  class=\"h-4 w-4 text-ink-gray-6\"\n                  v-if=\"\n                    getSelectedChildValueCount(value) === 0 ||\n                    state.currentParentSelection === value\n                  \"\n                />\n                <Badge\n                  v-else\n                  :label=\"getSelectedChildValueCount(value)\"\n                  :theme=\"'gray'\"\n                  variant=\"subtle\"\n                  class=\"!h-4\"\n                />\n              </li>\n            </ul>\n          </div>\n        </template>\n        <template v-else>\n          <div\n            class=\"flex flex-col items-center mt-20 h-full text-ink-gray-4 text-sm\"\n          >\n            Please select a parent field first\n          </div>\n        </template>\n      </div>\n    </div>\n    <!-- right box -->\n    <div class=\"flex-1 flex flex-col gap-1.5\">\n      <span class=\"block text-xs text-ink-gray-5 pl-1.5\">\n        Select child field value\n      </span>\n      <div class=\"border flex-1 rounded-r p-2 flex flex-col gap-2\">\n        <template\n          v-if=\"state.selectedChildField && state.currentParentSelection\"\n        >\n          <FormControl\n            v-model=\"state.childSearch\"\n            :placeholder=\"childPlaceholder\"\n            type=\"text\"\n            class=\"w-full\"\n          >\n            <template #prefix>\n              <LucideSearch class=\"h-4 w-4 text-gray-500\" />\n            </template>\n          </FormControl>\n          <div class=\"flex-1 overflow-y-auto hide-scrollbar basis-0\">\n            <!-- Master Check box -->\n            <li\n              class=\"py-2 mb-1 px-2.5 cursor-pointer rounded flex items-center bg-surface-gray-1 hover:bg-surface-gray-2\"\n              @click=\"handleSelectAllChildValues(!toggleAllChildValues)\"\n            >\n              <FormControl\n                type=\"checkbox\"\n                :model-value=\"toggleAllChildValues\"\n                class=\"mr-2\"\n              />\n              <span class=\"text-base text-ink-gray-8 font-medium\">\n                {{ toggleCheckboxLabel }}\n              </span>\n            </li>\n            <ul class=\"max-w-[350px] overflow-y-auto\">\n              <li\n                v-for=\"value in filteredChildFieldValues\"\n                :key=\"value\"\n                class=\"py-2 mb-1 px-2.5 cursor-pointer rounded flex items-center hover:bg-surface-gray-1 max-w-full truncate\"\n                @click=\"handleChildValueClick(value)\"\n              >\n                <FormControl\n                  type=\"checkbox\"\n                  :model-value=\"isChildValueSelected(value)\"\n                  class=\"mr-2\"\n                />\n                <span class=\"text-base text-ink-gray-6\">{{ value }}</span>\n              </li>\n            </ul>\n          </div>\n        </template>\n        <template v-else-if=\"!state.selectedChildField\">\n          <div\n            class=\"flex flex-col items-center mt-20 h-full text-ink-gray-4 text-sm\"\n          >\n            Please select a child field first\n          </div>\n        </template>\n        <template v-else>\n          <div\n            class=\"flex flex-col items-center mt-20 h-full text-ink-gray-4 text-sm\"\n          >\n            Please select a parent value first\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { FieldCriteriaState } from \"@/types\";\nimport { computed } from \"vue\";\n\nconst props = defineProps<{\n  isNew: boolean;\n  parentFields: any[];\n}>();\n\nconst state = defineModel<FieldCriteriaState>();\n\nconst filteredParentFieldValues = computed(() => {\n  if (!state.value.parentSearch) return state.value.parentFieldValues;\n  return state.value.parentFieldValues.filter((v) =>\n    v.toLowerCase().includes(state.value.parentSearch.toLowerCase())\n  );\n});\n\nconst filteredChildFieldValues = computed(() => {\n  if (!state.value.childSearch) return state.value.childFieldValues;\n  return state.value.childFieldValues.filter((v) =>\n    v.toLowerCase().includes(state.value.childSearch.toLowerCase())\n  );\n});\n\nconst parentPlaceholder = computed(() => {\n  if (!state.value.selectedParentField) return \"Search values\";\n  let label = props.parentFields.find(\n    (f) => f.value === state.value.selectedParentField\n  )?.label;\n  return `Search ${label} values`;\n});\nconst childPlaceholder = computed(() => {\n  if (!state.value.currentParentSelection) return \"Search values\";\n  return `Search ${state.value.currentParentSelection} values`;\n});\n\nfunction handleParentValueClick(value: string) {\n  state.value.currentParentSelection = value;\n}\n\nfunction handleChildValueClick(childValue: string) {\n  const parent = state.value.currentParentSelection;\n  if (!parent) return;\n  if (!(state.value.childSelections[parent] instanceof Set)) {\n    state.value.childSelections[parent] = new Set();\n  }\n  if (state.value.childSelections[parent].has(childValue)) {\n    state.value.childSelections[parent].delete(childValue);\n  } else {\n    state.value.childSelections[parent].add(childValue);\n  }\n}\n\nfunction getSelectedChildValueCount(parent: string) {\n  const selectedCount =\n    state.value.childSelections[parent] instanceof Set\n      ? state.value.childSelections[parent].size\n      : 0;\n  return selectedCount;\n}\n\n// Toggling master checkbox + child values\nconst toggleAllChildValues = computed({\n  get() {\n    const parent = state.value.currentParentSelection;\n    if (!parent) return false;\n    // If no child values are selected, return false\n    if (!(state.value.childSelections[parent] instanceof Set)) {\n      return false;\n    }\n    // If all filtered child values are selected, return true\n    return (\n      state.value.childSelections[parent].size ===\n      filteredChildFieldValues.value.length\n    );\n  },\n  set(value) {\n    handleSelectAllChildValues(value);\n  },\n});\n\nconst toggleCheckboxLabel = computed(() => {\n  const parent = state.value.currentParentSelection;\n  if (!parent) return \"Select All\";\n  const selectedCount = getSelectedChildValueCount(parent);\n  if (selectedCount === 0) return \"Select All\";\n  return `${selectedCount} ${\n    selectedCount === 1 ? \"value\" : \"values\"\n  } selected`;\n});\n\nfunction handleSelectAllChildValues(value: boolean) {\n  const parent = state.value.currentParentSelection;\n  if (!parent) return;\n\n  if (!(state.value.childSelections[parent] instanceof Set)) {\n    state.value.childSelections[parent] = new Set();\n  }\n\n  if (value) {\n    // Select all child values\n    filteredChildFieldValues.value.forEach((childValue) => {\n      state.value.childSelections[parent].add(childValue);\n    });\n  } else {\n    // Deselect all child values\n    state.value.childSelections[parent].clear();\n  }\n}\n\nfunction isChildValueSelected(childValue: string) {\n  const parent = state.value.currentParentSelection;\n  return (\n    state.value.childSelections[parent] instanceof Set &&\n    state.value.childSelections[parent].has(childValue)\n  );\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <div class=\"flex items-center gap-2\">\n        <Button\n          variant=\"ghost\"\n          icon-left=\"chevron-left\"\n          :label=\"dependencyLabel\"\n          size=\"md\"\n          @click=\"handleBackNavigation\"\n          class=\"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-ink-gray-7 text-lg hover:opacity-70 !pr-0\"\n        />\n        <Badge v-if=\"isDirty\" theme=\"orange\"> {{ __(\"Unsaved\") }} </Badge>\n      </div>\n    </template>\n    <template #header-actions>\n      <div class=\"flex gap-4\">\n        <!-- Switch -->\n        <div class=\"flex gap-2 items-center\">\n          <Switch v-model=\"state.enabled\" class=\"!w-fit\" />\n          <span class=\"text-p-base text-ink-gray-6\">\n            {{ __(\"Enabled\") }}\n          </span>\n        </div>\n        <!-- Actions -->\n        <div class=\"flex gap-1\">\n          <Button\n            :label=\"__('Save')\"\n            variant=\"solid\"\n            size=\"sm\"\n            :disabled=\"\n              !state.selectedParentField ||\n              !state.selectedChildField ||\n              Object.keys(state.childSelections).length === 0\n            \"\n            :loading=\"createUpdateFieldDependency.loading\"\n            @click=\"handleSubmit\"\n          />\n        </div>\n      </div>\n    </template>\n    <template #content>\n      <div>\n        <!-- Body -->\n        <div class=\"w-full flex-1 flex flex-col gap-8\">\n          <!-- Field Selection -->\n          <FieldDependencyFieldsSelection\n            v-model=\"state\"\n            :is-new=\"isNew\"\n            :parent-fields=\"parentFields\"\n          />\n\n          <div class=\"flex flex-col gap-8\">\n            <!-- Value Selection -->\n            <FieldDependencyValueSelection\n              v-model=\"state\"\n              :is-new=\"isNew\"\n              :parent-fields=\"parentFields\"\n            />\n\n            <!-- Criteria selection -->\n            <FieldDependencyCriteria\n              :parent-field-values=\"state.parentFieldValues\"\n              v-model=\"fieldCriteriaState\"\n              v-model:selections=\"state\"\n            />\n          </div>\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n  <ConfirmDialog\n    v-model=\"showConfirmDialog\"\n    :title=\"__('Unsaved changes')\"\n    :message=\"\n      __('Are you sure you want to go back? Unsaved changes will be lost.')\n    \"\n    :onConfirm=\"() => $emit('update:step', 'fd-list')\"\n    :onCancel=\"() => (showConfirmDialog = false)\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport { getMeta } from \"@/stores/meta\";\nimport { getFieldDependencyLabel } from \"@/utils\";\nimport { createResource, Switch, toast } from \"frappe-ui\";\nimport { computed, onUnmounted, reactive, ref, watch } from \"vue\";\nimport { disableSettingModalOutsideClick } from \"../settingsModal\";\nimport { getFieldOptions, hiddenChildFields } from \"./fieldDependency\";\nimport FieldDependencyCriteria from \"./FieldDependencyCriteria.vue\";\nimport FieldDependencyFieldsSelection from \"./FieldDependencyFieldsSelection.vue\";\nimport FieldDependencyValueSelection from \"./FieldDependencyValueSelection.vue\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\nconst props = defineProps({\n  fieldDependencyName: {\n    type: String,\n    default: \"\",\n  },\n});\nconst emit = defineEmits([\"update:step\"]);\n\nconst isNew = computed(() => !props.fieldDependencyName);\n\nconst dependencyLabel = computed(() => {\n  if (isNew.value) return __(\"New Field Dependency\");\n  return getFieldDependencyLabel(props.fieldDependencyName);\n});\n\nconst { getFields } = getMeta(\"HD Ticket\");\n\nconst parentFields = computed(() => {\n  let _fields = getFields();\n\n  if (!_fields || _fields.length === 0) {\n    return [];\n  }\n  const notAllowedFields = [\"status\", \"agreement_status\"];\n  _fields = _fields.filter(\n    (f) =>\n      (f.fieldtype === \"Select\" || f.fieldtype === \"Link\") &&\n      !notAllowedFields.includes(f.fieldname)\n  );\n  return _fields.map((f) => ({\n    label: f.label,\n    value: f.fieldname,\n    options: f.options || [],\n    type: f.fieldtype,\n  }));\n});\n\nlet state = reactive({\n  selectedParentField: \"\",\n  selectedChildField: \"\",\n  childFields: [],\n\n  parentFieldValues: [],\n  childFieldValues: [],\n\n  currentParentSelection: \"\",\n\n  childSelections: {}, // Initial value is a Set\n  initialChildSelections: {},\n  parentSearch: \"\",\n  childSearch: \"\",\n\n  enabled: true,\n});\n\nlet fieldCriteriaState = reactive({\n  display: {\n    enabled: true,\n    value: [{ label: \"Any\", value: \"Any\" }],\n  },\n  mandatory: {\n    enabled: true,\n    value: [{ label: \"Any\", value: \"Any\" }],\n  },\n});\n\nconst createUpdateFieldDependency = createResource({\n  url: \"helpdesk.api.settings.field_dependency.create_update_field_dependency\",\n  auto: false,\n  makeParams: () => ({\n    parent_field: state.selectedParentField,\n    child_field: state.selectedChildField,\n    parent_child_mapping: stringifyParentChildMapping(),\n    enabled: state.enabled,\n    fields_criteria: JSON.stringify(fieldCriteriaState),\n  }),\n  onSuccess: () => {\n    if (!isNew.value) {\n      fieldDependency.reload();\n      return;\n    }\n    emit(\"update:step\", \"fd-list\");\n  },\n});\n\nconst fieldDependency = createResource({\n  url: \"helpdesk.api.settings.field_dependency.get_field_dependency\",\n  params: {\n    name: props.fieldDependencyName,\n  },\n  auto: !isNew.value,\n  onSuccess: (data) => {\n    state.selectedParentField = data.parent_field;\n    state.selectedChildField = data.child_field;\n    state.enabled = data.enabled;\n    parseMapping(data.parent_child_mapping);\n    parseFieldCriteria(data.fields_criteria);\n  },\n});\nfunction parseMapping(data: string) {\n  const mapping = JSON.parse(data || \"{}\");\n  let selections = {};\n  Object.keys(mapping).forEach((parent) => {\n    selections[parent] = new Set(mapping[parent]);\n  });\n  state.childSelections = selections;\n\n  // for checking dirty state\n  state.initialChildSelections = structuredClone(selections);\n\n  if (!state.currentParentSelection) {\n    state.currentParentSelection = Object.keys(mapping)[0] || \"\";\n  }\n}\n\nfunction parseFieldCriteria(data: string) {\n  const criteria = JSON.parse(data || \"{}\");\n  fieldCriteriaState.display = criteria.display || {\n    enabled: true,\n    value: [{ label: \"Any\", value: \"Any\" }],\n  };\n  fieldCriteriaState.mandatory = criteria.mandatory || {\n    enabled: true,\n    value: [{ label: \"Any\", value: \"Any\" }],\n  };\n}\n\nconst isDirty = computed(() => {\n  if (isNew.value) {\n    return state.enabled !== true || state.selectedParentField !== \"\";\n  }\n  if (fieldDependency.loading) return false;\n  return (\n    Boolean(fieldDependency.data?.enabled) !== Boolean(state.enabled) ||\n    stringifyParentChildMapping(state.childSelections) !==\n      stringifyParentChildMapping(state.initialChildSelections) ||\n    JSON.stringify(fieldCriteriaState) !== fieldDependency.data?.fields_criteria\n  );\n});\n\nwatch(\n  () => isDirty.value,\n  (val) => {\n    disableSettingModalOutsideClick.value = val;\n  }\n);\n\nfunction stringifyParentChildMapping(selections = null) {\n  const _selections =\n    selections && Object.keys(selections).length > 0\n      ? selections\n      : state.childSelections;\n  const mapping = {};\n  Object.keys(_selections).forEach((parent) => {\n    let selections = Array.from(_selections[parent]);\n    if (selections.length) {\n      mapping[parent] = Array.from(_selections[parent]);\n    }\n  });\n  return JSON.stringify(mapping);\n}\n\nasync function handleFieldValues(fieldname: string, isParentField: boolean) {\n  if (!fieldname) return [];\n\n  if (isParentField) {\n    // if new field dependency, reset child fields\n    if (isNew.value) {\n      state.selectedChildField = \"\"; // Reset child field when parent changes\n      state.childFieldValues = [];\n      state.currentParentSelection = \"\"; // Reset current parent selection\n      state.childSelections = {}; // Reset child selections for new parent\n\n      // filter out hidden already madeup field dependencies in the child fields\n      let fieldsToHide = [fieldname, ...hiddenChildFields.value];\n      state.childFields = parentFields.value.filter(\n        (f) => !fieldsToHide.includes(f.value)\n      );\n    } else {\n      state.childFields = parentFields.value.filter(\n        (f) => f.value === state.selectedChildField\n      );\n    }\n    // show the selected child field if editing\n  }\n\n  const field = isParentField\n    ? parentFields.value.find((f) => f.value === fieldname)\n    : state.childFields.find((f) => f.value === fieldname);\n  if (!field) return [];\n  let options = await getFieldOptions(field);\n\n  return options;\n}\n\nconst showConfirmDialog = ref(false);\nfunction handleBackNavigation() {\n  if (createUpdateFieldDependency.loading) return;\n  if (isDirty.value) {\n    showConfirmDialog.value = true;\n\n    return;\n  }\n  emit(\"update:step\", \"fd-list\");\n}\n\nfunction handleSubmit() {\n  if (!isDirty.value) return;\n  createUpdateFieldDependency.submit();\n  let successMessage = isNew.value\n    ? __(\"Field Dependency created successfully\")\n    : __(\"Field Dependency updated successfully\");\n  toast.success(successMessage);\n}\n\n// parent field watcher\nwatch(\n  () => state.selectedParentField,\n  async (newParentField) => {\n    state.parentFieldValues = await handleFieldValues(newParentField, true);\n  }\n);\n\n// child field watcher\nwatch(\n  () => state.selectedChildField,\n  async (newChildField) => {\n    state.childFieldValues = await handleFieldValues(newChildField, false);\n    // Reset child selections when child field changes\n    if (isNew.value) {\n      state.childSelections = {};\n    }\n    state.currentParentSelection = state.parentFieldValues[0] || \"\";\n  }\n);\n\nwatch(\n  () => state.currentParentSelection,\n  () => {\n    state.childSearch = \"\"; // Reset child search when parent selection changes\n  }\n);\n\nonUnmounted(() => {\n  disableSettingModalOutsideClick.value = false;\n});\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <div class=\"flex items-center gap-2\">\n        <h1 class=\"text-lg font-semibold text-ink-gray-8\">\n          {{ __(\"Field Dependencies\") }}\n        </h1>\n        <DocumentationButton\n          url=\"https://docs.frappe.io/helpdesk/field-dependency\"\n          color=\"!text-ink-gray-6\"\n        />\n      </div>\n    </template>\n    <template #description>\n      <p class=\"text-p-sm max-w-md text-ink-gray-6\">\n        {{\n          __(\n            \"Create dependencies between fields to dynamically control options based on user selections.\"\n          )\n        }}\n      </p>\n    </template>\n    <template #header-actions>\n      <Button\n        :label=\"__('New')\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"$emit('update:step', 'fd')\"\n        icon-left=\"plus\"\n      />\n    </template>\n    <template #content>\n      <div class=\"grow\">\n        <!-- Loading State -->\n        <div\n          v-if=\"fieldDependenciesList.loading\"\n          class=\"flex items-center justify-center py-4\"\n        >\n          <LoadingIndicator :scale=\"5\" />\n        </div>\n\n        <!-- Empty State -->\n        <div\n          v-if=\"\n            !fieldDependenciesList.loading &&\n            !fieldDependenciesList.data?.length\n          \"\n          class=\"flex flex-col items-center justify-center gap-4 p-4 h-full\"\n        >\n          <div\n            class=\"p-4 size-14.5 rounded-full bg-surface-gray-1 flex justify-center items-center\"\n          >\n            <FieldDependencyIcon class=\"size-6 text-ink-gray-6\" />\n          </div>\n          <div class=\"flex flex-col items-center gap-1\">\n            <div class=\"text-base font-medium text-ink-gray-6\">\n              {{ __(\"No field dependency found\") }}\n            </div>\n            <div class=\"text-p-sm text-ink-gray-5 max-w-60 text-center\">\n              {{ __(\"Add one to get started\") }}\n            </div>\n          </div>\n          <Button\n            :label=\"__('New')\"\n            variant=\"outline\"\n            icon-left=\"plus\"\n            @click=\"$emit('update:step', 'fd')\"\n          />\n        </div>\n\n        <div\n          class=\"w-full -ml-2\"\n          v-if=\"\n            !fieldDependenciesList.loading &&\n            fieldDependenciesList.data?.length > 0\n          \"\n        >\n          <div>\n            <div\n              class=\"grid grid-cols-11 items-center gap-4 text-sm text-gray-600\"\n            >\n              <div class=\"col-span-7 ml-2\">{{ __(\"Name\") }}</div>\n              <div class=\"col-span-2\">{{ __(\"Created By\") }}</div>\n              <div class=\"col-span-2\">{{ __(\"Enabled\") }}</div>\n            </div>\n            <hr class=\"mt-2 mx-2\" />\n            <div\n              v-for=\"(row, index) in fieldDependenciesList.data\"\n              :key=\"row.name\"\n            >\n              <div\n                class=\"grid grid-cols-11 items-center gap-4 cursor-pointer hover:bg-gray-50 rounded h-12.5\"\n              >\n                <div\n                  @click.stop=\"$emit('update:step', 'fd', row.name)\"\n                  class=\"w-full py-3 pl-2 col-span-7 text-base text-ink-gray-7\"\n                >\n                  <span>{{ getFieldDependencyLabel(row.name) }}</span>\n                </div>\n                <div class=\"col-span-2 flex items-center gap-1\">\n                  <Avatar size=\"sm\" :image=\"row.owner\" :label=\"row.owner\" />\n                  <span class=\"text-base text-ink-gray-7 truncate\">{{\n                    row.owner\n                  }}</span>\n                </div>\n                <div\n                  class=\"flex justify-between items-center w-full pr-2 col-span-2\"\n                >\n                  <div>\n                    <Switch\n                      :model-value=\"row.enabled\"\n                      @update:modelValue=\"\n                        (e) => handleSwitchToggle(row.name, e)\n                      \"\n                      @click.stop\n                    />\n                  </div>\n                  <div>\n                    <Dropdown placement=\"right\" :options=\"getOptions(row.name)\">\n                      <Button\n                        variant=\"ghost\"\n                        @click.stop=\"\n                          () => {\n                            isConfirmingDelete = false;\n                          }\n                        \"\n                      >\n                        <template #icon>\n                          <LucideMoreHorizontal class=\"h-4 w-4\" />\n                        </template>\n                      </Button>\n                    </Dropdown>\n                  </div>\n                </div>\n              </div>\n              <hr\n                v-if=\"index !== fieldDependenciesList.data.length - 1\"\n                class=\"mx-2\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  Avatar,\n  Button,\n  Dropdown,\n  LoadingIndicator,\n  Switch,\n  toast,\n} from \"frappe-ui\";\nimport { getFieldDependencyLabel, ConfirmDelete } from \"@/utils\";\nimport { onMounted, ref } from \"vue\";\nimport { fieldDependenciesList } from \"./fieldDependency\";\nimport DocumentationButton from \"@/components/DocumentationButton.vue\";\nimport FieldDependencyIcon from \"@/components/icons/FieldDependencyIcon.vue\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\nonMounted(() => {\n  fieldDependenciesList.reload();\n});\n\nconst isConfirmingDelete = ref(false);\n\nfunction getOptions(rowName: string) {\n  return ConfirmDelete({\n    isConfirmingDelete,\n    onConfirmDelete: () => {\n      fieldDependenciesList.delete.submit(rowName, {\n        onSuccess: () => {\n          toast.success(__(\"Field dependency deleted successfully\"));\n          fieldDependenciesList.reload();\n        },\n      });\n    },\n  });\n}\n\nfunction handleSwitchToggle(rowName: string, value: boolean) {\n  fieldDependenciesList.setValue.submit(\n    {\n      name: rowName,\n      enabled: value,\n    },\n    {\n      onSuccess: () => {\n        toast.success(__(\"Field dependency updated successfully.\"));\n      },\n    }\n  );\n}\n</script>\n","<template>\n  <div v-if=\"step === 'fd-list'\" class=\"h-full\">\n    <FieldDependencyList @update:step=\"updateStep\" />\n  </div>\n  <div v-else-if=\"step === 'fd'\" class=\"h-full\">\n    <FieldDependency\n      @update:step=\"updateStep\"\n      :field-dependency-name=\"fieldDependencyName\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Ref, ref } from \"vue\";\nimport FieldDependency from \"./FieldDependency.vue\";\nimport FieldDependencyList from \"./FieldDependencyList.vue\";\n\ntype FieldDependencyStep = \"fd-list\" | \"fd\";\n\nconst step: Ref<FieldDependencyStep> = ref(\"fd-list\");\nconst fieldDependencyName = ref(\"\");\n\nfunction updateStep(\n  newStep: FieldDependencyStep,\n  fieldDependency?: string\n): void {\n  step.value = newStep;\n  fieldDependencyName.value = fieldDependency;\n}\n</script>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Invite Agents')\"\n    :description=\"__('Easily invite new agents, managers, or admins.')\"\n  >\n    <template #content>\n      <form @submit.prevent=\"onSubmit\" class=\"flex flex-col gap-5\">\n        <FormControl\n          type=\"textarea\"\n          :required=\"true\"\n          :label=\"__('Invite by email')\"\n          placeholder=\"user1@example.com, user2@example.com, ...\"\n          v-model=\"emails\"\n          :debounce=\"100\"\n          :description=\"__('Comma separated emails to invite')\"\n        />\n        <FormControl\n          :label=\"__('Role')\"\n          type=\"select\"\n          :required=\"true\"\n          :options=\"roleOptions\"\n          v-model=\"role\"\n          :description=\"roleDescription\"\n        />\n        <Button\n          type=\"submit\"\n          variant=\"solid\"\n          class=\"w-fit mt-1\"\n          :disabled=\"cancelInviteResource.loading\"\n          :loading=\"inviteByEmailResource.loading\"\n          >{{ __(\"Send Invites\") }}</Button\n        >\n      </form>\n      <template v-if=\"pendingInvitesResource.data?.length\">\n        <h2 class=\"mt-8 text-base font-semibold\">\n          {{ __(\"Pending Invites\") }}\n        </h2>\n        <ul class=\"flex flex-col gap-[0.375rem] mt-3\">\n          <li\n            v-for=\"invite in pendingInvitesResource.data\"\n            :key=\"invite.name\"\n            class=\"flex items-center justify-between px-3 py-1 rounded-lg bg-surface-gray-2\"\n          >\n            <div class=\"text-base\">\n              <span class=\"text-ink-gray-8\">\n                {{ invite.email }}\n              </span>\n              <span class=\"text-ink-gray-5\">\n                ({{ rolesToLabel(invite.roles) }})\n              </span>\n            </div>\n            <div>\n              <Tooltip\n                :disabled=\"\n                  inviteByEmailResource.loading || cancelInviteResource.loading\n                \"\n                :text=\"__('Cancel Invitation')\"\n              >\n                <div>\n                  <Button\n                    icon=\"x\"\n                    variant=\"ghost\"\n                    :loading=\"\n                      cancelInviteResource.loading &&\n                      invite.name === cancelInviteResource.params.name\n                    \"\n                    @click=\"\n                      () => {\n                        if (\n                          inviteByEmailResource.loading ||\n                          cancelInviteResource.loading\n                        ) {\n                          return;\n                        }\n                        cancelInviteResource.submit({\n                          name: invite.name,\n                          app_name: 'helpdesk',\n                        });\n                      }\n                    \"\n                    v-bind=\"{\n                      ...((cancelInviteResource.loading &&\n                        cancelInviteResource.params.name !== invite.name) ||\n                      inviteByEmailResource.loading\n                        ? { 'aria-disabled': true, class: 'opacity-25' }\n                        : {}),\n                    }\"\n                  />\n                </div>\n              </Tooltip>\n            </div>\n          </li>\n        </ul>\n      </template>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { useAuthStore } from \"@/stores/auth\";\nimport { FormControl, Button, Tooltip, createResource, toast } from \"frappe-ui\";\nimport { computed, ref } from \"vue\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { __ } from \"@/translation\";\n\nconst authStore = useAuthStore();\nconst { isAdmin, isManager } = authStore;\n\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\n\nconst emails = ref(\"\");\n\ntype Role = \"Agent\" | \"Agent Manager\" | \"System Manager\";\ntype RoleOption = {\n  label: string;\n  value: Role;\n  description: string;\n};\n\nconst roleToLabel = (role: Role) => {\n  switch (role) {\n    case \"Agent\":\n      return \"Agent\";\n    case \"Agent Manager\":\n      return \"Manager\";\n    case \"System Manager\":\n      return \"Admin\";\n    default:\n      const x: never = role;\n      throw new Error(`Invalid role: ${x}`);\n  }\n};\n\nconst roleOptions: [RoleOption, ...RoleOption[]] = [\n  {\n    label: roleToLabel(\"Agent\"),\n    value: \"Agent\",\n    description: __(\n      \"Can work on tickets, create custom views and manage private views.\"\n    ),\n  },\n];\nconst managerRoleOption: RoleOption = {\n  label: roleToLabel(\"Agent Manager\"),\n  value: \"Agent Manager\",\n  description: __(\n    \"Can invite new agents, manage tickets, create custom views and manage public views.\"\n  ),\n};\nif (isAdmin) {\n  roleOptions.push(managerRoleOption, {\n    label: roleToLabel(\"System Manager\"),\n    value: \"System Manager\",\n    description: __(\"Can manage all aspects of Helpdesk.\"),\n  });\n} else if (isManager) {\n  roleOptions.push(managerRoleOption);\n}\nconst role = ref(roleOptions[0].value);\n\nconst roleDescription = computed(\n  () =>\n    roleOptions.find((roleOption) => roleOption.value === role.value)!\n      .description\n);\n\nconst onSubmit = async () => {\n  if (emails.value.trim() === \"\") {\n    toast.error(__(\"At least one email required\"));\n  }\n  await inviteByEmailResource.submit({\n    emails: emails.value,\n    roles: getInviteByEmailRoles(role.value),\n    redirect_to_path: \"/helpdesk\",\n    app_name: \"helpdesk\",\n  });\n  resetInputValues();\n};\n\nconst resetInputValues = () => {\n  emails.value = \"\";\n  role.value = roleOptions[0].value;\n};\n\nconst emailsToStr = (emails: readonly string[]) => emails.join(\", \");\n\nconst inviteByEmailResource = createResource({\n  url: \"frappe.core.api.user_invitation.invite_by_email\",\n  onSuccess(\n    data: Record<\n      | \"disabled_user_emails\"\n      | \"accepted_invite_emails\"\n      | \"pending_invite_emails\"\n      | \"invited_emails\",\n      string[]\n    >\n  ) {\n    resetInputValues();\n    let emailsStr = emailsToStr(data.invited_emails);\n    if (emailsStr.trim() !== \"\") {\n      toast.success(`${emailsStr} invited successfully`);\n    }\n    emailsStr = emailsToStr(data.disabled_user_emails);\n    if (emailsStr.trim() !== \"\") {\n      toast.info(`${emailsStr} already present and disabled`);\n    }\n    emailsStr = emailsToStr(data.pending_invite_emails);\n    if (emailsStr.trim() !== \"\") {\n      toast.info(`${emailsStr} already invited`);\n    }\n    emailsStr = emailsToStr(data.accepted_invite_emails);\n    if (emailsStr.trim() !== \"\") {\n      toast.info(`${emailsStr} already present`);\n    }\n    pendingInvitesResource.reload();\n    updateOnboardingStep(\"invite_your_team\");\n  },\n});\n\nconst pendingInvitesResource = createResource({\n  url: \"frappe.core.api.user_invitation.get_pending_invitations\",\n  params: { app_name: \"helpdesk\" },\n  auto: true,\n  method: \"GET\",\n});\n\nconst cancelInviteResource = createResource({\n  url: \"frappe.core.api.user_invitation.cancel_invitation\",\n  method: \"PATCH\",\n  onSuccess() {\n    toast.success(\"Invitation cancelled successfully\");\n    pendingInvitesResource.fetch();\n  },\n});\n\nconst rolesToLabel = (roles: readonly Role[]) => {\n  const rolesSt = new Set(roles);\n  if (rolesSt.has(\"System Manager\")) {\n    return roleToLabel(\"System Manager\");\n  }\n  if (rolesSt.has(\"Agent Manager\")) {\n    return roleToLabel(\"Agent Manager\");\n  }\n  if (rolesSt.has(\"Agent\")) {\n    return roleToLabel(\"Agent\");\n  }\n  throw new Error(`Invalid roles: ${roles.join(\", \")}`);\n};\n\nconst getInviteByEmailRoles = (selectedRole: Role) => {\n  const res: Role[] = [];\n  switch (selectedRole) {\n    case \"System Manager\":\n      res.push(\"Agent\", \"Agent Manager\");\n      break;\n    case \"Agent Manager\":\n      res.push(\"Agent\");\n      break;\n    case \"Agent\":\n      break;\n    default:\n      const x: never = selectedRole;\n      throw new Error(`Invalid selected role: ${x}`);\n  }\n  res.push(selectedRole);\n  return res;\n};\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    class=\"grid grid-cols-12 items-center gap-4 cursor-pointer hover:bg-gray-50 rounded\"\n  >\n    <div\n      @click=\"assignmentRulesActiveScreen = { screen: 'view', data: data }\"\n      class=\"w-full pl-2 col-span-7 h-14 flex flex-col justify-center\"\n    >\n      <div class=\"text-base text-ink-gray-7 font-medium\">{{ data.name }}</div>\n      <div\n        v-if=\"data.description && data.description.length > 0\"\n        class=\"text-sm w-full text-ink-gray-5 mt-1 truncate\"\n      >\n        {{ data.description }}\n      </div>\n    </div>\n    <div class=\"col-span-3\">\n      <select\n        class=\"w-full h-7 text-base hover:bg-surface-gray-3 rounded-md p-0 pl-2 pr-5 bg-transparent -ml-2 border-0 text-ink-gray-8 focus-visible:!ring-0 bg-none truncate\"\n        v-model=\"data.priority\"\n        @update:modelValue=\"onPriorityChange\"\n        @change=\"onPriorityChange\"\n      >\n        <option\n          v-for=\"option in priorityOptions\"\n          :key=\"option.value\"\n          :value=\"option.value\"\n        >\n          {{ option.label }}\n        </option>\n      </select>\n    </div>\n    <div class=\"flex justify-between items-center w-full pr-2 col-span-2\">\n      <div>\n        <Switch\n          size=\"sm\"\n          :modelValue=\"!data.disabled\"\n          @update:modelValue=\"onToggle\"\n        />\n      </div>\n      <div>\n        <Dropdown placement=\"right\" :options=\"dropdownOptions\">\n          <Button\n            icon=\"more-horizontal\"\n            variant=\"ghost\"\n            @click=\"isConfirmingDelete = false\"\n          />\n        </Dropdown>\n      </div>\n    </div>\n  </div>\n  <Dialog\n    :options=\"{ title: __('Duplicate Assignment Rule') }\"\n    v-model=\"duplicateDialog.show\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <FormControl\n          :label=\"__('New Assignment Rule Name')\"\n          type=\"text\"\n          v-model=\"duplicateDialog.name\"\n        />\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex gap-2 justify-end\">\n        <Button\n          variant=\"subtle\"\n          :label=\"__('Close')\"\n          @click=\"duplicateDialog.show = false\"\n        />\n        <Button variant=\"solid\" :label=\"__('Duplicate')\" @click=\"duplicate()\" />\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { assignmentRulesActiveScreen } from \"@/stores/assignmentRules\";\nimport { __ } from \"@/translation\";\nimport { AssignmentRuleListResourceSymbol } from \"@/types\";\nimport { ConfirmDelete } from \"@/utils\";\nimport {\n  Button,\n  createResource,\n  Dialog,\n  Dropdown,\n  FormControl,\n  Select,\n  Switch,\n  toast,\n} from \"frappe-ui\";\nimport { inject, ref } from \"vue\";\n\nconst assignmentRulesListData = inject(AssignmentRuleListResourceSymbol);\n\nconst props = defineProps({\n  data: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst priorityOptions = [\n  { label: \"Low\", value: \"0\" },\n  { label: \"Low-Medium\", value: \"1\" },\n  { label: \"Medium\", value: \"2\" },\n  { label: \"Medium-High\", value: \"3\" },\n  { label: \"High\", value: \"4\" },\n];\n\nconst duplicateDialog = ref({\n  show: false,\n  name: \"\",\n});\n\nconst isConfirmingDelete = ref(false);\n\nconst deleteAssignmentRule = () => {\n  createResource({\n    url: \"frappe.client.delete\",\n    params: {\n      doctype: \"Assignment Rule\",\n      name: props.data.name,\n    },\n    onSuccess: () => {\n      assignmentRulesListData.reload();\n      isConfirmingDelete.value = false;\n      toast.success(__(\"Assignment rule deleted\"));\n    },\n    auto: true,\n  });\n};\n\nconst dropdownOptions = [\n  {\n    label: __(\"Duplicate\"),\n    onClick: () => {\n      duplicateDialog.value = {\n        show: true,\n        name: props.data.name + \" (Copy)\",\n      };\n    },\n    icon: \"copy\",\n  },\n  ...ConfirmDelete({\n    onConfirmDelete: () => deleteAssignmentRule(),\n    isConfirmingDelete,\n  }),\n];\n\nconst duplicate = () => {\n  createResource({\n    url: \"helpdesk.api.assignment_rule.duplicate_assignment_rule\",\n    params: {\n      docname: props.data.name,\n      new_name: duplicateDialog.value.name,\n    },\n    onSuccess: (data) => {\n      assignmentRulesListData.reload();\n      toast.success(__(\"Assignment rule duplicated\"));\n      duplicateDialog.value.show = false;\n      duplicateDialog.value.name = \"\";\n      assignmentRulesActiveScreen.value = {\n        screen: \"view\",\n        data: {\n          name: data.name,\n        },\n      };\n    },\n    auto: true,\n  });\n};\n\nconst onPriorityChange = () => {\n  setAssignmentRuleValue(\"priority\", props.data.priority);\n};\n\nconst onToggle = () => {\n  if (!props.data.users_exists && props.data.disabled) {\n    toast.error(__(\"Cannot enable rule without adding users in it\"));\n    return;\n  }\n  setAssignmentRuleValue(\"disabled\", !props.data.disabled, \"status\");\n};\n\nconst setAssignmentRuleValue = (key, value, fieldName = undefined) => {\n  createResource({\n    url: \"frappe.client.set_value\",\n    params: {\n      doctype: \"Assignment Rule\",\n      name: props.data.name,\n      fieldname: key,\n      value: value,\n    },\n    onSuccess: () => {\n      assignmentRulesListData.reload();\n      toast.success(__(\"Assignment rule {0} updated\", fieldName || key));\n    },\n    auto: true,\n  });\n};\n</script>\n","<template>\n  <div\n    v-if=\"assignmentRulesListData.loading && !assignmentRulesListData.data\"\n    class=\"flex items-center justify-center mt-12\"\n  >\n    <LoadingIndicator class=\"w-4\" />\n  </div>\n  <div v-else class=\"-ml-2 grow\">\n    <div\n      v-if=\"!assignmentRulesListData.loading && !assignmentRulesList?.length\"\n      class=\"flex flex-col items-center justify-center gap-4 h-full\"\n    >\n      <div\n        class=\"p-4 size-14.5 rounded-full bg-surface-gray-1 flex justify-center items-center\"\n      >\n        <Settings class=\"size-6 text-ink-gray-6 rotate-90\" />\n      </div>\n      <div class=\"flex flex-col items-center gap-1\">\n        <div class=\"text-base font-medium text-ink-gray-6\">\n          {{ __(\"No assignment rule found\") }}\n        </div>\n        <div class=\"text-p-sm text-ink-gray-5 max-w-60 text-center\">\n          {{ __(\"Add one to get started.\") }}\n        </div>\n      </div>\n      <Button\n        :label=\"__('New')\"\n        variant=\"outline\"\n        icon-left=\"plus\"\n        @click=\"goToNew()\"\n      />\n    </div>\n    <div v-else>\n      <div class=\"grid grid-cols-12 items-center gap-4 text-sm text-gray-600\">\n        <div class=\"col-span-7 ml-2\">{{ __(\"Assignment rule\") }}</div>\n        <div class=\"col-span-3\">{{ __(\"Priority\") }}</div>\n        <div class=\"col-span-2\">{{ __(\"Enabled\") }}</div>\n      </div>\n      <hr class=\"mt-2 mx-2\" />\n      <div\n        v-for=\"(assignmentRule, index) in assignmentRulesList\"\n        :key=\"assignmentRule.name\"\n      >\n        <AssignmentRuleListItem :data=\"assignmentRule\" />\n        <hr v-if=\"index !== assignmentRulesList.length - 1\" class=\"mx-2\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { LoadingIndicator } from \"frappe-ui\";\nimport { inject, Ref, ref, watch } from \"vue\";\nimport AssignmentRuleListItem from \"./AssignmentRuleListItem.vue\";\nimport {\n  assignmentRulesActiveScreen,\n  resetAssignmentRuleData,\n} from \"@/stores/assignmentRules\";\nimport Settings from \"~icons/lucide/settings-2\";\nimport { AssignmentRuleListResourceSymbol } from \"@/types\";\n\nconst assignmentRulesListData = inject(AssignmentRuleListResourceSymbol);\n\nconst assignmentRulesList = ref(assignmentRulesListData.data || []);\n\nconst assignmentRuleSearchQuery = inject<Ref>(\"assignmentRuleSearchQuery\");\n\nconst goToNew = () => {\n  resetAssignmentRuleData();\n  assignmentRulesActiveScreen.value = {\n    screen: \"view\",\n    data: null,\n  };\n};\n\nwatch(\n  () => [assignmentRuleSearchQuery.value, assignmentRulesListData.data],\n  ([query, data]) => {\n    if (!query) {\n      assignmentRulesList.value = data || [];\n      return;\n    }\n    assignmentRulesList.value =\n      data?.filter((item) => {\n        return (\n          item.name.toLowerCase().includes(query.toLowerCase()) ||\n          item.description.toLowerCase().includes(query.toLowerCase())\n        );\n      }) || [];\n  }\n);\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <h1 class=\"text-lg font-semibold text-ink-gray-8\">\n        {{ __(\"Assignment Rules\") }}\n      </h1>\n    </template>\n    <template #description>\n      <p class=\"text-p-sm max-w-md text-ink-gray-6\">\n        {{\n          __(\n            \"Assignment Rules automatically route tickets to the right team members based on predefined conditions.\"\n          )\n        }}\n      </p>\n    </template>\n    <template #header-actions>\n      <Button\n        :label=\"__('New')\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"goToNew()\"\n        icon-left=\"plus\"\n      />\n    </template>\n    <template\n      v-if=\"\n        assignmentRulesListData.data?.length > 9 ||\n        assignmentRuleSearchQuery.length\n      \"\n      #header-bottom\n    >\n      <div class=\"relative\">\n        <Input\n          :model-value=\"assignmentRuleSearchQuery\"\n          @input=\"assignmentRuleSearchQuery = $event\"\n          :placeholder=\"__('Search')\"\n          type=\"text\"\n          class=\"bg-white hover:bg-white focus:ring-0 border-outline-gray-2\"\n          icon-left=\"search\"\n          debounce=\"300\"\n          inputClass=\"p-4 pr-12\"\n        />\n        <Button\n          v-if=\"assignmentRuleSearchQuery\"\n          icon=\"x\"\n          variant=\"ghost\"\n          @click=\"assignmentRuleSearchQuery = ''\"\n          class=\"absolute right-1 top-1/2 -translate-y-1/2\"\n        />\n      </div>\n    </template>\n    <template #content>\n      <AssignmentRulesListView />\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { Button, createResource } from \"frappe-ui\";\nimport { inject, provide, Ref } from \"vue\";\nimport {\n  assignmentRulesActiveScreen,\n  resetAssignmentRuleData,\n} from \"@/stores/assignmentRules\";\nimport AssignmentRulesListView from \"./AssignmentRulesListView.vue\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { AssignmentRuleListResourceSymbol } from \"@/types\";\n\nconst assignmentRulesListData = createResource({\n  url: \"helpdesk.api.assignment_rule.get_assignment_rules_list\",\n  cache: [\"assignmentRules\", \"get_assignment_rules_list\"],\n  auto: true,\n});\nconst assignmentRuleSearchQuery = inject<Ref>(\"assignmentRuleSearchQuery\");\n\nprovide(AssignmentRuleListResourceSymbol, assignmentRulesListData);\n\nconst goToNew = () => {\n  resetAssignmentRuleData();\n  assignmentRulesActiveScreen.value = {\n    screen: \"view\",\n    data: null,\n  };\n};\n</script>\n","<template>\n  <Combobox :multiple=\"true\">\n    <Popover placement=\"bottom-end\">\n      <template #target=\"{ togglePopover }\">\n        <Button\n          variant=\"subtle\"\n          icon-left=\"plus\"\n          @click=\"togglePopover()\"\n          :label=\"__('Add Assignee')\"\n        />\n      </template>\n      <template #body=\"{ togglePopover }\">\n        <div class=\"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl w-60\">\n          <div class=\"relative px-1.5 pt-0.5\">\n            <ComboboxInput\n              ref=\"search\"\n              class=\"form-input w-full\"\n              type=\"text\"\n              @change=\"\n                (e) => {\n                  query = e.target.value;\n                }\n              \"\n              :value=\"query\"\n              autocomplete=\"off\"\n              :placeholder=\"__('Search')\"\n            />\n            <button\n              class=\"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center\"\n              @click=\"query = ''\"\n            >\n              <FeatherIcon name=\"x\" class=\"w-4\" />\n            </button>\n          </div>\n          <ComboboxOptions class=\"my-2 max-h-64 overflow-y-auto px-1.5\" static>\n            <ComboboxOption\n              v-show=\"users.length > 0\"\n              v-for=\"user in users\"\n              :key=\"user.name\"\n              :value=\"user\"\n              as=\"template\"\n              v-slot=\"{ active }\"\n              @click=\"\n                (e) => {\n                  e.stopPropagation();\n                  addAssignee(user);\n                }\n              \"\n            >\n              <li\n                class=\"flex items-center rounded p-1.5 w-full text-base\"\n                :class=\"{ 'bg-gray-100': active }\"\n              >\n                <div class=\"flex gap-2 items-center w-full select-none\">\n                  <Avatar\n                    :shape=\"'circle'\"\n                    :image=\"user.user_image\"\n                    :label=\"user.agent_name\"\n                    size=\"lg\"\n                  />\n                  <div class=\"flex flex-col gap-1 truncate\">\n                    <div class=\"font-semibold text-ink-gray-7 truncate\">\n                      {{ user.agent_name }}\n                    </div>\n                    <div class=\"text-ink-gray-6 truncate\">\n                      {{ user.user }}\n                    </div>\n                  </div>\n                </div>\n              </li>\n            </ComboboxOption>\n            <li\n              v-if=\"users.length == 0\"\n              class=\"mt-1.5 rounded-md p-1.5 text-base text-gray-600\"\n            >\n              {{ __(\"No results found\") }}\n            </li>\n          </ComboboxOptions>\n          <div class=\"border-t p-1.5 pb-0.5\">\n            <Button\n              variant=\"ghost\"\n              class=\"w-full\"\n              icon-left=\"plus\"\n              :label=\"__('Invite agent')\"\n              @click=\"inviteAgents\"\n            />\n          </div>\n        </div>\n      </template>\n    </Popover>\n  </Combobox>\n  <ConfirmDialog\n    v-model=\"showConfirmDialog.show\"\n    :title=\"showConfirmDialog.title\"\n    :message=\"showConfirmDialog.message\"\n    :onConfirm=\"showConfirmDialog.onConfirm\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { assignmentRuleData } from \"@/stores/assignmentRules\";\nimport {\n  Combobox,\n  ComboboxInput,\n  ComboboxOption,\n  ComboboxOptions,\n} from \"@headlessui/vue\";\nimport { Avatar, Popover } from \"frappe-ui\";\nimport { computed, inject, Ref, ref } from \"vue\";\nimport { setActiveSettingsTab } from \"../settingsModal\";\nimport { useAgentStore } from \"@/stores/agent\";\nimport { onMounted } from \"vue\";\nimport { __ } from \"@/translation\";\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\n\nconst emit = defineEmits([\"addAssignee\"]);\nconst query = ref(\"\");\nconst { agents } = useAgentStore();\nconst isAssignmentRuleFormDirty = inject<Ref<boolean>>(\n  \"isAssignmentRuleFormDirty\"\n);\nconst showConfirmDialog = ref({\n  show: false,\n  title: \"\",\n  message: \"\",\n  onConfirm: () => {},\n});\n\nconst users = computed(() => {\n  let filteredAgents =\n    agents.data?.filter(\n      (user) =>\n        !assignmentRuleData.value.users.some((u) => u.user === user.user)\n    ) || [];\n\n  if (query.value) {\n    const val = query.value.toLowerCase();\n    const isEmail = val.includes(\"@\") || val.includes(\".\");\n    filteredAgents = filteredAgents.filter((user) => {\n      if (isEmail) {\n        return user.user?.toLowerCase().includes(val);\n      } else {\n        return user.agent_name?.toLowerCase().includes(val);\n      }\n    });\n  }\n  return filteredAgents;\n});\n\nconst addAssignee = (user) => {\n  assignmentRuleData.value.users.push({\n    user: user.user,\n  });\n  emit(\"addAssignee\", user);\n};\n\nconst inviteAgents = () => {\n  if (isAssignmentRuleFormDirty.value) {\n    showConfirmDialog.value = {\n      show: true,\n      title: __(\"Unsaved changes\"),\n      message: __(\n        \"Are you sure you want to leave? Unsaved changes will be lost.\"\n      ),\n      onConfirm: () => {\n        setActiveSettingsTab(\"Invite Agents\");\n      },\n    };\n  } else {\n    setActiveSettingsTab(\"Invite Agents\");\n  }\n};\n\nonMounted(() => {\n  if (agents.loading || agents.data?.length || agents.list.promise) {\n    return;\n  }\n  agents.fetch();\n});\n</script>\n","<template>\n  <div>\n    <div class=\"flex flex-col gap-1\">\n      <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n        __(\"Assignee Rules\")\n      }}</span>\n      <span class=\"text-p-sm text-ink-gray-6\">\n        {{\n          __(\n            \"Define who receives the tickets and how theyre distributed among agents.\"\n          )\n        }}\n      </span>\n    </div>\n    <div class=\"mt-8 flex items-center justify-between gap-2\">\n      <div>\n        <div class=\"text-base font-medium text-ink-gray-8\">\n          {{ __(\"Ticket Routing\") }}\n        </div>\n        <div class=\"text-p-sm text-ink-gray-6 mt-1\">\n          {{\n            __(\"Choose how tickets are distributed among selected assignees.\")\n          }}\n        </div>\n      </div>\n      <div>\n        <Popover placement=\"bottom-end\">\n          <template #target=\"{ togglePopover }\">\n            <div\n              class=\"flex items-center justify-between text-base rounded h-7 py-1.5 pl-2 pr-2 border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full dark:[color-scheme:dark] select-none min-w-44\"\n              @click=\"togglePopover()\"\n            >\n              <div>\n                {{\n                  ticketRoutingOptions.find(\n                    (option) => option.value == assignmentRuleData.rule\n                  )?.label\n                }}\n              </div>\n              <FeatherIcon name=\"chevron-down\" class=\"size-4\" />\n            </div>\n          </template>\n          <template #body=\"{ togglePopover }\">\n            <div\n              class=\"p-1 text-ink-gray-7 mt-1 bg-white shadow-xl rounded w-[--reka-popper-anchor-width]\"\n            >\n              <div\n                v-for=\"option in ticketRoutingOptions\"\n                :key=\"option.value\"\n                class=\"p-2 cursor-pointer hover:bg-surface-gray-3 text-sm flex items-center justify-between rounded\"\n                @click=\"\n                  () => {\n                    assignmentRuleData.rule = option.value;\n                    togglePopover();\n                  }\n                \"\n              >\n                <span>\n                  {{ option.label }}\n                </span>\n                <FeatherIcon\n                  v-if=\"assignmentRuleData.rule == option.value\"\n                  name=\"check\"\n                  class=\"size-4\"\n                />\n              </div>\n            </div>\n          </template>\n        </Popover>\n      </div>\n    </div>\n    <div class=\"mt-7 flex items-center justify-between gap-2\">\n      <div>\n        <div class=\"text-base font-medium text-ink-gray-8\">\n          {{ __(\"Assignees\") }}\n        </div>\n        <div class=\"text-p-sm text-ink-gray-6 mt-1\">\n          {{ __(\"Choose who receives the tickets.\") }}\n        </div>\n      </div>\n      <AssigneeSearch @addAssignee=\"validateAssignmentRule('users')\" />\n    </div>\n    <div class=\"mt-4 flex flex-wrap gap-2\">\n      <div\n        v-for=\"user in users\"\n        :key=\"user.name\"\n        class=\"flex items-center gap-2 text-sm bg-surface-gray-2 rounded-md p-1 w-max px-2 select-none\"\n      >\n        <Avatar :image=\"user.user_image\" :label=\"user.full_name\" size=\"sm\" />\n        <div class=\"text-ink-gray-7\">\n          {{ user.full_name }}\n        </div>\n        <Tooltip\n          v-if=\"user.email == assignmentRuleData.lastUser\"\n          :text=\"__('Last user assigned by this rule')\"\n          :hover-delay=\"0.35\"\n          :placement=\"'top'\"\n        >\n          <div\n            class=\"text-xs rounded-full select-none bg-blue-600 text-white p-0.5 px-2\"\n          >\n            {{ __(\"Last\") }}\n          </div>\n        </Tooltip>\n        <Button variant=\"ghost\" icon=\"x\" @click=\"removeAssignedUser(user)\" />\n      </div>\n    </div>\n    <ErrorMessage :message=\"assignmentRulesErrors.users\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Avatar, Button, ErrorMessage, Popover, Tooltip } from \"frappe-ui\";\nimport {\n  assignmentRuleData,\n  assignmentRulesErrors,\n  validateAssignmentRule,\n} from \"@/stores/assignmentRules\";\nimport AssigneeSearch from \"./AssigneeSearch.vue\";\nimport { computed } from \"vue\";\nimport { useUserStore } from \"@/stores/user\";\n\nconst { getUser } = useUserStore();\n\nconst ticketRoutingOptions = [\n  {\n    label: \"Auto-rotate\",\n    value: \"Round Robin\",\n  },\n  {\n    label: \"Assign by workload\",\n    value: \"Load Balancing\",\n  },\n];\n\nconst removeAssignedUser = (user) => {\n  assignmentRuleData.value.users = assignmentRuleData.value.users.filter(\n    (u) => u.user !== user.name\n  );\n  validateAssignmentRule(\"users\");\n};\n\nconst users = computed(() => {\n  const _users = [];\n  assignmentRuleData.value.users.forEach((user) => {\n    _users.push(getUser(user.user));\n  });\n  return _users;\n});\n</script>\n","<template>\n  <CFConditions\n    v-if=\"props.conditions.length > 0\"\n    :conditions=\"props.conditions\"\n    :level=\"0\"\n    :disableAddCondition=\"props.errors !== ''\"\n  />\n  <div\n    v-if=\"props.conditions.length == 0\"\n    class=\"flex p-4 items-center cursor-pointer justify-center gap-2 text-sm border border-gray-300 text-gray-600 rounded-md\"\n    @click=\"\n      props.conditions.push(['', '', '']);\n      validateAssignmentRule(props.name);\n    \"\n  >\n    <FeatherIcon name=\"plus\" class=\"h-4\" />\n    {{ __(\"Add a condition\") }}\n  </div>\n  <div class=\"flex items-center justify-between mt-2\">\n    <Dropdown\n      v-if=\"props.conditions.length > 0\"\n      class=\"mt-2\"\n      v-slot=\"{ open }\"\n      :options=\"dropdownOptions\"\n    >\n      <Button\n        :disabled=\"props.errors !== ''\"\n        :icon-right=\"open ? 'chevron-up' : 'chevron-down'\"\n        :label=\"__('Add condition')\"\n      />\n    </Dropdown>\n    <ErrorMessage\n      v-if=\"props.conditions.length > 0\"\n      :message=\"props.errors\"\n      class=\"mt-2\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport CFConditions from \"@/components/conditions-filter/CFConditions.vue\";\nimport { validateConditions } from \"@/utils\";\nimport { watchDebounced } from \"@vueuse/core\";\nimport { Button, Dropdown, ErrorMessage, FeatherIcon } from \"frappe-ui\";\nimport { validateAssignmentRule } from \"@/stores/assignmentRules\";\nimport { __ } from \"@/translation\";\n\nconst props = defineProps({\n  conditions: Array<any>,\n  name: String,\n  errors: String,\n});\n\nconst getConjunction = () => {\n  let conjunction = \"and\";\n  props.conditions.forEach((condition) => {\n    if (typeof condition == \"string\") {\n      conjunction = condition;\n    }\n  });\n  return conjunction;\n};\n\nconst dropdownOptions = [\n  {\n    label: __(\"Add condition\"),\n    onClick: () => {\n      addCondition();\n    },\n  },\n  {\n    label: __(\"Add condition group\"),\n    onClick: () => {\n      const conjunction = getConjunction();\n      props.conditions.push(conjunction, [[]]);\n    },\n  },\n];\n\nconst addCondition = () => {\n  const isValid = validateConditions(props.conditions);\n\n  if (!isValid) {\n    return;\n  }\n  const conjunction = getConjunction();\n\n  props.conditions.push(conjunction, [\"\", \"\", \"\"]);\n};\n\nwatchDebounced(\n  () => [...props.conditions],\n  () => {\n    validateAssignmentRule(props.name);\n  },\n  { deep: true, debounce: 300 }\n);\n</script>\n","<template>\n  <div\n    class=\"grid py-3.5 px-4 items-center\"\n    style=\"grid-template-columns: 3fr 1fr\"\n  >\n    <div class=\"text-ink-gray-7 font-medium\">{{ data.day }}</div>\n    <div class=\"flex justify-start\">\n      <Switch v-model=\"data.active\" @update:model-value=\"toggleDay\" />\n    </div>\n  </div>\n  <hr v-if=\"!isLast\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { assignmentRuleData } from \"@/stores/assignmentRules\";\nimport { Switch } from \"frappe-ui\";\n\nconst props = defineProps({\n  data: {\n    type: Object,\n    required: true,\n  },\n  isLast: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst toggleDay = (isActive) => {\n  const dayIndex = assignmentRuleData.value.assignmentDays.findIndex(\n    (d) => d === props.data.day\n  );\n\n  if (isActive && dayIndex === -1) {\n    assignmentRuleData.value.assignmentDays.push(props.data.day);\n  } else {\n    assignmentRuleData.value.assignmentDays.splice(dayIndex, 1);\n  }\n};\n</script>\n","<template>\n  <div class=\"rounded-md border px-2 border-gray-300 text-sm\">\n    <div\n      class=\"grid p-2 px-4 items-center\"\n      style=\"grid-template-columns: 3fr 1fr\"\n    >\n      <div\n        v-for=\"column in columns\"\n        :key=\"column.key\"\n        class=\"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis\"\n      >\n        {{ column.label }}\n      </div>\n    </div>\n    <hr />\n    <AssignmentScheduleItem\n      v-for=\"(day, index) in days\"\n      :key=\"day.day\"\n      :data=\"day\"\n      :isLast=\"index === days.length - 1\"\n    />\n  </div>\n  <ErrorMessage :message=\"assignmentRulesErrors.assignmentDays\" class=\"mt-2\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { ErrorMessage } from \"frappe-ui\";\nimport { onMounted, ref } from \"vue\";\nimport {\n  assignmentRuleData,\n  assignmentRulesErrors,\n} from \"@/stores/assignmentRules\";\nimport AssignmentScheduleItem from \"./AssignmentScheduleItem.vue\";\nimport { __ } from \"@/translation\";\n\nconst columns = [\n  {\n    label: __(\"Days\"),\n    key: \"day\",\n  },\n  {\n    label: __(\"Active\"),\n    key: \"active\",\n  },\n];\n\nconst days = ref([\n  {\n    day: \"Monday\",\n    active: false,\n  },\n  {\n    day: \"Tuesday\",\n    active: false,\n  },\n  {\n    day: \"Wednesday\",\n    active: false,\n  },\n  {\n    day: \"Thursday\",\n    active: false,\n  },\n  {\n    day: \"Friday\",\n    active: false,\n  },\n  {\n    day: \"Saturday\",\n    active: false,\n  },\n  {\n    day: \"Sunday\",\n    active: false,\n  },\n]);\n\nonMounted(() => {\n  assignmentRuleData.value.assignmentDays.forEach((day) => {\n    const workDay = days.value.find((d) => d.day === day);\n    if (workDay) {\n      workDay.active = true;\n    }\n  });\n});\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <div class=\"flex items-center gap-2\">\n        <Button\n          variant=\"ghost\"\n          icon-left=\"chevron-left\"\n          :label=\"\n            assignmentRuleData.assignmentRuleName || __('New Assignment Rule')\n          \"\n          size=\"md\"\n          @click=\"goBack()\"\n          class=\"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-lg hover:opacity-70 !pr-0 !max-w-96 !justify-start\"\n        />\n        <Badge\n          variant=\"subtle\"\n          theme=\"orange\"\n          size=\"sm\"\n          :label=\"__('Unsaved')\"\n          v-if=\"isDirty\"\n        />\n      </div>\n    </template>\n    <template #header-actions>\n      <div class=\"flex items-center gap-4\">\n        <div\n          class=\"flex items-center justify-between gap-2\"\n          @click=\"assignmentRuleData.disabled = !assignmentRuleData.disabled\"\n        >\n          <Switch size=\"sm\" :model-value=\"!assignmentRuleData.disabled\" />\n          <span class=\"text-sm text-ink-gray-7\">{{ __(\"Enabled\") }}</span>\n        </div>\n        <Button\n          :disabled=\"Boolean(!isDirty && assignmentRulesActiveScreen.data)\"\n          :label=\"__('Save')\"\n          theme=\"gray\"\n          variant=\"solid\"\n          @click=\"saveAssignmentRule()\"\n          :loading=\"\n            isLoading ||\n            getAssignmentRuleData.loading ||\n            createAssignmentRuleResource.loading\n          \"\n        />\n      </div>\n    </template>\n    <template #content>\n      <div\n        v-if=\"getAssignmentRuleData.loading\"\n        class=\"flex items-center h-full justify-center\"\n      >\n        <LoadingIndicator class=\"w-4\" />\n      </div>\n      <div v-if=\"!getAssignmentRuleData.loading\">\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n          <div>\n            <FormControl\n              :type=\"'text'\"\n              size=\"sm\"\n              variant=\"subtle\"\n              :placeholder=\"__('Name')\"\n              :label=\"__('Name')\"\n              v-model=\"assignmentRuleData.assignmentRuleName\"\n              required\n              maxlength=\"50\"\n              @change=\"validateAssignmentRule('assignmentRuleName')\"\n            />\n            <ErrorMessage\n              :message=\"assignmentRulesErrors.assignmentRuleName\"\n              class=\"mt-2\"\n            />\n          </div>\n          <div class=\"flex flex-col gap-1.5\">\n            <FormLabel :label=\"__('Priority')\" />\n            <Popover>\n              <template #target=\"{ togglePopover }\">\n                <div\n                  class=\"flex items-center justify-between text-base rounded h-7 py-1.5 pl-2 pr-2 border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full dark:[color-scheme:dark] cursor-default\"\n                  @click=\"togglePopover()\"\n                >\n                  <div>\n                    {{\n                      priorityOptions.find(\n                        (option) => option.value == assignmentRuleData.priority\n                      )?.label\n                    }}\n                  </div>\n                  <FeatherIcon name=\"chevron-down\" class=\"size-4\" />\n                </div>\n              </template>\n              <template #body=\"{ togglePopover }\">\n                <div\n                  class=\"p-1 text-ink-gray-6 top-1 absolute bg-white shadow-2xl rounded w-[--reka-popper-anchor-width]\"\n                >\n                  <div\n                    v-for=\"option in priorityOptions\"\n                    :key=\"option.value\"\n                    class=\"p-2 cursor-pointer hover:bg-gray-50 text-base flex items-center justify-between rounded\"\n                    @click=\"\n                      assignmentRuleData.priority = option.value;\n                      togglePopover();\n                    \"\n                  >\n                    {{ option.label }}\n                    <FeatherIcon\n                      v-if=\"assignmentRuleData.priority == option.value\"\n                      name=\"check\"\n                      class=\"size-4\"\n                    />\n                  </div>\n                </div>\n              </template>\n            </Popover>\n          </div>\n          <div>\n            <FormControl\n              :type=\"'textarea'\"\n              size=\"sm\"\n              variant=\"subtle\"\n              :placeholder=\"__('Description')\"\n              :label=\"__('Description')\"\n              required\n              maxlength=\"140\"\n              @change=\"validateAssignmentRule('description')\"\n              v-model=\"assignmentRuleData.description\"\n            />\n            <ErrorMessage\n              :message=\"assignmentRulesErrors.description\"\n              class=\"mt-2\"\n            />\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n              __(\"Assignment condition\")\n            }}</span>\n            <div class=\"flex items-center justify-between gap-6\">\n              <span class=\"text-p-sm text-ink-gray-6\">\n                {{\n                  __(\n                    \"Choose which tickets are affected by this assignment rule.\"\n                  )\n                }}\n                <a\n                  class=\"font-medium underline\"\n                  href=\"https://docs.frappe.io/helpdesk/assignment-rule\"\n                  target=\"_blank\"\n                  >{{ __(\"Learn about conditions\") }}</a\n                >\n              </span>\n              <div\n                v-if=\"isAssignConditionOld && assignmentRulesActiveScreen.data\"\n              >\n                <Popover trigger=\"hover\" :hoverDelay=\"0.25\" placement=\"top-end\">\n                  <template #target>\n                    <div\n                      class=\"text-sm text-ink-gray-6 flex gap-1 cursor-default text-nowrap flex items-center\"\n                    >\n                      <span>{{ __(\"Old Condition\") }}</span>\n                      <FeatherIcon name=\"info\" class=\"size-4\" />\n                    </div>\n                  </template>\n                  <template #body-main>\n                    <div\n                      class=\"text-sm text-ink-gray-6 p-2 bg-white rounded-md max-w-96 text-wrap whitespace-pre-wrap leading-5\"\n                    >\n                      <code>{{ assignmentRuleData.assignCondition }}</code>\n                    </div>\n                  </template>\n                </Popover>\n              </div>\n            </div>\n          </div>\n          <div class=\"mt-5\">\n            <div\n              class=\"flex flex-col gap-3 items-center text-center text-ink-gray-7 text-sm mb-2 border border-gray-300 rounded-md p-3 py-4\"\n              v-if=\"\n                !useNewUIForAssignCondition &&\n                assignmentRuleData.assignCondition\n              \"\n            >\n              <span class=\"text-p-sm\">\n                Conditions for this rule were created from\n                <a :href=\"deskUrl\" target=\"_blank\" class=\"underline\">desk</a>\n                which are not compatible with this UI, you will need to recreate\n                the conditions here if you want to manage and add new conditions\n                from this UI.\n              </span>\n              <Button\n                label=\"I understand, add conditions\"\n                variant=\"subtle\"\n                theme=\"gray\"\n                @click=\"useNewUIForAssignCondition = true\"\n              />\n            </div>\n            <AssignmentRulesSection\n              :conditions=\"assignmentRuleData.assignConditionJson\"\n              name=\"assignCondition\"\n              :errors=\"assignmentRulesErrors.assignConditionError\"\n              v-else\n            />\n            <ErrorMessage\n              :message=\"assignmentRulesErrors.assignCondition\"\n              class=\"mt-2\"\n            />\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n              __(\"Unassignment condition\")\n            }}</span>\n            <div class=\"flex items-center justify-between gap-6\">\n              <span class=\"text-p-sm text-ink-gray-6\">\n                {{\n                  __(\n                    \"Choose which tickets are affected by this un-assignment rule.\"\n                  )\n                }}\n                <a\n                  class=\"font-medium underline\"\n                  href=\"https://docs.frappe.io/helpdesk/assignment-rule\"\n                  target=\"_blank\"\n                  >{{ __(\"Learn about conditions\") }}</a\n                >\n              </span>\n              <div\n                v-if=\"\n                  isUnassignConditionOld &&\n                  assignmentRulesActiveScreen.data &&\n                  assignmentRuleData.unassignCondition\n                \"\n              >\n                <Popover trigger=\"hover\" :hoverDelay=\"0.25\" placement=\"top-end\">\n                  <template #target>\n                    <div\n                      class=\"text-sm text-ink-gray-6 flex gap-1 cursor-default text-nowrap flex items-center\"\n                    >\n                      <span> {{ __(\"Old Condition\") }} </span>\n                      <FeatherIcon name=\"info\" class=\"size-4\" />\n                    </div>\n                  </template>\n                  <template #body-main>\n                    <div\n                      class=\"text-sm text-ink-gray-6 p-2 bg-white rounded-md max-w-96 text-wrap whitespace-pre-wrap leading-5\"\n                    >\n                      <code>{{ assignmentRuleData.unassignCondition }}</code>\n                    </div>\n                  </template>\n                </Popover>\n              </div>\n            </div>\n          </div>\n          <div class=\"mt-5\">\n            <div\n              class=\"flex flex-col gap-3 items-center text-center text-ink-gray-7 text-sm mb-2 border border-gray-300 rounded-md p-3 py-4\"\n              v-if=\"\n                !useNewUIForUnassignCondition &&\n                assignmentRuleData.unassignCondition\n              \"\n            >\n              <span class=\"text-p-sm\">\n                Conditions for this rule were created from\n                <a :href=\"deskUrl\" target=\"_blank\" class=\"underline\">desk</a>\n                which are not compatible with this UI, you will need to recreate\n                the conditions here if you want to manage and add new conditions\n                from this UI.\n              </span>\n              <Button\n                label=\"I understand, add conditions\"\n                variant=\"subtle\"\n                theme=\"gray\"\n                @click=\"useNewUIForUnassignCondition = true\"\n              />\n            </div>\n            <AssignmentRulesSection\n              :conditions=\"assignmentRuleData.unassignConditionJson\"\n              name=\"unassignCondition\"\n              :errors=\"assignmentRulesErrors.unassignConditionError\"\n              v-else\n            />\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n              __(\"Assignment Schedule\")\n            }}</span>\n            <span class=\"text-p-sm text-ink-gray-6\">\n              {{\n                __(\n                  \"Choose the days of the week when this rule should be active.\"\n                )\n              }}\n            </span>\n          </div>\n          <div class=\"mt-6\">\n            <AssignmentSchedule />\n          </div>\n        </div>\n        <hr class=\"my-8\" />\n        <AssigneeRules />\n      </div>\n    </template>\n  </SettingsLayoutBase>\n\n  <ConfirmDialog\n    v-model=\"showConfirmDialog.show\"\n    :title=\"showConfirmDialog.title\"\n    :message=\"showConfirmDialog.message\"\n    :onConfirm=\"showConfirmDialog.onConfirm\"\n    :onCancel=\"\n      () => {\n        if (showConfirmDialog.onCancel) {\n          showConfirmDialog.onCancel();\n        } else {\n          showConfirmDialog.show = false;\n        }\n      }\n    \"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport {\n  Badge,\n  Button,\n  call,\n  createResource,\n  ErrorMessage,\n  FormControl,\n  FormLabel,\n  LoadingIndicator,\n  Popover,\n  Switch,\n  toast,\n} from \"frappe-ui\";\nimport { onMounted, onUnmounted, provide, ref, watch } from \"vue\";\nimport {\n  assignmentRuleData,\n  assignmentRulesActiveScreen,\n  assignmentRulesErrors,\n  resetAssignmentRuleData,\n  resetAssignmentRuleErrors,\n  validateAssignmentRule,\n} from \"@/stores/assignmentRules\";\nimport AssigneeRules from \"./AssigneeRules.vue\";\nimport AssignmentRulesSection from \"./AssignmentRulesSection.vue\";\nimport AssignmentSchedule from \"./AssignmentSchedule.vue\";\nimport { convertToConditions } from \"@/utils\";\nimport { disableSettingModalOutsideClick } from \"../settingsModal\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\nconst isDirty = ref(false);\nconst initialData = ref(null);\nconst isLoading = ref(false);\nprovide(\"isAssignmentRuleFormDirty\", isDirty);\n\nconst showConfirmDialog = ref<{\n  show: boolean;\n  title: string;\n  message: string;\n  onConfirm: () => void;\n  onCancel?: () => void;\n}>({\n  show: false,\n  title: \"\",\n  message: \"\",\n  onConfirm: () => {},\n});\n\nconst useNewUIForAssignCondition = ref(true);\nconst useNewUIForUnassignCondition = ref(true);\nconst isAssignConditionOld = ref(false);\nconst isUnassignConditionOld = ref(false);\nconst deskUrl = `${window.location.origin}/app/assignment-rule/${assignmentRulesActiveScreen.value.data?.name}`;\n\nconst getAssignmentRuleData = createResource({\n  url: \"frappe.client.get\",\n  params: {\n    doctype: \"Assignment Rule\",\n    name: assignmentRulesActiveScreen.value.data?.name,\n  },\n  auto: Boolean(assignmentRulesActiveScreen.value.data),\n  onSuccess(data) {\n    let assignConditionJson;\n    let unassignConditionJson;\n    try {\n      assignConditionJson = JSON.parse(data.assign_condition_json || \"[]\");\n    } catch (error) {\n      toast.error(\n        \"Assignment conditions are invalid or corrupt, recreate the conditions.\"\n      );\n      assignConditionJson = [];\n    }\n    try {\n      unassignConditionJson = JSON.parse(data.unassign_condition_json || \"[]\");\n    } catch (error) {\n      toast.error(\n        \"Unassignment conditions are invalid or corrupt, recreate the conditions.\"\n      );\n      unassignConditionJson = [];\n    }\n    assignmentRuleData.value = {\n      loading: false,\n      assignCondition: data.assign_condition,\n      unassignCondition: data.unassign_condition,\n      assignConditionJson: assignConditionJson,\n      unassignConditionJson: unassignConditionJson,\n      rule: data.rule,\n      priority: data.priority,\n      users: data.users,\n      disabled: data.disabled,\n      description: data.description,\n      name: data.name,\n      assignmentRuleName: data.name,\n      assignmentDays: data.assignment_days.map((day) => day.day),\n    };\n\n    initialData.value = JSON.stringify(assignmentRuleData.value);\n\n    const assignConditionsAvailable =\n      assignmentRuleData.value.assignCondition?.length > 0;\n    const assignConditionsJsonAvailable =\n      assignmentRuleData.value.assignConditionJson?.length > 0;\n\n    if (assignConditionsAvailable && !assignConditionsJsonAvailable) {\n      useNewUIForAssignCondition.value = false;\n      isAssignConditionOld.value = true;\n    } else {\n      useNewUIForAssignCondition.value = true;\n      isAssignConditionOld.value = false;\n    }\n\n    const unassignConditionsAvailable =\n      assignmentRuleData.value.unassignCondition?.length > 0;\n    const unassignConditionsJsonAvailable =\n      assignmentRuleData.value.unassignConditionJson?.length > 0;\n\n    if (unassignConditionsAvailable && !unassignConditionsJsonAvailable) {\n      useNewUIForUnassignCondition.value = false;\n      isUnassignConditionOld.value = true;\n    } else {\n      useNewUIForUnassignCondition.value = true;\n      isUnassignConditionOld.value = false;\n    }\n  },\n});\n\nif (!assignmentRulesActiveScreen.value.data) {\n  disableSettingModalOutsideClick.value = true;\n  initialData.value = JSON.stringify(assignmentRuleData.value);\n}\n\nconst goBack = () => {\n  const confirmDialogInfo = {\n    show: true,\n    title: __(\"Unsaved changes\"),\n    message: __(\n      \"Are you sure you want to go back? Unsaved changes will be lost.\"\n    ),\n    onConfirm: goBack,\n  };\n  if (isDirty.value && !showConfirmDialog.value.show) {\n    showConfirmDialog.value = confirmDialogInfo;\n    return;\n  }\n  // Workaround fix for settings modal not closing after going back\n  setTimeout(() => {\n    assignmentRulesActiveScreen.value = {\n      screen: \"list\",\n      data: null,\n    };\n  }, 250);\n  showConfirmDialog.value.show = false;\n};\n\nconst saveAssignmentRule = () => {\n  const validationErrors = validateAssignmentRule(\n    undefined,\n    !useNewUIForAssignCondition.value,\n    !useNewUIForUnassignCondition.value\n  );\n\n  if (Object.values(validationErrors).some((error) => error)) {\n    toast.error(\n      __(\"Invalid fields, check if all are filled in and values are correct.\")\n    );\n    return;\n  }\n\n  if (assignmentRulesActiveScreen.value.data) {\n    if (isAssignConditionOld.value && useNewUIForAssignCondition.value) {\n      showOverwriteConfirm();\n      return;\n    }\n    if (isUnassignConditionOld.value && useNewUIForUnassignCondition.value) {\n      showOverwriteConfirm();\n      return;\n    }\n    updateAssignmentRule();\n  } else {\n    createAssignmentRule();\n  }\n};\n\nconst showOverwriteConfirm = () => {\n  showConfirmDialog.value = {\n    show: true,\n    title: \"Confirm overwrite\",\n    message:\n      \"Your old condition will be overwritten. Are you sure you want to save?\",\n    onConfirm: () => {\n      updateAssignmentRule();\n      showConfirmDialog.value.show = false;\n    },\n  };\n};\n\nconst createAssignmentRule = () => {\n  createAssignmentRuleResource.submit({\n    doc: {\n      doctype: \"Assignment Rule\",\n      document_type: \"HD Ticket\",\n      rule: assignmentRuleData.value.rule,\n      priority: assignmentRuleData.value.priority,\n      users: assignmentRuleData.value.users,\n      disabled: assignmentRuleData.value.disabled,\n      description: assignmentRuleData.value.description,\n      assignment_days: assignmentRuleData.value.assignmentDays.map((day) => ({\n        day: day,\n      })),\n      name: assignmentRuleData.value.assignmentRuleName,\n      assignment_rule_name: assignmentRuleData.value.assignmentRuleName,\n      assign_condition: convertToConditions({\n        conditions: assignmentRuleData.value.assignConditionJson,\n      }),\n      unassign_condition: convertToConditions({\n        conditions: assignmentRuleData.value.unassignConditionJson,\n      }),\n      assign_condition_json: JSON.stringify(\n        assignmentRuleData.value.assignConditionJson\n      ),\n      unassign_condition_json: JSON.stringify(\n        assignmentRuleData.value.unassignConditionJson\n      ),\n    },\n  });\n};\n\nconst createAssignmentRuleResource = createResource({\n  url: \"frappe.client.insert\",\n  onSuccess(data) {\n    toast.success(__(\"Assignment rule created\"));\n    assignmentRulesActiveScreen.value = {\n      screen: \"view\",\n      data: data,\n    };\n    getAssignmentRuleData.submit({\n      doctype: \"Assignment Rule\",\n      name: data.name,\n    });\n  },\n});\n\nconst priorityOptions = [\n  { label: \"Low\", value: \"0\" },\n  { label: \"Low-Medium\", value: \"1\" },\n  { label: \"Medium\", value: \"2\" },\n  { label: \"Medium-High\", value: \"3\" },\n  { label: \"High\", value: \"4\" },\n];\n\nconst updateAssignmentRule = async () => {\n  isLoading.value = true;\n\n  await call(\"frappe.client.set_value\", {\n    doctype: \"Assignment Rule\",\n    document_type: \"HD Ticket\",\n    name: assignmentRuleData.value.name,\n    fieldname: {\n      rule: assignmentRuleData.value.rule,\n      priority: assignmentRuleData.value.priority,\n      users: assignmentRuleData.value.users,\n      disabled: assignmentRuleData.value.disabled,\n      description: assignmentRuleData.value.description,\n      assignment_days: assignmentRuleData.value.assignmentDays.map((day) => ({\n        day: day,\n      })),\n      assign_condition: useNewUIForAssignCondition.value\n        ? convertToConditions({\n            conditions: assignmentRuleData.value.assignConditionJson,\n          })\n        : assignmentRuleData.value.assignCondition,\n      unassign_condition: useNewUIForUnassignCondition.value\n        ? convertToConditions({\n            conditions: assignmentRuleData.value.unassignConditionJson,\n          })\n        : assignmentRuleData.value.unassignCondition,\n      assign_condition_json: useNewUIForAssignCondition.value\n        ? JSON.stringify(assignmentRuleData.value.assignConditionJson)\n        : null,\n      unassign_condition_json: useNewUIForUnassignCondition.value\n        ? JSON.stringify(assignmentRuleData.value.unassignConditionJson)\n        : null,\n    },\n  }).catch((er) => {\n    const error =\n      er?.messages?.[0] ||\n      __(\"Some error occurred while updating assignment rule\");\n    toast.error(error);\n    isLoading.value = false;\n  });\n\n  if (\n    assignmentRuleData.value.name !==\n    assignmentRuleData.value.assignmentRuleName\n  ) {\n    await call(\"frappe.client.rename_doc\", {\n      doctype: \"Assignment Rule\",\n      old_name: assignmentRuleData.value.name,\n      new_name: assignmentRuleData.value.assignmentRuleName,\n    }).catch(async (er) => {\n      const error =\n        er?.messages?.[0] ||\n        __(\"Some error occurred while renaming assignment rule\");\n      toast.error(error);\n      // Reset assignment rule to previous state\n      await getAssignmentRuleData.reload();\n      isLoading.value = false;\n    });\n    await getAssignmentRuleData.submit({\n      doctype: \"Assignment Rule\",\n      name: assignmentRuleData.value.assignmentRuleName,\n    });\n  } else {\n    getAssignmentRuleData.reload();\n  }\n\n  isLoading.value = false;\n  toast.success(__(\"Assignment rule updated\"));\n};\n\nwatch(\n  assignmentRuleData,\n  (newVal) => {\n    if (!initialData.value) return;\n    isDirty.value = JSON.stringify(newVal) != initialData.value;\n    if (isDirty.value) {\n      disableSettingModalOutsideClick.value = true;\n    } else {\n      disableSettingModalOutsideClick.value = false;\n    }\n  },\n  { deep: true }\n);\n\nconst beforeUnloadHandler = (event) => {\n  if (!isDirty.value) return;\n  event.preventDefault();\n  event.returnValue = true;\n};\n\nonMounted(() => {\n  addEventListener(\"beforeunload\", beforeUnloadHandler);\n});\n\nonUnmounted(() => {\n  resetAssignmentRuleErrors();\n  resetAssignmentRuleData();\n  removeEventListener(\"beforeunload\", beforeUnloadHandler);\n  disableSettingModalOutsideClick.value = false;\n});\n</script>\n","<template>\n  <AssignmentRulesList v-if=\"assignmentRulesActiveScreen.screen === 'list'\" />\n  <AssignmentRuleView v-if=\"assignmentRulesActiveScreen.screen === 'view'\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { provide, ref } from \"vue\";\nimport { assignmentRulesActiveScreen } from \"@/stores/assignmentRules\";\nimport AssignmentRulesList from \"./AssignmentRulesList.vue\";\nimport AssignmentRuleView from \"./AssignmentRuleView.vue\";\n\nconst assignmentRuleSearchQuery = ref(\"\");\n\nprovide(\"assignmentRuleSearchQuery\", assignmentRuleSearchQuery);\n</script>\n","<template>\n  <FormControl\n    :type=\"show ? 'text' : 'password'\"\n    :value=\"modelValue || value\"\n    v-bind=\"$attrs\"\n    @keydown.meta.i.prevent=\"show = !show\"\n    @keydown.ctrl.i.prevent=\"show = !show\"\n  >\n    <template #prefix v-if=\"$slots.prefix\">\n      <slot name=\"prefix\" />\n    </template>\n    <template #suffix>\n      <Tooltip>\n        <template #body>\n          <div\n            class=\"rounded bg-surface-gray-7 py-1.5 px-2 text-xs text-ink-white shadow-xl\"\n          >\n            <span class=\"flex items-center gap-1\">\n              {{ show ? \"Hide Password\" : \"Show Password\" }}\n            </span>\n          </div>\n        </template>\n        <div>\n          <component\n            v-show=\"showEye\"\n            :is=\"show ? LucideEyeOff : LucideEye\"\n            class=\"h-3 cursor-pointer mr-1\"\n            @click=\"show = !show\"\n          />\n        </div>\n      </Tooltip>\n    </template>\n  </FormControl>\n</template>\n<script setup lang=\"ts\">\nimport LucideEye from \"~icons/lucide/eye\";\nimport LucideEyeOff from \"~icons/lucide/eye-off\";\nimport { ref, computed } from \"vue\";\nimport { FormControl, Tooltip } from \"frappe-ui\";\n\nconst props = defineProps({\n  value: {\n    type: String,\n    default: \"\",\n  },\n  modelValue: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst show = ref(false);\nconst showEye = computed(() => {\n  let v = props.modelValue || props.value;\n  return !v?.includes(\"*\");\n});\n</script>\n","export const isDocDirty = (doc: any, originalDoc: any) => {\n  return JSON.stringify(doc) !== JSON.stringify(originalDoc);\n};\n\nexport const validateTwilio = (twilio, telephonyAgent, twilioErrors) => {\n  if (telephonyAgent.default_medium === \"Twilio\" && !twilio.enabled) {\n    twilioErrors.value.default_medium =\n      \"Enable Twilio to set it as default medium\";\n  } else {\n    twilioErrors.value.default_medium = \"\";\n  }\n\n  if (!twilio.enabled) {\n    return;\n  }\n\n  if (!twilio.account_sid) {\n    twilioErrors.value.accountSid = \"Account SID is required\";\n  } else {\n    twilioErrors.value.accountSid = \"\";\n  }\n\n  if (!twilio.auth_token) {\n    twilioErrors.value.authToken = \"Auth Token is required\";\n  } else {\n    twilioErrors.value.authToken = \"\";\n  }\n\n  if (!telephonyAgent.twilio_number) {\n    twilioErrors.value.number = \"Number is required\";\n  } else if (!validatePhone(telephonyAgent.twilio_number)) {\n    twilioErrors.value.number = \"Please enter a valid phone number\";\n  } else {\n    twilioErrors.value.number = \"\";\n  }\n};\n\nexport const validateExotel = (exotel, telephonyAgent, exotelErrors) => {\n  if (telephonyAgent.default_medium === \"Exotel\" && !exotel.enabled) {\n    exotelErrors.value.default_medium =\n      \"Enable Exotel to set it as default medium\";\n  } else {\n    exotelErrors.value.default_medium = \"\";\n  }\n\n  if (!exotel.enabled) {\n    return;\n  }\n\n  if (!exotel.account_sid) {\n    exotelErrors.value.accountSid = \"Account SID is required\";\n  } else {\n    exotelErrors.value.accountSid = \"\";\n  }\n\n  if (!exotel.webhook_verify_token) {\n    exotelErrors.value.webhookVerifyToken = \"Webhook Verify Token is required\";\n  } else {\n    exotelErrors.value.webhookVerifyToken = \"\";\n  }\n\n  if (!exotel.subdomain) {\n    exotelErrors.value.subdomain = \"Subdomain is required\";\n  } else {\n    exotelErrors.value.subdomain = \"\";\n  }\n\n  if (!exotel.api_key) {\n    exotelErrors.value.apiKey = \"API Key is required\";\n  } else {\n    exotelErrors.value.apiKey = \"\";\n  }\n\n  if (!exotel.api_token) {\n    exotelErrors.value.apiToken = \"API Token is required\";\n  } else {\n    exotelErrors.value.apiToken = \"\";\n  }\n\n  if (!telephonyAgent.exotel_number) {\n    exotelErrors.value.number = \"Number is required\";\n  } else if (!validatePhone(telephonyAgent.exotel_number)) {\n    exotelErrors.value.number = \"Please enter a valid phone number\";\n  } else {\n    exotelErrors.value.number = \"\";\n  }\n\n  if (!telephonyAgent.mobile_no) {\n    exotelErrors.value.mobileNo = \"Personal number is required\";\n  } else if (!validatePhone(telephonyAgent.mobile_no)) {\n    exotelErrors.value.mobileNo = \"Please enter a valid phone number\";\n  } else {\n    exotelErrors.value.mobileNo = \"\";\n  }\n};\n\nconst validatePhone = (number: string) => {\n  return /^\\+?\\d{8,15}$/.test(number);\n};\n","<template>\n  <SettingsLayoutBase :description=\"__('Configure your telephony settings.')\">\n    <template #title>\n      <div class=\"flex items-center gap-2\">\n        <h1 class=\"text-lg font-semibold text-ink-gray-8\">\n          {{ __(\"Telephony\") }}\n        </h1>\n        <Badge\n          :class=\"[\n            isDirty.twilio || isDirty.exotel || isDirty.telephonyAgent\n              ? 'opacity-100'\n              : 'opacity-0',\n          ]\"\n          :label=\"__('Unsaved')\"\n          theme=\"orange\"\n          variant=\"subtle\"\n        />\n      </div>\n    </template>\n    <template #header-actions>\n      <Button\n        :label=\"__('Save')\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"save\"\n        :disabled=\"\n          !isDirty.twilio && !isDirty.exotel && !isDirty.telephonyAgent\n        \"\n        :loading=\"\n          twilio.save.loading ||\n          exotel.save.loading ||\n          telephonyAgent.save.loading\n        \"\n      />\n    </template>\n    <template #content>\n      <div>\n        <div class=\"text-base font-semibold text-ink-gray-8\">\n          {{ __(\"Agent settings\") }}\n        </div>\n        <div class=\"text-p-xs text-ink-gray-6 mt-1\">\n          {{ __(\"Configure your agents telephony details.\") }}\n        </div>\n        <div class=\"grid grid-cols-2 gap-4 mt-4\">\n          <div class=\"flex flex-col gap-1.5\">\n            <FormLabel label=\"Default medium\" />\n            <Select\n              v-if=\"telephonyAgent.doc\"\n              :options=\"telephonyProviders\"\n              :modelValue=\"telephonyAgent.doc?.default_medium\"\n              @update:modelValue=\"telephonyAgent.doc.default_medium = $event\"\n            />\n            <ErrorMessage\n              :message=\"\n                twilioErrors.default_medium || exotelErrors.default_medium\n              \"\n            />\n          </div>\n          <div\n            class=\"flex flex-col gap-1.5\"\n            v-if=\"telephonyAgent.doc && twilio.doc?.enabled\"\n          >\n            <FormControl\n              label=\"Twilio number\"\n              type=\"text\"\n              required\n              v-model=\"telephonyAgent.doc.twilio_number\"\n            />\n            <ErrorMessage :message=\"twilioErrors.number\" />\n          </div>\n          <div\n            class=\"flex flex-col gap-1.5\"\n            v-if=\"telephonyAgent.doc && exotel.doc?.enabled\"\n          >\n            <FormControl\n              label=\"Exotel number\"\n              type=\"text\"\n              required\n              v-model=\"telephonyAgent.doc.exotel_number\"\n            />\n            <ErrorMessage :message=\"exotelErrors.number\" />\n          </div>\n          <div\n            class=\"flex flex-col gap-1.5\"\n            v-if=\"telephonyAgent.doc && exotel.doc?.enabled\"\n          >\n            <FormControl\n              :label=\"__('Personal mobile no')\"\n              type=\"text\"\n              required\n              v-model=\"telephonyAgent.doc.mobile_no\"\n              :description=\"__('Required for exotel integration')\"\n            />\n            <ErrorMessage :message=\"exotelErrors.mobileNo\" />\n          </div>\n        </div>\n        <div class=\"mt-6\" v-if=\"twilio?.doc\">\n          <div class=\"text-base font-semibold text-ink-gray-8\">Twilio</div>\n          <div class=\"mt-4\">\n            <div class=\"grid grid-cols-2 gap-4\">\n              <Checkbox\n                :label=\"__('Enabled')\"\n                v-model=\"twilio.doc.enabled\"\n                @update:modelValue=\"twilio.doc.enabled = $event ? 1 : 0\"\n              />\n              <Checkbox\n                :label=\"__('Record Calls')\"\n                v-model=\"twilio.doc.record_calls\"\n                v-if=\"twilio.doc.enabled\"\n                @update:modelValue=\"twilio.doc.record_calls = $event ? 1 : 0\"\n              />\n            </div>\n            <div class=\"grid grid-cols-2 gap-4 mt-4\" v-if=\"twilio.doc.enabled\">\n              <div class=\"flex flex-col gap-2\">\n                <FormControl\n                  label=\"Account SID\"\n                  required\n                  v-model=\"twilio.doc.account_sid\"\n                  placeholder=\"Account SID\"\n                />\n                <ErrorMessage :message=\"twilioErrors.accountSid\" />\n              </div>\n              <div class=\"flex flex-col gap-2\">\n                <Password\n                  label=\"Auth Token\"\n                  required\n                  v-model=\"twilio.doc.auth_token\"\n                  placeholder=\"Auth Token\"\n                />\n                <ErrorMessage :message=\"twilioErrors.authToken\" />\n              </div>\n              <FormControl\n                v-if=\"twilio.doc.api_key\"\n                label=\"API Key\"\n                v-model=\"twilio.doc.api_key\"\n                disabled\n              />\n              <Password\n                v-if=\"twilio.doc.api_secret\"\n                label=\"API Secret\"\n                v-model=\"twilio.doc.api_secret\"\n                disabled\n              />\n              <Autocomplete\n                v-if=\"twilio.originalDoc?.account_sid && twilioApps.length > 0\"\n                label=\"TwiML App Name\"\n                :model-value=\"twilio.doc.app_name\"\n                @update:modelValue=\"twilio.doc.app_name = $event.value\"\n                :options=\"twilioApps\"\n              >\n                <template #footer=\"{ togglePopover }\">\n                  <Button\n                    :label=\"__('Refresh Apps')\"\n                    theme=\"gray\"\n                    variant=\"subtle\"\n                    class=\"w-full\"\n                    icon-left=\"refresh-cw\"\n                    @click=\"refreshApps(togglePopover)\"\n                    :loading=\"twilioAppsResource.loading\"\n                  />\n                </template>\n              </Autocomplete>\n              <FormControl\n                v-if=\"twilio.doc.twiml_sid\"\n                label=\"TwiML App SID\"\n                v-model=\"twilio.doc.twiml_sid\"\n                disabled\n              />\n            </div>\n          </div>\n        </div>\n        <div class=\"mt-6\" v-if=\"exotel?.doc\">\n          <div class=\"text-base font-semibold text-ink-gray-8\">Exotel</div>\n          <div class=\"mt-4\">\n            <div class=\"grid grid-cols-2 gap-4\">\n              <Checkbox\n                :label=\"__('Enabled')\"\n                v-model=\"exotel.doc.enabled\"\n                @update:modelValue=\"exotel.doc.enabled = $event ? 1 : 0\"\n              />\n              <Checkbox\n                :label=\"__('Record Calls')\"\n                v-model=\"exotel.doc.record_call\"\n                v-if=\"exotel.doc.enabled\"\n                @update:modelValue=\"exotel.doc.record_call = $event ? 1 : 0\"\n              />\n            </div>\n            <div class=\"grid grid-cols-2 gap-4 mt-4\" v-if=\"exotel.doc.enabled\">\n              <div class=\"flex flex-col gap-2\">\n                <FormControl\n                  label=\"Account SID\"\n                  required\n                  v-model=\"exotel.doc.account_sid\"\n                  placeholder=\"Account SID\"\n                />\n                <ErrorMessage :message=\"exotelErrors.accountSid\" />\n              </div>\n              <div class=\"flex flex-col gap-2\">\n                <FormControl\n                  label=\"Webhook Verify Token\"\n                  required\n                  v-model=\"exotel.doc.webhook_verify_token\"\n                  placeholder=\"Webhook Verify Token\"\n                />\n                <ErrorMessage :message=\"exotelErrors.webhookVerifyToken\" />\n              </div>\n\n              <div class=\"flex flex-col gap-2\">\n                <FormControl\n                  label=\"API Key\"\n                  required\n                  v-model=\"exotel.doc.api_key\"\n                  placeholder=\"API Key\"\n                />\n                <ErrorMessage :message=\"exotelErrors.apiKey\" />\n              </div>\n              <div class=\"flex flex-col gap-2\">\n                <Password\n                  label=\"API Token\"\n                  required\n                  v-model=\"exotel.doc.api_token\"\n                  placeholder=\"API Token\"\n                />\n                <ErrorMessage :message=\"exotelErrors.apiToken\" />\n              </div>\n              <div class=\"flex flex-col gap-2\">\n                <FormControl\n                  label=\"Subdomain\"\n                  required\n                  v-model=\"exotel.doc.subdomain\"\n                  placeholder=\"Subdomain\"\n                />\n                <ErrorMessage :message=\"exotelErrors.subdomain\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport Password from \"@/components/Password.vue\";\nimport SettingsLayoutHeader from \"../SettingsLayoutHeader.vue\";\nimport {\n  Button,\n  Select,\n  FormLabel,\n  Checkbox,\n  FormControl,\n  createDocumentResource,\n  toast,\n  ErrorMessage,\n  createResource,\n  Badge,\n  Autocomplete,\n} from \"frappe-ui\";\nimport { nextTick, ref, watch } from \"vue\";\nimport { isDocDirty, validateExotel, validateTwilio } from \"./utils\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { useTelephonyStore } from \"@/stores/telephony\";\nimport { disableSettingModalOutsideClick } from \"../settingsModal\";\nimport { __ } from \"@/translation\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\nconst auth = useAuthStore();\nconst telephonyStore = useTelephonyStore();\nconst isDirty = ref({\n  twilio: false,\n  exotel: false,\n  telephonyAgent: false,\n});\nconst twilioApps = ref([]);\n\nconst twilioErrors = ref({\n  accountSid: \"\",\n  authToken: \"\",\n  number: \"\",\n  default_medium: \"\",\n});\n\nconst exotelErrors = ref({\n  accountSid: \"\",\n  webhookVerifyToken: \"\",\n  subdomain: \"\",\n  apiKey: \"\",\n  apiToken: \"\",\n  number: \"\",\n  mobileNo: \"\",\n  default_medium: \"\",\n});\n\nconst twilio = createDocumentResource({\n  doctype: \"TP Twilio Settings\",\n  name: \"TP Twilio Settings\",\n  cache: [\"tp_twilio_settings\"],\n  fields: [\"*\"],\n  auto: true,\n});\n\nconst exotel = createDocumentResource({\n  doctype: \"TP Exotel Settings\",\n  name: \"TP Exotel Settings\",\n  cache: [\"tp_exotel_settings\"],\n  fields: [\"*\"],\n  auto: true,\n});\n\nconst telephonyAgent = createDocumentResource({\n  doctype: \"TP Telephony Agent\",\n  name: auth.user,\n  cache: [\"tp_telephony_agent\"],\n  fields: [\"*\"],\n  auto: false,\n  onError(er) {\n    toast.error(er?.messages?.[0] || __(\"Failed to load telephony agent\"));\n  },\n});\n\nconst twilioAppsResource = createResource({\n  url: \"telephony.twilio.api.fetch_applications\",\n  onSuccess() {\n    twilio.reload();\n  },\n});\n\nconst telephonyProviders = [\n  { label: \"\", value: \"\" },\n  { label: \"Twilio\", value: \"Twilio\" },\n  { label: \"Exotel\", value: \"Exotel\" },\n];\n\nasync function save() {\n  validateTwilio(twilio.doc, telephonyAgent.doc, twilioErrors);\n  validateExotel(exotel.doc, telephonyAgent.doc, exotelErrors);\n  if (Object.values(twilioErrors.value).some((v) => v)) {\n    toast.error(__(\"Please fill all required fields for Twilio\"));\n    return;\n  }\n  if (Object.values(exotelErrors.value).some((v) => v)) {\n    toast.error(__(\"Please fill all required fields for Exotel\"));\n    return;\n  }\n\n  const promises = [];\n\n  // Temporary fix, as createDocumentResource's dirty state has bug\n  if (isDirty.value.twilio) {\n    promises.push(\n      twilio.save.submit().catch((er) => {\n        const error = __(`Twilio error: {0}`, er?.messages?.[0]);\n        toast.error(error || __(\"Failed to save Twilio settings\"));\n      })\n    );\n  }\n  if (isDirty.value.exotel) {\n    promises.push(\n      exotel.save.submit().catch((er) => {\n        const error = __(`Exotel error: {0}`, er?.messages?.[0]);\n        toast.error(error || __(\"Failed to save Exotel settings\"));\n      })\n    );\n  }\n  if (isDirty.value.telephonyAgent) {\n    if (telephonyAgent.doc.twilio_number) {\n      telephonyAgent.doc.twilio = true;\n    } else {\n      telephonyAgent.doc.twilio = false;\n    }\n\n    if (telephonyAgent.doc.exotel_number) {\n      telephonyAgent.doc.exotel = true;\n    } else {\n      telephonyAgent.doc.exotel = false;\n    }\n    promises.push(telephonyAgent.save.submit());\n  }\n\n  const results = await Promise.all(promises);\n\n  if (!results.some((result) => result == undefined)) {\n    toast.success(__(\"Telephony settings updated!\"));\n  }\n\n  // Reload twilio to prevent \"doc has been modified\" error, as an application is created and doc is updated on save\n  await twilio.reload();\n  telephonyStore.fetchCallIntegrationStatus();\n}\n\nfunction refreshApps(togglePopover) {\n  twilioAppsResource.submit().then(() => {\n    // Close and reopen popover to fix bug where search does not work after refreshing list\n    togglePopover();\n    nextTick(() => {\n      togglePopover();\n    });\n  });\n}\n\ncreateResource({\n  url: \"telephony.api.create_telephony_agent\",\n  auto: true,\n  onSuccess() {\n    telephonyAgent.get.submit();\n  },\n});\n\nwatch(\n  () => telephonyAgent.doc,\n  (newVal) => {\n    isDirty.value.telephonyAgent = isDocDirty(\n      newVal,\n      telephonyAgent.originalDoc\n    );\n    if (isDirty.value.telephonyAgent) {\n      disableSettingModalOutsideClick.value = true;\n    } else {\n      disableSettingModalOutsideClick.value = false;\n    }\n  },\n  { deep: true }\n);\n\nwatch(\n  () => twilio.doc,\n  (newVal) => {\n    isDirty.value.twilio = isDocDirty(newVal, twilio.originalDoc);\n    twilioApps.value =\n      newVal.twilio_apps?.split(\",\").map((app) => ({\n        label: app,\n        value: app,\n      })) || [];\n    if (isDirty.value.twilio) {\n      disableSettingModalOutsideClick.value = true;\n    } else {\n      disableSettingModalOutsideClick.value = false;\n    }\n  },\n  { deep: true }\n);\n\nwatch(\n  () => exotel.doc,\n  (newVal) => {\n    isDirty.value.exotel = isDocDirty(newVal, exotel.originalDoc);\n    if (isDirty.value.exotel) {\n      disableSettingModalOutsideClick.value = true;\n    } else {\n      disableSettingModalOutsideClick.value = false;\n    }\n  },\n  { deep: true }\n);\n</script>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Email Notifications')\"\n    :description=\"\n      __(\n        'Customize your email notification preferences to stay informed about important updates and activities.'\n      )\n    \"\n  >\n    <template #content>\n      <ul class=\"isolate -ml-3\">\n        <li\n          v-for=\"notification in notifications\"\n          :key=\"notification.name\"\n          class=\"flex items-center justify-between p-3 rounded relative\"\n        >\n          <div class=\"flex flex-col gap-1\">\n            <h2\n              class=\"text-base font-medium text-ink-gray-7 relative z-10 pointer-events-none\"\n            >\n              {{ notification.label }}\n            </h2>\n            <p\n              class=\"text-sm text-ink-gray-5 truncate relative z-10 pointer-events-none\"\n            >\n              {{ notification.description }}\n            </p>\n          </div>\n          <FeatherIcon\n            name=\"chevron-right\"\n            class=\"text-ink-gray-7 size-4 relative z-10 pointer-events-none\"\n          />\n          <button\n            type=\"button\"\n            class=\"w-full h-full absolute top-0 left-0 hover:bg-gray-50 rounded-[inherit]\"\n            @click=\"\n              () => {\n                props.onSelect(notification);\n              }\n            \"\n          >\n            <span class=\"sr-only\">{{\n              __(\"customize {0}\", notification.name)\n            }}</span>\n          </button>\n        </li>\n      </ul>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { __ } from \"@/translation\";\nimport type { AtLeastOneNotifcation, Notification } from \"./types\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\nconst props = defineProps<{\n  onSelect: (notification: Notification) => void;\n}>();\n\nconst notifications: AtLeastOneNotifcation = [\n  {\n    name: \"share_feedback\",\n    label: __(\"Share feedback\"),\n    description: __(\n      \"Sent to the user who has raised the ticket after the ticket is closed or resolved\"\n    ),\n  },\n  {\n    name: \"acknowledgement\",\n    label: __(\"Acknowledgement\"),\n    description: __(\"Sent to the user right after creating an email ticket\"),\n  },\n  {\n    name: \"reply_to_agents\",\n    label: __(\"Reply from contact\"),\n    description: __(\n      \"Sent to all of the assigned agents after a reply from one of the contacts\"\n    ),\n  },\n  {\n    name: \"reply_via_agent\",\n    label: __(\"Reply from agent\"),\n    description: __(\n      \"Sent to all of the recipients associated with an agent's reply\"\n    ),\n  },\n];\n</script>\n","<template>\n  <SettingsLayoutBase>\n    <template #title>\n      <div class=\"flex items-center\">\n        <div\n          class=\"pl-5 pr-2 relative text-ink-gray-7 hover:opacity-70 min-h-8 flex items-center\"\n        >\n          <button\n            type=\"button\"\n            @click=\"internalOnBack\"\n            class=\"absolute top-0 -left-[0.375rem] w-full h-full\"\n          >\n            <span class=\"sr-only\">{{ __(\"back to email event list\") }}</span>\n            <LucideChevronLeft class=\"w-4.5 h-4.5\" />\n          </button>\n          <h1 class=\"font-semibold text-xl\">\n            {{ props.title }}\n          </h1>\n        </div>\n        <Badge\n          v-if=\"unsavedChanges\"\n          :variant=\"'subtle'\"\n          :theme=\"'orange'\"\n          size=\"sm\"\n          :label=\"__('Unsaved')\"\n        />\n      </div>\n    </template>\n    <template #header-actions>\n      <div\n        :inert=\"notificationDataResource.loading\"\n        class=\"flex items-center gap-x-4 pt-[0.125rem]\"\n        :class=\"{ invisible: notificationDataResource.loading }\"\n      >\n        <Switch\n          size=\"sm\"\n          :label=\"__('Enabled')\"\n          v-model=\"enabled\"\n          @update:model-value=\"setUnsavedChanges\"\n          :style=\"{ background: 'transparent', padding: '0px' }\"\n          class=\"flex-row-reverse gap-x-2 pl-0\"\n        />\n        <Button\n          type=\"button\"\n          :label=\"__('Save')\"\n          theme=\"gray\"\n          variant=\"solid\"\n          :disabled=\"!unsavedChanges\"\n          :loading=\"props.submitting\"\n          @click=\"props.onSubmit\"\n        />\n      </div>\n    </template>\n    <template #content>\n      <div\n        class=\"flex flex-col gap-8 flex-grow pb-8\"\n        :class=\"{\n          'items-center justify-center': notificationDataResource.loading,\n        }\"\n      >\n        <template v-if=\"!notificationDataResource.loading\">\n          <slot name=\"formFields\"></slot>\n          <div class=\"flex flex-col gap-2\">\n            <FormControl\n              type=\"textarea\"\n              size=\"sm\"\n              :label=\"__('Email Content')\"\n              :required=\"true\"\n              :rows=\"10\"\n              v-model=\"content\"\n              :oninput=\"setUnsavedChanges\"\n            />\n            <div class=\"flex gap-x-1 items-start justify-between\">\n              <p class=\"text-sm text-gray-700 leading-5\">\n                {{\n                  __(\n                    \"Find out all of the variables that can be used in the content\"\n                  )\n                }}\n                <a\n                  :href=\"props.documentationLink\"\n                  target=\"_blank\"\n                  class=\"underline font-semibold\"\n                  >{{ __(\"here\") }}</a\n                >\n              </p>\n              <Button\n                :disabled=\"content === defaultContent\"\n                type=\"button\"\n                size=\"sm\"\n                variant=\"subtle\"\n                @click=\"onResetContent\"\n                class=\"w-fit\"\n              >\n                {{ __(\"Reset Content\") }}\n              </Button>\n            </div>\n          </div>\n        </template>\n        <LoadingIndicator v-else class=\"w-4\" />\n      </div>\n    </template>\n  </SettingsLayoutBase>\n\n  <ConfirmDialog\n    v-model=\"showUnsavedConfirm\"\n    :title=\"__('Unsaved changes')\"\n    :message=\"\n      __('Are you sure you want to go back? Unsaved changes will be lost.')\n    \"\n    :onConfirm=\"\n      () => {\n        disableSettingModalOutsideClick = false;\n        props.onBack();\n      }\n    \"\n  />\n  <ConfirmDialog\n    v-model=\"showContentChangeConfirm\"\n    :title=\"__('Reset content')\"\n    :message=\"\n      __(\n        'Are you sure you want to reset the content? Current content will be overridden.'\n      )\n    \"\n    :onConfirm=\"\n      () => {\n        resetContent();\n        showContentChangeConfirm = false;\n      }\n    \"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from \"vue\";\nimport type { NotificationName } from \"./types\";\nimport { createResource, Switch, LoadingIndicator } from \"frappe-ui\";\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport { disableSettingModalOutsideClick } from \"../settingsModal\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\n\nconst props = defineProps<{\n  title: string;\n  description: string;\n  documentationLink: string;\n  defaultContent: string;\n  onBack: () => void;\n  onSubmit: (e: Event & { target: HTMLFormElement }) => void;\n  onGetDataSuccess: (data: any) => void;\n  submitting: boolean;\n  name: NotificationName;\n}>();\n\nconst content = defineModel<string>(\"content\", { required: true });\nconst enabled = defineModel<boolean>(\"enabled\", { required: true });\n\nconst unsavedChanges = ref(false);\nconst showUnsavedConfirm = ref(false);\nconst showContentChangeConfirm = ref(false);\n\nconst notificationDataResource = createResource({\n  url: \"helpdesk.api.settings.email_notifications.get_data\",\n  method: \"GET\",\n  params: {\n    notification: props.name,\n  },\n  auto: true,\n  onSuccess: props.onGetDataSuccess,\n});\n\nfunction setUnsavedChanges() {\n  unsavedChanges.value = true;\n}\n\nfunction resetUnsavedChanges() {\n  unsavedChanges.value = false;\n}\n\nfunction resetContent() {\n  content.value = props.defaultContent;\n  setUnsavedChanges();\n}\n\nfunction onResetContent() {\n  if (content.value !== props.defaultContent) {\n    showContentChangeConfirm.value = true;\n  }\n}\n\nfunction internalOnBack() {\n  if (unsavedChanges.value) {\n    showUnsavedConfirm.value = true;\n    return;\n  }\n  disableSettingModalOutsideClick.value = false;\n  props.onBack();\n}\n\nwatch(\n  () => unsavedChanges.value,\n  (val) => {\n    disableSettingModalOutsideClick.value = val;\n  }\n);\n\ndefineExpose({\n  setUnsavedChanges,\n  resetUnsavedChanges,\n});\n</script>\n","<template>\n  <Notification\n    v-model:content=\"content\"\n    :defaultContent=\"defaultContent\"\n    v-model:enabled=\"enabled\"\n    documentationLink=\"https://docs.frappe.io/helpdesk/email-notifications#available-variables-acknowledgement\"\n    ref=\"compRef\"\n    name=\"acknowledgement\"\n    :title=\"props.notification.label\"\n    :description=\"props.notification.description\"\n    :submitting=\"updateSettings.loading\"\n    :onBack=\"props.onBack\"\n    :onSubmit=\"onSubmit\"\n    :onGetDataSuccess=\"onGetDataSuccess\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport Notification from \"./Notification.vue\";\nimport { createResource } from \"frappe-ui\";\nimport type { BaseSettings, Notification as NotificationType } from \"./types\";\n\nconst props = defineProps<{\n  onBack: () => void;\n  notification: NotificationType;\n}>();\n\nconst content = ref(\"\");\nconst defaultContent = ref(\"\");\nconst enabled = ref(false);\nconst compRef = ref<InstanceType<typeof Notification>>();\n\nconst updateSettings = createResource({\n  url: \"helpdesk.api.settings.email_notifications.update_acknowledgement\",\n  method: \"PUT\",\n  auto: false,\n  onSuccess(data: BaseSettings) {\n    enabled.value = data.enabled;\n    content.value = data.content;\n    compRef.value.resetUnsavedChanges();\n  },\n});\n\nfunction onSubmit() {\n  return updateSettings.submit({\n    enabled: enabled.value,\n    content: content.value,\n  });\n}\n\nfunction onGetDataSuccess(data: BaseSettings & { default_content: string }) {\n  enabled.value = data.enabled;\n  content.value = data.content;\n  defaultContent.value = data.default_content;\n}\n</script>\n","<template>\n  <Notification\n    v-model:content=\"content\"\n    :defaultContent=\"defaultContent\"\n    v-model:enabled=\"enabled\"\n    documentationLink=\"https://docs.frappe.io/helpdesk/email-notifications#available-variables-reply-from-agent\"\n    ref=\"compRef\"\n    name=\"reply_via_agent\"\n    :title=\"props.notification.label\"\n    :description=\"props.notification.description\"\n    :submitting=\"updateSettings.loading\"\n    :onBack=\"props.onBack\"\n    :onSubmit=\"onSubmit\"\n    :onGetDataSuccess=\"onGetDataSuccess\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport Notification from \"./Notification.vue\";\nimport { createResource } from \"frappe-ui\";\nimport type { BaseSettings, Notification as NotificationType } from \"./types\";\n\nconst props = defineProps<{\n  onBack: () => void;\n  notification: NotificationType;\n}>();\n\nconst content = ref(\"\");\nconst defaultContent = ref(\"\");\nconst enabled = ref(false);\nconst compRef = ref<InstanceType<typeof Notification>>();\n\nconst updateSettings = createResource({\n  url: \"helpdesk.api.settings.email_notifications.update_reply_via_agent\",\n  method: \"PUT\",\n  auto: false,\n  onSuccess(data: BaseSettings) {\n    enabled.value = data.enabled;\n    content.value = data.content;\n    compRef.value.resetUnsavedChanges();\n  },\n});\n\nfunction onSubmit() {\n  return updateSettings.submit({\n    enabled: enabled.value,\n    content: content.value,\n  });\n}\n\nfunction onGetDataSuccess(data: BaseSettings & { default_content: string }) {\n  enabled.value = data.enabled;\n  content.value = data.content;\n  defaultContent.value = data.default_content;\n}\n</script>\n","<template>\n  <Notification\n    ref=\"compRef\"\n    name=\"share_feedback\"\n    :title=\"props.notification.label\"\n    :description=\"props.notification.description\"\n    v-model:content=\"content\"\n    :defaultContent=\"defaultContent\"\n    v-model:enabled=\"enabled\"\n    documentationLink=\"https://docs.frappe.io/helpdesk/email-notifications#available-variables-share-feedback\"\n    :onBack=\"props.onBack\"\n    :onSubmit=\"onSubmit\"\n    :onGetDataSuccess=\"onGetDataSuccess\"\n    :submitting=\"updateSettings.loading\"\n  >\n    <template #formFields>\n      <FormControl\n        type=\"autocomplete\"\n        size=\"sm\"\n        :label=\"__('On Ticket Status')\"\n        :options=\"statusOptions\"\n        :required=\"true\"\n        :model-value=\"ticketStatus\"\n        @update:model-value=\"\n          (val) => {\n            ticketStatus = val;\n            compRef.setUnsavedChanges();\n          }\n        \"\n      />\n    </template>\n  </Notification>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport Notification from \"./Notification.vue\";\nimport { createResource } from \"frappe-ui\";\nimport type { BaseSettings, Notification as NotificationType } from \"./types\";\nimport { useTicketStatusStore } from \"@/stores/ticketStatus\";\nimport { __ } from \"@/translation\";\n\nconst props = defineProps<{\n  onBack: () => void;\n  notification: NotificationType;\n}>();\n\nconst content = ref(\"\");\nconst defaultContent = ref(\"\");\nconst enabled = ref(false);\nconst compRef = ref<InstanceType<typeof Notification>>();\nconst { statuses } = useTicketStatusStore();\nconst statusOptions = computed<Record<\"label\" | \"value\", string>[]>(() =>\n  statuses.data\n    .filter((s) => s.category === \"Resolved\")\n    .map((s) => ({\n      label: __(s.label_agent),\n      value: s.label_agent,\n    }))\n);\nconst ticketStatus = ref<Record<\"label\" | \"value\", string> | null>(null);\n\ntype Data = {\n  ticket_status: Record<\"label\" | \"value\", string>;\n} & BaseSettings;\n\nconst updateSettings = createResource({\n  url: \"helpdesk.api.settings.email_notifications.update_share_feedback\",\n  method: \"PUT\",\n  auto: false,\n  onSuccess(_data: Data) {\n    compRef.value.resetUnsavedChanges();\n  },\n});\n\nfunction onSubmit() {\n  return updateSettings.submit({\n    ticket_status: ticketStatus.value,\n    enabled: enabled.value,\n    content: content.value,\n  });\n}\n\nfunction onGetDataSuccess(data: Data & { default_content: string }) {\n  ticketStatus.value = {\n    label: __(data.ticket_status.label),\n    value: data.ticket_status.value,\n  };\n  enabled.value = data.enabled;\n  content.value = data.content;\n  defaultContent.value = data.default_content;\n}\n</script>\n","<template>\n  <Notification\n    v-model:content=\"content\"\n    :defaultContent=\"defaultContent\"\n    v-model:enabled=\"enabled\"\n    documentationLink=\"https://docs.frappe.io/helpdesk/email-notifications#available-variables-reply-from-contact\"\n    ref=\"compRef\"\n    name=\"reply_to_agents\"\n    :title=\"props.notification.label\"\n    :description=\"props.notification.description\"\n    :submitting=\"updateSettings.loading\"\n    :onBack=\"props.onBack\"\n    :onSubmit=\"onSubmit\"\n    :onGetDataSuccess=\"onGetDataSuccess\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport Notification from \"./Notification.vue\";\nimport { createResource } from \"frappe-ui\";\nimport type { BaseSettings, Notification as NotificationType } from \"./types\";\n\nconst props = defineProps<{\n  onBack: () => void;\n  notification: NotificationType;\n}>();\n\nconst content = ref(\"\");\nconst defaultContent = ref(\"\");\nconst enabled = ref(false);\nconst compRef = ref<InstanceType<typeof Notification>>();\n\nconst updateSettings = createResource({\n  url: \"helpdesk.api.settings.email_notifications.update_reply_to_agents\",\n  method: \"PUT\",\n  auto: false,\n  onSuccess(data: BaseSettings) {\n    enabled.value = data.enabled;\n    content.value = data.content;\n    compRef.value.resetUnsavedChanges();\n  },\n});\n\nfunction onSubmit() {\n  return updateSettings.submit({\n    enabled: enabled.value,\n    content: content.value,\n  });\n}\n\nfunction onGetDataSuccess(data: BaseSettings & { default_content: string }) {\n  enabled.value = data.enabled;\n  content.value = data.content;\n  defaultContent.value = data.default_content;\n}\n</script>\n","<template>\n  <div class=\"h-full overflow-y-auto flex flex-col isolate\">\n    <NotificationList v-if=\"curNotification === null\" :onSelect=\"onSelect\" />\n    <component\n      v-else\n      :is=\"notificationToComponent[curNotification.name]\"\n      :onBack=\"resetCurNotification\"\n      :notification=\"curNotification\"\n    ></component>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { type Component, markRaw, ref } from \"vue\";\nimport type { Notification, NotificationName } from \"./types\";\nimport NotificationList from \"./NotificationList.vue\";\nimport Acknowledgement from \"./Acknowledgement.vue\";\nimport ReplyViaAgent from \"./ReplyViaAgent.vue\";\nimport ShareFeedback from \"./ShareFeedback.vue\";\nimport ReplyToAgents from \"./ReplyToAgents.vue\";\n\nconst curNotification = ref<Notification | null>(null);\n\nconst notificationToComponent: Record<\n  NotificationName,\n  Component<{ onBack: () => void; notification: Notification }>\n> = {\n  share_feedback: markRaw(ShareFeedback),\n  acknowledgement: markRaw(Acknowledgement),\n  reply_to_agents: markRaw(ReplyToAgents),\n  reply_via_agent: markRaw(ReplyViaAgent),\n};\n\nfunction resetCurNotification() {\n  curNotification.value = null;\n}\n\nfunction onSelect(notification: Notification) {\n  curNotification.value = notification;\n}\n</script>\n","<template>\n  <Dialog v-model=\"show\" :options=\"{ title: __('Change Password') }\">\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <div>\n          <Password\n            v-model=\"newPassword\"\n            :placeholder=\"__('New Password')\"\n            maxLength=\"50\"\n          >\n            <template #prefix>\n              <LockKeyhole class=\"size-4 text-ink-gray-4\" />\n            </template>\n          </Password>\n        </div>\n        <div>\n          <Password\n            v-model=\"confirmPassword\"\n            :placeholder=\"__('Confirm Password')\"\n            maxLength=\"50\"\n          >\n            <template #prefix>\n              <LockKeyhole class=\"size-4 text-ink-gray-4\" />\n            </template>\n          </Password>\n        </div>\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex justify-between items-center\">\n        <div>\n          <p\n            v-if=\"confirmPasswordMessage\"\n            class=\"text-sm text-ink-gray-5\"\n            :class=\"\n              confirmPasswordMessage === __('Passwords match')\n                ? 'text-ink-green-3'\n                : 'text-ink-red-3'\n            \"\n          >\n            {{ confirmPasswordMessage }}\n          </p>\n        </div>\n\n        <Button\n          variant=\"solid\"\n          :label=\"__('Update')\"\n          :disabled=\"\n            !newPassword ||\n            !confirmPassword ||\n            newPassword !== confirmPassword ||\n            !isStrongPassword(newPassword)\n          \"\n          :loading=\"updatePassword.loading\"\n          @click=\"updatePassword.submit()\"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup lang=\"ts\">\nimport LockKeyhole from \"~icons/lucide/lock-keyhole\";\nimport { Dialog, toast, createResource } from \"frappe-ui\";\nimport { ref, watch } from \"vue\";\nimport { __ } from \"@/translation\";\nimport { useAuthStore } from \"@/stores/auth\";\n\nconst show = defineModel<boolean>();\n\nconst auth = useAuthStore();\n\nconst newPassword = ref(\"\");\nconst confirmPassword = ref(\"\");\nconst confirmPasswordMessage = ref(\"\");\n\nconst updatePassword = createResource({\n  url: \"frappe.client.set_value\",\n  makeParams() {\n    return {\n      doctype: \"User\",\n      name: auth?.user,\n      fieldname: \"new_password\",\n      value: newPassword.value,\n    };\n  },\n  onSuccess: () => {\n    toast.success(__(\"Password updated successfully\"));\n    show.value = false;\n    newPassword.value = \"\";\n    confirmPassword.value = \"\";\n    confirmPasswordMessage.value = \"\";\n  },\n});\n\nfunction isStrongPassword(password) {\n  const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[^A-Za-z\\d\\s]).{8,}$/;\n  return regex.test(password);\n}\n\nwatch([newPassword, confirmPassword], () => {\n  confirmPasswordMessage.value = \"\";\n\n  if (newPassword.value.length < 8) {\n    confirmPasswordMessage.value = __(\"Password must be at least 8 characters\");\n    return;\n  } else if (!isStrongPassword(newPassword.value)) {\n    confirmPasswordMessage.value = __(\n      \"Password must contain lowercase, uppercase, number, and symbol\"\n    );\n    return;\n  }\n\n  if (\n    confirmPassword.value.length &&\n    newPassword.value !== confirmPassword.value\n  ) {\n    confirmPasswordMessage.value = __(\"Passwords do not match\");\n  } else if (\n    newPassword.value === confirmPassword.value &&\n    newPassword.value.length &&\n    confirmPassword.value.length\n  ) {\n    confirmPasswordMessage.value = __(\"Passwords match\");\n  }\n});\n</script>\n","<template>\n  <SettingsLayoutBase\n    :title=\"__('Profile')\"\n    :description=\"__('Manage your profile information.')\"\n  >\n    <template #content>\n      <div class=\"flex items-center justify-between gap-2\">\n        <FileUploader\n          :fileTypes=\"['image/*']\"\n          @success=\"\n            (file) => {\n              updateImage(file.file_url);\n            }\n          \"\n        >\n          <template #default=\"{ openFileSelector, error: _error, uploading }\">\n            <div class=\"flex items-center justify-center gap-2\">\n              <div class=\"group relative !size-14\">\n                <Avatar\n                  class=\"!size-14\"\n                  :image=\"profile.userImage\"\n                  :label=\"profile.fullName\"\n                />\n                <component\n                  :is=\"profile.userImage ? Dropdown : 'div'\"\n                  v-bind=\"\n                    profile.userImage\n                      ? {\n                          options: [\n                            {\n                              icon: 'upload',\n                              label: profile.userImage\n                                ? __('Change image')\n                                : __('Upload image'),\n                              onClick: openFileSelector,\n                            },\n                            {\n                              icon: 'trash-2',\n                              label: __('Remove image'),\n                              onClick: () => updateImage(null),\n                            },\n                          ],\n                        }\n                      : { onClick: openFileSelector }\n                  \"\n                >\n                  <div\n                    class=\"z-1 absolute top-0 left-0 flex h-9 cursor-pointer items-center justify-center rounded-full bg-black bg-opacity-40 opacity-0 duration-300 ease-in-out group-hover:opacity-100 !size-14\"\n                  >\n                    <CameraIcon class=\"size-4 cursor-pointer text-white\" />\n                  </div>\n                </component>\n                <div\n                  v-if=\"uploading\"\n                  class=\"w-full h-full top-0 left-0 absolute bg-black bg-opacity-20 rounded-full flex items-center justify-center\"\n                >\n                  <LoadingIndicator class=\"size-4\" />\n                </div>\n              </div>\n              <div class=\"flex flex-col gap-1\">\n                <div class=\"flex flex-col\">\n                  <span\n                    class=\"text-lg sm:text-xl !font-semibold text-ink-gray-8\"\n                    >{{ auth?.userName }}</span\n                  >\n                  <span class=\"text-p-sm text-ink-gray-6\">{{\n                    auth?.user\n                  }}</span>\n                </div>\n                <ErrorMessage :message=\"__(_error)\" />\n              </div>\n            </div>\n          </template>\n        </FileUploader>\n      </div>\n      <hr class=\"my-6\" />\n      <div>\n        <div class=\"flex items-center justify-between\">\n          <div class=\"flex gap-2 items-center\">\n            <div class=\"text-base font-semibold text-ink-gray-9\">\n              {{ __(\"Account info & security\") }}\n            </div>\n            <Badge\n              v-if=\"isAccountInfoDirty || isLanguageChanged\"\n              :variant=\"'subtle'\"\n              :theme=\"'orange'\"\n              size=\"sm\"\n              :label=\"__('Unsaved')\"\n            />\n          </div>\n          <Button\n            :label=\"__('Save')\"\n            @click=\"onSave\"\n            :loading=\"setAgent.loading || saveLanguageResource.loading\"\n            :disabled=\"!isAccountInfoDirty && !isLanguageChanged\"\n          />\n        </div>\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-5 mt-6\">\n          <FormControl\n            class=\"w-full\"\n            :label=\"__('First Name')\"\n            maxlength=\"40\"\n            v-model=\"profile.firstName\"\n          />\n          <FormControl\n            class=\"w-full\"\n            :label=\"__('Last Name')\"\n            maxlength=\"40\"\n            v-model=\"profile.lastName\"\n          />\n        </div>\n        <div class=\"flex items-center justify-between mt-6\">\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-base font-medium text-ink-gray-8\">\n              {{ __(\"Password\") }}\n            </span>\n            <span class=\"text-p-sm text-ink-gray-6\">{{\n              __(\"Change your account password for security.\")\n            }}</span>\n          </div>\n          <Button\n            icon-left=\"lock\"\n            :label=\"__('Change Password')\"\n            @click=\"showChangePasswordModal = true\"\n          />\n        </div>\n        <div class=\"flex items-center justify-between mt-6\">\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-base font-medium text-ink-gray-8\">\n              {{ __(\"Language\") }}\n            </span>\n            <span class=\"text-p-sm text-ink-gray-6\">{{\n              __(\"Change language of the application.\")\n            }}</span>\n          </div>\n          <Link\n            :model-value=\"language\"\n            @update:modelValue=\"language = $event || auth.language\"\n            doctype=\"Language\"\n            class=\"w-40\"\n          />\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n  <ChangePasswordModal\n    v-if=\"showChangePasswordModal\"\n    v-model=\"showChangePasswordModal\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport {\n  Avatar,\n  Badge,\n  Button,\n  createResource,\n  Dropdown,\n  FileUploader,\n  LoadingIndicator,\n  toast,\n} from \"frappe-ui\";\nimport { __ } from \"@/translation\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport CameraIcon from \"~icons/lucide/camera\";\nimport ChangePasswordModal from \"./components/ChangePasswordModal.vue\";\nimport { disableSettingModalOutsideClick } from \"../settingsModal\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport Link from \"@/components/frappe-ui/Link.vue\";\n\nconst auth = useAuthStore();\nconst profile = ref({\n  fullName: auth.userName,\n  userImage: auth.userImage,\n  firstName: auth.userFirstName,\n  lastName: auth.userLastName,\n});\nconst showChangePasswordModal = ref(false);\nconst language = ref(auth.language);\n\nconst isLanguageChanged = computed(() => {\n  return language.value !== auth?.language;\n});\n\nconst isAccountInfoDirty = computed(() => {\n  const agentName = agentData.data?.agent_name?.split(\" \");\n  if (!agentName) return false;\n  const isDirty =\n    profile.value.firstName !== agentName[0] ||\n    profile.value.lastName !== (agentName[1] || \"\");\n  if (isDirty) {\n    disableSettingModalOutsideClick.value = true;\n  } else {\n    disableSettingModalOutsideClick.value = false;\n  }\n  return isDirty;\n});\n\nconst agentData = createResource({\n  url: \"helpdesk.helpdesk.doctype.hd_agent.hd_agent.get_agent\",\n  auto: true,\n  onSuccess: (data) => {\n    const fullName = data.agent_name.split(\" \");\n    profile.value = {\n      fullName: data.agent_name,\n      firstName: fullName[0],\n      lastName: fullName[1] || \"\",\n      userImage: data.user_image,\n    };\n  },\n});\n\nconst setAgent = createResource({\n  url: \"frappe.client.set_value\",\n  validate: () => {\n    if (!profile.value.firstName.trim()) {\n      return __(\"Please enter first name at least\");\n    }\n  },\n  makeParams() {\n    return {\n      doctype: \"HD Agent\",\n      name: agentData.data?.name,\n      fieldname: {\n        agent_name: `${profile.value.firstName} ${profile.value.lastName}`,\n        user_image: profile.value.userImage,\n      },\n    };\n  },\n  onSuccess: () => {\n    auth.reloadUser();\n    agentData.reload();\n    toast.success(__(\"Profile updated\"));\n  },\n});\n\nconst saveLanguageResource = createResource({\n  url: \"frappe.client.set_value\",\n  makeParams() {\n    return {\n      doctype: \"User\",\n      name: auth.userId,\n      fieldname: {\n        language: language.value,\n      },\n    };\n  },\n  onSuccess() {\n    toast.success(__(\"Language updated\"));\n    window.location.reload();\n  },\n});\n\nconst onSave = () => {\n  if (isAccountInfoDirty.value) {\n    setAgent.submit();\n  }\n\n  if (isLanguageChanged.value) {\n    saveLanguageResource.submit();\n  }\n};\n\nconst updateImage = (file: string | null) => {\n  profile.value.userImage = file;\n  setAgent.submit();\n};\n</script>\n","<template>\n  <div\n    class=\"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4 w-full\"\n  >\n    <div class=\"flex flex-col sm:flex-row items-center gap-3.5\">\n      <div\n        class=\"flex items-center justify-center min-w-16 min-h-16 rounded-lg overflow-hidden border border-gray-100\"\n      >\n        <Avatar\n          v-if=\"props.image\"\n          size=\"3xl\"\n          :image=\"props.image\"\n          :label=\"props.title\"\n        />\n        <FeatherIcon v-else name=\"image\" class=\"size-6 text-ink-gray-4\" />\n      </div>\n      <div class=\"flex flex-col gap-1 max-w-sm items-start\">\n        <span class=\"text-base font-medium text-ink-gray-8\">{{ title }}</span>\n        <span class=\"text-p-sm text-ink-gray-6\">{{ description }}</span>\n      </div>\n    </div>\n    <div>\n      <FileUploader\n        :fileTypes=\"['image/*']\"\n        @success=\"\n          (file) => {\n            emit('onUpload', file.file_url);\n          }\n        \"\n      >\n        <template v-slot=\"{ progress, uploading, openFileSelector }\">\n          <div class=\"flex items-end space-x-2\">\n            <Button\n              @click=\"openFileSelector\"\n              :iconLeft=\"ImageUpIcon\"\n              :label=\"\n                uploading\n                  ? __('Uploading {0}%', progress)\n                  : props.image\n                  ? __('Change')\n                  : __('Upload')\n              \"\n              :loading=\"isLoading\"\n            />\n            <Button\n              v-if=\"props.image\"\n              iconLeft=\"trash-2\"\n              :label=\"__('Remove')\"\n              @click=\"emit('onRemove')\"\n              :loading=\"isLoading\"\n            />\n          </div>\n        </template>\n      </FileUploader>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Avatar, Button, FeatherIcon, FileUploader } from \"frappe-ui\";\nimport ImageUpIcon from \"~icons/lucide/image-up\";\n\nconst emit = defineEmits([\"onUpload\", \"onRemove\"]);\n\nconst props = defineProps({\n  title: {\n    type: String,\n    required: true,\n  },\n  description: {\n    type: String,\n    required: true,\n  },\n  image: {\n    type: String,\n    required: true,\n  },\n  isLoading: {\n    type: Boolean,\n    required: true,\n  },\n});\n</script>\n","<template>\n  <div v-if=\"settingsData\">\n    <div class=\"text-base font-semibold text-gray-900\">\n      {{ __(\"Branding\") }}\n    </div>\n    <FormControl\n      type=\"text\"\n      class=\"w-full md:w-1/2 mt-6\"\n      v-model=\"settingsData.brandName\"\n      :label=\"__('Brand name')\"\n      :placeholder=\"__('Enter brand name')\"\n      maxlength=\"30\"\n    />\n    <LogoUpload\n      :title=\"__('Logo')\"\n      :description=\"\n        __(\n          'Appears in the left sidebar. Recommended size is minimum 32x32 px in PNG or SVG'\n        )\n      \"\n      :image=\"brandLogo\"\n      @onUpload=\"update($event, 'HD Settings', 'brand_logo')\"\n      @onRemove=\"onRemove('HD Settings', 'brand_logo')\"\n      :isLoading=\"isLoading\"\n    />\n    <LogoUpload\n      :title=\"__('Favicon')\"\n      :description=\"\n        __(\n          'Appears next to the title in your browser tab. Recommended size is minimum 32x32 px in PNG or ICO'\n        )\n      \"\n      :image=\"favicon\"\n      @onUpload=\"update($event, 'HD Settings', 'favicon')\"\n      @onRemove=\"onRemove('HD Settings', 'favicon')\"\n      :isLoading=\"isLoading\"\n    />\n  </div>\n  <ConfirmDialog\n    v-model=\"showConfirmDialog.show\"\n    :title=\"showConfirmDialog.title\"\n    :message=\"showConfirmDialog.message\"\n    :onConfirm=\"showConfirmDialog.onConfirm\"\n    :onCancel=\"() => (showConfirmDialog.show = false)\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { inject, ref, watch } from \"vue\";\nimport LogoUpload from \"./LogoUpload.vue\";\nimport { createResource, toast } from \"frappe-ui\";\nimport { __ } from \"@/translation\";\nimport { useConfigStore } from \"@/stores/config\";\nimport { HDSettingsSymbol } from \"@/types\";\n\nconst configStore = useConfigStore();\nconst settingsData = inject(HDSettingsSymbol);\nconst isLoading = ref(false);\nconst brandLogo = ref(settingsData.value?.brandLogo);\nconst favicon = ref(settingsData.value?.favicon);\n\nconst showConfirmDialog = ref({\n  show: false,\n  title: \"\",\n  message: \"\",\n  onConfirm: () => {},\n});\n\nconst settingsResource = createResource({\n  url: \"frappe.client.set_value\",\n  onSuccess(data) {\n    brandLogo.value = data.brand_logo;\n    favicon.value = data.favicon;\n    isLoading.value = false;\n    configStore.configResource.reload();\n    toast.success(__(\"Updated successfully\"));\n  },\n  onError() {\n    isLoading.value = false;\n  },\n});\n\nfunction update(file: string, doctype: string, fieldname: string) {\n  isLoading.value = true;\n  settingsResource.submit({\n    doctype: doctype,\n    name: doctype,\n    fieldname: fieldname,\n    value: file,\n  });\n}\n\nconst onRemove = (doctype: string, fieldname: string) => {\n  showConfirmDialog.value = {\n    show: true,\n    title: __(\"Remove Logo\"),\n    message: __(\"Are you sure you want to remove the logo?\"),\n    onConfirm: () => {\n      update(\"\", doctype, fieldname);\n      showConfirmDialog.value.show = false;\n    },\n  };\n};\n\nwatch(settingsData, (newData) => {\n  brandLogo.value = newData.brandLogo;\n  favicon.value = newData.favicon;\n});\n</script>\n","<template>\n  <Popover :placement=\"props.placement\">\n    <template #target=\"{ togglePopover }\">\n      <Button\n        class=\"flex items-center justify-between min-w-36\"\n        @click=\"togglePopover()\"\n        :class=\"targetClass\"\n        icon-right=\"chevron-down\"\n      >\n        <div class=\"w-full truncate\">\n          {{\n            options?.find((option) => option.value == model)?.label || \"Select\"\n          }}\n        </div>\n      </Button>\n    </template>\n    <template #body=\"{ togglePopover }\">\n      <div\n        class=\"p-1 text-ink-gray-6 top-1 absolute w-[--reka-popper-anchor-width] bg-white shadow-2xl rounded\"\n        :class=\"bodyClass\"\n      >\n        <div class=\"max-h-52 overflow-y-auto\">\n          <div\n            v-for=\"option in options\"\n            :key=\"option.value\"\n            class=\"p-2 cursor-pointer hover:bg-surface-gray-3 text-base flex items-center justify-between rounded\"\n            @click=\"\n              () => {\n                onChange(option.value);\n                togglePopover();\n              }\n            \"\n          >\n            <div class=\"w-full truncate\">\n              {{ option.label }}\n            </div>\n            <FeatherIcon\n              v-if=\"model == option.value\"\n              name=\"check\"\n              class=\"size-4 ml-2\"\n            />\n          </div>\n        </div>\n        <hr class=\"my-1\" />\n        <Button\n          variant=\"ghost\"\n          :label=\"__('Reset')\"\n          icon-left=\"refresh-ccw\"\n          class=\"w-full focus-visible:ring-0\"\n          @click=\"onReset(togglePopover)\"\n        />\n      </div>\n    </template>\n  </Popover>\n</template>\n\n<script setup lang=\"ts\">\nimport { Button, FeatherIcon, Popover } from \"frappe-ui\";\n\nconst model = defineModel();\n\ninterface Props {\n  options: Array<{ value: string; label: string }>;\n  targetClass?: string;\n  bodyClass?: string;\n  placement?: string;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  placement: \"bottom-start\",\n});\n\nconst onReset = (togglePopover: () => void) => {\n  model.value = null;\n  togglePopover();\n};\n\nconst onChange = (value: string) => {\n  model.value = value;\n};\n</script>\n","<template>\n  <div>\n    <div class=\"text-base font-semibold text-gray-900\">\n      {{ __(\"Ticket settings\") }}\n    </div>\n    <div class=\"mt-6 flex flex-col gap-6\">\n      <div class=\"flex items-center justify-between\">\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-base font-medium text-ink-gray-8\">{{\n            __(\"Make feedback mandatory\")\n          }}</span>\n          <span class=\"text-p-sm text-ink-gray-6\">{{\n            __(\n              \"The feedback dialog will be shown, when a user tries to close a ticket from the customer portal.\"\n            )\n          }}</span>\n        </div>\n        <Switch v-model=\"settingsData.isFeedbackMandatory\" />\n      </div>\n      <div>\n        <div class=\"flex items-center justify-between\">\n          <div class=\"flex flex-col gap-1\">\n            <span class=\"text-base font-medium text-ink-gray-8\">{{\n              __(\"Restrict tickets by team\")\n            }}</span>\n            <span class=\"text-p-sm text-ink-gray-6\">{{\n              __(\n                \"Restrict tickets to be viewed and managed by team members only.\"\n              )\n            }}</span>\n          </div>\n          <Switch v-model=\"settingsData.restrictTicketsByAgentGroup\" />\n        </div>\n        <div\n          class=\"grid grid-cols-2 gap-4 mt-3\"\n          v-if=\"settingsData.restrictTicketsByAgentGroup\"\n        >\n          <Checkbox\n            size=\"sm\"\n            v-model=\"settingsData.doNotRestrictTicketsWithoutAnAgentGroup\"\n            :label=\"__('Do not restrict tickets without a team')\"\n          />\n          <Checkbox\n            size=\"sm\"\n            v-model=\"settingsData.assignWithinTeam\"\n            :label=\"__('Restrict agent assignment to selected team')\"\n          />\n        </div>\n      </div>\n      <div class=\"flex items-center justify-between\">\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-base font-medium text-ink-gray-8\">{{\n            __(\"Auto update status\")\n          }}</span>\n          <span class=\"text-p-sm text-ink-gray-6\">{{\n            __(\n              \"The ticket status will automatically change whenever the agent respond to a ticket.\"\n            )\n          }}</span>\n        </div>\n        <SelectDropdown\n          :options=\"autoUpdateTicketStatusList\"\n          :model-value=\"settingsData.updateStatusTo\"\n          @update:model-value=\"\n            (value) => {\n              if (value) {\n                settingsData.updateStatusTo = value;\n                settingsData.autoUpdateStatus = true;\n              } else {\n                settingsData.updateStatusTo = null;\n                settingsData.autoUpdateStatus = false;\n              }\n            }\n          \"\n          target-class=\"max-w-40\"\n          placement=\"bottom-start\"\n        />\n      </div>\n      <div class=\"flex items-center justify-between\">\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-base font-medium text-ink-gray-8\">{{\n            __(\"Allow anyone to create tickets\")\n          }}</span>\n          <span class=\"text-p-sm text-ink-gray-6\"\n            >{{\n              __(\n                \"Anyone will be able to create tickets without any permission. e.g. from webform.\"\n              )\n            }}\n          </span>\n        </div>\n        <Switch\n          :model-value=\"settingsData.allowAnyoneToCreateTickets\"\n          @update:model-value=\"\n            (value) => (settingsData.allowAnyoneToCreateTickets = value)\n          \"\n        />\n      </div>\n      <div class=\"flex items-center justify-between\">\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-base font-medium text-ink-gray-8\">{{\n            __(\"Default ticket type\")\n          }}</span>\n          <span class=\"text-p-sm text-ink-gray-6\">{{\n            __(\"Select what type all tickets get by default.\")\n          }}</span>\n        </div>\n        <SelectDropdown\n          :options=\"ticketTypeList.data\"\n          v-model=\"settingsData.defaultTicketType\"\n          target-class=\"max-w-40\"\n          placement=\"bottom-start\"\n        />\n      </div>\n      <div>\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-base font-medium text-ink-gray-8\">{{\n            __(\"Automatically close stale tickets\")\n          }}</span>\n          <span class=\"text-p-sm text-ink-gray-6\">{{\n            __(\n              \"Auto-close tickets that remain in a status for the specified number of days.\"\n            )\n          }}</span>\n        </div>\n        <div class=\"grid grid-cols-2 gap-4 mt-3\">\n          <div class=\"flex flex-col gap-1.5\">\n            <FormLabel :label=\"__('Ticket status')\" />\n            <SelectDropdown\n              :options=\"autoCloseTicketStatusList\"\n              :model-value=\"settingsData.autoCloseStatus\"\n              @update:model-value=\"\n                (value) => {\n                  if (value) {\n                    settingsData.autoCloseStatus = value;\n                    settingsData.autoCloseTickets = true;\n                  } else {\n                    settingsData.autoCloseStatus = null;\n                    settingsData.autoCloseTickets = false;\n                  }\n                }\n              \"\n              target-class=\"w-full\"\n              placement=\"bottom-start\"\n            />\n          </div>\n          <div class=\"flex flex-col gap-1.5\">\n            <FormControl\n              :label=\"__('Auto-close after (Days)')\"\n              placeholder=\"e.g. 30\"\n              v-model=\"settingsData.autoCloseAfterDays\"\n              type=\"number\"\n              :debounce=\"300\"\n              :disabled=\"!settingsData.autoCloseStatus\"\n            />\n            <ErrorMessage\n              :message=\"\n                settingsData.autoCloseStatus &&\n                settingsData.autoCloseAfterDays < 1\n                  ? __('The number of days must be 1 or more')\n                  : ''\n              \"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport SelectDropdown from \"@/components/SelectDropdown.vue\";\nimport { useTicketStatusStore } from \"@/stores/ticketStatus\";\nimport { HDSettingsSymbol } from \"@/types\";\nimport { HDTicketStatus } from \"@/types/doctypes\";\nimport {\n  Checkbox,\n  createListResource,\n  ErrorMessage,\n  FormControl,\n  FormLabel,\n  Switch,\n} from \"frappe-ui\";\nimport { computed, inject } from \"vue\";\n\nconst settingsData = inject(HDSettingsSymbol);\n\nconst { statuses } = useTicketStatusStore();\n\nconst ticketTypeList = createListResource({\n  doctype: \"HD Ticket Type\",\n  name: \"HD Ticket Type\",\n  auto: true,\n  transform: (data) => {\n    return data.map((item) => {\n      return {\n        label: item.name,\n        value: item.name,\n      };\n    });\n  },\n});\n\nconst autoUpdateTicketStatusList = computed(() => {\n  return (\n    statuses.data?.map((s: HDTicketStatus) => {\n      return {\n        label: s.label_agent,\n        value: s.label_agent,\n      };\n    }) || []\n  );\n});\n\nconst autoCloseTicketStatusList = computed(() => {\n  return (\n    statuses.data\n      ?.filter(\n        (s: HDTicketStatus) =>\n          s.category === \"Resolved\" || s.category === \"Paused\"\n      )\n      ?.map((s: HDTicketStatus) => {\n        return {\n          label: s.label_agent,\n          value: s.label_agent,\n        };\n      }) || []\n  );\n});\n</script>\n","<template>\n  <div>\n    <div class=\"text-base font-semibold text-gray-900\">\n      {{ __(\"Workflow & knowledge base settings\") }}\n    </div>\n    <div class=\"mt-6 flex flex-col gap-6\">\n      <div class=\"flex items-center justify-between\">\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-base font-medium text-ink-gray-8\">{{\n            __(\"Prefer knowledge base\")\n          }}</span>\n          <span class=\"text-p-sm text-ink-gray-6\">{{\n            __(\"Guide users to articles before tickets.\")\n          }}</span>\n        </div>\n        <Switch\n          :model-value=\"settingsData.preferKnowledgeBase\"\n          @update:model-value=\"\n            (value) => (settingsData.preferKnowledgeBase = value)\n          \"\n        />\n      </div>\n      <div class=\"flex items-center justify-between\">\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-base font-medium text-ink-gray-8\">{{\n            __(\"Skip email workflow\")\n          }}</span>\n          <span class=\"text-p-sm text-ink-gray-6\">{{\n            __(\n              \"Disables all email notifications for the ticket - including creation, updates, and alerts.\"\n            )\n          }}</span>\n        </div>\n        <Switch\n          :model-value=\"settingsData.skipEmailWorkflow\"\n          @update:model-value=\"\n            (value) => (settingsData.skipEmailWorkflow = value)\n          \"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { HDSettingsSymbol } from \"@/types\";\nimport { Switch } from \"frappe-ui\";\nimport { inject } from \"vue\";\n\nconst settingsData = inject(HDSettingsSymbol);\n</script>\n","<template>\n  <SettingsLayoutBase :description=\"__('Manage general settings of your app.')\">\n    <template #title>\n      <div class=\"flex items-center gap-2\">\n        <h1 class=\"text-lg font-semibold text-ink-gray-8\">\n          {{ __(\"General\") }}\n        </h1>\n        <Badge\n          variant=\"subtle\"\n          theme=\"orange\"\n          size=\"sm\"\n          :label=\"__('Unsaved')\"\n          v-if=\"isDirty || isWebsiteSettingsChanged\"\n        />\n      </div>\n    </template>\n    <template #header-actions>\n      <Button\n        :label=\"__('Save')\"\n        variant=\"solid\"\n        @click=\"saveSettings\"\n        :loading=\"\n          saveSettingsResource.loading || saveWebsiteSettingsResource.loading\n        \"\n        :disabled=\"!isDirty && !isWebsiteSettingsChanged\"\n      />\n    </template>\n    <template #content>\n      <div\n        v-if=\"settingsDataResource.loading && !settingsDataResource.data\"\n        class=\"flex items-center justify-center mt-12\"\n      >\n        <LoadingIndicator class=\"w-4\" />\n      </div>\n      <div v-else>\n        <Branding />\n        <hr class=\"my-8\" />\n        <TicketSettings />\n        <hr class=\"my-8\" />\n        <WorkflowKnowledgebaseSettings />\n        <hr class=\"my-8\" />\n        <div>\n          <div class=\"text-base font-semibold text-gray-900\">\n            {{ __(\"User signup\") }}\n          </div>\n          <div class=\"flex items-center justify-between mt-6\">\n            <div class=\"flex flex-col gap-1\">\n              <span class=\"text-base font-medium text-ink-gray-8\">{{\n                __(\"Disable signup\")\n              }}</span>\n              <span class=\"text-p-sm text-ink-gray-6\">{{\n                __(\n                  \"New users will have to be manually registered by system managers.\"\n                )\n              }}</span>\n            </div>\n            <Switch v-model=\"disableSignup\" />\n          </div>\n        </div>\n      </div>\n    </template>\n  </SettingsLayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  Badge,\n  Button,\n  createResource,\n  LoadingIndicator,\n  Switch,\n  toast,\n} from \"frappe-ui\";\nimport Branding from \"./components/Branding.vue\";\nimport TicketSettings from \"./components/TicketSettings.vue\";\nimport WorkflowKnowledgebaseSettings from \"./components/WorkflowKnowledgebaseSettings.vue\";\nimport { computed, provide, ref, watch } from \"vue\";\nimport { __ } from \"@/translation\";\nimport { disableSettingModalOutsideClick } from \"../settingsModal\";\nimport SettingsLayoutBase from \"@/components/layouts/SettingsLayoutBase.vue\";\nimport { HDSettingsSymbol } from \"@/types\";\n\nconst isDirty = ref(false);\nconst initialData = ref(null);\nconst settingsData = ref({\n  brandName: \"\",\n  brandLogo: \"\",\n  favicon: \"\",\n  autoCloseAfterDays: \"\",\n  autoCloseStatus: \"\",\n  autoCloseTickets: \"\",\n  assignWithinTeam: false,\n  doNotRestrictTicketsWithoutAnAgentGroup: false,\n  restrictTicketsByAgentGroup: false,\n  updateStatusTo: \"\",\n  autoUpdateStatus: false,\n  isFeedbackMandatory: false,\n  allowAnyoneToCreateTickets: false,\n  defaultTicketType: \"\",\n  preferKnowledgeBase: false,\n  skipEmailWorkflow: false,\n});\nconst disableSignup = ref(false);\n\nprovide(HDSettingsSymbol, settingsData);\n\nconst settingsDataResource = createResource({\n  url: \"frappe.client.get\",\n  params: {\n    doctype: \"HD Settings\",\n    name: \"HD Settings\",\n  },\n  auto: true,\n  onSuccess(data) {\n    settingsData.value = transformData(data);\n    initialData.value = JSON.stringify(settingsData.value);\n  },\n});\n\nconst isWebsiteSettingsChanged = computed(() => {\n  return (\n    disableSignup.value !==\n    Boolean(websiteSettingsResource.data?.disable_signup)\n  );\n});\n\nconst saveSettingsResource = createResource({\n  url: \"frappe.client.set_value\",\n  makeParams() {\n    return {\n      doctype: \"HD Settings\",\n      name: \"HD Settings\",\n      fieldname: {\n        brand_name: settingsData.value.brandName,\n        auto_close_after_days: Number(settingsData.value.autoCloseAfterDays),\n        auto_close_status: settingsData.value.autoCloseStatus,\n        auto_close_tickets: settingsData.value.autoCloseTickets,\n        assign_within_team: settingsData.value.assignWithinTeam,\n        do_not_restrict_tickets_without_an_agent_group:\n          settingsData.value.doNotRestrictTicketsWithoutAnAgentGroup,\n        restrict_tickets_by_agent_group:\n          settingsData.value.restrictTicketsByAgentGroup,\n        update_status_to: settingsData.value.updateStatusTo,\n        auto_update_status: settingsData.value.autoUpdateStatus,\n        is_feedback_mandatory: settingsData.value.isFeedbackMandatory,\n        allow_anyone_to_create_tickets:\n          settingsData.value.allowAnyoneToCreateTickets,\n        default_ticket_type: settingsData.value.defaultTicketType,\n        prefer_knowledge_base: settingsData.value.preferKnowledgeBase,\n        skip_email_workflow: settingsData.value.skipEmailWorkflow,\n      },\n    };\n  },\n  onSuccess(data) {\n    settingsData.value = transformData(data);\n    initialData.value = JSON.stringify(settingsData.value);\n  },\n});\n\nconst transformData = (data: any) => {\n  return {\n    brandName: data.brand_name,\n    brandLogo: data.brand_logo,\n    favicon: data.favicon,\n    autoCloseAfterDays: data.auto_close_after_days,\n    autoCloseStatus: data.auto_close_status,\n    autoCloseTickets: data.auto_close_tickets,\n    assignWithinTeam: Boolean(data.assign_within_team),\n    doNotRestrictTicketsWithoutAnAgentGroup: Boolean(\n      data.do_not_restrict_tickets_without_an_agent_group\n    ),\n    restrictTicketsByAgentGroup: Boolean(data.restrict_tickets_by_agent_group),\n    updateStatusTo: data.update_status_to,\n    autoUpdateStatus: data.auto_update_status,\n    isFeedbackMandatory: Boolean(data.is_feedback_mandatory),\n    allowAnyoneToCreateTickets: Boolean(data.allow_anyone_to_create_tickets),\n    defaultTicketType: data.default_ticket_type,\n    preferKnowledgeBase: Boolean(data.prefer_knowledge_base),\n    skipEmailWorkflow: Boolean(data.skip_email_workflow),\n  };\n};\n\nconst websiteSettingsResource = createResource({\n  url: \"frappe.client.get\",\n  params: {\n    doctype: \"Website Settings\",\n    name: \"Website Settings\",\n    fields: [\"disable_signup\"],\n  },\n  auto: true,\n  onSuccess(data) {\n    disableSignup.value = Boolean(data.disable_signup);\n  },\n});\n\nconst saveWebsiteSettingsResource = createResource({\n  url: \"frappe.client.set_value\",\n  makeParams() {\n    return {\n      doctype: \"Website Settings\",\n      name: \"Website Settings\",\n      fieldname: {\n        disable_signup: disableSignup.value,\n      },\n    };\n  },\n  onSuccess() {\n    websiteSettingsResource.reload();\n  },\n});\n\nconst saveSettings = async () => {\n  const promises = [];\n  if (isDirty.value) {\n    promises.push(saveSettingsResource.submit());\n  }\n  if (isWebsiteSettingsChanged.value) {\n    promises.push(saveWebsiteSettingsResource.submit());\n  }\n  await Promise.allSettled(promises).then(() => {\n    toast.success(__(\"Settings updated\"));\n  });\n};\n\nwatch(\n  settingsData,\n  (data) => {\n    if (!initialData.value) return;\n    isDirty.value = JSON.stringify(data) !== initialData.value;\n    if (isDirty.value) {\n      disableSettingModalOutsideClick.value = true;\n    } else {\n      disableSettingModalOutsideClick.value = false;\n    }\n  },\n  { deep: true }\n);\n</script>\n","import { computed, h, markRaw, ref } from \"vue\";\nimport Agents from \"./Agents.vue\";\nimport EmailConfig from \"./EmailConfig.vue\";\nimport TeamsConfig from \"./Teams/TeamsConfig.vue\";\nimport Sla from \"./Sla/Sla.vue\";\nimport HolidayList from \"./Holiday/Holiday.vue\";\nimport FieldDependencyConfig from \"./FieldDependency/FieldDependencyConfig.vue\";\nimport InviteAgents from \"./InviteAgents.vue\";\nimport LucideMail from \"~icons/lucide/mail\";\nimport LucideMailOpen from \"~icons/lucide/mail-open\";\nimport LucideUser from \"~icons/lucide/user\";\nimport LucideUserPlus from \"~icons/lucide/user-plus\";\nimport LucideUsers from \"~icons/lucide/users\";\nimport ShieldCheck from \"~icons/lucide/shield-check\";\nimport Briefcase from \"~icons/lucide/briefcase\";\nimport AssignmentRules from \"./Assignment Rules/AssignmentRules.vue\";\nimport Settings from \"~icons/lucide/settings-2\";\nimport { FieldDependencyIcon, PhoneIcon } from \"@/components/icons\";\nimport Telephony from \"./Telephony/Telephony.vue\";\nimport { EmailNotifications } from \"./EmailNotifications\";\nimport { __ } from \"@/translation\";\nimport Profile from \"./Profile/Profile.vue\";\nimport { Avatar } from \"frappe-ui\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport General from \"./General/General.vue\";\nimport SettingsGear from \"~icons/lucide/settings\";\n\nconst auth = useAuthStore();\n\nexport const tabs = computed(() => {\n  const _tabs = [\n    {\n      label: __(\"User Settings\"),\n      hideLabel: true,\n      items: [\n        {\n          label: __(\"Profile\"),\n          icon: h(Avatar, {\n            image: auth.userImage,\n            label: auth.userName,\n            size: \"xs\",\n          }),\n          component: markRaw(Profile),\n        },\n      ],\n    },\n    {\n      label: __(\"Email Settings\"),\n      condition: () => auth.isAdmin || auth.isManager,\n      items: [\n        {\n          label: __(\"Email Accounts\"),\n          icon: markRaw(LucideMail),\n          component: markRaw(EmailConfig),\n        },\n        {\n          label: __(\"Email Notifications\"),\n          icon: markRaw(LucideMailOpen),\n          component: markRaw(EmailNotifications),\n        },\n      ],\n    },\n    {\n      label: __(\"App Settings\"),\n      condition: () => auth.isAdmin || auth.isManager,\n      items: [\n        {\n          label: __(\"General\"),\n          icon: markRaw(SettingsGear),\n          component: markRaw(General),\n          condition: () => auth.isAdmin,\n        },\n        {\n          label: __(\"Agents\"),\n          icon: markRaw(LucideUser),\n          component: markRaw(Agents),\n        },\n        {\n          label: __(\"Invite Agents\"),\n          icon: markRaw(LucideUserPlus),\n          component: markRaw(InviteAgents),\n        },\n        {\n          label: __(\"Teams\"),\n          icon: markRaw(LucideUsers),\n          component: markRaw(TeamsConfig),\n        },\n        {\n          label: __(\"SLA Policies\"),\n          icon: markRaw(ShieldCheck),\n          component: markRaw(Sla),\n        },\n        {\n          label: __(\"Business Holidays\"),\n          icon: markRaw(Briefcase),\n          component: markRaw(HolidayList),\n        },\n        {\n          label: __(\"Assignment Rules\"),\n          icon: markRaw(h(Settings, { class: \"rotate-90\" })),\n          component: markRaw(AssignmentRules),\n        },\n        {\n          label: __(\"Field Dependencies\"),\n          icon: markRaw(FieldDependencyIcon),\n          component: markRaw(FieldDependencyConfig),\n        },\n      ],\n    },\n    {\n      label: __(\"Integrations\"),\n      items: [\n        {\n          label: __(\"Telephony\"),\n          icon: markRaw(PhoneIcon),\n          component: markRaw(Telephony),\n        },\n      ],\n    },\n  ];\n\n  return _tabs.filter((tab) => {\n    if (tab.condition && !tab.condition()) return false;\n    if (tab.items) {\n      tab.items = tab.items.filter((item) => {\n        if (item.condition && !item.condition()) return false;\n        return true;\n      });\n    }\n    return true;\n  });\n});\n\nexport const activeTab = ref(tabs.value[0].items[0]);\n\nexport const nextActiveTab = ref(null);\n\nexport const disableSettingModalOutsideClick = ref(false);\n\ntype TabName =\n  | \"Profile\"\n  | \"Email Accounts\"\n  | \"Email Notifications\"\n  | \"General\"\n  | \"Agents\"\n  | \"Invite Agents\"\n  | \"Teams\"\n  | \"SLA Policies\"\n  | \"Business Holidays\"\n  | \"Assignment Rules\"\n  | \"Field Dependencies\"\n  | \"Telephony\";\n\nexport const setActiveSettingsTab = (tabName: TabName) => {\n  activeTab.value =\n    (tabName &&\n      tabs.value\n        .map((tab) => tab.items)\n        .flat()\n        .find((tab) => tab.label == __(tabName))) ||\n    tabs.value[0].items[0];\n};\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{ size: '5xl' }\"\n    :disableOutsideClickToClose=\"disableSettingModalOutsideClick\"\n  >\n    <template #body>\n      <div class=\"flex z-50\" :style=\"{ height: 'calc(100vh - 8rem)' }\">\n        <div\n          class=\"flex w-52 shrink-0 flex-col bg-gray-50 p-2 overflow-y-auto hide-scrollbar\"\n        >\n          <h1 class=\"px-2 pt-2 text-lg font-semibold mb-2\">\n            {{ __(\"Settings\") }}\n          </h1>\n          <div v-for=\"tab in tabs\">\n            <div\n              v-if=\"!tab.hideLabel\"\n              class=\"mb-2 mt-3 flex gap-1.5 px-1 text-base font-medium text-ink-gray-5\"\n            >\n              <span>{{ __(tab.label) }}</span>\n            </div>\n            <nav class=\"space-y-1\">\n              <button\n                v-for=\"item in tab.items\"\n                :key=\"item.label\"\n                class=\"flex h-7 w-full items-center gap-2 rounded px-2 py-1\"\n                :class=\"[\n                  activeTab?.label == item.label\n                    ? 'bg-white shadow-sm'\n                    : 'hover:bg-gray-100',\n                ]\"\n                @click=\"() => onTabChange(item)\"\n              >\n                <component :is=\"item.icon\" class=\"h-4 w-4 text-gray-700\" />\n                <span class=\"text-base text-gray-800\">\n                  {{ item.label }}\n                </span>\n              </button>\n            </nav>\n          </div>\n        </div>\n        <div class=\"flex flex-1 flex-col bg-surface-modal\">\n          <component\n            :is=\"activeTab.component\"\n            v-if=\"activeTab\"\n            class=\"h-full flex flex-col w-full\"\n          />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n  <ConfirmDialog\n    v-model=\"showConfirmDialog\"\n    :title=\"__('Unsaved changes')\"\n    :message=\"\n      __('Are you sure you want to change tabs? Unsaved changes will be lost.')\n    \"\n    :onConfirm=\"\n      () => {\n        if (nextActiveTab !== null) {\n          activeTab = nextActiveTab;\n        }\n        nextActiveTab = null;\n        showConfirmDialog = false;\n        disableSettingModalOutsideClick = false;\n      }\n    \"\n    :onCancel=\"\n      () => {\n        nextActiveTab = null;\n      }\n    \"\n  />\n</template>\n<script setup lang=\"ts\">\nimport { Dialog } from \"frappe-ui\";\nimport { ModelRef, ref, watch } from \"vue\";\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport {\n  activeTab,\n  disableSettingModalOutsideClick,\n  nextActiveTab,\n  tabs,\n} from \"./settingsModal\";\n\nconst show: ModelRef<boolean> = defineModel();\n\nconst showConfirmDialog = ref(false);\n\nfunction onTabChange(tab) {\n  if (!disableSettingModalOutsideClick.value) {\n    activeTab.value = tab;\n    return;\n  }\n  nextActiveTab.value = tab;\n  showConfirmDialog.value = true;\n}\n</script>\n","import { globalStore } from \"@/stores/globalStore\";\nimport { createResource } from \"frappe-ui\";\nimport { ref } from \"vue\";\n\nconst baseEndpoint = ref(\"https://frappecloud.com\");\nconst siteName = ref(\"\");\n\nexport const currentSiteInfo = createResource({\n  url: \"frappe.integrations.frappe_providers.frappecloud_billing.current_site_info\",\n  cache: \"currentSiteInfo\",\n  onSuccess: (data) => {\n    baseEndpoint.value = data.base_url;\n    siteName.value = data.site_name;\n  },\n});\n\nexport const confirmLoginToFrappeCloud = () => {\n  currentSiteInfo.fetch();\n\n  const { $dialog } = globalStore();\n\n  $dialog({\n    title: \"Login to Frappe Cloud?\",\n    message: \"Are you sure you want to login to your Frappe Cloud dashboard?\",\n    actions: [\n      {\n        label: \"Confirm\",\n        variant: \"solid\",\n        onClick(close: Function) {\n          loginToFrappeCloud();\n          close();\n        },\n      },\n    ],\n  });\n};\n\nconst loginToFrappeCloud = () => {\n  window.open(\n    `${baseEndpoint.value}/dashboard/sites/${siteName.value}`,\n    \"_blank\"\n  );\n};\n","<template>\n  <div\n    class=\"flex select-none flex-col border-r border-gray-200 bg-gray-50 p-2 text-base duration-300 ease-in-out\"\n    :style=\"{\n      'min-width': width,\n      'max-width': width,\n    }\"\n  >\n    <UserMenu class=\"mb-2\" :options=\"profileSettings\" />\n    <SidebarLink\n      v-if=\"!isCustomerPortal\"\n      :label=\"__('Search')\"\n      class=\"my-0.5\"\n      :icon=\"LucideSearch\"\n      :on-click=\"() => openCommandPalette()\"\n      :is-expanded=\"isExpanded\"\n    >\n      <template #right>\n        <span class=\"flex items-center gap-0.5 font-medium text-gray-600\">\n          <component :is=\"device.modifierIcon\" class=\"h-3 w-3\" />\n          <span>K</span>\n        </span>\n      </template>\n    </SidebarLink>\n    <SidebarLink\n      v-if=\"!isCustomerPortal\"\n      class=\"relative my-0.5 min-h-7\"\n      :label=\"__('Dashboard')\"\n      :icon=\"LucideLayoutDashboard\"\n      :to=\"'Dashboard'\"\n      :is-active=\"isActiveTab('Dashboard')\"\n      :is-expanded=\"isExpanded\"\n    />\n    <div class=\"mb-4\" v-if=\"!isCustomerPortal\">\n      <div\n        v-if=\"notificationStore.unread\"\n        class=\"absolute size-1.5 translate-x-6 translate-y-1 rounded-full bg-blue-400 left-1\"\n        theme=\"gray\"\n        variant=\"solid\"\n      />\n      <SidebarLink\n        class=\"relative my-0.5\"\n        :label=\"__('Notifications')\"\n        :icon=\"LucideBell\"\n        :on-click=\"() => notificationStore.toggle()\"\n        :is-expanded=\"isExpanded\"\n      >\n        <template #right>\n          <Badge\n            v-if=\"isExpanded && notificationStore.unread\"\n            :label=\"\n              notificationStore.unread > 9 ? '9+' : notificationStore.unread\n            \"\n            theme=\"gray\"\n            variant=\"subtle\"\n          />\n        </template>\n      </SidebarLink>\n    </div>\n    <div class=\"overflow-y-auto overflow-x-hidden\">\n      <div v-for=\"view in allViews\" :key=\"view.label\">\n        <div\n          v-if=\"!view.hideLabel && !isExpanded && view.views?.length\"\n          class=\"mx-2 my-2 h-1 border-b\"\n        />\n        <Section\n          :label=\"view.label\"\n          :hideLabel=\"view.hideLabel\"\n          :opened=\"view.opened\"\n        >\n          <template #header=\"{ opened, hide, toggle }\">\n            <div\n              v-if=\"!hide\"\n              class=\"flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out\"\n              :class=\"\n                !isExpanded\n                  ? 'ml-0 h-0 overflow-hidden opacity-0'\n                  : 'mt-4 h-7 w-auto opacity-100'\n              \"\n              @click=\"toggle()\"\n            >\n              <FeatherIcon\n                name=\"chevron-right\"\n                class=\"h-4 text-ink-gray-9 transition-all duration-300 ease-in-out\"\n                :class=\"{ 'rotate-90': opened }\"\n              />\n              <span>{{ view.label }}</span>\n            </div>\n          </template>\n          <nav class=\"flex flex-col\">\n            <SidebarLink\n              v-for=\"link in view.views\"\n              :icon=\"link.icon\"\n              :label=\"link.label\"\n              :to=\"link.to\"\n              :key=\"link.label\"\n              :is-expanded=\"isExpanded\"\n              :is-active=\"isActiveTab(link.to)\"\n              class=\"my-0.5 emoji\"\n              :onClick=\"link.onClick\"\n            />\n          </nav>\n        </Section>\n      </div>\n    </div>\n    <div class=\"grow\" />\n    <div class=\"flex flex-col gap-2\">\n      <TrialBanner\n        v-if=\"isFCSite && !isCustomerPortal\"\n        :isSidebarCollapsed=\"!isExpanded\"\n      />\n      <GettingStartedBanner\n        v-if=\"showOnboardingBanner\"\n        :isSidebarCollapsed=\"!isExpanded\"\n        appName=\"helpdesk\"\n      />\n      <SidebarLink\n        v-if=\"isOnboardingStepsCompleted && !isCustomerPortal\"\n        :icon=\"HelpIcon\"\n        :label=\"__('Help')\"\n        :is-expanded=\"isExpanded\"\n        @click=\"\n          () => {\n            showHelpModal = minimize ? true : !showHelpModal;\n            minimize = !showHelpModal;\n          }\n        \"\n      />\n\n      <SidebarLink\n        :icon=\"isExpanded ? LucideArrowLeftFromLine : LucideArrowRightFromLine\"\n        :is-active=\"false\"\n        :is-expanded=\"isExpanded\"\n        :label=\"isExpanded ? __('Collapse') : __('Expand')\"\n        :on-click=\"() => (isExpanded = !isExpanded)\"\n      />\n    </div>\n    <TrialBanner\n      v-if=\"isFCSite && !isCustomerPortal\"\n      :isSidebarCollapsed=\"!isExpanded\"\n    />\n    <SettingsModal v-model=\"showSettingsModal\" />\n    <ShortcutsModal v-model=\"showShortcutsModal\" />\n    <HelpModal\n      v-if=\"showHelpModal\"\n      v-model=\"showHelpModal\"\n      v-model:articles=\"articles\"\n      appName=\"helpdesk\"\n      title=\"Frappe Helpdesk\"\n      :logo=\"logo\"\n      docsLink=\"https://docs.frappe.io/helpdesk\"\n      :afterSkip=\"(step) => capture('onboarding_step_skipped_' + step)\"\n      :afterSkipAll=\"() => capture('onboarding_steps_skipped')\"\n      :afterReset=\"(step) => capture('onboarding_step_reset_' + step)\"\n      :afterResetAll=\"() => capture('onboarding_steps_reset')\"\n    />\n    <IntermediateStepModal\n      v-model=\"showIntermediateModal\"\n      :currentStep=\"currentStep\"\n    />\n    <CP v-model=\"showCommandPalette\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport HDLogo from \"@/assets/logos/HDLogo.vue\";\nimport { Section, SidebarLink } from \"@/components\";\nimport Apps from \"@/components/Apps.vue\";\nimport CP from \"@/components/command-palette/CP.vue\";\nimport { FrappeCloudIcon, InviteCustomer } from \"@/components/icons\";\nimport ShortcutsModal from \"@/components/modals/ShortcutsModal.vue\";\nimport SettingsModal from \"@/components/Settings/SettingsModal.vue\";\nimport UserMenu from \"@/components/UserMenu.vue\";\nimport { useDevice } from \"@/composables\";\nimport { confirmLoginToFrappeCloud } from \"@/composables/fc\";\nimport { useScreenSize } from \"@/composables/screen\";\nimport { currentView, useView } from \"@/composables/useView\";\nimport { showNewContactModal } from \"@/pages/desk/contact/dialogState\";\nimport {\n  showAssignmentModal,\n  showCommentBox,\n  showEmailBox,\n} from \"@/pages/ticket/modalStates\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { useNotificationStore } from \"@/stores/notification\";\nimport { useSidebarStore } from \"@/stores/sidebar\";\nimport { capture } from \"@/telemetry\";\nimport { isCustomerPortal } from \"@/utils\";\nimport { call } from \"frappe-ui\";\nimport {\n  GettingStartedBanner,\n  HelpModal,\n  IntermediateStepModal,\n  minimize,\n  showHelpModal,\n  TrialBanner,\n  useOnboarding,\n} from \"frappe-ui/frappe\";\n\nimport { HelpIcon } from \"frappe-ui/icons\";\nimport { storeToRefs } from \"pinia\";\nimport { computed, h, markRaw, onMounted, ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport {\n  agentPortalSidebarOptions,\n  customerPortalSidebarOptions,\n} from \"./layoutSettings\";\n\nimport { useShortcut } from \"@/composables/shortcuts\";\nimport { useTelephonyStore } from \"@/stores/telephony\";\nimport LucideArrowLeftFromLine from \"~icons/lucide/arrow-left-from-line\";\nimport LucideArrowRightFromLine from \"~icons/lucide/arrow-right-from-line\";\nimport LucideBell from \"~icons/lucide/bell\";\nimport FileText from \"~icons/lucide/file-text\";\nimport Globe from \"~icons/lucide/globe\";\nimport LucideLayoutDashboard from \"~icons/lucide/layout-dashboard\";\nimport LucideMail from \"~icons/lucide/mail\";\nimport MailOpen from \"~icons/lucide/mail-open\";\nimport MessageCircle from \"~icons/lucide/message-circle\";\nimport LucideSearch from \"~icons/lucide/search\";\nimport Ticket from \"~icons/lucide/ticket\";\nimport Timer from \"~icons/lucide/timer\";\nimport UserPen from \"~icons/lucide/user-pen\";\nimport LucideUserPlus from \"~icons/lucide/user-plus\";\nimport { setActiveSettingsTab } from \"../Settings/settingsModal\";\nimport { __ } from \"@/translation\";\n\nconst { isMobileView } = useScreenSize();\n\nconst route = useRoute();\nconst router = useRouter();\nconst authStore = useAuthStore();\nconst notificationStore = useNotificationStore();\nconst { isExpanded, width } = storeToRefs(useSidebarStore());\nconst device = useDevice();\nconst telephonyStore = useTelephonyStore();\nconst { isCallingEnabled } = storeToRefs(telephonyStore);\n\nconst showSettingsModal = ref(false);\nconst showShortcutsModal = ref(false);\nconst showCommandPalette = ref(false);\n\nconst { pinnedViews, publicViews } = useView();\n\nconst isFCSite = ref(window.is_fc_site);\n\nconst allViews = computed(() => {\n  let items = isCustomerPortal.value\n    ? customerPortalSidebarOptions\n    : agentPortalSidebarOptions;\n\n  if (!isCallingEnabled.value) {\n    items = items.filter((item) => item.label !== __(\"Call Logs\"));\n  }\n\n  const options = [\n    {\n      label: __(\"All Views\"),\n      hideLabel: true,\n      opened: true,\n      views: items,\n    },\n  ];\n  if (publicViews.value?.length && !isCustomerPortal.value) {\n    options.push({\n      label: __(\"Public Views\"),\n      opened: true,\n      hideLabel: false,\n      views: parseViews(publicViews.value),\n    });\n  }\n  if (pinnedViews.value?.length) {\n    options.push({\n      label: __(\"Private Views\"),\n      opened: true,\n      hideLabel: false,\n      views: parseViews(pinnedViews.value),\n    });\n  }\n  return options;\n});\n\nfunction parseViews(views) {\n  return views.map((view) => {\n    return {\n      label: view.label,\n      icon: view.icon,\n      to: {\n        name: view.route_name,\n        query: { view: view.name },\n      },\n      onClick: () => {\n        currentView.value = {\n          label: view.label,\n          icon: view.icon,\n        };\n      },\n    };\n  });\n}\n\nconst customerPortalDropdown = computed(() => [\n  {\n    label: __(\"Log out\"),\n    icon: \"log-out\",\n    onClick: () => authStore.logout(),\n  },\n]);\n\nconst agentPortalDropdown = computed(() => [\n  {\n    component: markRaw(Apps),\n  },\n  {\n    label: __(\"Customer portal\"),\n    icon: \"users\",\n    onClick: () => {\n      const path = router.resolve({ name: \"TicketsCustomer\" });\n      window.open(path.href);\n    },\n  },\n  {\n    icon: \"life-buoy\",\n    label: __(\"Support\"),\n    onClick: () => window.open(\"https://t.me/frappedesk\"),\n  },\n  {\n    icon: \"book-open\",\n    label: __(\"Docs\"),\n    onClick: () => window.open(\"https://docs.frappe.io/helpdesk\"),\n  },\n  {\n    label: __(\"Login to Frappe Cloud\"),\n    icon: FrappeCloudIcon,\n    onClick: () => confirmLoginToFrappeCloud(),\n    condition: () => !isMobileView.value && window.is_fc_site,\n  },\n  {\n    label: __(\"Shortcuts\"),\n    icon: h(LucideKeyboard),\n    onClick: () => (showShortcutsModal.value = true),\n  },\n  {\n    label: __(\"Settings\"),\n    icon: \"settings\",\n    onClick: () => (showSettingsModal.value = true),\n  },\n  {\n    group: __(\"Danger\"),\n    hideLabel: true,\n    items: [\n      {\n        label: __(\"Log out\"),\n        icon: \"log-out\",\n        onClick: () => authStore.logout(),\n      },\n    ],\n  },\n]);\n\nconst profileSettings = computed(() => {\n  return isCustomerPortal.value\n    ? customerPortalDropdown.value\n    : agentPortalDropdown.value;\n});\n\nfunction isActiveTab(to: any) {\n  if (route.query.view) {\n    return route.query.view == to?.query?.view;\n  }\n  return route.name === to;\n}\n\nfunction openCommandPalette() {\n  showCommandPalette.value = true;\n}\n\nconst logo = h(\n  HDLogo,\n  {\n    class: \"h-12 w-12\",\n  },\n  null\n);\n\nconst showOnboardingBanner = computed(() => {\n  return (\n    !isCustomerPortal.value &&\n    !isOnboardingStepsCompleted.value &&\n    authStore.isManager\n  );\n});\n\nconst steps = [\n  {\n    name: \"setup_email_account\",\n    title: __(\"Connect your support email\"),\n    completed: false,\n    icon: markRaw(LucideMail),\n    onClick: () => {\n      minimize.value = true;\n      showSettingsModal.value = true;\n      setActiveSettingsTab(\"Email Accounts\");\n    },\n  },\n  {\n    name: \"invite_agents\",\n    title: __(\"Invite agents\"),\n    completed: false,\n    icon: markRaw(LucideUserPlus),\n    onClick: () => {\n      minimize.value = true;\n      showSettingsModal.value = true;\n      setActiveSettingsTab(\"Invite Agents\");\n    },\n  },\n  {\n    name: \"setup_sla\",\n    title: __(\"Setup SLA\"),\n    completed: false,\n    icon: markRaw(Timer),\n    onClick: () => {\n      setActiveSettingsTab(\"SLA Policies\");\n      showSettingsModal.value = true;\n      minimize.value = true;\n    },\n  },\n  {\n    name: \"create_first_ticket\",\n    title: __(\"Create a ticket\"),\n    completed: false,\n    icon: markRaw(Ticket),\n    onClick: () => {\n      router.push({ name: \"TicketAgentNew\" });\n      minimize.value = true;\n    },\n  },\n  {\n    name: \"assign_to_agent\",\n    title: __(\"Assign a ticket to an agent\"),\n    completed: false,\n    icon: markRaw(UserPen),\n    onClick: async () => {\n      await handleFirstTicketNavigation();\n      showAssignmentModal.value = true;\n      minimize.value = true;\n    },\n  },\n  {\n    name: \"reply_on_ticket\",\n    title: __(\"Reply on a ticket\"),\n    completed: false,\n    icon: markRaw(MailOpen),\n    onClick: async () => {\n      await handleFirstTicketNavigation();\n      showEmailBox.value = true;\n      showCommentBox.value = false;\n      minimize.value = true;\n    },\n  },\n  {\n    name: \"comment_on_ticket\",\n    title: __(\"Add a comment on a ticket\"),\n    completed: false,\n    icon: markRaw(MessageCircle),\n    onClick: async () => {\n      await handleFirstTicketNavigation();\n      showCommentBox.value = true;\n      showEmailBox.value = false;\n      minimize.value = true;\n    },\n  },\n  {\n    name: \"first_article\",\n    title: __(\"Create an article\"),\n    completed: false,\n    icon: markRaw(FileText),\n    onClick: async () => {\n      const generalCategory = await getGeneralCategory();\n      router.push({\n        name: \"NewArticle\",\n        query: {\n          title: __(\"General\"),\n        },\n        params: { id: generalCategory },\n      });\n      minimize.value = true;\n    },\n  },\n  {\n    name: \"add_invite_contact\",\n    title: __(\"Create & invite a contact\"),\n    completed: false,\n    icon: markRaw(InviteCustomer),\n    onClick: () => {\n      minimize.value = true;\n      currentStep.value = {\n        title: __(\"Create & invite a contact\"),\n        buttonLabel: __(\"Create\"),\n        videoURL: \"/assets/helpdesk/desk/videos/createInviteContact.mp4\",\n        onClick: async () => {\n          showIntermediateModal.value = false;\n          router.push({ name: \"ContactList\" });\n          showNewContactModal.value = true;\n        },\n      };\n      showIntermediateModal.value = true;\n    },\n  },\n  {\n    name: \"explore_customer_portal\",\n    title: __(\"Explore customer portal\"),\n    completed: false,\n    icon: markRaw(Globe),\n    onClick: () => {\n      window.open(\"/helpdesk/my-tickets\", \"_blank\");\n      updateOnboardingStep(\"explore_customer_portal\");\n      minimize.value = true;\n    },\n  },\n];\n\nconst articles = ref([\n  {\n    title: \"Introduction\",\n    opened: false,\n    subArticles: [\n      { name: \"introduction\", title: \"Introduction\" },\n      { name: \"setting-up\", title: \"Setting up\" },\n    ],\n  },\n  {\n    title: \"Getting Started\",\n    opened: false,\n    subArticles: [\n      {\n        name: \"lesson-1-your-first-ticket\",\n        title: \"Creating a ticket\",\n      },\n      {\n        name: \"lesson-2understanding-ticket-view\",\n        title: \"Understanding ticket view\",\n      },\n      {\n        name: \"lesson-3-agents-teams\",\n        title: \"Agents & Teams\",\n      },\n      {\n        name: \"customers-contacts\",\n        title: \"Customers & Contacts\",\n      },\n      {\n        name: \"lesson-4-knowledge-base\",\n        title: \"Knowledge Base\",\n      },\n      {\n        name: \"customer-portal\",\n        title: \"Customer Portal\",\n      },\n    ],\n  },\n  {\n    title: \"Masters\",\n    opened: false,\n    subArticles: [\n      { name: \"ticket\", title: \"Ticket\" },\n      { name: \"agent\", title: \"Agent\" },\n      { name: \"team\", title: \"Team\" },\n      { name: \"contact\", title: \"Contact\" },\n      { name: \"customer\", title: \"Customer\" },\n      { name: \"knowledge-base\", title: \"Knowledge Base\" },\n      { name: \"canned-response\", title: \"Canned Responses\" },\n      { name: \"service-level-agreement\", title: \"Service Level Agreement\" },\n      { name: \"ticket-type\", title: \"Ticket Type\" },\n      { name: \"ticket-priority\", title: \"Ticket Priority\" },\n    ],\n  },\n  {\n    title: \"Customizations\",\n    opened: false,\n    subArticles: [\n      { name: \"custom-actions\", title: \"Custom Actions\" },\n      { name: \"field-dependency\", title: \"Field Dependency\" },\n      { name: \"custom-views\", title: \"Custom Views\" },\n      {\n        name: \"settings\",\n        title: \"Settings\",\n      },\n    ],\n  },\n  {\n    title: \"Frappe Helpdesk Mobile\",\n    opened: false,\n    subArticles: [\n      { name: \"pwa-installation\", title: \"Mobile App Installation\" },\n    ],\n  },\n]);\n\nconst showIntermediateModal = ref(false);\nconst currentStep = ref({});\n\nconst { isOnboardingStepsCompleted, setUp, updateOnboardingStep } =\n  useOnboarding(\"helpdesk\");\n\nasync function handleFirstTicketNavigation() {\n  const ticket = await getFirstTicket();\n\n  if (ticket) {\n    router.push({\n      name: \"TicketAgent\",\n      params: { ticketId: ticket },\n    });\n  } else {\n    router.push({ name: \"TicketAgentNew\" });\n  }\n}\n\nasync function getFirstTicket() {\n  let ticket = localStorage.getItem(\"firstTicket\");\n  if (ticket) return ticket;\n  return await call(\"helpdesk.api.onboarding.get_first_ticket\");\n}\n\nasync function getGeneralCategory() {\n  let generalCategory = localStorage.getItem(\"generalCategoryId\");\n  if (!generalCategory) {\n    generalCategory = await call(\n      \"helpdesk.api.onboarding.get_general_category_id\"\n    );\n    if (!generalCategory) return;\n    localStorage.setItem(\"generalCategoryId\", generalCategory);\n  }\n  return generalCategory;\n}\n\nfunction setUpOnboarding() {\n  if (!authStore.isManager) return;\n  setUp(steps);\n  useShortcut({ key: \"h\", meta: true }, () => {\n    showHelpModal.value = !showHelpModal.value;\n  });\n}\n\nonMounted(() => {\n  setUpOnboarding();\n  if (isCustomerPortal.value) return;\n  useShortcut({ key: \",\", meta: true }, () => {\n    showSettingsModal.value = !showSettingsModal.value;\n  });\n});\n</script>\n","<template>\n  <div class=\"flex h-screen w-screen\">\n    <Sidebar />\n    <div class=\"flex-1 flex flex-col h-full overflow-auto\">\n      <AppHeader />\n      <slot />\n    </div>\n    <Notifications />\n    <CommandPalette />\n  </div>\n</template>\n<script setup>\nimport { Notifications, CommandPalette } from \"@/components\";\nimport AppHeader from \"./AppHeader.vue\";\nimport Sidebar from \"./Sidebar.vue\";\n</script>\n"],"names":["useDatePicker","currentYear","ref","currentMonth","today","computed","getDate","dates","monthIndex","year","firstDayOfMonth","lastDayOfMonth","leftPaddingCount","rightPaddingCount","leftPadding","getDatesAfter","rightPadding","daysInMonth","getDaysInMonth","datesInMonth","lastDate","finalPadding","datesAsWeeks","computedDates","week","formattedMonth","date","prevMonth","changeMonth","nextMonth","adder","_hoisted_1","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","props","__props","isDependent","step","dependsOnStep","steps","s","dependsOnTooltip","stepsCompleted","totalSteps","completedPercentage","skip","skipAll","reset","resetAll","useOnboarding","_createBlock","_resolveDynamicComponent","_hoisted_2","_toDisplayString","_hoisted_3","_unref","_hoisted_4","_hoisted_5","_createVNode","Badge","_hoisted_6","Button","_hoisted_7","_Fragment","_renderList","_withModifiers","Tooltip","_normalizeClass","searchInput","search","articles","_useModel","parsedArticles","a","filteredSubArticles","subArticle","openDocs","openDoc","name","onMounted","_b","_a","TextInput","$event","FeatherIcon","_withDirectives","_hoisted_8","_hoisted_10","_hoisted_11","_vShow","showHelpCenter","syncStatus","isOnboardingStepsCompleted","show","headingTitle","options","StepsIcon","resetOnboardingSteps","item","footerItems","HelpIcon","minimize","Dropdown","MaximizeIcon","MinimizeIcon","OnboardingSteps","HelpCenter","openOnboarding","showHelpModal","Dialog","_renderSlot","trialMessage","trialEndDays","showBanner","baseEndpoint","siteName","trialTitle","createResource","data","calculateTrialEndDays","trialEndDate","diffTime","upgradePlan","_createTextVNode","LightningIcon","dayjs","router","useRouter","useDevice","query","navigationItems","items","__","h","LucideTicket","LucideBookOpen","isCustomerPortal","CPGroup","fullSearchItem","LucideFileSearch","groupedSearchResults","results","onInput","e","onSelection","value","hideCommandPalette","addKeyboardShortcut","useShortcut","toggleCommandPalette","watch","onBeforeUnmount","Combobox","_component_LucideSearch","ComboboxInput","ComboboxOptions","group","ComboboxOption","_withCtx","active","notificationStore","useNotificationStore","sidebarStore","useSidebarStore","target","onClickOutside","handleNotificationClick","n","getRoute","_normalizeStyle","_component_Button","_component_LucideCheckCheck","_component_LucideX","_component_RouterLink","UserAvatar","_hoisted_9","_hoisted_12","_hoisted_13","_component_LucideBell","user","useAuthStore","telephonyStore","useTelephonyStore","CallUI","shiftKey","open","metaIcon","shortcutGroups","shortcut","index","key","kIndex","_sfc_main","error","_component_Dialog","$data","$props","$options","PAGE_LENGTH","agents","createListResource","activeFilter","useAgents","filters","reactive","newValue","newVal","updateAgent","agent","isActive","$slots","getUserRole","updateUserRoleCache","useUserStore","isManager","agentStore","getRoles","agentRole","roles","RoleOption","updateRole","role","onClick","selected","icon","LucideCheck","newRole","call","toast","getOptions","dropdownOptions","onUnmounted","SettingsLayoutBase","setActiveSettingsTab","_component_LucidePlus","_component_Input","AgentIcon","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","Avatar","_hoisted_18","_hoisted_19","_component_Badge","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","LogoGmail","LogoOutlook","LogoSendgrid","LogoSparkpost","LogoYahoo","LogoYandex","LogoFrappeMail","fixedFields","incomingOutgoingFields","popularProviderFields","customProviderFields","services","emailIcon","validateInputs","state","isCustom","validateEmailWithZod","emit","__emit","updateOnboardingStep","selectedService","fields","handleSelect","service","addEmailRes","val","createEmailAccount","EmailProviderIcon","CircleAlert","field","_component_FormControl","_component_ErrorMessage","badgeTitleColor","color","emailAccounts","accounts","account","emailAccount","EmailAccountCard","_component_EmailIcon","_c","_d","info","isCustomService","loading","loadingPull","useStorage","updateAccount","old","updatedEmailAccount","nameChanged","otherFieldsChanged","isDirty","values","callRenameDoc","succesHandler","errorHandler","callSetValue","pullEmails","accountData","updateStep","newStep","EmailAdd","EmailAccountList","EmailEdit","defaultAssignmentDays","assignmentRuleData","resetAssignmentRuleData","assignmentRulesActiveScreen","validateAssignmentRule","skipAssignConditionCheck","skipUnAssignConditionCheck","validateField","assignmentRulesErrors","validateConditions","_e","_f","resetAssignmentRuleErrors","$attrs","emails","showOptions","tempSelection","storeToRefs","useAgentStore","agentsList","list","removeValue","v","removeLastValue","emailRef","nextTick","setFocus","onSelect","handleEnter","_component_FeatherIcon","ComboboxRoot","o","ComboboxAnchor","ComboboxPortal","ComboboxContent","ComboboxViewport","ComboboxEmpty","ComboboxItem","getUser","teamsList","inject","TeamListResourceSymbol","teamRestrictionApplied","useConfigStore","invitees","_teamName","team","createDocumentResource","ignoreRestrictions","teamMembers","_user","removeMemberFromTeam","member","users","u","addMember","_users","showRename","renameDialogOptions","close","renameTeam","params","showDelete","markRaw","Settings","LucideLock","LucideUnlock","isConfirmingDelete","memberDropdownOptions","ConfirmDelete","_component_LucideMoreHorizontal","AgentSelector","m","idx","AgentCard","UserIcon","newTeamTitle","newTeam","args","dialog","teamName","renameTeamResource","teamsSearchQuery","teams","showForm","EditIcon","deleteTeam","_component_AgentIcon","Input","NewTeamModal","RenameTeamModal","teamData","showConfirmDialog","errors","goBack","confirmDialogInfo","saveTeam","validateData","FormControl","ErrorMessage","FormLabel","provide","TeamsList","NewTeam","TeamEdit","defaultSupportAndResolution","slaData","resetSlaData","slaActiveScreen","slaDataErrors","resetSlaDataErrors","validateSlaData","skipConditionCheck","prioritiesError","priority","priorityNum","priorityNames","p","uniquePriorities","validWorkdays","day","workdayMap","duplicateWorkdays","invalidTimeRanges","startTimeStr","endTimeStr","parseTime","timeStr","hours","minutes","startTime","endTime","slaPolicyList","SlaPolicyListResourceSymbol","duplicateDialog","deleteSla","duplicate","onToggle","Switch","goToNew","LoadingIndicator","ShieldCheck","sla","SlaPolicyListItem","slaSearchQuery","_createSlots","SlaPolicyList","filterableFields","GroupIcon","UnGroupIcon","TemplateOption","typeCheck","typeLink","typeNumber","typeSelect","typeString","typeDate","typeRating","toggleConjunction","updateField","resetConditionValue","getValueControl","operator","fieldData","f","fieldtype","_options","getSelectOptions","Link","DateRangePicker","DatePicker","DateTimePicker","StarRating","updateValue","updateOperator","event","oldOperatorValue","newOperatorValue","isSameTypeOperator","getDefaultValue","getOperators","fieldname","op","oldOperator","newOperator","textOperators","Autocomplete","CFConditions","getConjunction","conjunction","condition","turnIntoGroup","isGroupCondition","removeCondition","conditionIndex","unGroupConditions","newConditions","c","i","CFCondition","addCondition","watchDebounced","workDayData","deleteWorkDay","formatTimeToHHMMSS","seconds","resetForm","validateTimeRange","startHours","startMinutes","endHours","endMinutes","validateForm","isWorkdayValid","isStartTimeValid","isEndTimeValid","onSave","itemIndex","updatedItem","newWorkDay","isOpen","workDayOptions","editWorkDay","formatTime","time","getGridTemplateColumnsForTable","column","option","_vModelSelect","WorkDayModal","allDays","addWorkDay","usedDays","nextDay","columns","row","SlaWorkDaysListItem","holidayListActiveScreen","holidayDataErrors","holidayData","resetHolidayData","validateHoliday","startDate","endDate","updateWeeklyOffDates","newHolidays","weeklyOffs","getWeeklyOffDates","getWeekOfMonth","firstDayOfWeek","offset","getWeeklyOffDateList","weeklyOff","holidays","repetition","start","end","dateList","targetDay","existingDates","currentDate","useAllOccurrences","currentDateObj","currentDateStart","shouldIncludeDate","d","createNewHolidayList","editHolidayList","holidayListData","NestedPopover","holiday","SlaWorkDaysList","initialDelay","repeatDelay","normalizedOptions","displayOptions","hoursInput","minutesInput","secondsInput","activeInterval","activeAction","isMouseDown","actionTimeout","hoursValue","num","newTime","getMinutes","getSeconds","updateTime","minutesValue","getHours","secondsValue","clearActiveInterval","startAction","action","handlePointerUp","emitEvent","validateAndUpdateTime","unit","increment","decrement","formatTimeHMS","days","remainingSeconds","formattedTime","priorityOptions","priorityData","resolutionTime","responseTime","deleteItem","Popover","togglePopover","DurationPicker","Checkbox","editItem","gridTemplateColumns","onDefaultPriorityChange","defaultPriority","EditResponseResolutionModal","addRow","existingPriorities","availablePriorities","newPriority","SlaPriorityListItem","statuses","useTicketStatusStore","openStatuses","initialData","useNewUI","isOldSla","deskUrl","getSlaData","condition_json","newData","conditionsAvailable","conditionsJsonAvailable","disableSettingModalOutsideClick","saveSla","validationErrors","updateSla","createSla","defaultTicketStatus","ticketReopenStatus","convertToConditions","toggleEnabled","toggleDefaultSla","beforeUnloadHandler","SlaAssignmentConditions","getFormattedDate","_component_LucideCalendar","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","SlaPriorityList","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","SlaStatusList","SlaHolidays","ConfirmDialog","slaPolicyListData","SlaPolicies","SlaPolicyView","holidayList","HolidayListResourceSymbol","deleteHolidayList","Briefcase","HolidayListItem","holidaySearchRef","HolidayList","holidayDate","fromDate","toDate","holidayExists","holidayIndex","editHoliday","deleteHoliday","holidayToDelete","editDate","AddHolidayModal","module","this","t","getRepetitionText","parts","last","weekday","isSameOrBefore","recurringHolidayData","workDays","availableWorkDays","_","addHoliday","saveHoliday","all","first","second","third","fourth","fifth","Select","daw","popoverTimeouts","dateValue","handleMouseEnter","callback","handleMouseLeave","isDateInRange","checkDate","from","to","isHoliday","inputDate","isWeekOff","getHolidayDescription","htmlToText","newYear","newMonth","closePopover","openPopover","closeDropdown","openDropdown","visibleMonths","months","startYear","endYear","yearsList","yearList","onYearChange","goToToday","month","HLCalender","holidayListView","getHolidayData","updateDuration","updateHoliday","createHoliday","updateHolidayResource","RecurringHolidaysList","TabButtons","HolidaysTableView","HolidaysCalendarView","Holidays","HolidayView","fieldDependenciesList","hiddenChildFields","_fields","parent","child","optionsMap","getFieldOptions","_component_Tooltip","_component_lucide_info","ComboboxButton","LucideCheckSquare","LucideSquare","_selectedOptions","q","selectedOption","arr","term","keys","lowerCaseTerm","acc","score","match","b","_component_Combobox","isComboboxOpen","_component_Popover","_normalizeProps","_guardReactiveProps","_component_LoadingIndicator","_component_ComboboxOptions","_component_ComboboxInput","_component_ComboboxOption","_mergeProps","_component_LucideSquare","_component_LucideCheckSquare","fieldCriteriaState","getField","getMeta","selections","childField","parentField","fieldCriteriaOptions","handleCriteriaSelection","stateKey","_values","DocumentationButton","MultiSelectCombobox","filteredParentFieldValues","filteredChildFieldValues","parentPlaceholder","childPlaceholder","handleParentValueClick","handleChildValueClick","childValue","getSelectedChildValueCount","toggleAllChildValues","handleSelectAllChildValues","toggleCheckboxLabel","selectedCount","isChildValueSelected","_component_LucideChevronRight","isNew","dependencyLabel","getFieldDependencyLabel","getFields","parentFields","notAllowedFields","createUpdateFieldDependency","stringifyParentChildMapping","fieldDependency","parseMapping","parseFieldCriteria","mapping","criteria","_selections","handleFieldValues","isParentField","fieldsToHide","handleBackNavigation","handleSubmit","successMessage","newParentField","newChildField","FieldDependencyFieldsSelection","FieldDependencyValueSelection","FieldDependencyCriteria","$emit","rowName","handleSwitchToggle","FieldDependencyIcon","fieldDependencyName","FieldDependencyList","FieldDependency","authStore","isAdmin","roleToLabel","roleOptions","managerRoleOption","roleDescription","roleOption","onSubmit","inviteByEmailResource","getInviteByEmailRoles","resetInputValues","emailsToStr","emailsStr","pendingInvitesResource","cancelInviteResource","rolesToLabel","rolesSt","selectedRole","res","x","invite","assignmentRulesListData","AssignmentRuleListResourceSymbol","deleteAssignmentRule","onPriorityChange","setAssignmentRuleValue","fieldName","assignmentRulesList","assignmentRuleSearchQuery","assignmentRule","AssignmentRuleListItem","AssignmentRulesListView","isAssignmentRuleFormDirty","filteredAgents","isEmail","addAssignee","inviteAgents","ticketRoutingOptions","removeAssignedUser","AssigneeSearch","toggleDay","dayIndex","workDay","AssignmentScheduleItem","isLoading","useNewUIForAssignCondition","useNewUIForUnassignCondition","isAssignConditionOld","isUnassignConditionOld","getAssignmentRuleData","assignConditionJson","unassignConditionJson","assignConditionsAvailable","assignConditionsJsonAvailable","unassignConditionsAvailable","unassignConditionsJsonAvailable","saveAssignmentRule","showOverwriteConfirm","updateAssignmentRule","createAssignmentRule","createAssignmentRuleResource","er","AssignmentRulesSection","_hoisted_32","_hoisted_33","_hoisted_34","AssignmentSchedule","AssigneeRules","AssignmentRulesList","AssignmentRuleView","showEye","_withKeys","LucideEyeOff","LucideEye","isDocDirty","doc","originalDoc","validateTwilio","twilio","telephonyAgent","twilioErrors","validatePhone","validateExotel","exotel","exotelErrors","number","auth","twilioApps","twilioAppsResource","telephonyProviders","save","promises","result","refreshApps","app","Password","notifications","notification","content","enabled","unsavedChanges","showUnsavedConfirm","showContentChangeConfirm","notificationDataResource","setUnsavedChanges","resetUnsavedChanges","resetContent","onResetContent","internalOnBack","__expose","_component_LucideChevronLeft","defaultContent","compRef","updateSettings","onGetDataSuccess","Notification","statusOptions","ticketStatus","_data","curNotification","notificationToComponent","ShareFeedback","Acknowledgement","ReplyToAgents","ReplyViaAgent","resetCurNotification","NotificationList","newPassword","confirmPassword","confirmPasswordMessage","updatePassword","isStrongPassword","password","_component_Password","LockKeyhole","profile","showChangePasswordModal","language","isLanguageChanged","isAccountInfoDirty","agentName","agentData","fullName","setAgent","saveLanguageResource","updateImage","file","FileUploader","openFileSelector","_error","uploading","CameraIcon","ChangePasswordModal","progress","ImageUpIcon","configStore","settingsData","HDSettingsSymbol","brandLogo","favicon","settingsResource","update","doctype","onRemove","LogoUpload","_component_ConfirmDialog","model","onReset","onChange","ticketTypeList","autoUpdateTicketStatusList","autoCloseTicketStatusList","SelectDropdown","disableSignup","settingsDataResource","transformData","isWebsiteSettingsChanged","websiteSettingsResource","saveSettingsResource","saveWebsiteSettingsResource","saveSettings","Branding","TicketSettings","WorkflowKnowledgebaseSettings","tabs","Profile","LucideMail","EmailConfig","LucideMailOpen","EmailNotifications","SettingsGear","General","LucideUser","Agents","LucideUserPlus","InviteAgents","LucideUsers","TeamsConfig","Sla","AssignmentRules","FieldDependencyConfig","PhoneIcon","Telephony","tab","activeTab","nextActiveTab","tabName","onTabChange","currentSiteInfo","confirmLoginToFrappeCloud","$dialog","globalStore","loginToFrappeCloud","isMobileView","useScreenSize","route","useRoute","isExpanded","width","device","isCallingEnabled","showSettingsModal","showShortcutsModal","showCommandPalette","pinnedViews","publicViews","useView","isFCSite","allViews","customerPortalSidebarOptions","agentPortalSidebarOptions","parseViews","views","view","currentView","customerPortalDropdown","agentPortalDropdown","Apps","path","FrappeCloudIcon","LucideKeyboard","profileSettings","isActiveTab","openCommandPalette","logo","HDLogo","showOnboardingBanner","Timer","Ticket","UserPen","handleFirstTicketNavigation","showAssignmentModal","MailOpen","showEmailBox","showCommentBox","MessageCircle","FileText","generalCategory","getGeneralCategory","InviteCustomer","currentStep","showIntermediateModal","showNewContactModal","Globe","setUp","ticket","getFirstTicket","setUpOnboarding","UserMenu","SidebarLink","LucideSearch","LucideLayoutDashboard","LucideBell","Section","opened","hide","toggle","link","TrialBanner","GettingStartedBanner","LucideArrowLeftFromLine","LucideArrowRightFromLine","SettingsModal","ShortcutsModal","HelpModal","capture","IntermediateStepModal","CP","Sidebar","AppHeader","Notifications","CommandPalette"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,75,76]}