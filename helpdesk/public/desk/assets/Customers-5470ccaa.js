import{_ as A}from"./plus-3c348a65.js";import{_ as H}from"./LayoutHeader-0efddba1.js";import{_ as q}from"./ListViewBuilder.vue_vue_type_script_setup_true_lang-2e0a7a26.js";import{d as $,m as F,n as P,p as T,W as K,S as v,r as b,e as g,k as x,g as l,w as _,l as u,h as n,b7 as U,z as R,I,c as k,aq as L,f as N,v as O,y as E,A as y,K as W}from"./index-b4c863a6.js";import{_ as M}from"./Avatar.vue_vue_type_script_setup_true_lang-89128cfb.js";import{F as j}from"./FileUploader-44680597.js";import{u as G}from"./pageMeta-b63f711b.js";import"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-c8d975a4.js";import"./dayjs-95f8111d.js";import"./knowledgeBase-2d00b929.js";import"./Link-842a8a10.js";import"./StarRating.vue_vue_type_script_setup_true_lang-4484b1d1.js";import"./DateRangePicker.vue_vue_type_script_setup_true_lang-d7f22ac0.js";import"./utils-4e66359c.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-a14f638d.js";import"./EditIcon-f33e48c1.js";import"./portal-302b46c8.js";import"./popper-0aa08b12.js";import"./MultipleAvatar.vue_vue_type_script_setup_true_lang-20371312.js";import"./ticketStatus-60f6a20e.js";import"./EmptyState.vue_vue_type_script_setup_true_lang-eb9071a9.js";import"./Dropdown-f79f7542.js";import"./index-3720151f.js";import"./TabButtons-928aa2d2.js";import"./description-c763d251.js";const J={class:"space-y-4"},Q={class:"space-y-1"},X={class:"space-y-1"},Y={class:"float-right flex space-x-2"},Z=$({__name:"NewCustomerDialog",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:F(["customerCreated"],["update:modelValue"]),setup(C,{emit:m}){const r=m,i=P(C,"modelValue"),o=T({customer:"",domain:""}),s=K({url:"frappe.client.insert",method:"POST",data:{doc:{doctype:"HD Customer",customer_name:o.customer,domain:o.domain}},onSuccess:()=>{o.customer="",o.domain="",v.success("Customer created"),r("customerCreated")},onError:c=>{v.error(c.messages[0])}});function p(){if(!o.customer){v.error("Customer name is required");return}s.submit({doc:{doctype:"HD Customer",customer_name:o.customer,domain:o.domain}})}return(c,t)=>{const e=b("Button");return g(),x("div",null,[l(n(I),{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value=a),options:{title:"Add New Customer",size:"sm"}},{"body-content":_(()=>[u("div",J,[u("div",Q,[l(n(U),{modelValue:o.customer,"onUpdate:modelValue":t[0]||(t[0]=a=>o.customer=a),label:"Customer Name",type:"text",placeholder:"Tesla Inc."},null,8,["modelValue"])]),u("div",X,[l(n(U),{modelValue:o.domain,"onUpdate:modelValue":t[1]||(t[1]=a=>o.domain=a),label:"Domain",type:"text",placeholder:"eg: tesla.com, mycompany.com"},null,8,["modelValue"])]),u("div",Y,[l(e,{label:"Add",theme:"gray",variant:"solid",onClick:R(p,["prevent"])})])])]),_:1},8,["modelValue"])])}}}),ee={class:"flex flex-col items-center gap-4 p-6"},oe={class:"text-xl font-medium text-gray-900"},te={class:"flex gap-2"},se=$({__name:"CustomerDialog",props:{name:{type:String,required:!0}},emits:["customer-updated"],setup(C,{emit:m}){const r=C,i=m,o=k({get(){var e;return(e=s.doc)==null?void 0:e.domain},set(e){s.doc.domain=e}}),s=L({doctype:"HD Customer",name:r.name,auto:!0,setValue:{onSuccess(){v.success("Customer updated")},onError(){v.error("Error updating customer")}}}),p=k(()=>{var e;return{title:(e=s.doc)==null?void 0:e.name,actions:[{label:"Save",theme:"gray",variant:"solid",onClick:()=>c()}]}});async function c(){await s.setValue.submit({domain:o.value}),i("customer-updated")}function t(e){s.setValue.submit({image:(e==null?void 0:e.file_url)||null}),i("customer-updated")}return(e,a)=>{const V=b("Button"),d=b("Input");return g(),N(n(I),{options:p.value},{"body-main":_(()=>{var D,h,B,S;return[u("div",ee,[u("div",oe,O((D=n(s).doc)==null?void 0:D.name),1),l(n(M),{size:"lg",label:(h=n(s).doc)==null?void 0:h.name,image:(B=n(s).doc)==null?void 0:B.image,class:"cursor-pointer hover:opacity-80"},null,8,["label","image"]),u("div",te,[l(n(j),{onSuccess:a[0]||(a[0]=f=>t(f))},{default:_(({uploading:f,openFileSelector:z})=>{var w;return[l(V,{label:(w=n(s).doc)!=null&&w.image?"Change photo":"Upload photo",loading:f,onClick:z},null,8,["label","loading","onClick"])]}),_:1}),(S=n(s).doc)!=null&&S.image?(g(),N(V,{key:0,label:"Remove photo",onClick:a[1]||(a[1]=f=>t(null))})):E("",!0)]),u("form",{class:"w-full",onSubmit:R(c,["prevent"])},[l(d,{modelValue:o.value,"onUpdate:modelValue":a[2]||(a[2]=f=>o.value=f),label:"Domain",placeholder:"example.com"},null,8,["modelValue"])],32)])]}),_:1},8,["options"])}}}),ae={class:"flex flex-col"},le={key:0},Ne=$({__name:"Customers",setup(C){const m=y(!1),r=y(!1),i=y(null),o=y(null);function s(t){i.value=t,r.value=!0}function p(t=!1){var e;t?r.value=!1:m.value=!1,(e=o.value)==null||e.reload()}const c=k(()=>({doctype:"HD Customer",selectable:!0,showSelectBanner:!0,columnConfig:{name:{prefix:({row:t})=>W(M,{shape:"circle",image:t.image,label:t.name,size:"sm"})}},emptyState:{title:"No Customers Found"}}));return G(()=>({title:"Customers"})),(t,e)=>{const a=A,V=b("Button");return g(),x("div",ae,[l(H,null,{"left-header":_(()=>[...e[5]||(e[5]=[u("div",{class:"text-lg font-medium text-gray-900"},"Customers",-1)])]),"right-header":_(()=>[l(V,{label:"Create",theme:"gray",variant:"solid",onClick:e[0]||(e[0]=d=>m.value=!m.value)},{prefix:_(()=>[l(a,{class:"h-4 w-4"})]),_:1})]),_:1}),l(q,{ref_key:"listViewRef",ref:o,options:c.value,onRowClick:s,onEmptyStateAction:e[1]||(e[1]=d=>m.value=!0)},null,8,["options"]),l(Z,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=d=>m.value=d),onCustomerCreated:p},null,8,["modelValue"]),r.value?(g(),x("span",le,[l(se,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=d=>r.value=d),name:i.value,onCustomerUpdated:e[4]||(e[4]=d=>p(!0))},null,8,["modelValue","name"])])):E("",!0)])}}});export{Ne as default};
//# sourceMappingURL=Customers-5470ccaa.js.map
