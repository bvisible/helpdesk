import{a0 as Q,e as s,k as _,C as U,l as m,v as J,h as e,f as x,ab as fe,a1 as de,y as M,A as te,c as z,D as pe,E as ye,a8 as ue,z as ve,b3 as Ee,F as le,G as se,ai as Oe,x as re,g as p,w as b,M as tt,j as he,t as lt,bf as $t,aR as St,p as Re,a4 as je,a7 as ze,r as we,Y as Te,b as ot,ah as Ce,bg as Ie,a9 as ie,Q as st,H as Vt,K as X,bh as Lt,bi as Rt,N as nt,am as Ue,bj as At,bk as Be,P as jt,b4 as Dt,bl as Ft,ar as qt,an as Nt,ao as It,bm as Mt,bn as zt,d as Bt,s as Et,u as Ot,a as Tt,q as me,al as Ut,X as Ht,S as Wt,W as Ve,bo as Kt,ac as Pt,bp as Gt,R as Zt}from"./index-b4c863a6.js";import{S as Jt,D as Qt,k as Yt,g as Xt,u as el,v as Me,c as Le,L as tl}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-c8d975a4.js";import"./dayjs-95f8111d.js";import"./knowledgeBase-2d00b929.js";import{a as at,_ as Ae}from"./Link-842a8a10.js";import{_ as it}from"./StarRating.vue_vue_type_script_setup_true_lang-4484b1d1.js";import{_ as ll}from"./DateRangePicker.vue_vue_type_script_setup_true_lang-d7f22ac0.js";import{a as rt,_ as ut}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-a14f638d.js";import{N as ol,G as sl,j as nl,y as al,E as il}from"./EditIcon-f33e48c1.js";import{a as rl,_ as ul}from"./MultipleAvatar.vue_vue_type_script_setup_true_lang-20371312.js";import{c as cl}from"./popper-0aa08b12.js";import{u as dl}from"./ticketStatus-60f6a20e.js";import{_ as fl}from"./EmptyState.vue_vue_type_script_setup_true_lang-eb9071a9.js";import{D as ct}from"./Dropdown-f79f7542.js";import{u as pl}from"./index-3720151f.js";import{T as ml}from"./TabButtons-928aa2d2.js";const vl={class:"flex h-full w-full flex-col items-center justify-center text-base"},hl={class:"text-xl font-medium text-ink-gray-8 mt-6"},wl={class:"mt-1 text-base text-ink-gray-5"},yl={__name:"ListEmptyState",setup(l){const o=Q("list");return(t,n)=>(s(),_("div",vl,[U(t.$slots,"default",{},()=>[m("div",hl,J(e(o).options.emptyState.title),1),m("div",wl,J(e(o).options.emptyState.description),1),e(o).options.emptyState.button?(s(),x(e(de),fe({key:0},e(o).options.emptyState.button,{class:"mt-4"}),null,16)):M("",!0)])]))}},gl=yl;function dt(l,o=!0){let t=o?"14px ":"",n=l.map(v=>{let i=v.width||1;return typeof i=="number"?i+"fr":i}).join(" ");return t+n}const He={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},_l={class:"truncate"},bl={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(l,{emit:o}){const t=l,n=o,v=te(null),i=te(null),c=z(()=>{if(typeof t.item.width=="string"){const h=parseInt(t.item.width);if(t.item.width.includes("rem"))return h*16;if(t.item.width.includes("px"))return h}return i.value.offsetWidth}),u=h=>{const k=h.clientX,V=c.value,f=j=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),v.value.style.backgroundColor="rgb(199 199 199)";let d=V+(j.clientX-k);t.item.width=`${d<50?50:d}px`,g(t.item.width)},C=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),v.value.style.backgroundColor="",window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",C)};window.addEventListener("mousemove",f),window.addEventListener("mouseup",C)},g=pl(h=>{t.item.width=h,n("columnWidthUpdated")},t.debounce),R=Q("list");return(h,k)=>(s(),_("div",{ref_key:"columnRef",ref:i,class:ue(["group relative flex items-center",l.item.align?e(He)[l.item.align]:"justify-between"])},[m("div",{class:ue(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",h.$attrs.class])},[U(h.$slots,"prefix",pe(ye({item:l.item}))),U(h.$slots,"default",{},()=>[m("div",_l,J(l.item.label),1)]),U(h.$slots,"suffix",pe(ye({item:l.item})))],2),e(R).options.resizeColumn?U(h.$slots,"resizer",pe(fe({key:0},{item:l.item})),()=>[m("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:u},[m("div",{ref_key:"resizer",ref:v,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):M("",!0)],2))}},ft=bl,kl={__name:"ListHeader",emits:["columnWidthUpdated"],setup(l,{emit:o}){const t=o,n=Q("list");return(v,i)=>(s(),_("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Oe({gridTemplateColumns:e(dt)(e(n).columns,e(n).options.selectable)})},[e(n).options.selectable?(s(),x(Ee,{key:0,class:"cursor-pointer duration-300",modelValue:e(n).allRowsSelected,onClick:ve(e(n).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):M("",!0),U(v.$slots,"default",{},()=>[(s(!0),_(le,null,se(e(n).columns,c=>(s(),x(ft,{key:c.key,item:c,onColumnWidthUpdated:u=>t("columnWidthUpdated",c)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},pt=kl,xl={class:"truncate text-base"},Cl={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(l){const o=l,t=z(()=>{var c,u;return(c=o.column)!=null&&c.getLabel?(u=o.column)==null?void 0:u.getLabel({row:o.row}):v(o.item).label||""}),n=z(()=>i.value.options.showTooltip?o.column.getTooltip?o.column.getTooltip(o.row):v(o.item).label:"");function v(c){return c&&typeof c=="object"?c:{label:c}}const i=Q("list");return(c,u)=>(s(),_("div",{class:ue(["flex items-center space-x-2",e(He)[l.align]])},[U(c.$slots,"prefix",{},()=>[l.column.prefix?(s(),x(re(typeof l.column.prefix=="function"?l.column.prefix({row:l.row}):l.column.prefix),{key:0})):M("",!0)]),p(e(tt),pe(ye(e(i).options.showTooltip?{text:n.value}:{text:""})),{default:b(()=>[U(c.$slots,"default",pe(ye({label:t.value})),()=>[m("div",xl,J(t.value),1)])]),_:3},16),U(c.$slots,"suffix")],2))}},mt=Cl,$l={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(l){const o=l,t=Q("list"),n=z(()=>{var k;return(k=t.value.rows)!=null&&k.length?t.value.rows[t.value.rows.length-1][t.value.rowKey]===o.row[t.value.rowKey]:!1}),v=z(()=>t.value.selections.has(o.row[t.value.rowKey])),i=z(()=>t.value.options.enableActive&&t.value.activeRow.value===o.row.name),c=z(()=>t.value.options.getRowRoute||t.value.options.onRowClick),u=z(()=>typeof t.value.options.rowHeight=="number"?`${t.value.options.rowHeight}px`:t.value.options.rowHeight),g=z(()=>{var f,C,j;if(!v.value)return"rounded";const k=[...t.value.selections];let V=(f=t.value.rows[0])!=null&&f.group?t.value.rows.map(d=>d.rows):[t.value.rows];for(let d of V){let F=d.findIndex(y=>y==o.row);if(F===-1)continue;let D=!k.includes((C=d[F+1])==null?void 0:C.name),w=!k.includes((j=d[F-1])==null?void 0:j.name);return(D?"rounded-b ":"")+(w?"rounded-t":"")}}),R=k=>{t.value.options.onRowClick&&t.value.options.onRowClick(o.row,k),t.value.activeRow.value===o.row.name?t.value.activeRow.value=null:t.value.activeRow.value=o.row.name},h=k=>{const V=o.row[t.value.rowKey];if(k.shiftKey&&!t.value.selections.has(V)){const f=Array.from(t.value.selections).pop(),C=t.value.rows.find(w=>w.group)?t.value.rows.reduce((w,y)=>w.concat(y.rows),[]):t.value.rows,j=C.findIndex(w=>f===w[t.value.rowKey]),d=C.findIndex(w=>V===w[t.value.rowKey]),F=Math.min(j,d),D=Math.max(j,d);for(let w=F;w<=D;w++)t.value.selections.add(C[w][t.value.rowKey])}else t.value.toggleRow(V)};return(k,V)=>(s(),x(re(e(t).options.getRowRoute?"router-link":"div"),fe({class:[[g.value,v.value||i.value?"bg-surface-gray-2":"",c.value?"cursor-pointer":"",c.value?v.value||i.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:e(t).options.getRowRoute?e(t).options.getRowRoute(l.row):void 0,onClick:R}),{default:b(()=>[(s(),x(re(e(t).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:b(()=>{var f,C;return[m("div",{class:"grid items-center space-x-4 px-2",style:Oe({height:u.value,gridTemplateColumns:e(dt)(e(t).columns,e(t).options.selectable)})},[e(t).options.selectable?(s(),_("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:V[0]||(V[0]=ve(()=>{},["stop","prevent"])),onDblclick:V[1]||(V[1]=ve(()=>{},["stop"]))},[p(Ee,{modelValue:v.value,class:"cursor-pointer duration-300",onClick:ve(h,["stop"])},null,8,["modelValue"])],32)):M("",!0),(s(!0),_(le,null,se(e(t).columns,(j,d)=>(s(),_("div",{key:j.key,class:ue([e(He)[j.align],d==0?"text-ink-gray-9":"text-ink-gray-7"])},[U(k.$slots,"default",fe({ref_for:!0},{idx:d,column:j,item:l.row[j.key],isActive:i.value}),()=>[e(t).slots.cell?(s(),x(re(e(t).slots.cell),fe({key:0,ref_for:!0},{column:j,row:l.row,item:l.row[j.key],align:j.align}),null,16)):(s(),x(mt,{key:1,column:j,row:l.row,item:l.row[j.key],align:j.align},null,8,["column","row","item","align"]))])],2))),128))],4),n.value?M("",!0):(s(),_("div",{key:0,class:ue(["h-px border-t",g.value==="rounded"||(C=(f=g.value)==null?void 0:f.includes)!=null&&C.call(f,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},De=$l,Sl={class:"h-full overflow-y-auto"},Vl={__name:"ListRows",setup(l){const o=Q("list");return(t,n)=>(s(),_("div",Sl,[U(t.$slots,"default",{},()=>[(s(!0),_(le,null,se(e(o).rows,v=>(s(),x(De,{key:v[e(o).rowKey],row:v},null,8,["row"]))),128))])]))}},vt=Vl,Ll={},Rl={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Al(l,o){return s(),_("svg",Rl,[...o[0]||(o[0]=[m("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)])])}const jl=he(Ll,[["render",Al]]),Dl={class:"flex items-center"},Fl={class:"w-full py-1.5 pr-2"},ql={key:1,class:"text-base font-medium leading-6"},Nl={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(l){const o=l,t=Q("list");function n(){o.group.collapsed==null&&(o.group.collapsed=!1),o.group.collapsed=!o.group.collapsed}return(v,i)=>(s(),_(le,null,[m("div",Dl,[m("button",{onClick:n,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[p(jl,{class:ue(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[l.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),U(v.$slots,"default",{},()=>[m("div",Fl,[e(t).slots["group-header"]?(s(),x(re(e(t).slots["group-header"]),pe(fe({key:0},{group:l.group})),null,16)):(s(),_("span",ql,J(l.group.group),1))])])]),i[0]||(i[0]=m("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},ht=Nl,Il={key:0,class:"mb-5 mt-2"},Ml={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(l){const o=Q("list");return(t,n)=>l.group.collapsed?M("",!0):(s(),_("div",Il,[U(t.$slots,"default",{},()=>[(s(!0),_(le,null,se(l.group.rows,v=>(s(),x(De,{key:v[e(o).rowKey],row:v},null,8,["row"]))),128)),e(o).slots["group-empty"]&&l.group.rows.length==0?(s(),x(re(e(o).slots["group-empty"]),pe(fe({key:0},{group:l.group})),null,16)):M("",!0)])]))}},wt=Ml,zl={class:"h-full overflow-y-auto"},Bl={__name:"ListGroups",setup(l){const o=Q("list");return(t,n)=>(s(),_("div",zl,[(s(!0),_(le,null,se(e(o).rows,v=>(s(),_("div",{key:v.group},[U(t.$slots,"default",{},()=>[p(ht,{group:v},{default:b(()=>[t.$slots["group-header"]?U(t.$slots,"group-header",fe({key:0,ref_for:!0},{group:v})):M("",!0)]),_:2},1032,["group"]),p(wt,{group:v},null,8,["group"])])]))),128))]))}},El=Bl,Ol={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Tl={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Ul={class:"flex items-center space-x-3"},Hl={class:"mr-3"},Wl={class:"flex items-center space-x-1"},Kl=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(l){const o=Q("list");let t=z(()=>o.value.options.selectionText(o.value.selections.size));return(n,v)=>(s(),x($t,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:b(()=>[e(o).selections.size?(s(),_("div",Ol,[m("div",{class:ue(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",n.$attrs.class])},[U(n.$slots,"default",pe(ye({selections:e(o).selections,allRowsSelected:e(o).allRowsSelected,selectAll:()=>e(o).toggleAllRows(!0),unselectAll:()=>e(o).toggleAllRows(!1)})),()=>[m("div",Tl,[m("div",Ul,[p(Ee,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),m("div",null,J(e(t)),1)]),m("div",Hl,[U(n.$slots,"actions",pe(ye({selections:e(o).selections,allRowsSelected:e(o).allRowsSelected,selectAll:()=>e(o).toggleAllRows(!0),unselectAll:()=>e(o).toggleAllRows(!1)})))])]),m("div",Wl,[p(e(de),{class:ue(["w- text-ink-gray-7",e(o).allRowsSelected?"cursor-not-allowed":""]),disabled:e(o).allRowsSelected,variant:"ghost",onClick:v[0]||(v[0]=i=>e(o).toggleAllRows(!0))},{default:b(()=>[...v[2]||(v[2]=[lt(" Select all ",-1)])]),_:1},8,["disabled","class"]),p(e(de),{icon:"x",variant:"ghost",onClick:v[1]||(v[1]=i=>e(o).toggleAllRows(!1))})])])],2)])):M("",!0)]),_:3}))}}),yt=Kl,Pl={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Gl=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(l,{expose:o,emit:t}){const n=l,v=St();let i=Re(new Set),c=te(null);const u=t;je(i,C=>{i.size&&(c.value=null),u("update:selections",C)}),je(c,C=>{u("update:active-row",C)});let g=z(()=>{function C(d){return d===void 0?!0:d}function j(d){return d===void 0?!1:d}return{getRowRoute:n.options.getRowRoute||null,onRowClick:n.options.onRowClick||null,showTooltip:C(n.options.showTooltip),selectionText:n.options.selectionText||(d=>d===1?"1 row selected":`${d} rows selected`),enableActive:j(n.options.enableActive),selectable:C(n.options.selectable),resizeColumn:j(n.options.resizeColumn),rowHeight:n.options.rowHeight||40,emptyState:n.options.emptyState}});const R=z(()=>n.rows.length?k.value?i.size===n.rows.reduce((C,j)=>C+j.rows.length,0):i.size===n.rows.length:!1),h=z(()=>g.value.selectable);let k=z(()=>n.rows.every(C=>C.group&&C.rows&&Array.isArray(C.rows)));function V(C){i.delete(C)||i.add(C)}function f(C){if(!C||R.value){i.clear();return}if(k.value){n.rows.forEach(j=>{j.rows.forEach(d=>i.add(d[n.rowKey]))});return}n.rows.forEach(j=>i.add(j[n.rowKey]))}return ze("list",z(()=>({rowKey:n.rowKey,rows:n.rows,columns:n.columns,options:g.value,selections:i,activeRow:c,allRowsSelected:R.value,slots:v,toggleRow:V,toggleAllRows:f}))),o({selections:i,allRowsSelected:R,toggleRow:V,toggleAllRows:f}),(C,j)=>(s(),_("div",Pl,[m("div",{class:ue(["flex w-max min-w-full flex-col overflow-y-hidden",C.$attrs.class]),style:Oe(C.$attrs.style)},[U(C.$slots,"default",pe(ye({showGroupedRows:e(k),selectable:h.value})),()=>[p(pt),n.rows.length?(s(),_(le,{key:0},[e(k)?(s(),x(El,{key:0})):(s(),x(vt,{key:1}))],64)):(s(),x(gl,{key:1})),h.value?(s(),x(yt,{key:2})):M("",!0)])],6)]))}}),Zl=Gl,Jl={class:"flex justify-between gap-2"},Ql={class:"flex items-center"},Yl={key:1,class:"mx-3 h-[80%] border-l"},Xl={class:"flex items-center gap-1 text-base text-ink-gray-5"},eo={__name:"ListFooter",props:{modelValue:{type:Number,default:20},options:{type:Object,default:()=>({rowCount:0,totalCount:0,pageLengthOptions:[20,50,100]})}},emits:["update:modelValue","loadMore"],setup(l,{emit:o}){const t=l,n=o,v=z({get:()=>t.modelValue,set:u=>n("update:modelValue",u)}),i=te(t.options.pageLengthOptions||[20,50,100]),c=z(()=>t.options.rowCount&&t.options.totalCount&&t.options.rowCount<t.options.totalCount);return(u,g)=>{const R=we("Button");return s(),_("div",Jl,[U(u.$slots,"default",{},()=>[U(u.$slots,"left",{},()=>[p(ml,{modelValue:v.value,"onUpdate:modelValue":g[0]||(g[0]=h=>v.value=h),buttons:i.value.map(h=>({label:h,value:h}))},null,8,["modelValue","buttons"])]),U(u.$slots,"right",{},()=>[m("div",Ql,[c.value?(s(),x(R,{key:0,label:"Load More",onClick:g[1]||(g[1]=h=>n("loadMore"))})):M("",!0),c.value?(s(),_("div",Yl)):M("",!0),m("div",Xl,[m("div",null,J(l.options.rowCount||"0"),1),g[2]||(g[2]=m("div",null,"of",-1)),m("div",null,J(l.options.totalCount||"0"),1)])])])])])}}},to=eo,lo={},oo={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-down-a-z"};function so(l,o){return s(),_("svg",oo,[...o[0]||(o[0]=[Te('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)])])}const Ze=he(lo,[["render",so]]),no={},ao={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function io(l,o){return s(),_("svg",ao,[...o[0]||(o[0]=[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07548 1.50005C8.05087 1.49632 8.02566 1.49438 8 1.49438C7.97434 1.49438 7.94914 1.49632 7.92452 1.50005H3C1.89543 1.50005 1 2.39548 1 3.50005V12.5C1 13.6046 1.89543 14.5 3 14.5H7.92511C7.94954 14.5037 7.97455 14.5056 8 14.5056C8.02545 14.5056 8.05046 14.5037 8.07489 14.5H13C14.1046 14.5 15 13.6046 15 12.5V3.50005C15 2.39548 14.1046 1.50005 13 1.50005H8.07548ZM7.5 2.50005H3C2.44772 2.50005 2 2.94776 2 3.50005V12.5C2 13.0523 2.44772 13.5 3 13.5H7.5L7.5 2.50005ZM8.5 13.5L8.5 2.50005H13C13.5523 2.50005 14 2.94776 14 3.50005V12.5C14 13.0523 13.5523 13.5 13 13.5H8.5Z",fill:"currentColor"},null,-1)])])}const Je=he(no,[["render",io]]),ro={},uo={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-up-z-a"};function co(l,o){return s(),_("svg",uo,[...o[0]||(o[0]=[Te('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)])])}const Qe=he(ro,[["render",co]]),fo={},po={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function mo(l,o){return s(),_("svg",po,[...o[0]||(o[0]=[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 6.75C12.3096 6.75 11.75 6.19036 11.75 5.5C11.75 4.80964 12.3096 4.25 13 4.25C13.6904 4.25 14.25 4.80964 14.25 5.5C14.25 6.19036 13.6904 6.75 13 6.75ZM3 6.75C2.30964 6.75 1.75 6.19036 1.75 5.5C1.75 4.80964 2.30964 4.25 3 4.25C3.69036 4.25 4.25 4.80964 4.25 5.5C4.25 6.19036 3.69036 6.75 3 6.75ZM6.75 5.5C6.75 6.19036 7.30964 6.75 8 6.75C8.69036 6.75 9.25 6.19036 9.25 5.5C9.25 4.80964 8.69036 4.25 8 4.25C7.30964 4.25 6.75 4.80964 6.75 5.5ZM13 11.75C12.3096 11.75 11.75 11.1904 11.75 10.5C11.75 9.80964 12.3096 9.25 13 9.25C13.6904 9.25 14.25 9.80964 14.25 10.5C14.25 11.1904 13.6904 11.75 13 11.75ZM1.75 10.5C1.75 11.1904 2.30964 11.75 3 11.75C3.69036 11.75 4.25 11.1904 4.25 10.5C4.25 9.80964 3.69036 9.25 3 9.25C2.30964 9.25 1.75 9.80964 1.75 10.5ZM8 11.75C7.30964 11.75 6.75 11.1904 6.75 10.5C6.75 9.80964 7.30964 9.25 8 9.25C8.69036 9.25 9.25 9.80964 9.25 10.5C9.25 11.1904 8.69036 11.75 8 11.75Z",fill:"currentColor"},null,-1)])])}const gt=he(fo,[["render",mo]]),vo={},ho={width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"};function wo(l,o){return s(),_("svg",ho,[...o[0]||(o[0]=[m("g",{class:"es-line-reload","clip-path":"url(#a)"},[m("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.743 2.189a6 6 0 0 0-6.558 2.596.5.5 0 0 0 .844.535 5 5 0 0 1 9.12 1.683l-1.187-.686a.5.5 0 0 0-.5.866l2.165 1.25a.5.5 0 0 0 .683-.183l1.25-2.165a.5.5 0 0 0-.866-.5l-.603 1.044a6 6 0 0 0-4.348-4.44ZM3.356 9.024l1.189.687a.5.5 0 0 0 .5-.866L2.88 7.595a.5.5 0 0 0-.683.183L.947 9.943a.5.5 0 1 0 .866.5l.603-1.044a6 6 0 0 0 10.9 1.816.5.5 0 0 0-.844-.536 5 5 0 0 1-9.116-1.655Z",class:"Union","clip-rule":"evenodd"})],-1),m("defs",null,[m("clipPath",{id:"a",class:"a"},[m("path",{fill:"currentColor",d:"M.25 0h16v16h-16z"})])],-1)])])}const yo=he(vo,[["render",wo]]),go={},_o={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function bo(l,o){return s(),_("svg",_o,[...o[0]||(o[0]=[m("path",{d:"M2.35619 8.42909C2.35644 9.77009 2.84031 11.066 3.719 12.079C4.5977 13.092 5.81226 13.7542 7.13977 13.9439C8.46729 14.1336 9.8187 13.8382 10.946 13.1119C12.0732 12.3856 12.9008 11.2771 13.2766 9.98982C13.6525 8.70258 13.5515 7.32295 12.9922 6.10414C12.4329 4.88534 11.4528 3.90914 10.2318 3.35469C9.0108 2.80025 7.63079 2.70476 6.34504 3.08576C5.0593 3.46675 3.95409 4.29867 3.23226 5.42883",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),m("path",{d:"M3.21297 2V5.42886H6.64183",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const ko=he(go,[["render",bo]]),xo={},Co={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function $o(l,o){return s(),_("svg",Co,[...o[0]||(o[0]=[Te('<path d="M1.75 3.75H10.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 7.75H7.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 11.75H5.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14.25 8.25L12.25 6.25L10.25 8.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.25 12.25L12.25 6.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>',5)])])}const xe=he(xo,[["render",$o]]),So={},Vo={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Lo(l,o){return s(),_("svg",Vo,[...o[0]||(o[0]=[m("path",{d:"M2 4.5H14",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),m("path",{d:"M4 8.5H12",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),m("path",{d:"M6.5 12.5H9.5",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const Ro=he(So,[["render",Lo]]),Ao={class:"flex items-center w-fit"},jo={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},Do={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},Fo={class:"min-w-72 p-2 sm:min-w-[400px]"},qo={key:0,class:"flex flex-col gap-2"},No={class:"-mb-2 flex w-full items-center justify-between"},Io={class:"text-base text-gray-600"},Mo={id:"fieldname",class:"w-full"},zo={id:"operator"},Bo={id:"value",class:"w-full"},Eo={key:1,class:"flex items-center justify-between gap-2"},Oo={class:"flex items-center gap-2 flex-1"},To={class:"w-13 pl-2 text-end text-base text-gray-600"},Uo={id:"fieldname",class:"!min-w-[140px]"},Ho={id:"operator"},Wo={id:"value",class:"!min-w-[140px] flex-1"},Ko={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},Po={class:"flex items-center justify-between gap-2"},Ye={__name:"Filter",props:{default_filters:{type:Object,required:!1,default:{}}},setup(l){const{isMobileView:o}=ot(),t=["Check"],n=["Link","Dynamic Link"],v=["Float","Int","Currency","Percent"],i=["Select"],c=["Data","Long Text","Small Text","Text Editor","Text"],u=["Date","Datetime"],g=["Rating"],R=Q("listViewData"),h=Q("listViewActions"),{list:k,filterableFields:V}=R,f=z(()=>{var A,S,E;if(!k)return new Set;let r=((A=k==null?void 0:k.params)==null?void 0:A.filters)||((E=(S=k.data)==null?void 0:S.params)==null?void 0:E.filters);return!r||!V.data?new Set:C(V.data,r)});function C(r,A){let S=[];for(let[E,H]of Object.entries(A)){let L=r.find(Z=>Z.fieldname===E);(typeof H!="object"||!H)&&(H=["=",H],(L==null?void 0:L.fieldtype)==="Check"&&(H=["equals",H[1]?"Yes":"No"])),typeof H[1]=="number"&&(H[1]=H[1].toString()),L&&S.push({field:L,fieldname:E,operator:Fe[H[0]],value:H[1]})}return new Set(S)}function j(r,A){let S=[];return c.includes(r)&&S.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),A==="_assign"&&(S=[{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"Is",value:"is"}]),v.includes(r)&&S.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"},{label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="}),i.includes(r)&&S.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),n.includes(r)&&S.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),t.includes(r)&&S.push({label:"Equals",value:"equals"}),["Duration"].includes(r)&&S.push({label:"Like",value:"like"},{label:"Not Like",value:"not like"},{label:"In",value:"in"},{label:"Not In",value:"not in"},{label:"Is",value:"is"}),u.includes(r)&&S.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="},{label:"Between",value:"between"},{label:"Timespan",value:"timespan"}),g.includes(r)&&S.push({label:"Equals",value:"equals"},{label:"Not Equals",value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="}),S}function d(r){const{field:A,operator:S}=r,{fieldtype:E,options:H}=A;if(S=="is")return X(ie,{type:"select",options:[{label:"Set",value:"set"},{label:"Not Set",value:"not set"}]});if(S=="timespan")return X(ie,{type:"select",options:qe});if(["like","not like","in","not in"].includes(S))return X(ie,{type:"text"});if(i.includes(E)||t.includes(E)){const L=E=="Check"?["Yes","No"]:w(H);return X(ie,{type:"select",options:L.map(Z=>({label:Z,value:Z}))})}else return n.includes(E)?E=="Dynamic Link"?X(ie,{type:"text"}):X(at,{class:"form-control",doctype:H,value:r.value}):v.includes(E)?X(ie,{type:"number"}):u.includes(E)&&S=="between"?X(ll,{value:r.value,iconLeft:""}):u.includes(E)?X(E=="Date"?rt:ut,{value:r.value,iconLeft:""}):g.includes(E)?X(it,{rating:r.value||0,static:!1,class:"truncate","onUpdate:modelValue":L=>ee(L,r)}):X(ie,{type:"text"})}function F(r){return i.includes(r.fieldtype)?w(r.options)[0]:t.includes(r.fieldtype)?"Yes":u.includes(r.fieldtype)?null:g.includes(r.fieldtype)?0:""}function D(r,A=null){return A==="_assign"?"like":i.includes(r)||t.includes(r)||v.includes(r)?"equals":u.includes(r)?"between":n.includes(r)||g.includes(r)?"equals":"like"}function w(r){return r.split(`
`)}function y(r){r&&(f.value.add({field:{label:r.label,fieldname:r.value,fieldtype:r.fieldtype,options:r.options},fieldname:r.value,operator:D(r.fieldtype,r.fieldname),value:F(r)}),Y())}function q(r,A){f.value.delete(Array.from(f.value)[A]),f.value.add({fieldname:r.value,operator:D(r.fieldtype),value:F(r),field:{label:r.label,fieldname:r.value,fieldtype:r.fieldtype,options:r.options}}),Y()}function N(r){f.value.delete(Array.from(f.value)[r]),Y()}function W(r){f.value.clear(),Y(),r&&r()}function ee(r,A){r=r.target?r.target.value:r,A.operator==="between"?A.value=[r.split(",")[0],r.split(",")[1]]:A.value=r,Y()}function P(r,A){let S=r.target._value,E=r.target.value;A.operator=r.target.value,K(S,E)||(A.value=F(A.field)),(E==="is"||E==="is not")&&(A.value="set"),Y()}function K(r,A){let S=["equals","not equals","in","not in",">","<",">=","<="];return!!(S.includes(r)&&S.includes(A))}function Y(){const r=[];f.value.forEach(A=>{r.push({fieldname:A.fieldname,operator:A.operator,value:A.value,toBoolean:A.field.fieldtype==="Check"})}),h.applyFilters(ge(r))}function ge(r){return r.map(_e).reduce((A,S)=>(["equals","="].includes(S.operator)?S.toBoolean?A[S.fieldname]=S.value==="Yes"?!0:S.value==="No"?!1:S.value:A[S.fieldname]=S.value:A[S.fieldname]=[$e[S.operator.toLowerCase()],S.value],A),{})}function _e(r){return r.operator.includes("like")&&!r.value.includes("%")&&(r.value=`%${r.value}%`),r}const $e={is:"is","is not":"is not",in:"in","not in":"not in",equals:"=","not equals":"!=",yes:!0,no:!1,like:"LIKE","not like":"NOT LIKE",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},Fe={is:"is","=":"equals","!=":"not equals",equals:"equals","is not":"is not",true:"yes",false:"no",LIKE:"like","NOT LIKE":"not like",in:"in","not in":"not in",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},qe=[{label:"Last Week",value:"last week"},{label:"Last Month",value:"last month"},{label:"Last Quarter",value:"last quarter"},{label:"Last 6 Months",value:"last 6 months"},{label:"Last Year",value:"last year"},{label:"Yesterday",value:"yesterday"},{label:"Today",value:"today"},{label:"Tomorrow",value:"tomorrow"},{label:"This Week",value:"this week"},{label:"This Month",value:"this month"},{label:"This Quarter",value:"this quarter"},{label:"This Year",value:"this year"},{label:"Next Week",value:"next week"},{label:"Next Month",value:"next month"},{label:"Next Quarter",value:"next quarter"},{label:"Next 6 Months",value:"next 6 months"},{label:"Next Year",value:"next year"}];return(r,A)=>(s(),x(e(Vt),{placement:"bottom-end"},{target:b(({togglePopover:S,close:E})=>{var H,L,Z;return[m("div",Ao,[p(e(de),{label:"Filter",class:ue((H=f.value)!=null&&H.size?"rounded-r-none":""),onClick:S},Ce({prefix:b(()=>[p(Ro,{class:"h-4"})]),_:2},[(L=f.value)!=null&&L.size?{name:"suffix",fn:b(()=>[m("span",jo,J(f.value.size),1)]),key:"0"}:void 0]),1032,["class","onClick"]),(Z=f.value)!=null&&Z.size?(s(),x(e(tt),{key:0,text:"Clear all Filter"},{default:b(()=>[m("div",null,[p(e(de),{class:"rounded-l-none border-l",icon:"x",onClick:ve(B=>W(E),["stop"])},null,8,["onClick"])])]),_:2},1024)):M("",!0)])]}),body:b(({close:S})=>{var E,H;return[m("div",Do,[m("div",Fo,[(E=f.value)!=null&&E.size?(s(!0),_(le,{key:0},se(f.value,(L,Z)=>(s(),_("div",{key:Z,id:"filter-list",class:"mb-4 sm:mb-3"},[e(o)?(s(),_("div",qo,[m("div",No,[m("div",Io,J(Z==0?"Where":"And"),1),p(e(de),{class:"flex",variant:"ghost",icon:"x",onClick:B=>N(Z)},null,8,["onClick"])]),m("div",Mo,[p(e(Ie),{modelValue:L.field.fieldname,"onUpdate:modelValue":[B=>L.field.fieldname=B,B=>q(B,Z)],options:e(V).data,placeholder:"First Name"},null,8,["modelValue","onUpdate:modelValue","options"])]),m("div",zo,[p(e(ie),{type:"select",modelValue:L.operator,"onUpdate:modelValue":B=>L.operator=B,onChange:B=>P(B,L),options:j(L.field.fieldtype,L.field.fieldname),placeholder:"Equals"},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),m("div",Bo,[(s(),x(re(d(L)),{modelValue:L.value,"onUpdate:modelValue":B=>L.value=B,onChange:B=>ee(B,L),placeholder:"John Doe"},null,40,["modelValue","onUpdate:modelValue","onChange"]))])])):(s(),_("div",Eo,[m("div",Oo,[m("div",To,J(Z==0?"Where":"And"),1),m("div",Uo,[p(e(Ie),{modelValue:L.field.fieldname,"onUpdate:modelValue":[B=>L.field.fieldname=B,B=>q(B,Z)],options:e(V).data,placeholder:"First Name"},null,8,["modelValue","onUpdate:modelValue","options"])]),m("div",Ho,[p(e(ie),{type:"select",modelValue:L.operator,"onUpdate:modelValue":B=>L.operator=B,onChange:B=>P(B,L),options:j(L.field.fieldtype,L.field.fieldname),placeholder:"Equals"},null,8,["modelValue","onUpdate:modelValue","onChange","options"])]),m("div",Wo,[(s(),x(re(d(L)),{modelValue:L.value,"onUpdate:modelValue":B=>L.value=B,onChange:B=>ee(B,L),placeholder:"John Doe"},null,40,["modelValue","onUpdate:modelValue","onChange"]))])]),p(e(de),{class:"flex",variant:"ghost",icon:"x",onClick:B=>N(Z)},null,8,["onClick"])]))]))),128)):(s(),_("div",Ko,J("Empty - Choose a field to filter by"))),m("div",Po,[p(e(Ie),{options:e(V).data,"onUpdate:modelValue":A[0]||(A[0]=L=>y(L)),placeholder:"First name"},{target:b(({togglePopover:L})=>[p(e(de),{class:"!text-gray-600",variant:"ghost",onClick:Z=>L(),label:"Add Filter"},{prefix:b(()=>[p(e(st),{name:"plus",class:"h-4"})]),_:1},8,["onClick"])]),_:1},8,["options"]),(H=f.value)!=null&&H.size?(s(),x(e(de),{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear all Filter",onClick:L=>W(S)},null,8,["onClick"])):M("",!0)])])])]}),_:1}))}};function Go(l){return Lt()?(Rt(l),!0):!1}const Zo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Jo(l){return l||At()}function Qo(l,o=!0,t){Jo(t)?nt(l,t):o?l():Ue(l)}const Yo=Zo?window.document:void 0;function Xo(l){var o;const t=Be(l);return(o=t==null?void 0:t.$el)!=null?o:t}function es(l,o,t={}){let n;const{document:v=Yo,...i}=t,c={onUpdate:h=>{os(o,h.oldIndex,h.newIndex,h)}},u=()=>{const h=typeof l=="string"?v==null?void 0:v.querySelector(l):Xo(l);!h||n!==void 0||(n=new Jt(h,{...c,...i}))},g=()=>{n==null||n.destroy(),n=void 0},R=(h,k)=>{if(k!==void 0)n==null||n.option(h,k);else return n==null?void 0:n.option(h)};return Qo(u),Go(g),{stop:g,start:u,option:R}}function ts(l,o,t){const n=l.children[t];l.insertBefore(o,n)}function ls(l){l.parentNode&&l.parentNode.removeChild(l)}function os(l,o,t,n=null){n!=null&&(ls(n.item),ts(n.from,n.item,o));const v=jt(l),i=v?[...Be(l)]:Be(l);if(t>=0&&t<i.length){const c=i.splice(o,1)[0];Ue(()=>{i.splice(t,0,c),v&&(l.value=i)})}}const ss={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},ns={key:1,class:"flex items-center justify-center"},as={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},is={class:"min-w-60 p-2"},rs={key:0,id:"sort-list",class:"mb-3 flex flex-col gap-2"},us={class:"handle flex h-7 w-7 items-center justify-center"},cs={class:"flex"},ds={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},fs={class:"flex items-center justify-between gap-2"},Xe={__name:"SortBy",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(l,{emit:o}){const t=Q("listViewData"),n=Q("listViewActions"),{list:v,sortableFields:i}=t,c=z({get:()=>{var D;if(!v)return new Set;let F=(D=v.params)==null?void 0:D.order_by;return!F||!i.data?new Set:(F=F.split(", ").map(w=>{const[y,q]=w.split(" ");return{fieldname:y,direction:q}}),new Set(F))},set:F=>{v.params.order_by=j(F)}}),u=z(()=>{if(!i.data)return[];if(!c.value.size)return i.data;const F=[...c.value].map(D=>D.fieldname);return d(),i.data.filter(D=>!F.includes(D.value))}),g=es("#sort-list",c,{handle:".handle",animation:200,onEnd:()=>C()});function R(){var w,y;if(!c.value.size)return"Sort";let F=Array.from(c.value);return((y=(w=i.data)==null?void 0:w.find(q=>q.value===F[0].fieldname))==null?void 0:y.label)||sort.fieldname}function h(F){c.value.add({fieldname:F.value,direction:"asc"}),d(),C()}function k(F,D){let w=Array.from(c.value)[D];c.value.delete(w),c.value.add({fieldname:F.value,direction:w.direction}),C()}function V(F){c.value.delete(Array.from(c.value)[F]),C()}function f(F){c.value.clear(),C(),F()}function C(){n.applySort(j(c.value))}function j(F){let D="";return F.forEach(w=>{D+=`${w.fieldname} ${w.direction}, `}),D=D.slice(0,-2),D}function d(){g.stop(),g.start()}return(F,D)=>{var q;const w=we("Button"),y=we("FeatherIcon");return(q=c.value)!=null&&q.size?(s(),x(e(ol),{key:1},{target:b(({open:N})=>{var W,ee,P;return[c.value.size>1?(s(),x(w,{key:0,label:"Sort"},Ce({default:b(()=>[l.hideLabel?(s(),x(e(xe),{key:0,class:"h-4"})):M("",!0)]),_:2},[l.hideLabel?void 0:{name:"prefix",fn:b(()=>[p(e(xe),{class:"h-4"})]),key:"0"},(W=c.value)!=null&&W.size?{name:"suffix",fn:b(()=>[m("div",ss,J(c.value.size),1)]),key:"1"}:void 0]),1024)):(s(),_("div",ns,[c.value.size?(s(),x(w,{key:0,class:"rounded-r-none border-r",onClick:D[1]||(D[1]=ve(()=>{Array.from(c.value)[0].direction=Array.from(c.value)[0].direction=="asc"?"desc":"asc",C()},["stop"]))},{default:b(()=>[Array.from(c.value)[0].direction=="asc"?(s(),x(e(Ze),{key:0,class:"h-4"})):(s(),x(e(Qe),{key:1,class:"h-4"}))]),_:1})):M("",!0),p(w,{label:R(),class:ue(c.value.size?"rounded-l-none":"")},Ce({_:2},[!l.hideLabel&&!((ee=c.value)!=null&&ee.size)?{name:"prefix",fn:b(()=>[p(e(xe),{class:"h-4"})]),key:"0"}:void 0,(P=c.value)!=null&&P.size?{name:"suffix",fn:b(()=>[p(y,{name:N?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),key:"1"}:void 0]),1032,["label","class"])]))]}),body:b(({close:N})=>{var W,ee;return[m("div",as,[m("div",is,[(W=c.value)!=null&&W.size?(s(),_("div",rs,[(s(!0),_(le,null,se(c.value,(P,K)=>(s(),_("div",{key:P.fieldname,class:"flex items-center gap-1"},[m("div",us,[p(e(gt),{class:"h-4 w-4 cursor-grab text-gray-600"})]),m("div",cs,[p(w,{size:"md",class:"rounded-r-none border-r",onClick:()=>{P.direction=P.direction=="asc"?"desc":"asc",C()}},{default:b(()=>[P.direction=="asc"?(s(),x(e(Ze),{key:0,class:"h-4"})):(s(),x(e(Qe),{key:1,class:"h-4"}))]),_:2},1032,["onClick"]),p(Ae,{class:"!w-32",value:P.fieldname,options:e(i).data,onChange:Y=>k(Y,K),placeholder:"First Name"},{target:b(({togglePopover:Y,selectedValue:ge,displayValue:_e})=>[p(w,{class:"flex w-full items-center justify-between rounded-l-none !text-gray-600 text-xs",size:"md",onClick:$e=>Y()},{suffix:b(()=>[p(y,{name:"chevron-down",class:"h-4 text-gray-600"})]),default:b(()=>[lt(J(_e(ge))+" ",1)]),_:2},1032,["onClick"])]),_:1},8,["value","options","onChange"])]),p(w,{variant:"ghost",icon:"x",onClick:Y=>V(K)},null,8,["onClick"])]))),128))])):(s(),_("div",ds,J("Empty - Choose a field to sort by"))),m("div",fs,[p(Ae,{options:u.value,value:"",placeholder:"First Name",onChange:D[2]||(D[2]=P=>h(P))},{target:b(({togglePopover:P})=>[p(w,{class:"!text-gray-600",variant:"ghost",onClick:K=>P(),label:"Add Sort"},{prefix:b(()=>[p(y,{name:"plus",class:"h-4"})]),_:1},8,["onClick"])]),_:1},8,["options"]),(ee=c.value)!=null&&ee.size?(s(),x(w,{key:0,class:"!text-gray-600",variant:"ghost",label:"Clear Sort",onClick:P=>f(N)},null,8,["onClick"])):M("",!0)])])])]}),_:1})):(s(),x(Ae,{key:0,options:u.value,value:"",placeholder:"First Name",onChange:D[0]||(D[0]=N=>h(N))},{target:b(({togglePopover:N})=>{var W;return[p(w,{label:"Sort",onClick:ee=>N()},Ce({default:b(()=>[l.hideLabel?(s(),x(e(xe),{key:0,class:"h-4"})):M("",!0)]),_:2},[!l.hideLabel&&!((W=c.value)!=null&&W.size)?{name:"prefix",fn:b(()=>[p(e(xe),{class:"h-4"})]),key:"0"}:void 0]),1032,["onClick"])]}),_:1},8,["options"]))}}},ps={__name:"QuickFilterField",props:{filter:{type:Object,required:!0},value:{type:[String,Boolean],required:!0}},emits:["applyQuickFilter"],setup(l,{emit:o}){const t=l,n=o,v=Ft((c,u)=>{n("applyQuickFilter",c,u)},500);function i(c,u){n("applyQuickFilter",c,u)}return(c,u)=>l.filter.type=="Check"?(s(),x(e(ie),{key:0,label:l.filter.label,type:"checkbox",checked:t.value,onChange:u[0]||(u[0]=ve(g=>i(l.filter,g.target.checked),["stop"])),class:"w-44"},null,8,["label","checked"])):l.filter.type==="Select"?(s(),x(e(ie),{key:1,class:"form-control cursor-pointer [&_select]:cursor-pointer w-44",type:"select","model-value":t.value,options:l.filter.options,placeholder:l.filter.label,onChange:u[1]||(u[1]=ve(g=>i(l.filter,g.target.value),["stop"]))},null,8,["model-value","options","placeholder"])):l.filter.type==="Link"?(s(),x(e(at),{key:2,value:t.value,doctype:l.filter.options,placeholder:l.filter.label,onChange:u[2]||(u[2]=g=>i(l.filter,g)),class:"w-44"},null,8,["value","doctype","placeholder"])):["Date","Datetime"].includes(l.filter.type)?(s(),x(re(l.filter.type==="Date"?e(rt):e(ut)),{key:3,class:"border-none w-44",value:t.value,onChange:u[3]||(u[3]=g=>i(l.filter,g)),placeholder:l.filter.label},null,40,["value","placeholder"])):(s(),x(e(Dt),{key:4,value:t.value,type:"text",placeholder:l.filter.label,onInput:u[4]||(u[4]=ve(g=>e(v)(l.filter,g.target.value),["stop"]))},null,8,["value","placeholder"]))}},ms={key:0},vs={__name:"QuickFilters",setup(l){const o=Q("listViewData"),t=Q("listViewActions"),{list:n,quickFilters:v}=o,i=["Check","Select","Link","Date","Datetime"];function c(R,h){var f;let k={...(f=n.params)==null?void 0:f.filters},V=R.name;h?i.includes(R.type)?k[V]=h:k[V]=["LIKE",`%${h}%`]:delete k[V],t.applyFilters(k)}function u(R){return R.type==="Check"?!1:""}function g(R,h){if(!h||!(R&&R.name))return u(R);const k=h[R.name];if(k===void 0)return u(R);if(i.includes(R.type))return k;if(!Array.isArray(k)||k.length!==2||k[0].toLowerCase()!=="like")return u(R);let V=k[1];return V.startsWith("%")&&(V=V.substring(1)),V.endsWith("%")&&(V=V.substring(0,V.length-1)),V}return(R,h)=>e(v).loading?M("",!0):(s(),_("div",ms,[p(e(rl),{class:"flex flex-1 items-center -ml-1 flex-wrap gap-2",orientation:"horizontal"},{default:b(()=>[(s(!0),_(le,null,se(e(v).data,k=>{var V;return s(),_("div",{key:k.name,class:"min-w-36"},[p(ps,{filter:k,value:g(k,(V=e(n).params)==null?void 0:V.filters),onApplyQuickFilter:h[0]||(h[0]=(f,C)=>c(f,C))},null,8,["filter","value"])])}),128))]),_:1})]))}},et={__name:"Reload",props:{loading:{type:Boolean,default:!1}},setup(l){return(o,t)=>{const n=yo,v=we("Button");return s(),x(v,{label:"Refresh",loading:l.loading},{icon:b(()=>[p(n,{class:"h-4 w-4"})]),_:1},8,["loading"])}}},hs={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(l){const o=l,t=te(null),n=te(null);let v=te(null);function i(){v.value?v.value.update():v.value=cl(t.value.el,n.value.el,{placement:o.placement})}function c(){Ue(()=>i())}return qt(()=>{var u;(u=v.value)==null||u.destroy()}),(u,g)=>(s(),x(e(al),null,{default:b(({open:R})=>[p(e(sl),{ref_key:"reference",ref:t,as:"div",onClick:c,onFocusin:c,onKeydown:c},{default:b(({open:h})=>[U(u.$slots,"target",{open:h})]),_:3},512),Nt(m("div",null,[p(e(nl),{ref_key:"popover",ref:n,static:"",class:"z-[100]"},{default:b(({open:h,close:k})=>[U(u.$slots,"body",{open:h,close:k})]),_:3},512)],512),[[It,R]])]),_:3}))}},ws={class:"my-2 p-1.5 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},ys={key:0},gs={class:"flex cursor-grab items-center justify-between gap-6 rounded px-2 py-1.5 text-base text-ink-gray-8 hover:bg-surface-gray-2"},_s={class:"flex items-center gap-2"},bs={class:"flex cursor-pointer items-center gap-1"},ks={class:"mt-1.5 flex flex-col gap-1 border-t border-outline-gray-modals pt-1.5"},xs={key:1},Cs={class:"flex flex-col items-center justify-between gap-2 rounded px-2 py-1.5 text-base text-ink-gray-8"},$s={class:"flex flex-col items-center gap-3"},Ss={class:"flex w-full gap-2 border-t pt-2"},Vs={__name:"ColumnSettings",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(l,{emit:o}){const t=te(!1),n=te({columns:[],rows:[],isDefault:!1}),v=Q("listViewData"),{list:i}=v,c=Q("listViewActions"),u=te(!1),g=te({old:{},label:"",key:"",width:"10rem"}),R=z({get:()=>{var y;return(y=i.data)==null?void 0:y.is_default},set:y=>{i.data.is_default=y}}),h=z({get:()=>{var y;return(y=i.data)==null?void 0:y.columns},set:y=>{i.data.columns=y}}),k=z({get:()=>{var y;return(y=i.data)==null?void 0:y.rows},set:y=>{i.data.rows=y}}),V=z(()=>{var q;let y=(q=i.data)==null?void 0:q.fields;return y?h.value===""?y:y.filter(N=>!h.value.find(W=>W.key===N.value)):[]});function f(y){let q=["Float","Int","Percent","Currency"].includes(y.type)?"right":"left",N={label:y.label,type:y.type,key:y.value,width:"10rem",align:q};h.value.push(N),k.value.push(y.value),w(!0)}function C(y){h.value.length!==1&&(h.value=h.value.filter(q=>q.key!==y.key),y.key!=="name"&&(k.value=k.value.filter(q=>q!==y.key)),w())}function j(y){u.value=!0,g.value=y,g.value.old={...y}}function d(y){u.value=!1;let q=h.value.findIndex(N=>N.key===y.key);h.value[q].label=y.label,h.value[q].width=y.width,h.value[q].old&&delete h.value[q].old,w()}function F(){u.value=!1,g.value.label=g.value.old.label,g.value.width=g.value.old.width,delete g.value.old}function D(y){w(!0,!0,!0),y()}function w(y=!1,q=!1,N=!1){R.value=q,t.value=!0;let W={columns:N?n.value.columns:h.value,rows:N?n.value.rows:k.value,isDefault:N?n.value.isDefault:q,reload:y,reset:N};c.updateColumns(W),t.value=!N}return Mt(()=>i.data,y=>{y&&(n.value.columns=JSON.parse(JSON.stringify(y.columns)),n.value.rows=JSON.parse(JSON.stringify(y.rows)),n.value.isDefault=y.is_default)}),(y,q)=>{const N=we("Button"),W=we("FeatherIcon"),ee=we("FormControl");return s(),x(hs,null,{target:b(()=>[p(N,{label:"Columns"},Ce({default:b(()=>[l.hideLabel?(s(),x(e(Je),{key:0,class:"h-4"})):M("",!0)]),_:2},[l.hideLabel?void 0:{name:"prefix",fn:b(()=>[p(e(Je),{class:"h-4"})]),key:"0"}]),1024)]),body:b(({close:P})=>[m("div",ws,[u.value?(s(),_("div",xs,[m("div",Cs,[m("div",$s,[p(ee,{type:"text",size:"md",label:"Label",modelValue:g.value.label,"onUpdate:modelValue":q[1]||(q[1]=K=>g.value.label=K),class:"sm:w-full w-52",placeholder:"First Name"},null,8,["modelValue"]),p(ee,{type:"text",size:"md",label:"Width",class:"sm:w-full w-52",modelValue:g.value.width,"onUpdate:modelValue":q[2]||(q[2]=K=>g.value.width=K),placeholder:"10rem",description:"Width can be in number, pixel or rem (eg. 3, 30px, 10rem)",debounce:500},null,8,["modelValue"])]),m("div",Ss,[p(N,{variant:"subtle",label:"Cancel",class:"w-full flex-1",onClick:F}),p(N,{variant:"solid",label:"Update",class:"w-full flex-1",onClick:q[3]||(q[3]=K=>d(g.value))})])])])):(s(),_("div",ys,[p(e(Qt),{list:h.value,onEnd:w,delay:e(zt)()?200:0,"item-key":"key",class:"list-group"},{item:b(({element:K})=>[m("div",gs,[m("div",_s,[p(e(gt),{class:"h-3.5"}),m("div",null,J(K.label),1)]),m("div",bs,[p(N,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:Y=>j(K)},{default:b(()=>[p(e(il),{class:"h-3.5"})]),_:1},8,["onClick"]),p(N,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:Y=>C(K)},{default:b(()=>[p(W,{name:"x",class:"h-3.5"})]),_:1},8,["onClick"])])])]),_:1},8,["list","delay"]),m("div",ks,[p(Ae,{value:"",options:V.value,onChange:q[0]||(q[0]=K=>f(K))},{target:b(({togglePopover:K})=>[p(N,{class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:Y=>K(),label:"Add Column"},{prefix:b(()=>[p(W,{name:"plus",class:"h-4"})]),_:1},8,["onClick"])]),_:1},8,["options"]),R.value?M("",!0):(s(),x(N,{key:0,class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:K=>D(P),label:"Reset to Default"},{prefix:b(()=>[p(e(ko),{class:"h-4"})]),_:1},8,["onClick"]))])]))])]),_:1})}}},Ls={key:0,class:"mx-3 h-full overflow-y-auto sm:mx-5"},Rs={class:"my-2 flex items-center gap-2 text-base font-medium text-ink-gray-8 justify-between w-full mr-1"},As={class:"flex items-center gap-2 w-full"},js={key:1,class:"flex items-end gap-1 w-full"},Ds={class:"text-xs text-ink-gray-5"},Fs={__name:"ListRows",props:{rows:{type:Array,required:!0},groupByActions:{type:Array,default:()=>[]}},setup(l){const o=l,t=te(o.rows),n=i=>{let c=o.groupByActions.map(u=>({...u,onClick:()=>u.onClick(i)}));return i.group.label=="General"&&(c=c.filter(u=>u.label==="Add New Article")),c};je(()=>o.rows,i=>t.value=i);let v=z(()=>o.rows.every(i=>i.group&&i.rows&&Array.isArray(i.rows)));return(i,c)=>e(v)?(s(),_("div",Ls,[(s(!0),_(le,null,se(t.value,u=>(s(),_("div",{key:u.group},[p(e(ht),{group:u},{default:b(()=>[m("div",Rs,[m("div",As,[u.icon?(s(),x(re(u.icon),{key:0})):M("",!0),u.group.label!=""?(s(),_("div",js,[m("span",null,J(u.group.label),1),m("span",Ds,J(u.rows.length+" Article"+(u.rows.length>1?"s":"")),1)])):M("",!0)]),l.groupByActions.length>0?(s(),x(e(ct),{key:0,options:n(u)},{default:b(()=>[p(e(de),{variant:"ghost"},{icon:b(()=>[p(e(Yt),{class:"h-4 w-4"})]),_:1})]),_:1},8,["options"])):M("",!0)])]),_:2},1032,["group"]),p(e(wt),{group:u,id:"list-rows",class:"!mt-0"},{default:b(()=>[(s(!0),_(le,null,se(u.rows,g=>(s(),x(e(De),{key:g.name,row:g,class:"truncate text-base row"},{default:b(({idx:R,column:h,item:k})=>[U(i.$slots,"default",fe({ref_for:!0},{idx:R,column:h,item:k,row:g}))]),_:2},1032,["row"]))),128))]),_:2},1032,["group"])]))),128))])):(s(),x(e(vt),{key:1,class:"mx-3 sm:mx-5",id:"list-rows"},{default:b(()=>[(s(!0),_(le,null,se(t.value,u=>(s(),x(e(De),{key:u.name,row:u,class:"truncate text-base"},{default:b(({idx:g,column:R,item:h})=>[U(i.$slots,"default",fe({ref_for:!0},{idx:g,column:R,item:h,row:u}))]),_:2},1032,["row"]))),128))]),_:3}))}},qs={key:0,class:"flex items-center justify-between gap-2 px-5 pb-4 pt-3 pl-6"},Ns={key:1,class:"flex items-start gap-2 justify-end h-full"},Is={key:2,class:"flex justify-between items-center w-full"},Ms={class:"flex items-center gap-2"},zs={key:2,class:"p-20 border-t sm:px-5 px-3 py-2"},Bs={key:3,class:"w-full h-full flex items-center justify-center -mt-48"},ln=Bt({__name:"ListViewBuilder",props:{options:{}},emits:["emptyStateAction","rowClick"],setup(l,{expose:o,emit:t}){const n=l,v=t,i=Et(),c=Ot(),{isManager:u}=Tt(),{$dialog:g}=Xt(),{getStatus:R}=dl();te(new Set);const h=Re({doctype:"",hideViewControls:!1,selectable:!1,view:{view_type:"list",group_by_field:"owner",name:i.query.view},groupByActions:[],default_page_length:20,isCustomerPortal:!1,hideColumnSetting:!0,rowRoute:{name:"",prop:""},selectBannerActions:[{label:me("Delete"),icon:"trash-2",onClick:a=>{g({title:me("Delete"),message:me("Are you sure you want to delete {0} item(s)?",[a.size]),actions:[{label:me("Confirm"),variant:"solid",onClick({close:$}){k($,a)}}]})},condition:()=>!f.value.isCustomerPortal&&u}]});function k(a,$){Ut("bulk_delete"+n.options.doctype),Ht("frappe.desk.reportview.delete_items",{items:JSON.stringify(Array.from($)),doctype:n.options.doctype}).then(()=>{Wt.success(me("Item(s) deleted successfully")),a(),V()})}function V(){y.reload(),y.unselectAll()}const f=z(()=>({...h,...n.options})),{isMobileView:C}=ot(),j={icon:"",title:me("No Data Found")},d=Re({doctype:f.value.doctype,filters:{},default_filters:f.value.defaultFilters,order_by:"modified desc",page_length:f.value.default_page_length,page_length_count:f.value.default_page_length,view:f.value.view,columns:[],rows:[],show_customer_portal_fields:f.value.isCustomerPortal,is_default:!1}),F=z(()=>{var a;return((a=f.value)==null?void 0:a.emptyState)||j}),D=te(!1),w=Ve({url:"helpdesk.api.doc.get_list_data",params:d,transform:a=>(a.columns.forEach($=>{P($),K($)}),a),onSuccess:a=>{w.params=d,W.value=a.columns}}),y={list:w,reload:H,unselectAll:()=>{}};function q(a,$=()=>{}){y.unselectAll=$;const I=f.value.selectBannerActions.map(T=>({...T,onClick:()=>{var G;return(G=T.onClick)==null?void 0:G.call(T,a)}})),O=h.selectBannerActions.filter(T=>!I.some(G=>G.label===T.label)).map(T=>({...T,onClick:()=>{var G;return(G=T.onClick)==null?void 0:G.call(T,a)}}));return[...I,...O]}const N=z(()=>{var a,$,I,O;return(a=w.data)!=null&&a.data?w.data.view_type==="group_by"?(I=($=w.data)==null?void 0:$.group_by_field)!=null&&I.name?ee(w.data.data,w.data.group_by_field):[]:(O=w.data)==null?void 0:O.data:[]}),W=te([]);function ee(a,$){var O;let I=[];return(O=$.options)==null||O.forEach(T=>{let G=[];T.value?G=a.filter(ne=>ne[$.name]==T.value):G=a.filter(ne=>!ne[$.name]);let ce={group:T||" ",collapsed:!1,rows:G,icon:X(st,{name:"folder",class:"h-4 w-4 flex-shrink-0 text-ink-gray-6"})};I.push(ce)}),I||a}function P(a){if(!a.hasOwnProperty("key"))return a;const $=/([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)/,I=a.key.match($);a.key=I?I[2]:a.key}function K(a){var I,O;if(!((I=f.value)!=null&&I.columnConfig))return a;const $=f.value.columnConfig;return $.hasOwnProperty(a.key)&&(a.prefix=(O=$[a.key])==null?void 0:O.prefix),a}const Y=Ve({url:"helpdesk.api.doc.get_filterable_fields",cache:["DocField",f.value.doctype],auto:!f.value.hideViewControls,params:{doctype:f.value.doctype,append_assign:!0,show_customer_portal_fields:d.show_customer_portal_fields},transform:a=>(a=a.map($=>({label:$.label,value:$.fieldname,...$})),a)}),ge=Ve({url:"helpdesk.api.doc.sort_options",auto:!f.value.hideViewControls,params:{doctype:f.value.doctype,show_customer_portal_fields:d.show_customer_portal_fields}}),_e=Ve({url:"helpdesk.api.doc.get_quick_filters",auto:!f.value.hideViewControls,params:{doctype:f.value.doctype,show_customer_portal_fields:d.show_customer_portal_fields},transform:a=>{if(!a.length)return a=[{name:"name",label:"Name",fieldtype:"Data"}],a}});function $e(a,$,I,O){var G,ce;const T=f.value.columnConfig;return T&&((G=T[a.key])!=null&&G.custom)?(ce=T[a.key])==null?void 0:ce.custom({column:a,row:$,item:I,idx:O}):O===0?X("span",{class:"truncate text-base text-ink-gray-6",textContent:I}):a.type==="Datetime"?X("span",{class:"text-p-xs",textContent:Gt(I)}):a.type==="MultipleAvatar"?X(ul,{avatars:I,hideName:!0,class:"flex items-center truncate flex-1 flex-row-reverse justify-end"}):a.type==="Rating"?X(it,{rating:I||0,class:"truncate"}):X("span",{class:"truncate flex-1",textContent:I})}function Fe(a,$,I,O){var G,ce;if(["Data","Datetime","Rating","Int","Float"].includes($.type)){if(((G=f.value.rowRoute)==null?void 0:G.name)!=="")return;v("rowClick",I.name);return}if(a.stopPropagation(),a.preventDefault(),$.label=="Status"&&f.value.doctype==="HD Ticket"&&(O=(ce=R(O))==null?void 0:ce.label_agent),$.type==="MultipleAvatar"){if(O.length>1){let ne=a.target;ne=ne.closest(".user-avatar"),ne&&(O=ne.getAttribute("data-name"))}else O=O[0].name;A({...d.filters,[$.key]:["LIKE",O]});return}A({...d.filters,[$.key]:O})}const qe=z(()=>!f.value.hideViewControls&&Y.data&&ge.data&&_e.data),r=Re({list:w,filterableFields:Y,quickFilters:_e,sortableFields:ge});ze("listViewData",r),ze("listViewActions",{applyFilters:A,applySort:S,updateColumns:E,reload:H});function A(a){D.value=!0,d.filters={...a},w.submit({...d}),d.is_default&&(Z(),D.value=!1)}function S(a){D.value=!0,d.order_by=a,w.submit({...d,order_by:a})}function E(a){D.value=!0;const{columns:$,isDefault:I,rows:O}=a;$==null||$.forEach(T=>{P(T),K(T)}),W.value=d.columns=I?"":$,d.rows=I?"":O,w.reload({...d})}function H(a=!1){a&&(d.filters=f.value.defaultFilters||{},d.order_by="modified desc",d.page_length=f.value.default_page_length,d.page_length_count=f.value.default_page_length,d.columns=[],d.rows=[],d.is_default=!0),w.reload({...d})}function L(a,$=!1){if(d.page_length_count=a,$)d.page_length+=a;else{if(a===d.page_length&&a===d.page_length_count)return;d.page_length=a,d.page_length_count=a}w.reload()}function Z(){const a={filters:JSON.stringify(d.filters),columns:JSON.stringify(d.columns),rows:JSON.stringify(d.rows),order_by:d.order_by,name:i.query.view||"default",dt:f.value.doctype,route_name:i.name,is_customer_portal:f.value.isCustomerPortal};_t(a,()=>{D.value=!1})}const{findView:B,updateView:_t,defaultView:Ne}=el(f.value.doctype),bt=z(()=>{let a=B(i.query.view).value;return!!(!a||!a.public||a.public&&u)});function We(){Se(),D.value=!1}function Se(){let a=Ke();if(!a){c.push({name:i.name}),H(!0);return}d.filters=a.filters,d.order_by=a.order_by||"modified desc",d.columns=a.columns,d.rows=a.rows,w.submit({...d})}function Ke(){let a;return i.query.view?(a=B(i.query.view).value,d.is_default=!1):Ne.value&&(a=Ne.value,d.is_default=!0),a}je(()=>i.query.view,a=>{d.view.name=a,Se(),a||(Le.value.label=me("List"),Le.value.icon=tl)});const Pe=Kt(`list_position+${n.options.doctype}`,0);function kt(a){Pe.value=a.target.scrollTop}function xt(){setTimeout(()=>{const a=document.querySelector(".list-rows");a&&(a.scrollTop=Pe.value)},200)}return nt(async()=>{var a,$;if(xt(),((a=Me.data)==null?void 0:a.length)>0&&(($=Me.filters)==null?void 0:$.dt)===f.value.doctype||await Me.list.promise,Se(),i.query.view||Ne.value){if(i.query.view){const I=Ke();if(!I)return;Le.value.label=I.label||me("List"),Le.value.icon=Zt(I.icon)}return}}),o(y),(a,$)=>{var O,T,G,ce,ne,Ge;const I=we("Button");return s(),_(le,null,[qe.value?(s(),_("div",qs,[e(C)?M("",!0):(s(),x(e(vs),{key:0,class:"flex-1"})),e(C)?(s(),_("div",Is,[p(e(Ye),{default_filters:d.filters},null,8,["default_filters"]),m("div",Ms,[p(e(et),{onClick:We,loading:e(w).loading},null,8,["loading"]),p(e(Xe),{"hide-label":e(C)},null,8,["hide-label"])])])):(s(),_("div",Ns,[D.value&&bt.value?(s(),x(I,{key:0,label:e(me)("Save Changes"),onClick:Z},null,8,["label"])):M("",!0),p(e(et),{onClick:We,loading:e(w).loading},null,8,["loading"]),p(e(Ye),{default_filters:d.filters},null,8,["default_filters"]),p(e(Xe),{"hide-label":e(C)},null,8,["hide-label"]),f.value.hideColumnSetting?M("",!0):(s(),x(e(Vs),{key:1,"hide-label":e(C)},null,8,["hide-label"]))]))])):M("",!0),((O=e(w).data)==null?void 0:O.data.length)>0?(s(),x(e(Zl),{key:1,class:"flex-1",columns:W.value,rows:N.value,"row-key":"name",options:{selectable:f.value.selectable,showTooltip:!1,resizeColumn:!1,getRowRoute:oe=>{var ae,be,ke;return{name:(ae=f.value.rowRoute)==null?void 0:ae.name,params:{[(be=f.value.rowRoute)==null?void 0:be.prop]:oe.name},query:{view:(ke=e(i).query)==null?void 0:ke.view}}},emptyState:F.value}},{default:b(()=>[p(e(pt),{class:"sm:mx-5 mx-3"},{default:b(()=>[(s(!0),_(le,null,se(W.value,oe=>(s(),x(e(ft),{key:oe.key,item:oe,onColumnWidthUpdated:$[0]||($[0]=ae=>console.log(ae))},null,8,["item"]))),128))]),_:1}),p(Fs,{rows:N.value,"group-by-actions":f.value.groupByActions,onScrollend:kt,class:"list-rows"},{default:b(({idx:oe,column:ae,item:be,row:ke})=>[p(e(mt),{item:be,column:ae,row:ke},{default:b(()=>[(s(),x(re($e(ae,ke,be,oe)),{key:ae.key,onClick:Ct=>Fe(Ct,ae,ke,be)},null,8,["onClick"]))]),_:2},1032,["item","column","row"])]),_:1},8,["rows","group-by-actions"]),f.value.showSelectBanner?(s(),x(e(yt),{key:0},{actions:b(({selections:oe,unselectAll:ae})=>[p(e(ct),{options:q(oe,ae)},{default:b(()=>[p(I,{icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"])]),_:1})):M("",!0)]),_:1},8,["columns","rows","options"])):M("",!0),((T=e(w).data)==null?void 0:T.data.length)>0?(s(),_("div",zs,[p(e(to),{options:{rowCount:(ce=(G=e(w))==null?void 0:G.data)==null?void 0:ce.row_count,totalCount:(Ge=(ne=e(w))==null?void 0:ne.data)==null?void 0:Ge.total_count},pageLengthCount:d.page_length_count,onLoadMore:$[1]||($[1]=oe=>L(d.page_length_count,!0)),modelValue:d.page_length_count,"onUpdate:modelValue":[$[2]||($[2]=oe=>d.page_length_count=oe),$[3]||($[3]=oe=>{L(oe)})]},null,8,["options","pageLengthCount","modelValue"])])):e(w).loading?(s(),_("div",Bs,[p(e(Pt),{scale:10})])):(s(),x(fl,{key:4,title:F.value.title,icon:F.value.icon,onEmptyStateAction:$[4]||($[4]=oe=>v("emptyStateAction"))},null,8,["title","icon"]))],64)}}});export{ln as _};
//# sourceMappingURL=ListViewBuilder.vue_vue_type_script_setup_true_lang-2e0a7a26.js.map
