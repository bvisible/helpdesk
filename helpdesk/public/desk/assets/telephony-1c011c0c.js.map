{"version":3,"file":"telephony-1c011c0c.js","sources":["../../../../desk/src/stores/telephony.ts"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport { call } from \"frappe-ui\";\n\ninterface MakeCallParams {\n  number?: string;\n  doctype?: string;\n  docname?: string;\n}\n\ninterface SetLinkDocParams {\n  docname: string;\n  doctype: string;\n}\n\nexport const useTelephonyStore = defineStore(\"telephony\", {\n  state: () => ({\n    isLoading: false,\n    isCallingEnabled: false,\n    isTwilioEnabled: false,\n    isExotelEnabled: false,\n    defaultCallingMedium: \"\",\n    callMethod: (params: MakeCallParams) => {},\n    linkDoc: {\n      doctype: \"\",\n      docname: \"\",\n    },\n  }),\n  actions: {\n    setMakeCall(value: (params: MakeCallParams) => void) {\n      this.callMethod = value;\n    },\n    setDefaultCallingMedium(value: string) {\n      this.defaultCallingMedium = value;\n    },\n    makeCall(params: MakeCallParams) {\n      this.callMethod(params);\n    },\n    setIsCallingEnabled(value: boolean) {\n      this.isCallingEnabled = value;\n    },\n    async fetchCallIntegrationStatus() {\n      try {\n        this.isLoading = true;\n        const data = await call(\"telephony.api.is_call_integration_enabled\");\n        this.isTwilioEnabled = Boolean(data.twilio_enabled);\n        this.isExotelEnabled = Boolean(data.exotel_enabled);\n        this.defaultCallingMedium = data.default_calling_medium;\n        this.isCallingEnabled = this.isTwilioEnabled || this.isExotelEnabled;\n      } catch (error) {\n        console.error(\"Failed to fetch call integration status:\", error);\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    setLinkDoc(params: SetLinkDocParams) {\n      this.linkDoc.docname = params.docname;\n      this.linkDoc.doctype = params.doctype;\n    },\n  },\n});\n"],"names":["useTelephonyStore","defineStore","params","value","data","call","error"],"mappings":"gDAca,MAAAA,EAAoBC,EAAY,YAAa,CACxD,MAAO,KAAO,CACZ,UAAW,GACX,iBAAkB,GAClB,gBAAiB,GACjB,gBAAiB,GACjB,qBAAsB,GACtB,WAAaC,GAA2B,CAAC,EACzC,QAAS,CACP,QAAS,GACT,QAAS,EACX,CAAA,GAEF,QAAS,CACP,YAAYC,EAAyC,CACnD,KAAK,WAAaA,CACpB,EACA,wBAAwBA,EAAe,CACrC,KAAK,qBAAuBA,CAC9B,EACA,SAASD,EAAwB,CAC/B,KAAK,WAAWA,CAAM,CACxB,EACA,oBAAoBC,EAAgB,CAClC,KAAK,iBAAmBA,CAC1B,EACA,MAAM,4BAA6B,CAC7B,GAAA,CACF,KAAK,UAAY,GACX,MAAAC,EAAO,MAAMC,EAAK,2CAA2C,EAC9D,KAAA,gBAAkB,EAAQD,EAAK,eAC/B,KAAA,gBAAkB,EAAQA,EAAK,eACpC,KAAK,qBAAuBA,EAAK,uBAC5B,KAAA,iBAAmB,KAAK,iBAAmB,KAAK,sBAC9CE,EAAO,CACN,QAAA,MAAM,2CAA4CA,CAAK,CAAA,QAC/D,CACA,KAAK,UAAY,EACnB,CACF,EACA,WAAWJ,EAA0B,CAC9B,KAAA,QAAQ,QAAUA,EAAO,QACzB,KAAA,QAAQ,QAAUA,EAAO,OAChC,CACF,CACF,CAAC"}