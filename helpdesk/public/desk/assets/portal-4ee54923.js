import{ck as $,ai as S,z as f,di as j,aI as P,J as x,av as B,aw as F,ay as h,d as v,a7 as w,az as b,$ as p,c as I,M as L,a3 as N,a5 as C,ah as O,p as z,c0 as A}from"./index-3194ec9b.js";function J(e,t,a,l){$.isServer||S(s=>{e=e??window,e.addEventListener(t,a,l),s(()=>e.removeEventListener(t,a,l))})}var G=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(G||{});function K(){let e=f(0);return j("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function Q({defaultContainers:e=[],portals:t,mainTreeNodeRef:a}={}){let l=f(null),s=P(l);function o(){var u,n,c;let i=[];for(let r of e)r!==null&&(r instanceof HTMLElement?i.push(r):"value"in r&&r.value instanceof HTMLElement&&i.push(r.value));if(t!=null&&t.value)for(let r of t.value)i.push(r);for(let r of(u=s==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?u:[])r!==document.body&&r!==document.head&&r instanceof HTMLElement&&r.id!=="headlessui-portal-root"&&(r.contains(h(l))||r.contains((c=(n=h(l))==null?void 0:n.getRootNode())==null?void 0:c.host)||i.some(m=>r.contains(m))||i.push(r));return i}return{resolveContainers:o,contains(u){return o().some(n=>n.contains(u))},mainTreeNodeRef:l,MainTreeNode(){return a!=null?null:x(F,{features:B.Hidden,ref:l})}}}let k=Symbol("ForcePortalRootContext");function U(){return p(k,!1)}let V=v({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:a}){return w(k,e.force),()=>{let{force:l,...s}=e;return b({theirProps:s,ourProps:{},slot:{},slots:t,attrs:a,name:"ForcePortalRoot"})}}});function q(e){let t=P(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let a=t.getElementById("headlessui-portal-root");if(a)return a;let l=t.createElement("div");return l.setAttribute("id","headlessui-portal-root"),t.body.appendChild(l)}const g=new WeakMap;function W(e){var t;return(t=g.get(e))!=null?t:0}function M(e,t){let a=t(W(e));return a<=0?g.delete(e):g.set(e,a),a}let X=v({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:a}){let l=f(null),s=I(()=>P(l)),o=U(),u=p(H,null),n=f(o===!0||u==null?q(l.value):u.resolveTarget());n.value&&M(n.value,d=>d+1);let c=f(!1);L(()=>{c.value=!0}),S(()=>{o||u!=null&&(n.value=u.resolveTarget())});let i=p(y,null),r=!1,m=A();return N(l,()=>{if(r||!i)return;let d=h(l);d&&(C(i.register(d),m),r=!0)}),C(()=>{var d,E;let T=(d=s.value)==null?void 0:d.getElementById("headlessui-portal-root");!T||n.value!==T||M(n.value,R=>R-1)||n.value.children.length>0||(E=n.value.parentElement)==null||E.removeChild(n.value)}),()=>{if(!c.value||n.value===null)return null;let d={ref:l,"data-headlessui-portal":""};return x(O,{to:n.value},b({ourProps:d,theirProps:e,slot:{},attrs:a,slots:t,name:"Portal"}))}}}),y=Symbol("PortalParentContext");function Y(){let e=p(y,null),t=f([]);function a(o){return t.value.push(o),e&&e.register(o),()=>l(o)}function l(o){let u=t.value.indexOf(o);u!==-1&&t.value.splice(u,1),e&&e.unregister(o)}let s={register:a,unregister:l,portals:t};return[t,v({name:"PortalWrapper",setup(o,{slots:u}){return w(y,s),()=>{var n;return(n=u.default)==null?void 0:n.call(u)}}})]}let H=Symbol("PortalGroupContext"),Z=v({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:a}){let l=z({resolveTarget(){return e.target}});return w(H,l),()=>{let{target:s,...o}=e;return b({theirProps:o,ourProps:{},slot:{},attrs:t,slots:a,name:"PortalGroup"})}}});export{X as $,J as E,Q as N,G as d,K as n,Y as q,V as u,Z as z};
//# sourceMappingURL=portal-4ee54923.js.map
