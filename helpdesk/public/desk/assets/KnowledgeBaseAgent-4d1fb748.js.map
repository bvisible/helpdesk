{"version":3,"file":"KnowledgeBaseAgent-4d1fb748.js","sources":["../../../../desk/src/components/knowledge-base/CategoryModal.vue","../../../../desk/src/components/knowledge-base/MergeCategoryModal.vue","../../../../desk/src/pages/knowledge-base/KnowledgeBaseAgent.vue"],"sourcesContent":["<template>\n  <Dialog\n    v-model=\"showDialog\"\n    :options=\"{ title: dialogTitle, actions: getActionButton() }\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col flex-1 gap-3\">\n        <textarea\n          class=\"text-base rounded py-1.5 px-2 border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full block\"\n          ref=\"titleRef\"\n          placeholder=\"Support Issues\"\n          v-model=\"newTitle\"\n          :rows=\"1\"\n          maxlength=\"50\"\n          autofocus\n          @input=\"(e: Event) => {\n            const target = e.target as HTMLTextAreaElement;\n            target.style.height = `${target.scrollHeight}px`;\n          }\"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { Dialog } from \"frappe-ui\";\nimport { ref } from \"vue\";\nimport { watch } from \"vue\";\n\nconst props = defineProps({\n  title: {\n    type: String,\n    default: \"\",\n  },\n  edit: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits([\"update\", \"create\"]);\n\nconst showDialog = defineModel<boolean>();\nconst newTitle = defineModel<string>(\"title\");\n\nconst dialogTitle = computed(() =>\n  props.edit ? \"Edit Category\" : \"Create Category\"\n);\n\nconst titleRef = ref(null);\nwatch(\n  () => titleRef.value,\n  (newVal) => {\n    if (!newVal) return;\n    titleRef.value.style.height =\n      newVal.scrollHeight > newVal.clientHeight\n        ? newVal.scrollHeight + \"px\"\n        : newVal.scrollHeight + \"px\";\n  }\n);\n\nfunction getActionButton() {\n  const action = [];\n  if (props.edit) {\n    action.push({\n      label: \"Save\",\n      variant: \"solid\",\n      onClick: () => {\n        emit(\"update\");\n      },\n    });\n  } else {\n    action.push({\n      label: \"Create\",\n      variant: \"solid\",\n      onClick: () => {\n        emit(\"create\");\n      },\n    });\n  }\n  return action;\n}\n</script>\n","<template>\n  <Dialog\n    :options=\"{\n      title: 'Merge with another category',\n    }\"\n    @after-leave=\"\n      () => {\n        toCategory = null;\n      }\n    \"\n    v-model=\"showDialog\"\n  >\n    <template #body-content>\n      <p class=\"text-p-base text-ink-gray-8 mb-4\">\n        This will move all articles of the\n        <span class=\"whitespace-nowrap font-semibold\">{{ categoryTitle }}</span>\n        category to the selected category. This change is irreversible!\n      </p>\n      <Link\n        class=\"form-control\"\n        doctype=\"HD Article Category\"\n        placeholder=\"Select Category\"\n        v-model=\"toCategory\"\n        label=\"Category\"\n        :page-length=\"100\"\n      />\n    </template>\n    <template #actions>\n      <Button\n        class=\"w-full\"\n        variant=\"solid\"\n        label=\"Merge\"\n        @click=\"emit('merge', categoryId, toCategory)\"\n      />\n    </template>\n  </Dialog>\n</template>\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { Dialog } from \"frappe-ui\";\nimport { Link } from \"@/components\";\ndefineProps<{\n  categoryId: string;\n  categoryTitle: string;\n}>();\nconst emit = defineEmits([\"merge\"]);\nconst showDialog = defineModel<boolean>();\n\nconst toCategory = ref(\"\");\n</script>\n","<template>\n  <div class=\"flex flex-col\">\n    <LayoutHeader>\n      <template #left-header>\n        <div class=\"text-lg font-medium text-gray-900\">{{ __(\"Knowledge Base\") }}</div>\n      </template>\n      <template #right-header>\n        <Dropdown :options=\"headerOptions\">\n          <Button :label=\"__('Create')\" variant=\"solid\">\n            <template #prefix>\n              <LucidePlus class=\"h-4 w-4\" />\n            </template>\n          </Button>\n        </Dropdown>\n      </template>\n    </LayoutHeader>\n    <ListViewBuilder\n      ref=\"listViewRef\"\n      :options=\"options\"\n      @row-click=\"(row) => $router.push(`kb/articles/${row}`)\"\n    />\n    <CategoryModal\n      :edit=\"editTitle\"\n      v-model=\"showCategoryModal\"\n      v-model:title=\"category.title\"\n      @update=\"handleCategoryUpdate\"\n      @create=\"handleCategoryCreate\"\n    />\n    <MoveToCategoryModal v-model=\"moveToModal\" @move=\"handleMoveToCategory\" />\n    <MergeCategoryModal\n      :categoryTitle=\"category.title\"\n      :category-id=\"category.id\"\n      v-model=\"mergeModal\"\n      @merge=\"handleMergeCategory\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport LayoutHeader from \"@/components/LayoutHeader.vue\";\nimport ListViewBuilder from \"@/components/ListViewBuilder.vue\";\nimport CategoryModal from \"@/components/knowledge-base/CategoryModal.vue\";\nimport MergeCategoryModal from \"@/components/knowledge-base/MergeCategoryModal.vue\";\nimport MoveToCategoryModal from \"@/components/knowledge-base/MoveToCategoryModal.vue\";\nimport { globalStore } from \"@/stores/globalStore\";\nimport {\n  deleteArticles,\n  deleteRes as deleteCategory,\n  mergeCategory,\n  moveToCategory,\n  newCategory,\n  updateCategoryTitle,\n} from \"@/stores/knowledgeBase\";\nimport { capture } from \"@/telemetry\";\nimport { Error } from \"@/types\";\nimport { copyToClipboard } from \"@/utils\";\nimport {\n  Badge,\n  Button,\n  Dropdown,\n  FeatherIcon,\n  createResource,\n  toast,\n  usePageMeta,\n} from \"frappe-ui\";\nimport { computed, h, onMounted, reactive, ref } from \"vue\";\nimport { __ } from \"@/translation\";\nimport { useRouter } from \"vue-router\";\nimport LucideMerge from \"~icons/lucide/merge\";\n\nconst router = useRouter();\nconst { $dialog } = globalStore();\n\nconst category = reactive({\n  title: \"\",\n  id: \"\",\n});\n\nconst _title = ref(\"\");\nconst listViewRef = ref(null);\nconst editTitle = ref(false);\n\n// modals state\nconst showCategoryModal = ref(false);\nconst moveToModal = ref(false);\nconst mergeModal = ref(false);\n\nconst generalCategory = createResource({\n  url: \"helpdesk.api.knowledge_base.get_general_category\",\n  auto: true,\n  cache: [\"GeneralCategory\"],\n});\n\nconst headerOptions = [\n  {\n    label: __(\"Category\"),\n    icon: \"folder\",\n    onClick: () => {\n      resetState();\n      editTitle.value = false;\n      showCategoryModal.value = true;\n    },\n  },\n  {\n    label: __(\"Article\"),\n    icon: \"file-text\",\n    onClick: () => {\n      router.push({\n        name: \"NewArticle\",\n        params: {\n          id: generalCategory.data,\n        },\n        query: {\n          title: \"General\",\n        },\n      });\n    },\n  },\n];\n\nconst groupByActions = [\n  {\n    label: __(\"Add New Article\"),\n    icon: \"plus\",\n    onClick: (groupedRow) => {\n      router.push({\n        name: \"NewArticle\",\n        params: {\n          id: groupedRow.group.value,\n        },\n        query: {\n          title: groupedRow.group.label,\n        },\n      });\n    },\n  },\n  {\n    label: __(\"Edit Title\"),\n    icon: \"edit\",\n    onClick: (groupedRow) => {\n      editTitle.value = true;\n      showCategoryModal.value = true;\n      category.title = groupedRow.group.label;\n      category.id = groupedRow.group.value;\n      _title.value = groupedRow.group.label;\n    },\n  },\n  {\n    label: __(\"Merge\"),\n    icon: LucideMerge,\n    onClick: (groupedRow) => {\n      mergeModal.value = true;\n      category.title = groupedRow.group.label;\n      category.id = groupedRow.group.value;\n    },\n  },\n  {\n    label: __(\"Share\"),\n    icon: \"link\",\n    onClick: async ({ group }) => {\n      const { label, value } = group;\n      const url = new URL(window.location.href);\n      url.pathname = `/helpdesk/kb-public/${value}`;\n      await copyToClipboard(\n        url.toString(),\n        __(\"Category '{0}' link copied to clipboard\", [label])\n      );\n    },\n  },\n  {\n    label: __(\"Delete\"),\n    icon: \"trash-2\",\n    onClick: (groupedRow) => {\n      handleCategoryDelete(groupedRow);\n    },\n  },\n];\n\nconst listSelections = ref(new Set());\nconst selectBannerActions = [\n  {\n    label: __(\"Move To\"),\n    icon: \"corner-up-right\",\n    onClick: (selections: Set<string>) => {\n      listSelections.value = new Set(selections);\n      moveToModal.value = true;\n    },\n  },\n  {\n    label: __(\"Delete\"),\n    icon: \"trash-2\",\n    onClick: (selections: Set<string>) => {\n      listSelections.value = selections;\n      $dialog({\n        title: __(\"Delete articles?\"),\n        message: __(\"Are you sure you want to delete these articles?\"),\n        actions: [\n          {\n            label: __(\"Confirm\"),\n            variant: \"solid\",\n            onClick({ close }) {\n              handleDeleteArticles();\n              close();\n            },\n          },\n        ],\n      });\n    },\n  },\n];\n\nfunction handleMoveToCategory(category: string) {\n  moveToCategory.submit(\n    {\n      category,\n      articles: Array.from(listSelections.value),\n    },\n    {\n      onSuccess: () => {\n        moveToModal.value = false;\n        listViewRef.value?.reload();\n        listViewRef.value?.unselectAll();\n        listSelections.value.clear();\n        toast.success(__(\"Articles moved\"));\n      },\n      onError: (error: Error) => {\n        const title = error?.messages?.[0] || error.message;\n        toast.error(title);\n        moveToModal.value = false;\n      },\n    }\n  );\n}\n\nfunction handleCategoryCreate() {\n  newCategory.submit(\n    {\n      title: category.title,\n    },\n    {\n      onSuccess: (data: any) => {\n        listViewRef.value.reload();\n        showCategoryModal.value = false;\n        router.push({\n          name: \"Article\",\n          params: {\n            articleId: data.article,\n          },\n          query: {\n            category: data.category,\n            title: category.title,\n            isEdit: 1,\n          },\n        });\n        toast.success(__(\"Category created\"));\n        capture(\"category_created\", {\n          data: {\n            category: category.title,\n          },\n        });\n        resetState();\n      },\n      onError: (error: string) => {\n        toast.error(error);\n      },\n    }\n  );\n}\n\nfunction handleCategoryUpdate() {\n  // if same title do nothing\n  if (category.title === _title.value) {\n    showCategoryModal.value = false;\n    editTitle.value = false;\n    return;\n  }\n  updateCategoryTitle.submit(\n    {\n      doctype: \"HD Article Category\",\n      name: category.id,\n      fieldname: \"category_name\",\n      value: category.title,\n    },\n    {\n      onSuccess: () => {\n        listViewRef.value.reload();\n        showCategoryModal.value = false;\n        editTitle.value = false;\n\n        toast.success(__(\"Category updated\"));\n        resetState();\n      },\n      onError: (error: string) => {\n        toast.error(error);\n      },\n    }\n  );\n}\n\nfunction handleCategoryDelete(groupedRow) {\n  $dialog({\n    title: __(\"Delete category?\"),\n    message: __(\"All articles from this category will move to General category.\"),\n    actions: [\n      {\n        label: __(\"Confirm\"),\n        variant: \"solid\",\n        onClick(close: Function) {\n          deleteCategory.submit(\n            {\n              doctype: \"HD Article Category\",\n              name: groupedRow.group.value,\n            },\n            {\n              onSuccess: () => {\n                toast.success(__(\"Category deleted\"));\n                listViewRef.value.reload();\n              },\n            }\n          );\n          close();\n        },\n      },\n    ],\n  });\n}\n\nfunction handleDeleteArticles() {\n  deleteArticles.submit(\n    {\n      articles: Array.from(listSelections.value),\n    },\n    {\n      onSuccess: () => {\n        listViewRef.value?.reload();\n        listViewRef.value?.unselectAll();\n        listSelections.value?.clear();\n        toast.success(__(\"Articles deleted\"));\n      },\n    }\n  );\n}\n\nfunction handleMergeCategory(source: string, target: string) {\n  mergeCategory.submit(\n    {\n      source,\n      target,\n    },\n    {\n      onSuccess: () => {\n        listViewRef.value.reload();\n        toast.success(__(\"Category merged\"));\n        mergeModal.value = false;\n        resetState();\n      },\n      onError: (error: Error) => {\n        const title = error?.messages?.[0] || error.message;\n        toast.error(title);\n      },\n    }\n  );\n}\n\nfunction resetState() {\n  category.title = \"\";\n  category.id = \"\";\n  _title.value = \"\";\n}\n\nconst options = computed(() => {\n  return {\n    doctype: \"HD Article\",\n    selectable: true,\n    view: {\n      view_type: \"group_by\",\n      group_by_field: \"category\",\n      label_doc: \"HD Article Category\",\n      label_field: \"category_name\",\n    },\n    columnConfig: {\n      title: {\n        prefix: () => {\n          return h(FeatherIcon, {\n            name: \"file-text\",\n            class: \"h-4 w-4 flex-shrink-0 text-ink-gray-6\",\n          });\n        },\n      },\n      status: {\n        custom: ({ item }) => {\n          return h(Badge, {\n            ...statusMap[item],\n          });\n        },\n      },\n    },\n    rowRoute: {\n      name: \"Article\",\n      prop: \"articleId\",\n    },\n    groupByActions,\n    showSelectBanner: true,\n    selectBannerActions,\n    default_page_length: 100,\n  };\n});\n\nconst statusMap = {\n  Published: {\n    label: __(\"Published\"),\n    theme: \"green\",\n  },\n  Draft: {\n    label: __(\"Draft\"),\n    theme: \"orange\",\n  },\n  Archived: {\n    label: __(\"Archived\"),\n    theme: \"gray\",\n  },\n};\n\nonMounted(() => {\n  capture(\"kb_agent_page_viewed\");\n});\n\nusePageMeta(() => {\n  return {\n    title: __(\"Knowledge Base\"),\n  };\n});\n</script>\n"],"names":["props","__props","emit","__emit","showDialog","_useModel","newTitle","dialogTitle","computed","titleRef","ref","watch","newVal","getActionButton","action","_createBlock","_unref","Dialog","$event","_createElementVNode","_hoisted_1","e","target","toCategory","_cache","_hoisted_2","_toDisplayString","_createVNode","Link","_component_Button","router","useRouter","$dialog","globalStore","category","reactive","_title","listViewRef","editTitle","showCategoryModal","moveToModal","mergeModal","generalCategory","createResource","headerOptions","__","resetState","groupByActions","groupedRow","LucideMerge","group","label","value","url","copyToClipboard","handleCategoryDelete","listSelections","selectBannerActions","selections","close","handleDeleteArticles","handleMoveToCategory","moveToCategory","_a","_b","toast","error","title","handleCategoryCreate","newCategory","data","capture","handleCategoryUpdate","updateCategoryTitle","deleteCategory","deleteArticles","_c","handleMergeCategory","source","mergeCategory","options","h","FeatherIcon","item","Badge","statusMap","onMounted","usePageMeta","_openBlock","_createElementBlock","LayoutHeader","Dropdown","Button","_component_LucidePlus","ListViewBuilder","row","$router","CategoryModal","MoveToCategoryModal","MergeCategoryModal"],"mappings":"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"}