{"version":3,"file":"useActiveTabManager-44c673f3.js","sources":["../../../../node_modules/@headlessui/vue/dist/internal/focus-sentinel.js","../../../../node_modules/@headlessui/vue/dist/components/tabs/tabs.js","../../../../frappe-ui/src/components/Tabs/TabList.vue","../../../../frappe-ui/src/components/Tabs/TabPanel.vue","../../../../frappe-ui/src/components/Tabs/Tabs.vue","../../../../desk/src/components/CannedResponseSelectorModal.vue","../../../../desk/src/components/CommentBox.vue","../../../../desk/src/components/icons/ActivityIcon.vue","../../../../desk/src/components/icons/AttachmentIcon.vue","../../../../desk/src/components/icons/CommentIcon.vue","../../../../desk/src/components/icons/DotIcon.vue","../../../../desk/src/components/icons/ReplyAllIcon.vue","../../../../desk/src/components/icons/ReplyIcon.vue","../../../../desk/src/components/icons/SelectIcon.vue","../../../../desk/src/stores/agent.ts","../../../../desk/src/components/CommentTextEditor.vue","../../../../desk/src/components/CommunicationArea.vue","../../../../desk/src/components/ticket/TicketSplitModal.vue","../../../../desk/src/components/EmailArea.vue","../../../../desk/src/components/EmailEditor.vue","../../../../desk/src/components/HistoryBox.vue","../../../../desk/src/components/MultiSelectInput.vue","../../../../desk/src/components/TypingIndicator.vue","../../../../desk/src/components/ticket/SetContactPhoneModal.vue","../../../../desk/src/components/icons/PlayIcon.vue","../../../../desk/src/components/CallArea.vue","../../../../desk/src/components/ticket/ActivityHeader.vue","../../../../desk/src/components/ticket-agent/FeedbackBox.vue","../../../../desk/src/components/ticket/TicketAgentActivities.vue","../../../../desk/src/components/TicketField.vue","../../../../desk/src/composables/useActiveTabManager.ts"],"sourcesContent":["import{defineComponent as i,h as m,ref as f}from\"vue\";import{Features as l,Hidden as F}from'./hidden.js';let d=i({props:{onFocus:{type:Function,required:!0}},setup(t){let n=f(!0);return()=>n.value?m(F,{as:\"button\",type:\"button\",features:l.Focusable,onFocus(o){o.preventDefault();let e,a=50;function r(){var u;if(a--<=0){e&&cancelAnimationFrame(e);return}if((u=t.onFocus)!=null&&u.call(t)){n.value=!1,cancelAnimationFrame(e);return}e=requestAnimationFrame(r)}e=requestAnimationFrame(r)}}):null}});export{d as FocusSentinel};\n","import{computed as v,defineComponent as L,Fragment as z,h as A,inject as j,onMounted as F,onUnmounted as K,provide as N,ref as P,watch as _,watchEffect as J}from\"vue\";import{useId as $}from'../../hooks/use-id.js';import{useResolveButtonType as Q}from'../../hooks/use-resolve-button-type.js';import{FocusSentinel as V}from'../../internal/focus-sentinel.js';import{Hidden as X}from'../../internal/hidden.js';import{Keys as S}from'../../keyboard.js';import{dom as f}from'../../utils/dom.js';import{Focus as g,focusIn as D,FocusResult as B,sortByDomNode as k}from'../../utils/focus-management.js';import{match as H}from'../../utils/match.js';import{microTask as Y}from'../../utils/micro-task.js';import{getOwnerDocument as Z}from'../../utils/owner.js';import{Features as q,omit as ee,render as M}from'../../utils/render.js';var te=(s=>(s[s.Forwards=0]=\"Forwards\",s[s.Backwards=1]=\"Backwards\",s))(te||{}),le=(d=>(d[d.Less=-1]=\"Less\",d[d.Equal=0]=\"Equal\",d[d.Greater=1]=\"Greater\",d))(le||{});let U=Symbol(\"TabsContext\");function C(a){let b=j(U,null);if(b===null){let s=new Error(`<${a} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,C),s}return b}let G=Symbol(\"TabsSSRContext\"),me=L({name:\"TabGroup\",emits:{change:a=>!0},props:{as:{type:[Object,String],default:\"template\"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:b,attrs:s,emit:d}){var E;let i=P((E=a.selectedIndex)!=null?E:a.defaultIndex),l=P([]),r=P([]),p=v(()=>a.selectedIndex!==null),R=v(()=>p.value?a.selectedIndex:i.value);function y(t){var c;let n=k(u.tabs.value,f),o=k(u.panels.value,f),e=n.filter(I=>{var m;return!((m=f(I))!=null&&m.hasAttribute(\"disabled\"))});if(t<0||t>n.length-1){let I=H(i.value===null?0:Math.sign(t-i.value),{[-1]:()=>1,[0]:()=>H(Math.sign(t),{[-1]:()=>0,[0]:()=>0,[1]:()=>1}),[1]:()=>0}),m=H(I,{[0]:()=>n.indexOf(e[0]),[1]:()=>n.indexOf(e[e.length-1])});m!==-1&&(i.value=m),u.tabs.value=n,u.panels.value=o}else{let I=n.slice(0,t),h=[...n.slice(t),...I].find(W=>e.includes(W));if(!h)return;let O=(c=n.indexOf(h))!=null?c:u.selectedIndex.value;O===-1&&(O=u.selectedIndex.value),i.value=O,u.tabs.value=n,u.panels.value=o}}let u={selectedIndex:v(()=>{var t,n;return(n=(t=i.value)!=null?t:a.defaultIndex)!=null?n:null}),orientation:v(()=>a.vertical?\"vertical\":\"horizontal\"),activation:v(()=>a.manual?\"manual\":\"auto\"),tabs:l,panels:r,setSelectedIndex(t){R.value!==t&&d(\"change\",t),p.value||y(t)},registerTab(t){var o;if(l.value.includes(t))return;let n=l.value[i.value];if(l.value.push(t),l.value=k(l.value,f),!p.value){let e=(o=l.value.indexOf(n))!=null?o:i.value;e!==-1&&(i.value=e)}},unregisterTab(t){let n=l.value.indexOf(t);n!==-1&&l.value.splice(n,1)},registerPanel(t){r.value.includes(t)||(r.value.push(t),r.value=k(r.value,f))},unregisterPanel(t){let n=r.value.indexOf(t);n!==-1&&r.value.splice(n,1)}};N(U,u);let T=P({tabs:[],panels:[]}),x=P(!1);F(()=>{x.value=!0}),N(G,v(()=>x.value?null:T.value));let w=v(()=>a.selectedIndex);return F(()=>{_([w],()=>{var t;return y((t=a.selectedIndex)!=null?t:a.defaultIndex)},{immediate:!0})}),J(()=>{if(!p.value||R.value==null||u.tabs.value.length<=0)return;let t=k(u.tabs.value,f);t.some((o,e)=>f(u.tabs.value[e])!==f(o))&&u.setSelectedIndex(t.findIndex(o=>f(o)===f(u.tabs.value[R.value])))}),()=>{let t={selectedIndex:i.value};return A(z,[l.value.length<=0&&A(V,{onFocus:()=>{for(let n of l.value){let o=f(n);if((o==null?void 0:o.tabIndex)===0)return o.focus(),!0}return!1}}),M({theirProps:{...s,...ee(a,[\"selectedIndex\",\"defaultIndex\",\"manual\",\"vertical\",\"onChange\"])},ourProps:{},slot:t,slots:b,attrs:s,name:\"TabGroup\"})])}}}),pe=L({name:\"TabList\",props:{as:{type:[Object,String],default:\"div\"}},setup(a,{attrs:b,slots:s}){let d=C(\"TabList\");return()=>{let i={selectedIndex:d.selectedIndex.value},l={role:\"tablist\",\"aria-orientation\":d.orientation.value};return M({ourProps:l,theirProps:a,slot:i,attrs:b,slots:s,name:\"TabList\"})}}}),xe=L({name:\"Tab\",props:{as:{type:[Object,String],default:\"button\"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(a,{attrs:b,slots:s,expose:d}){var o;let i=(o=a.id)!=null?o:`headlessui-tabs-tab-${$()}`,l=C(\"Tab\"),r=P(null);d({el:r,$el:r}),F(()=>l.registerTab(r)),K(()=>l.unregisterTab(r));let p=j(G),R=v(()=>{if(p.value){let e=p.value.tabs.indexOf(i);return e===-1?p.value.tabs.push(i)-1:e}return-1}),y=v(()=>{let e=l.tabs.value.indexOf(r);return e===-1?R.value:e}),u=v(()=>y.value===l.selectedIndex.value);function T(e){var I;let c=e();if(c===B.Success&&l.activation.value===\"auto\"){let m=(I=Z(r))==null?void 0:I.activeElement,h=l.tabs.value.findIndex(O=>f(O)===m);h!==-1&&l.setSelectedIndex(h)}return c}function x(e){let c=l.tabs.value.map(m=>f(m)).filter(Boolean);if(e.key===S.Space||e.key===S.Enter){e.preventDefault(),e.stopPropagation(),l.setSelectedIndex(y.value);return}switch(e.key){case S.Home:case S.PageUp:return e.preventDefault(),e.stopPropagation(),T(()=>D(c,g.First));case S.End:case S.PageDown:return e.preventDefault(),e.stopPropagation(),T(()=>D(c,g.Last))}if(T(()=>H(l.orientation.value,{vertical(){return e.key===S.ArrowUp?D(c,g.Previous|g.WrapAround):e.key===S.ArrowDown?D(c,g.Next|g.WrapAround):B.Error},horizontal(){return e.key===S.ArrowLeft?D(c,g.Previous|g.WrapAround):e.key===S.ArrowRight?D(c,g.Next|g.WrapAround):B.Error}}))===B.Success)return e.preventDefault()}let w=P(!1);function E(){var e;w.value||(w.value=!0,!a.disabled&&((e=f(r))==null||e.focus({preventScroll:!0}),l.setSelectedIndex(y.value),Y(()=>{w.value=!1})))}function t(e){e.preventDefault()}let n=Q(v(()=>({as:a.as,type:b.type})),r);return()=>{var m,h;let e={selected:u.value,disabled:(m=a.disabled)!=null?m:!1},{...c}=a,I={ref:r,onKeydown:x,onMousedown:t,onClick:E,id:i,role:\"tab\",type:n.value,\"aria-controls\":(h=f(l.panels.value[y.value]))==null?void 0:h.id,\"aria-selected\":u.value,tabIndex:u.value?0:-1,disabled:a.disabled?!0:void 0};return M({ourProps:I,theirProps:c,slot:e,attrs:b,slots:s,name:\"Tab\"})}}}),Ie=L({name:\"TabPanels\",props:{as:{type:[Object,String],default:\"div\"}},setup(a,{slots:b,attrs:s}){let d=C(\"TabPanels\");return()=>{let i={selectedIndex:d.selectedIndex.value};return M({theirProps:a,ourProps:{},slot:i,attrs:s,slots:b,name:\"TabPanels\"})}}}),ye=L({name:\"TabPanel\",props:{as:{type:[Object,String],default:\"div\"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(a,{attrs:b,slots:s,expose:d}){var T;let i=(T=a.id)!=null?T:`headlessui-tabs-panel-${$()}`,l=C(\"TabPanel\"),r=P(null);d({el:r,$el:r}),F(()=>l.registerPanel(r)),K(()=>l.unregisterPanel(r));let p=j(G),R=v(()=>{if(p.value){let x=p.value.panels.indexOf(i);return x===-1?p.value.panels.push(i)-1:x}return-1}),y=v(()=>{let x=l.panels.value.indexOf(r);return x===-1?R.value:x}),u=v(()=>y.value===l.selectedIndex.value);return()=>{var n;let x={selected:u.value},{tabIndex:w,...E}=a,t={ref:r,id:i,role:\"tabpanel\",\"aria-labelledby\":(n=f(l.tabs.value[y.value]))==null?void 0:n.id,tabIndex:u.value?w:-1};return!u.value&&a.unmount&&!a.static?A(X,{as:\"span\",\"aria-hidden\":!0,...t}):M({ourProps:t,theirProps:E,slot:x,attrs:b,slots:s,features:q.Static|q.RenderStrategy,visible:u.value,name:\"TabPanel\"})}}});export{xe as Tab,me as TabGroup,pe as TabList,ye as TabPanel,Ie as TabPanels};\n","<template>\n  <TabList\n    class=\"relative flex\"\n    :class=\"\n      t.vertical\n        ? 'flex-col border-r overflow-y-auto'\n        : 'gap-7.5 border-b overflow-x-auto items-center px-5'\n    \"\n  >\n    <Tab\n      ref=\"tabRef\"\n      as=\"template\"\n      v-for=\"(tab, i) in t.tabs\"\n      :key=\"i\"\n      v-slot=\"{ selected }\"\n      class=\"focus:outline-none focus:transition-none\"\n    >\n      <slot v-bind=\"{ tab, selected }\">\n        <button\n          class=\"flex items-center gap-1.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:text-ink-gray-9\"\n          :class=\"[\n            selected ? 'text-ink-gray-9' : '',\n            t.vertical\n              ? 'py-2.5 px-4 border-r border-transparent hover:border-outline-gray-3'\n              : 'py-3 border-b border-transparent hover:border-outline-gray-3',\n          ]\"\n        >\n          <component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"size-4\" />\n          {{ tab.label }}\n        </button>\n      </slot>\n    </Tab>\n    <div\n      ref=\"indicator\"\n      class=\"tab-indicator absolute bg-surface-gray-7\"\n      :class=\"[t.vertical ? 'right-0 w-px' : 'bottom-0 h-px', transitionClass]\"\n    />\n  </TabList>\n</template>\n<script setup>\nimport { TabList, Tab } from '@headlessui/vue'\nimport { ref, watch, computed, onMounted, nextTick, inject } from 'vue'\n\nconst t = inject('tab')\n\nconst tabRef = ref([])\nconst indicator = ref(null)\nconst tabsLength = computed(() => t.value.tabs.value?.length)\n\nconst transitionClass = ref('')\n\nfunction moveIndicator(index) {\n  if (index >= tabsLength.value) {\n    index = tabsLength.value - 1\n  }\n  const selectedTab = tabRef.value[index].el\n  if (t.value.vertical.value) {\n    indicator.value.style.height = `${selectedTab.offsetHeight}px`\n    indicator.value.style.top = `${selectedTab.offsetTop}px`\n  } else {\n    indicator.value.style.width = `${selectedTab.offsetWidth}px`\n    indicator.value.style.left = `${selectedTab.offsetLeft}px`\n  }\n}\n\nwatch(\n  () => t.value.tabIndex.value,\n  (index) => {\n    if (index >= tabsLength.value) {\n      t.value.tabIndex.value = tabsLength.value - 1\n    }\n    transitionClass.value = 'transition-all duration-300 ease-in-out'\n    nextTick(() => moveIndicator(index))\n  },\n)\n\nonMounted(() => {\n  nextTick(() => moveIndicator(t.value.tabIndex.value))\n  // Fix for indicator not moving on initial load\n  setTimeout(() => moveIndicator(t.value.tabIndex.value), 100)\n})\n</script>\n","<template>\n  <TabPanels class=\"flex flex-1 overflow-hidden\">\n    <TabPanel\n      class=\"flex flex-1 flex-col overflow-y-auto focus:outline-none\"\n      v-for=\"(tab, i) in t.tabs\"\n      :key=\"i\"\n    >\n      <slot v-bind=\"{ tab }\" />\n    </TabPanel>\n  </TabPanels>\n</template>\n<script setup>\nimport { TabPanels, TabPanel } from '@headlessui/vue'\nimport { inject } from 'vue'\n\nconst t = inject('tab')\n</script>\n","<template>\n  <TabGroup\n    v-bind=\"\n      as !== 'template'\n        ? {\n            as,\n            class: ['flex flex-1 overflow-hidden', vertical ? '' : 'flex-col '],\n          }\n        : {}\n    \"\n    :defaultIndex=\"tabIndex\"\n    :selectedIndex=\"tabIndex\"\n    @change=\"(idx) => (tabIndex = idx)\"\n  >\n    <slot>\n      <TabList v-slot=\"{ tab, selected }\">\n        <slot name=\"tab-item\" v-bind=\"{ tab, selected }\" />\n      </TabList>\n      <TabPanel v-slot=\"{ tab }\">\n        <slot name=\"tab-panel\" v-bind=\"{ tab }\" />\n      </TabPanel>\n    </slot>\n  </TabGroup>\n</template>\n\n<script setup>\nimport TabList from './TabList.vue'\nimport TabPanel from './TabPanel.vue'\nimport { TabGroup } from '@headlessui/vue'\nimport { computed, provide } from 'vue'\n\nconst props = defineProps({\n  as: {\n    type: String,\n    default: 'template',\n  },\n  tabs: {\n    type: Array,\n    required: true,\n  },\n  vertical: {\n    type: Boolean,\n    default: false,\n  },\n})\n\nconst tabIndex = defineModel()\n\nprovide(\n  'tab',\n  computed(() => ({\n    tabIndex,\n    tabs: props.tabs,\n    vertical: props.vertical,\n  })),\n)\n</script>\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      title: 'Canned Responses',\n      size: '4xl',\n    }\"\n  >\n    <template #body-content>\n      <TextInput\n        ref=\"searchInput\"\n        v-model=\"search\"\n        type=\"text\"\n        :placeholder=\"'Site Down'\"\n      >\n        <template #prefix>\n          <FeatherIcon name=\"search\" class=\"h-4 w-4 text-gray-500\" />\n        </template>\n      </TextInput>\n      <div\n        v-if=\"filteredTemplates.length\"\n        class=\"mt-2 grid max-h-[560px] grid-cols-1 md:grid-cols-3 gap-2 overflow-y-auto\"\n      >\n        <div\n          v-for=\"template in filteredTemplates\"\n          :key=\"template.name\"\n          class=\"flex h-56 cursor-pointer flex-col gap-2 rounded-lg border p-3 hover:bg-gray-100\"\n          @click=\"emit('apply', template)\"\n        >\n          <div class=\"border-b pb-2 text-base font-semibold\">\n            {{ template.title }}\n          </div>\n          <TextEditor\n            v-if=\"template.message\"\n            :content=\"template.message\"\n            :editable=\"false\"\n            editor-class=\"!prose-sm max-w-none !text-sm text-gray-600 focus:outline-none\"\n            class=\"flex-1 overflow-hidden\"\n          />\n        </div>\n      </div>\n      <div v-else class=\"mt-2\">\n        <div class=\"flex h-56 flex-col items-center justify-center\">\n          <div class=\"text-lg text-gray-500\">\n            {{ \"No templates found\" }}\n          </div>\n        </div>\n      </div>\n      <div class=\"flex justify-end mt-4\">\n        <Button\n          label=\"New Canned Response\"\n          @click=\"\n            () => {\n              $router.push('/canned-responses#new');\n              templates.data = null;\n            }\n          \"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport { TextEditor, createListResource } from \"frappe-ui\";\nimport { ref, computed, nextTick, watch, onMounted, onUnmounted } from \"vue\";\nimport { showEmailBox } from \"../pages/ticket/modalStates\";\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst show = defineModel();\nconst searchInput = ref(\"\");\n\nconst emit = defineEmits([\"apply\"]);\n\nconst search = ref(\"\");\n\nconst templates = createListResource({\n  type: \"list\",\n  doctype: \"HD Canned Response\",\n  cache: [\"cannedResponses\", props.doctype],\n  fields: [\"title\", \"message\", \"modified\"],\n  orderBy: \"modified desc\",\n  pageLength: 99999,\n});\n\nonMounted(() => {\n  if (templates.data == null) {\n    templates.fetch();\n  }\n});\nonUnmounted(() => {\n  showEmailBox.value = true;\n});\n\nconst filteredTemplates = computed(() => {\n  return (\n    templates.data?.filter((template) => {\n      return template.title.toLowerCase().includes(search.value.toLowerCase());\n    }) ?? []\n  );\n});\n\nwatch(show, (value) => value && nextTick(() => searchInput.value?.el?.focus()));\n</script>\n","<template>\n  <div class=\"flex-col text-base flex-1\" ref=\"commentBoxRef\">\n    <div class=\"mb-1 ml-0.5 flex items-center justify-between\">\n      <div class=\"text-gray-600 flex items-center gap-2\">\n        <Avatar\n          size=\"md\"\n          :label=\"commenter\"\n          :image=\"getUser(commentedBy).user_image\"\n        />\n        <p>\n          <span class=\"font-medium text-gray-800\">\n            {{ commenter }}\n          </span>\n          <span> added a</span>\n          <span class=\"max-w-xs truncate font-medium text-gray-800\">\n            comment\n          </span>\n        </p>\n      </div>\n      <div class=\"flex items-center gap-1\">\n        <Tooltip :text=\"dateFormat(creation, dateTooltipFormat)\">\n          <span class=\"pl-0.5 text-sm text-gray-600\">\n            {{ timeAgo(creation) }}\n          </span>\n        </Tooltip>\n        <div v-if=\"authStore.userId === commentedBy && !editable\">\n          <Dropdown\n            :placement=\"'right'\"\n            :options=\"[\n              {\n                label: 'Edit',\n                onClick: () => handleEditMode(),\n                icon: 'edit-2',\n                condition: () => !isTicketMergedComment,\n              },\n              {\n                label: 'Delete',\n                onClick: () => (showDialog = true),\n                icon: 'trash-2',\n              },\n            ]\"\n          >\n            <Button\n              icon=\"more-horizontal\"\n              class=\"text-gray-600\"\n              variant=\"ghost\"\n            />\n          </Dropdown>\n        </div>\n      </div>\n    </div>\n    <div\n      :id=\"`comment-${name}`\"\n      class=\"rounded bg-gray-50 transition-colors px-4 py-3\"\n    >\n      <TextEditor\n        ref=\"editorRef\"\n        :editor-class=\"[\n          'prose-f shrink text-p-sm transition-all duration-300 ease-in-out block w-full content',\n          getFontFamily(_content),\n        ]\"\n        :content=\"_content\"\n        :editable=\"editable\"\n        :bubble-menu=\"textEditorMenuButtons\"\n        @change=\"(event:string) => {_content = event}\"\n      >\n        <template #bottom v-if=\"editable\">\n          <div class=\"flex flex-row-reverse gap-2\">\n            <Button label=\"Save\" @click=\"handleSaveComment\" variant=\"solid\" />\n            <Button label=\"Discard\" @click=\"handleDiscard\" />\n          </div>\n        </template>\n      </TextEditor>\n      <div class=\"flex flex-wrap gap-2\" v-if=\"!editable\">\n        <AttachmentItem\n          v-for=\"a in attachments\"\n          :key=\"a.file_url\"\n          :label=\"a.file_name\"\n          :url=\"a.file_url\"\n        />\n      </div>\n    </div>\n  </div>\n  <Dialog\n    v-model=\"showDialog\"\n    :options=\"{\n      title: 'Delete Comment',\n      message: 'Are you sure you want to confirm this action?',\n      actions: [\n        { label: 'Cancel', onClick: () => (showDialog = false) },\n        {\n          label: 'Delete',\n          onClick: () => deleteComment.submit(),\n          variant: 'solid',\n        },\n      ],\n    }\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { AttachmentItem } from \"@/components\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { updateRes as updateComment } from \"@/stores/knowledgeBase\";\nimport { useUserStore } from \"@/stores/user\";\nimport { CommentActivity } from \"@/types\";\nimport {\n  dateFormat,\n  dateTooltipFormat,\n  getFontFamily,\n  isContentEmpty,\n  textEditorMenuButtons,\n  timeAgo,\n} from \"@/utils\";\nimport {\n  Avatar,\n  Dialog,\n  Dropdown,\n  TextEditor,\n  createResource,\n  toast,\n} from \"frappe-ui\";\nimport { PropType, computed, onMounted, ref } from \"vue\";\nconst authStore = useAuthStore();\nconst props = defineProps({\n  activity: {\n    type: Object as PropType<CommentActivity>,\n    required: true,\n  },\n});\nconst { getUser } = useUserStore();\n\nconst { name, creation, content, commenter, commentedBy, attachments } =\n  props.activity;\n\nconst isTicketMergedComment = computed(() => {\n  const regex = /has been merged with ticket #\\d+/;\n  return regex.test(content);\n});\n\nconst emit = defineEmits([\"update\"]);\nconst showDialog = ref(false);\nconst editable = ref(false);\nconst _content = ref(content);\n\n// HTML refs\nconst commentBoxRef = ref(null);\nconst editorRef = ref(null);\n\nfunction handleEditMode() {\n  editable.value = true;\n  editorRef.value.editor.chain().focus(\"start\");\n}\n\nfunction handleDiscard() {\n  _content.value = content;\n  editable.value = false;\n}\n\nconst deleteComment = createResource({\n  url: \"frappe.client.delete\",\n  makeParams: () => ({\n    doctype: \"HD Ticket Comment\",\n    name: name,\n  }),\n  onSuccess() {\n    emit(\"update\");\n    showDialog.value = false;\n    toast.success(\"Comment deleted\");\n  },\n});\n\nfunction handleSaveComment() {\n  if (content === _content.value) {\n    editable.value = false;\n    return;\n  }\n  if (isContentEmpty(_content.value)) {\n    toast.error(\"Comment cannot be empty\");\n    return;\n  }\n\n  updateComment.submit(\n    {\n      doctype: \"HD Ticket Comment\",\n      name: name,\n      fieldname: \"content\",\n      value: _content.value,\n    },\n    {\n      onSuccess: () => {\n        editable.value = false;\n        emit(\"update\");\n        toast.success(\"Comment updated\");\n      },\n    }\n  );\n}\n\nonMounted(() => {\n  commentBoxRef.value.style.width = \"0px\";\n});\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M6.29021 2.64272C6.68375 0.785763 9.33429 0.785757 9.72783 2.64272L10.3657 5.65238L13.3753 6.29021C15.2323 6.68375 15.2323 9.33429 13.3753 9.72783L10.3657 10.3657L9.72783 13.3753C9.33429 15.2323 6.68375 15.2323 6.29021 13.3753L5.65238 10.3657L2.64272 9.72783C0.785763 9.33429 0.785757 6.68375 2.64272 6.29021L5.65238 5.65238L6.29021 2.64272ZM8.74956 2.85004C8.58 2.04999 7.43804 2.04998 7.26848 2.85004L6.56324 6.17777L6.49584 6.49583L6.17777 6.56324L2.85004 7.26848C2.04999 7.43804 2.04998 8.58 2.85004 8.74956L6.17777 9.4548L6.49584 9.5222L6.56324 9.84027L7.26848 13.168C7.43804 13.9681 8.58 13.9681 8.74956 13.168L9.4548 9.84027L9.5222 9.5222L9.84027 9.4548L13.168 8.74956C13.9681 8.58 13.9681 7.43804 13.168 7.26848L9.84027 6.56324L9.5222 6.49583L9.4548 6.17777L8.74956 2.85004Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M12.5684 2.50774C11.5403 1.49742 9.95026 1.49742 8.92215 2.50774L3.62404 7.71417C2.12532 9.18695 2.12532 11.669 3.62404 13.1418C5.12762 14.6194 7.66861 14.6194 9.17219 13.1418L12.1609 10.2049C12.3578 10.0113 12.6744 10.0141 12.8679 10.211C13.0615 10.408 13.0587 10.7246 12.8618 10.9181L9.8731 13.8551C7.98045 15.715 4.81578 15.715 2.92313 13.8551C1.02562 11.9904 1.02562 8.86558 2.92313 7.00091L8.22124 1.79449C9.63842 0.401838 11.8521 0.401838 13.2693 1.79449C14.6914 3.19191 14.6914 5.38225 13.2693 6.77968L13.2668 6.78213L13.2668 6.78212L8.37876 11.5189C8.37834 11.5193 8.37793 11.5197 8.37752 11.5201C7.51767 12.3638 6.11144 12.3939 5.29119 11.5097C4.43611 10.6596 4.40778 9.26893 5.30922 8.46081L7.33823 6.46692C7.53518 6.27337 7.85175 6.27613 8.04531 6.47309C8.23886 6.67005 8.23609 6.98662 8.03913 7.18017L6.0014 9.18264L5.99203 9.19185L5.98219 9.20055C5.5391 9.59243 5.5104 10.3231 6.0014 10.8056L6.01078 10.8148L6.01967 10.8245C6.42299 11.2649 7.18224 11.2926 7.67785 10.8056L7.68034 10.8032L7.68035 10.8032L12.5684 6.06643C12.5688 6.06604 12.5692 6.06565 12.5696 6.06526C13.5917 5.05969 13.5913 3.51289 12.5684 2.50774Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M8 2.5C4.2911 2.5 1.5 4.84419 1.5 7.5C1.5 9.14452 2.54729 10.6518 4.25112 11.5816C4.50048 11.7177 4.758 12.0041 4.7326 12.4082C4.71107 12.7508 4.61659 13.2533 4.47175 13.6657C4.44071 13.7541 4.40789 13.8389 4.37434 13.9195C4.62005 13.8524 4.91964 13.7411 5.26646 13.5579C5.48882 13.4404 5.69385 13.2901 5.9102 13.1207C5.95058 13.089 5.9922 13.056 6.03481 13.0222C6.20816 12.8848 6.39803 12.7342 6.58835 12.6102C6.7875 12.4803 7.01146 12.4447 7.20831 12.4631C7.46767 12.4875 7.73186 12.5 8 12.5C11.7089 12.5 14.5 10.1558 14.5 7.5C14.5 4.84419 11.7089 2.5 8 2.5ZM0.5 7.5C0.5 4.08068 3.97691 1.5 8 1.5C12.0231 1.5 15.5 4.08068 15.5 7.5C15.5 10.9193 12.0231 13.5 8 13.5C7.70158 13.5 7.40709 13.4861 7.11751 13.459C6.97583 13.5528 6.83777 13.6621 6.67569 13.7905C6.62832 13.828 6.5789 13.8671 6.52674 13.908C6.30071 14.085 6.03818 14.2812 5.73354 14.4421C4.73389 14.9702 3.9948 15.0302 3.62977 15.0147C3.39759 15.0048 3.20936 14.8646 3.12194 14.6754C3.03801 14.4938 3.05143 14.2816 3.15736 14.1099C3.24804 13.963 3.40655 13.6808 3.52825 13.3343C3.62961 13.0457 3.70134 12.6878 3.72712 12.4347C1.81521 11.3748 0.5 9.58517 0.5 7.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <circle cx=\"8\" cy=\"8\" :r=\"radius\" fill=\"currentColor\" />\n  </svg>\n</template>\n<script setup>\nconst props = defineProps({\n  radius: {\n    type: Number,\n    default: 3.5,\n  },\n});\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M5.85355 3.14645C5.65829 2.95118 5.34171 2.95118 5.14645 3.14645L1.14645 7.14645C0.951184 7.34171 0.951184 7.65829 1.14645 7.85355L5.14645 11.8536C5.34171 12.0488 5.65829 12.0488 5.85355 11.8536C6.04882 11.6583 6.04882 11.3417 5.85355 11.1464L2.20711 7.5L5.85355 3.85355C6.04882 3.65829 6.04882 3.34171 5.85355 3.14645ZM10 8C11.933 8 13.5 9.567 13.5 11.5V12C13.5 12.2761 13.7239 12.5 14 12.5C14.2761 12.5 14.5 12.2761 14.5 12V11.5C14.5 9.01472 12.4853 7 10 7H6.6728L9.81924 3.85355C10.0145 3.65829 10.0145 3.34171 9.81924 3.14645C9.62398 2.95118 9.3074 2.95118 9.11214 3.14645L5.11214 7.14645C4.91688 7.34171 4.91688 7.65829 5.11214 7.85355L9.11214 11.8536C9.3074 12.0488 9.62398 12.0488 9.81924 11.8536C10.0145 11.6583 10.0145 11.3417 9.81924 11.1464L6.6728 8H10Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M5.64645 3.14645C5.84171 2.95118 6.15829 2.95118 6.35355 3.14645C6.54882 3.34171 6.54882 3.65829 6.35355 3.85355L3.20711 7H10C12.4853 7 14.5 9.01472 14.5 11.5V12C14.5 12.2761 14.2761 12.5 14 12.5C13.7239 12.5 13.5 12.2761 13.5 12V11.5C13.5 9.567 11.933 8 10 8H3.20711L6.35355 11.1464C6.54882 11.3417 6.54882 11.6583 6.35355 11.8536C6.15829 12.0488 5.84171 12.0488 5.64645 11.8536L1.64645 7.85355C1.45118 7.65829 1.45118 7.34171 1.64645 7.14645L5.64645 3.14645Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M5.85355 9.64645C5.65829 9.45118 5.34171 9.45118 5.14645 9.64645C4.95118 9.84171 4.95118 10.1583 5.14645 10.3536L7.64645 12.8536C7.84171 13.0488 8.15829 13.0488 8.35355 12.8536L10.8536 10.3536C11.0488 10.1583 11.0488 9.84171 10.8536 9.64645C10.6583 9.45118 10.3417 9.45118 10.1464 9.64645L8 11.7929L5.85355 9.64645ZM5.85355 6.35355C5.65829 6.54882 5.34171 6.54882 5.14645 6.35355C4.95118 6.15829 4.95118 5.84171 5.14645 5.64645L7.64645 3.14645C7.84171 2.95118 8.15829 2.95118 8.35355 3.14645L10.8536 5.64645C11.0488 5.84171 11.0488 6.15829 10.8536 6.35355C10.6583 6.54882 10.3417 6.54882 10.1464 6.35355L8 4.20711L5.85355 6.35355Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","import { computed } from \"vue\";\nimport { defineStore } from \"pinia\";\nimport { createListResource } from \"frappe-ui\";\n\nexport const useAgentStore = defineStore(\"agent\", () => {\n  const agents = createListResource({\n    doctype: \"HD Agent\",\n    fields: [\"name\", \"agent_name\", \"user\", \"user.user_image\"],\n    filters: { is_active: 1 },\n    pageLength: 99999,\n  });\n\n  const dropdown = computed(() =>\n    agents.data?.map((o) => ({\n      label: o.agent_name,\n      value: o.name,\n    }))\n  );\n\n  function searchAgents(query: string) {\n    return agents.data.filter((a) =>\n      a.user?.toLowerCase().includes(query.toLowerCase())\n    );\n  }\n\n  return {\n    dropdown,\n    agents,\n    searchAgents,\n  };\n});\n","<template>\n  <TextEditor\n    v-if=\"agentsList.data\"\n    ref=\"editorRef\"\n    :editor-class=\"[\n      'prose-sm max-w-none',\n      editable &&\n        'min-h-[7rem] mx-6 md:ml-10 md:mr-9 max-h-[50vh] overflow-y-auto border-t py-3',\n      getFontFamily(newComment),\n    ]\"\n    :content=\"newComment\"\n    :starterkit-options=\"{ heading: { levels: [2, 3, 4, 5, 6] } }\"\n    :placeholder=\"placeholder\"\n    :editable=\"editable\"\n    :mentions=\"agents\"\n    @change=\"editable ? (newComment = $event) : null\"\n    :extensions=\"[PreserveVideoControls]\"\n    :uploadFunction=\"(file:any)=>uploadFunction(file, doctype, ticketId)\"\n  >\n    <template #bottom>\n      <div v-if=\"editable\" class=\"flex flex-col gap-2 px-6 md:pl-10 md:pr-9\">\n        <!-- Attachments -->\n        <div class=\"flex flex-wrap gap-2\">\n          <AttachmentItem\n            v-for=\"a in attachments\"\n            :key=\"a.file_url\"\n            :label=\"a.file_name\"\n            :url=\"!['MOV', 'MP4'].includes(a.file_type) ? a.file_url : null\"\n          >\n            <template #suffix>\n              <FeatherIcon\n                class=\"h-3.5\"\n                name=\"x\"\n                @click.stop=\"removeAttachment(a)\"\n              />\n            </template>\n          </AttachmentItem>\n        </div>\n        <!-- Fixed Menu -->\n        <div class=\"flex justify-between overflow-hidden border-t py-2.5\">\n          <div class=\"flex items-center overflow-x-auto w-[60%]\">\n            <TextEditorFixedMenu\n              class=\"-ml-1\"\n              :buttons=\"textEditorMenuButtons\"\n            />\n            <FileUploader\n              :upload-args=\"{\n                doctype: doctype,\n                docname: ticketId,\n                private: true,\n              }\"\n              @success=\"(f) => attachments.push(f)\"\n            >\n              <template #default=\"{ openFileSelector }\">\n                <Button\n                  theme=\"gray\"\n                  variant=\"ghost\"\n                  @click=\"openFileSelector()\"\n                >\n                  <template #icon>\n                    <AttachmentIcon\n                      class=\"h-4\"\n                      style=\"color: #000000; stroke-width: 1.5 !important\"\n                    />\n                  </template>\n                </Button>\n              </template>\n            </FileUploader>\n          </div>\n          <div class=\"flex items-center justify-end space-x-2 w-[40%]\">\n            <Button\n              label=\"Discard\"\n              @click=\"\n                () => {\n                  newComment = '';\n                  attachments = [];\n                  emit('discard');\n                }\n              \"\n            />\n            <Button\n              variant=\"solid\"\n              :label=\"label\"\n              :disabled=\"commentEmpty\"\n              :loading=\"loading\"\n              @click=\"\n                () => {\n                  loading = true;\n                  submitComment();\n                  newComment = '';\n                }\n              \"\n            />\n          </div>\n        </div>\n      </div>\n    </template>\n  </TextEditor>\n</template>\n<script setup lang=\"ts\">\nimport {\n  FileUploader,\n  TextEditor,\n  TextEditorFixedMenu,\n  createResource,\n} from \"frappe-ui\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport { computed, onBeforeUnmount, onMounted, ref, watch } from \"vue\";\n\nimport { AttachmentItem } from \"@/components/\";\nimport { AttachmentIcon } from \"@/components/icons/\";\nimport { useTyping } from \"@/composables/realtime\";\nimport { useAgentStore } from \"@/stores/agent\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { PreserveVideoControls } from \"@/tiptap-extensions\";\nimport {\n  getFontFamily,\n  isContentEmpty,\n  removeAttachmentFromServer,\n  textEditorMenuButtons,\n  uploadFunction,\n} from \"@/utils\";\nimport { useStorage } from \"@vueuse/core\";\n\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\nconst { agents: agentsList } = useAgentStore();\nconst { isManager } = useAuthStore();\n\nonMounted(() => {\n  if (\n    agentsList.loading ||\n    agentsList.data?.length ||\n    agentsList.list.promise\n  ) {\n    return;\n  }\n  agentsList.fetch();\n});\n\nconst props = defineProps({\n  ticketId: {\n    type: String,\n    default: null,\n  },\n  placeholder: {\n    type: String,\n    default: null,\n  },\n  label: {\n    type: String,\n    default: \"Comment\",\n  },\n  editable: {\n    type: Boolean,\n    default: true,\n  },\n  doctype: {\n    type: String,\n    default: \"HD Ticket\",\n  },\n});\n\nconst emit = defineEmits([\"submit\", \"discard\"]);\n\nconst newComment = useStorage(\"commentBoxContent\" + props.ticketId, null);\n\n// Initialize typing composable\nconst { onUserType, cleanup } = useTyping(props.ticketId);\n\nconst attachments = ref([]);\nconst commentEmpty = computed(() => {\n  return isContentEmpty(newComment.value);\n});\nconst loading = ref(false);\n\n// Watch for changes in comment content to trigger typing events\nwatch(newComment, (newValue, oldValue) => {\n  if (newValue !== oldValue && newValue) {\n    onUserType();\n  }\n});\n\nonBeforeUnmount(() => {\n  cleanup();\n});\n\nconst label = computed(() => {\n  return loading.value ? \"Sending...\" : props.label;\n});\n\nconst agents = computed(() => {\n  return (\n    agentsList.data?.map((agent) => ({\n      label: agent.agent_name.trimEnd(),\n      value: agent.name,\n    })) || []\n  );\n});\n\nfunction removeAttachment(attachment) {\n  attachments.value = attachments.value.filter((a) => a !== attachment);\n  removeAttachmentFromServer(attachment.name);\n}\n\nasync function submitComment() {\n  if (isContentEmpty(newComment.value)) {\n    return false;\n  }\n  const comment = createResource({\n    url: \"run_doc_method\",\n    makeParams: () => ({\n      dt: props.doctype,\n      dn: props.ticketId,\n      method: \"new_comment\",\n      args: {\n        content: newComment.value,\n        attachments: attachments.value,\n      },\n    }),\n    onSuccess: () => {\n      if (isManager) {\n        updateOnboardingStep(\"comment_on_ticket\");\n      }\n      emit(\"submit\");\n      loading.value = false;\n      attachments.value = [];\n      newComment.value = null;\n    },\n    onError: () => {\n      loading.value = false;\n    },\n  });\n\n  comment.submit();\n}\n\nconst editorRef = ref(null);\nconst editor = computed(() => editorRef.value?.editor);\n\ndefineExpose({\n  submitComment,\n  editor,\n});\n</script>\n","<template>\n  <div class=\"comm-area\">\n    <div\n      class=\"flex justify-between gap-3 border-t px-6 md:px-10 py-4 md:py-2.5\"\n    >\n      <div class=\"flex gap-1.5 items-center\">\n        <Button\n          ref=\"sendEmailRef\"\n          variant=\"ghost\"\n          label=\"Reply\"\n          :class=\"[showEmailBox ? '!bg-gray-300 hover:!bg-gray-200' : '']\"\n          @click=\"toggleEmailBox()\"\n        >\n          <template #prefix>\n            <EmailIcon class=\"h-4\" />\n          </template>\n        </Button>\n        <Button\n          variant=\"ghost\"\n          label=\"Comment\"\n          :class=\"[showCommentBox ? '!bg-gray-300 hover:!bg-gray-200' : '']\"\n          @click=\"toggleCommentBox()\"\n        >\n          <template #prefix>\n            <CommentIcon class=\"h-4\" />\n          </template>\n        </Button>\n        <TypingIndicator :ticketId=\"ticketId\" />\n      </div>\n    </div>\n    <div\n      v-show=\"showEmailBox\"\n      ref=\"emailBoxRef\"\n      class=\"flex gap-1.5 flex-1\"\n      @keydown.ctrl.enter.capture.stop=\"submitEmail\"\n      @keydown.meta.enter.capture.stop=\"submitEmail\"\n    >\n      <EmailEditor\n        ref=\"emailEditorRef\"\n        :label=\"\n          isMobileView ? 'Send' : isMac ? 'Send (⌘ + ⏎)' : 'Send (Ctrl + ⏎)'\n        \"\n        v-model:content=\"content\"\n        placeholder=\"Hi John, we are looking into this issue.\"\n        :ticketId=\"ticketId\"\n        :to-emails=\"toEmails\"\n        :cc-emails=\"ccEmails\"\n        :bcc-emails=\"bccEmails\"\n        @submit=\"\n          () => {\n            showEmailBox = false;\n            emit('update');\n          }\n        \"\n        @discard=\"\n          () => {\n            showEmailBox = false;\n          }\n        \"\n      />\n    </div>\n    <div\n      v-show=\"showCommentBox\"\n      ref=\"commentBoxRef\"\n      @keydown.ctrl.enter.capture.stop=\"submitComment\"\n      @keydown.meta.enter.capture.stop=\"submitComment\"\n    >\n      <CommentTextEditor\n        ref=\"commentTextEditorRef\"\n        :label=\"\n          isMobileView\n            ? 'Comment'\n            : isMac\n            ? 'Comment (⌘ + ⏎)'\n            : 'Comment (Ctrl + ⏎)'\n        \"\n        :ticketId=\"ticketId\"\n        :editable=\"showCommentBox\"\n        :doctype=\"doctype\"\n        placeholder=\"@John could you please look into this?\"\n        @submit=\"\n          () => {\n            showCommentBox = false;\n            emit('update');\n          }\n        \"\n        @discard=\"\n          () => {\n            showCommentBox = false;\n          }\n        \"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { CommentTextEditor, EmailEditor, TypingIndicator } from \"@/components\";\nimport { CommentIcon, EmailIcon } from \"@/components/icons/\";\nimport { useDevice } from \"@/composables\";\nimport { useScreenSize } from \"@/composables/screen\";\nimport { showCommentBox, showEmailBox } from \"@/pages/ticket/modalStates\";\nimport { ref, watch } from \"vue\";\nimport { useShortcut } from \"@/composables/shortcuts\";\n\nconst emit = defineEmits([\"update\"]);\nconst content = defineModel(\"content\");\nconst { isMac } = useDevice();\nconst { isMobileView } = useScreenSize();\nlet doc = defineModel();\n// let doc = inject(TicketSymbol)?.value.doc\nconst emailEditorRef = ref(null);\nconst commentTextEditorRef = ref(null);\nconst emailBoxRef = ref(null);\nconst commentBoxRef = ref(null);\n\nfunction toggleEmailBox() {\n  if (showCommentBox.value) {\n    showCommentBox.value = false;\n  }\n  showEmailBox.value = !showEmailBox.value;\n}\n\nfunction toggleCommentBox() {\n  if (showEmailBox.value) {\n    showEmailBox.value = false;\n  }\n  showCommentBox.value = !showCommentBox.value;\n}\n\nfunction submitEmail() {\n  if (emailEditorRef.value.submitMail()) {\n    emit(\"update\");\n  }\n}\n\nfunction submitComment() {\n  if (commentTextEditorRef.value.submitComment()) {\n    emit(\"update\");\n  }\n}\n\nfunction splitIfString(str: string | string[]) {\n  if (typeof str === \"string\") {\n    return str.split(\",\");\n  }\n  return str;\n}\n\nfunction replyToEmail(data: object) {\n  showEmailBox.value = true;\n\n  emailEditorRef.value.addToReply(\n    data.content,\n    splitIfString(data.to),\n    splitIfString(data.cc),\n    splitIfString(data.bcc)\n  );\n}\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    default: \"HD Ticket\",\n  },\n  ticketId: {\n    type: String,\n    default: null,\n  },\n  toEmails: {\n    type: Array,\n    default: () => [],\n  },\n  ccEmails: {\n    type: Array,\n    default: () => [],\n  },\n  bccEmails: {\n    type: Array,\n    default: () => [],\n  },\n});\n\nwatch(\n  () => showEmailBox.value,\n  (value) => {\n    if (value) {\n      emailEditorRef.value?.editor?.commands?.focus();\n    }\n  }\n);\n\nwatch(\n  () => showCommentBox.value,\n  (value) => {\n    if (value) {\n      commentTextEditorRef.value?.editor?.commands?.focus();\n    }\n  }\n);\n\nuseShortcut(\"r\", () => {\n  toggleEmailBox();\n});\nuseShortcut(\"c\", () => {\n  toggleCommentBox();\n});\n\ndefineExpose({\n  replyToEmail,\n  toggleEmailBox,\n  toggleCommentBox,\n  editor: emailEditorRef,\n});\n\nimport { onClickOutside } from \"@vueuse/core\";\n\nonClickOutside(emailBoxRef, () => {\n  if (showEmailBox.value) {\n    showEmailBox.value = false;\n  }\n});\n\nonClickOutside(commentBoxRef, () => {\n  if (showCommentBox.value) {\n    showCommentBox.value = false;\n  }\n});\n</script>\n\n<style>\n@media screen and (max-width: 640px) {\n  .comm-area {\n    width: 100vw;\n  }\n}\n</style>\n","<template>\n  <Dialog :options=\"{ title: `Split ticket` }\" v-model=\"showDialog\">\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <p class=\"text-p-base text-ink-gray-8\">\n          All\n          <span class=\"underline\">emails/ comments</span>\n          from this email onwards will be moved to new ticket.\n        </p>\n        <FormControl\n          label=\"New Ticket Subject\"\n          type=\"text\"\n          v-model=\"subject\"\n          placeholder=\"Add a subject for the new ticket\"\n        />\n        <div\n          class=\"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200\"\n        >\n          <TriangleAlert\n            class=\"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-yellow-500\"\n          />\n\n          <div class=\"text-wrap text-sm text-gray-700\">\n            This action is irreversible.\n          </div>\n        </div>\n      </div>\n    </template>\n    <template #actions>\n      <Button\n        class=\"w-full\"\n        variant=\"solid\"\n        label=\"Split into new ticket\"\n        :loading=\"splitTicket.loading\"\n        :icon-left=\"LucideSplit\"\n        @click=\"handleTicketSplit\"\n      />\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { Dialog, createResource, toast } from \"frappe-ui\";\nimport { ref } from \"vue\";\nimport LucideSplit from \"~icons/lucide/split\";\nimport TriangleAlert from \"~icons/lucide/triangle-alert\";\n\ninterface Props {\n  ticket_id: string;\n  communication_id: string;\n}\n\ninterface E {\n  (event: \"update\"): void;\n  //   (event: \"rowClick\", row: any): void;\n}\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<E>();\nconst showDialog = defineModel<boolean>();\n\nconst subject = ref(null);\n\nconst splitTicket = createResource({\n  url: \"helpdesk.helpdesk.doctype.hd_ticket.api.split_ticket\",\n  makeParams({ subject, communication_id }) {\n    return {\n      subject,\n      communication_id,\n    };\n  },\n  validate({ subject, communication_id }) {\n    if (!subject) throw { message: \"Subject is required\" };\n    if (!communication_id) throw { message: \"Communication ID is required\" };\n  },\n  onSuccess: (newTicket: string) => {\n    toast.success(\"Ticket split successfully\");\n    showDialog.value = false;\n    window.open(\n      window.location.origin + \"/helpdesk/tickets/\" + newTicket,\n      \"_blank\"\n    );\n    window.location.reload();\n  },\n});\n\nfunction handleTicketSplit() {\n  splitTicket.submit({\n    subject: subject.value,\n    communication_id: props.communication_id,\n  });\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    :id=\"`communication-${name}`\"\n    v-bind=\"$attrs\"\n    class=\"grow cursor-pointer border-transparent bg-white rounded-md shadow text-base leading-6 transition-all duration-300 ease-in-out\"\n  >\n    <div\n      class=\"flex items-center justify-between gap-2\"\n      :class=\"isMobileView && 'items-start'\"\n    >\n      <!-- email design for mobile -->\n      <div v-if=\"isMobileView\" class=\"flex items-center gap-2 text-sm\">\n        <div class=\"leading-tight\">\n          <p>{{ sender.full_name || \"No name found\" }}</p>\n          <Tooltip :text=\"dateFormat(creation, dateTooltipFormat)\">\n            <p class=\"text-xs md:text-sm text-gray-600\">\n              {{ timeAgo(creation) }}\n            </p>\n          </Tooltip>\n          <p class=\"sm:flex hidden text-sm text-gray-600\" v-if=\"sender.name\">\n            {{ \"<\" + sender.name + \">\" }}\n          </p>\n        </div>\n      </div>\n      <!-- email design for desktop -->\n      <div v-else class=\"flex items-center gap-1\">\n        <span>{{ sender.full_name || \"No name found\" }}</span>\n        <span class=\"sm:flex hidden text-sm text-gray-600\" v-if=\"sender.name\">{{\n          \"<\" + sender.name + \">\"\n        }}</span>\n      </div>\n\n      <div class=\"flex gap-0.5 items-center\">\n        <Badge\n          v-if=\"status.label\"\n          :label=\"__(status.label)\"\n          variant=\"subtle\"\n          :theme=\"status.color\"\n          class=\"mr-1.5\"\n        />\n        <Tooltip\n          :text=\"dateFormat(creation, dateTooltipFormat)\"\n          v-if=\"!isMobileView\"\n        >\n          <p class=\"text-xs md:text-sm text-gray-600\">\n            {{ timeAgo(creation) }}\n          </p>\n        </Tooltip>\n        <Button variant=\"ghost\" class=\"text-gray-700\" @click=\"reply\">\n          <ReplyIcon class=\"h-4 w-4\" />\n        </Button>\n        <Button variant=\"ghost\" class=\"text-gray-700\" @click=\"replyAll\">\n          <ReplyAllIcon class=\"h-4 w-4\" />\n        </Button>\n        <Dropdown\n          v-if=\"showSplitOption\"\n          :placement=\"'right'\"\n          :options=\"[\n            {\n              label: 'Split Ticket',\n              icon: LucideSplit,\n              onClick: () => (showSplitModal = true),\n            },\n          ]\"\n        >\n          <Button\n            icon=\"more-horizontal\"\n            class=\"text-gray-600\"\n            variant=\"ghost\"\n          />\n        </Dropdown>\n      </div>\n    </div>\n    <!-- <div class=\"text-sm leading-5 text-gray-600\">\n      {{ subject }}\n    </div> -->\n    <div class=\"text-sm leading-5 text-gray-600\">\n      <span v-if=\"to\" class=\"text-2xs mr-1 font-bold text-gray-500\">TO:</span>\n      <span v-if=\"to\"> {{ to }} </span>\n      <span v-if=\"cc\">, </span>\n      <span v-if=\"cc\" class=\"text-2xs mr-1 font-bold text-gray-500\"> CC: </span>\n      <span v-if=\"cc\">{{ cc }}</span>\n      <span v-if=\"bcc\">, </span>\n      <span v-if=\"bcc\" class=\"text-2xs mr-1 font-bold text-gray-500\">\n        BCC:\n      </span>\n      <span v-if=\"bcc\">{{ bcc }}</span>\n    </div>\n    <div class=\"border-0 border-t my-3 border-outline-gray-modals\" />\n    <EmailContent :content=\"content\" />\n    <div class=\"flex flex-wrap gap-2\">\n      <AttachmentItem\n        v-for=\"a in attachments\"\n        :key=\"a.file_url\"\n        :label=\"a.file_name\"\n        :url=\"a.file_url\"\n      />\n    </div>\n  </div>\n  <TicketSplitModal\n    v-model=\"showSplitModal\"\n    :ticket_id=\"name\"\n    :communication_id=\"name\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { AttachmentItem } from \"@/components\";\nimport { useScreenSize } from \"@/composables/screen\";\nimport { dateFormat, dateTooltipFormat, timeAgo } from \"@/utils\";\nimport { Dropdown } from \"frappe-ui\";\nimport { computed, ref } from \"vue\";\nimport LucideSplit from \"~icons/lucide/split\";\nimport { ReplyAllIcon, ReplyIcon } from \"./icons\";\nimport TicketSplitModal from \"./ticket/TicketSplitModal.vue\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { storeToRefs } from \"pinia\";\n\nconst props = defineProps({\n  activity: {\n    type: Object,\n    required: true,\n  },\n  showSplitOption: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst {\n  sender,\n  to,\n  cc,\n  bcc,\n  creation,\n  subject,\n  attachments,\n  content,\n  name,\n  deliveryStatus,\n} = props.activity;\n\nconst emit = defineEmits([\"reply\"]);\n\nconst auth = storeToRefs(useAuthStore());\n\nconst { isMobileView } = useScreenSize();\n\nconst showSplitModal = ref(false);\n\nconst status = computed(() => {\n  let _status = deliveryStatus;\n  let indicator_color = \"red\";\n  if ([\"Sent\", \"Clicked\"].includes(_status)) {\n    indicator_color = \"green\";\n  } else if ([\"Sending\", \"Scheduled\"].includes(_status)) {\n    indicator_color = \"orange\";\n  } else if ([\"Opened\", \"Read\"].includes(_status)) {\n    indicator_color = \"blue\";\n  } else if (_status == \"Error\") {\n    indicator_color = \"red\";\n  }\n  return { label: _status, color: indicator_color };\n});\n\nconst reply = () => {\n  const user = auth.user.value;\n  emit(\"reply\", {\n    content: content,\n    to: user === sender.name ? to : sender.name,\n  });\n};\n\nconst replyAll = () => {\n  const user = auth.user.value;\n\n  const normalizeAndFilter = (field) => {\n    let arr;\n    if (typeof field === \"string\") {\n      arr = field.split(\",\").map((s) => s.trim());\n    } else {\n      arr = field || [];\n    }\n    return arr.filter((item) => item !== user && item !== sender.name);\n  };\n\n  const filteredTo = normalizeAndFilter(to);\n  const filteredCc = normalizeAndFilter(cc);\n  const filteredBcc = normalizeAndFilter(bcc);\n\n  let _to, _cc, _bcc;\n\n  if (user === sender.name) {\n    // User is the sender, reply to all original recipients\n    _to = filteredTo.join(\", \");\n    _cc = filteredCc;\n    _bcc = filteredBcc;\n  } else {\n    // User is a recipient, reply to sender with all other recipients in cc\n    _to = sender.name;\n    _cc = [...filteredTo, ...filteredCc];\n    _bcc = filteredBcc;\n  }\n\n  emit(\"reply\", {\n    content: content,\n    to: _to,\n    cc: _cc.filter(Boolean),\n    bcc: _bcc.filter(Boolean),\n  });\n};\n\n// TODO: Implement reply functionality using this way instead of emit drillup\n// function reply(email, reply_all = false) {\n//   emailBox.toggleEmailBox();\n//   let editor = emailBox.editor;\n//   let message = email.content;\n//   let recipients = sender.name;\n//   editor.toEmails = [email.sender];\n//   editor.cc = editor.bcc = false;\n//   editor.ccEmails = [];\n//   editor.bccEmails = [];\n//   console.log(recipients);\n\n//   if (!email.subject.startsWith(\"Re:\")) {\n//     editor.subject = `Re: ${email.subject}`;\n//   } else {\n//     editor.subject = email.subject;\n//   }\n\n//   if (reply_all) {\n//     let cc = email.cc?.split(\",\").map((r) => r.trim());\n//     let bcc = email.bcc?.split(\",\").map((r) => r.trim());\n\n//     if (cc?.length) {\n//       recipients = recipients.filter((r) => !cc?.includes(r));\n//       cc.push(...recipients);\n//     } else {\n//       cc = recipients;\n//     }\n\n//     editor.cc = cc ? true : false;\n//     editor.bcc = bcc ? true : false;\n\n//     editor.ccEmails = cc;\n//     editor.bccEmails = bcc;\n//   }\n\n//   let repliedMessage = `<blockquote>${message}</blockquote>`;\n\n//   editor.editor\n//     .chain()\n//     .clearContent()\n//     .insertContent(\"<p>.</p>\")\n//     .updateAttributes(\"paragraph\", { class: \"reply-to-content\" })\n//     .insertContent(repliedMessage)\n//     .focus(\"all\")\n//     .insertContentAt(0, { type: \"paragraph\" })\n//     .focus(\"start\")\n//     .run();\n// }\n</script>\n\n<style>\n.email-content {\n  max-width: 100%;\n}\n.email-content > * {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n</style>\n","<template>\n  <TextEditor\n    ref=\"editorRef\"\n    :editor-class=\"[\n      'prose-sm max-w-full mx-6 md:mx-10 max-h-[50vh] py-3',\n      'min-h-[7rem]',\n      getFontFamily(newEmail),\n      editable && '!max-h-[35vh] overflow-y-auto',\n    ]\"\n    :content=\"newEmail\"\n    :starterkit-options=\"{ heading: { levels: [2, 3, 4, 5, 6] } }\"\n    :placeholder=\"placeholder\"\n    :editable=\"editable\"\n    @change=\"editable ? (newEmail = $event) : null\"\n    :extensions=\"[PreserveVideoControls]\"\n    :uploadFunction=\"(file:any)=>uploadFunction(file, doctype, ticketId)\"\n  >\n    <template #top>\n      <div class=\"mx-6 md:mx-10 flex items-center gap-2 border-y py-2.5\">\n        <span class=\"text-xs text-gray-500\">TO:</span>\n        <MultiSelectInput\n          v-model=\"toEmailsClone\"\n          class=\"flex-1\"\n          :validate=\"validateEmail\"\n          :error-message=\"(value) => `${value} is an invalid email address`\"\n        />\n        <Button\n          :label=\"'CC'\"\n          :class=\"[cc ? 'bg-gray-300 hover:bg-gray-200' : '']\"\n          @click=\"toggleCC()\"\n        />\n        <Button\n          :label=\"'BCC'\"\n          :class=\"[bcc ? 'bg-gray-300 hover:bg-gray-200' : '']\"\n          @click=\"toggleBCC()\"\n        />\n      </div>\n      <div\n        v-if=\"showCC || cc\"\n        class=\"mx-10 flex items-center gap-2 py-2.5\"\n        :class=\"cc || showCC ? 'border-b' : ''\"\n      >\n        <span class=\"text-xs text-gray-500\">CC:</span>\n        <MultiSelectInput\n          ref=\"ccInput\"\n          v-model=\"ccEmailsClone\"\n          class=\"flex-1\"\n          :validate=\"validateEmail\"\n          :error-message=\"(value) => `${value} is an invalid email address`\"\n        />\n      </div>\n      <div\n        v-if=\"showBCC || bcc\"\n        class=\"mx-10 flex items-center gap-2 py-2.5\"\n        :class=\"bcc || showBCC ? 'border-b' : ''\"\n      >\n        <span class=\"text-xs text-gray-500\">BCC:</span>\n        <MultiSelectInput\n          ref=\"bccInput\"\n          v-model=\"bccEmailsClone\"\n          class=\"flex-1\"\n          :validate=\"validateEmail\"\n          :error-message=\"(value) => `${value} is an invalid email address`\"\n        />\n      </div>\n    </template>\n    <!-- <template v-slot:editor=\"{ _editor }\">\n      <EditorContent\n        :class=\"[editable && 'max-h-[35vh] overflow-y-auto']\"\n        :editor=\"_editor\"\n      />\n    </template> -->\n    <template #bottom>\n      <!-- Attachments -->\n      <div class=\"flex flex-wrap gap-2 px-10\">\n        <AttachmentItem\n          v-for=\"a in attachments\"\n          :key=\"a.file_url\"\n          :label=\"a.file_name\"\n          :url=\"!['MOV', 'MP4'].includes(a.file_type) ? a.file_url : null\"\n        >\n          <template #suffix>\n            <FeatherIcon\n              class=\"h-3.5\"\n              name=\"x\"\n              @click.self.stop=\"removeAttachment(a)\"\n            />\n          </template>\n        </AttachmentItem>\n      </div>\n      <!-- TextEditor Fixed Menu -->\n      <div\n        class=\"flex justify-between overflow-scroll pl-10 py-2.5 items-center\"\n      >\n        <div class=\"flex items-center overflow-x-auto w-[60%]\">\n          <div class=\"flex gap-1\">\n            <FileUploader\n              :upload-args=\"{\n                doctype: doctype,\n                docname: ticketId,\n                private: true,\n              }\"\n              @success=\"\n                (f) => {\n                  attachments.push(f);\n                }\n              \"\n            >\n              <template #default=\"{ openFileSelector }\">\n                <Button variant=\"ghost\" @click=\"openFileSelector()\">\n                  <template #icon>\n                    <AttachmentIcon\n                      class=\"h-4\"\n                      style=\"color: #000000; stroke-width: 1.5 !important\"\n                    />\n                  </template>\n                </Button>\n              </template>\n            </FileUploader>\n            <Button\n              variant=\"ghost\"\n              @click=\"showCannedResponseSelectorModal = true\"\n            >\n              <template #icon>\n                <EmailIcon\n                  class=\"h-4\"\n                  style=\"color: #000000; stroke-width: 1.2\"\n                />\n              </template>\n            </Button>\n          </div>\n          <TextEditorFixedMenu class=\"ml-1\" :buttons=\"textEditorMenuButtons\" />\n        </div>\n        <div\n          class=\"flex items-center justify-end space-x-2 sm:mt-0 w-[40%] mr-9\"\n        >\n          <Button label=\"Discard\" @click=\"handleDiscard\" />\n          <Button\n            variant=\"solid\"\n            :disabled=\"emailEmpty\"\n            :loading=\"sendMail.loading\"\n            :label=\"label\"\n            @click=\"\n              () => {\n                submitMail();\n              }\n            \"\n          />\n        </div>\n      </div>\n    </template>\n  </TextEditor>\n  <CannedResponseSelectorModal\n    v-if=\"showCannedResponseSelectorModal\"\n    v-model=\"showCannedResponseSelectorModal\"\n    :doctype=\"doctype\"\n    @apply=\"applyCannedResponse\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  AttachmentItem,\n  CannedResponseSelectorModal,\n  MultiSelectInput,\n} from \"@/components\";\nimport { AttachmentIcon, EmailIcon } from \"@/components/icons\";\nimport { useTyping } from \"@/composables/realtime\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { PreserveVideoControls } from \"@/tiptap-extensions\";\nimport {\n  getFontFamily,\n  isContentEmpty,\n  removeAttachmentFromServer,\n  textEditorMenuButtons,\n  uploadFunction,\n  validateEmail,\n} from \"@/utils\";\n// import { EditorContent } from \"@tiptap/vue-3\";\nimport { useStorage } from \"@vueuse/core\";\nimport {\n  FileUploader,\n  TextEditor,\n  TextEditorFixedMenu,\n  createResource,\n  toast,\n} from \"frappe-ui\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport { computed, nextTick, onBeforeUnmount, ref, watch } from \"vue\";\n\nconst editorRef = ref(null);\nconst showCannedResponseSelectorModal = ref(false);\n\nconst props = defineProps({\n  ticketId: {\n    type: String,\n    default: null,\n  },\n  placeholder: {\n    type: String,\n    default: null,\n  },\n  label: {\n    type: String,\n    default: \"Send\",\n  },\n  editable: {\n    type: Boolean,\n    default: true,\n  },\n  doctype: {\n    type: String,\n    default: \"HD Ticket\",\n  },\n  toEmails: {\n    type: Array,\n    default: () => [],\n  },\n  ccEmails: {\n    type: Array,\n    default: () => [],\n  },\n  bccEmails: {\n    type: Array,\n    default: () => [],\n  },\n});\n\nconst label = computed(() => {\n  return sendMail.loading ? \"Sending...\" : props.label;\n});\n\nconst emit = defineEmits([\"submit\", \"discard\"]);\n\nconst newEmail = useStorage(\"emailBoxContent\" + props.ticketId, null);\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\nconst { isManager } = useAuthStore();\n\n// Initialize typing composable\nconst { onUserType, cleanup } = useTyping(props.ticketId);\n\nconst attachments = ref([]);\nconst emailEmpty = computed(() => {\n  return isContentEmpty(newEmail.value);\n});\n\n// Watch for changes in email content to trigger typing events\nwatch(newEmail, (newValue, oldValue) => {\n  if (newValue !== oldValue && newValue) {\n    onUserType();\n  }\n});\n\nonBeforeUnmount(() => {\n  cleanup();\n});\n\nconst toEmailsClone = ref([...props.toEmails]);\nconst ccEmailsClone = ref([...props.ccEmails]);\nconst bccEmailsClone = ref([...props.bccEmails]);\nconst showCC = ref(false);\nconst showBCC = ref(false);\nconst cc = computed(() => (ccEmailsClone.value?.length ? true : false));\nconst bcc = computed(() => (bccEmailsClone.value?.length ? true : false));\nconst ccInput = ref(null);\nconst bccInput = ref(null);\n\nfunction applyCannedResponse(template) {\n  newEmail.value = template.message;\n  showCannedResponseSelectorModal.value = false;\n}\n\nconst sendMail = createResource({\n  url: \"run_doc_method\",\n  makeParams: () => ({\n    dt: props.doctype,\n    dn: props.ticketId,\n    method: \"reply_via_agent\",\n    args: {\n      attachments: attachments.value.map((x) => x.name),\n      to: toEmailsClone.value.join(\",\"),\n      cc: ccEmailsClone.value?.join(\",\"),\n      bcc: bccEmailsClone.value?.join(\",\"),\n      message: newEmail.value,\n    },\n  }),\n  onSuccess: () => {\n    resetState();\n    emit(\"submit\");\n\n    if (isManager) {\n      updateOnboardingStep(\"reply_on_ticket\");\n    }\n  },\n  debounce: 300,\n});\n\nfunction submitMail() {\n  if (isContentEmpty(newEmail.value)) {\n    return false;\n  }\n  if (!toEmailsClone.value.length) {\n    toast.warning(\n      \"Email has no recipients. Please add at least one email address in the 'TO' field.\"\n    );\n    return false;\n  }\n\n  sendMail.submit();\n}\n\nfunction toggleCC() {\n  showCC.value = !showCC.value;\n\n  showCC.value &&\n    nextTick(() => {\n      ccInput.value.setFocus();\n    });\n}\n\nfunction toggleBCC() {\n  showBCC.value = !showBCC.value;\n  showBCC.value &&\n    nextTick(() => {\n      bccInput.value.setFocus();\n    });\n}\n\nasync function removeAttachment(attachment) {\n  attachments.value = attachments.value.filter((a) => a !== attachment);\n  await removeAttachmentFromServer(attachment.name);\n}\n\nfunction addToReply(\n  body: string,\n  toEmails: string[],\n  ccEmails: string[],\n  bccEmails: string[]\n) {\n  toEmailsClone.value = toEmails;\n  ccEmailsClone.value = ccEmails;\n  bccEmailsClone.value = bccEmails;\n  editorRef.value.editor\n    .chain()\n    .clearContent()\n    .insertContent(body)\n    .focus(\"all\")\n    .setBlockquote()\n    .insertContentAt(0, { type: \"paragraph\" })\n    .focus(\"start\")\n    .run();\n}\n\nfunction resetState() {\n  newEmail.value = null;\n  attachments.value = [];\n}\n\nfunction handleDiscard() {\n  attachments.value = [];\n  newEmail.value = null;\n\n  ccEmailsClone.value = [];\n  bccEmailsClone.value = [];\n  ccEmailsClone.value = [];\n  showCC.value = false;\n  showBCC.value = false;\n\n  emit(\"discard\");\n}\n\nconst editor = computed(() => {\n  return editorRef.value.editor;\n});\n\ndefineExpose({\n  addToReply,\n  editor,\n  submitMail,\n});\n</script>\n","<template>\n  <div class=\"flex-1\">\n    <div\n      class=\"mt-1.5 flex justify-between text-base items-start md:items-center\"\n    >\n      <div\n        v-if=\"relatedActivities.length > 1\"\n        class=\"inline-flex flex-wrap gap-1.5 text-ink-gray-8 font-medium w-4/5\"\n      >\n        <span>{{ `${show_others ? \"Hide \" : \"Show \"}` }}</span>\n        <span>+{{ relatedActivities.length }} </span>\n        <span>changes from </span>\n        <span>{{ user }}</span>\n\n        <Button\n          class=\"!size-4\"\n          variant=\"ghost\"\n          @click=\"show_others = !show_others\"\n        >\n          <template #icon>\n            <SelectIcon />\n          </template>\n        </Button>\n      </div>\n      <div class=\"text-gray-600 w-4/6\" v-else>\n        <span class=\"font-medium text-gray-800\">\n          {{ user }}\n        </span>\n        <span> {{ content }}</span>\n      </div>\n\n      <Tooltip :text=\"dateFormat(creation, dateTooltipFormat)\">\n        <div class=\"text-gray-600 text-sm w-2/6 flex justify-end\">\n          {{ timeAgo(creation) }}\n        </div>\n      </Tooltip>\n    </div>\n    <div v-if=\"show_others\">\n      <div\n        v-for=\"relatedActivity in relatedActivities\"\n        :key=\"relatedActivity.creation\"\n        class=\"mt-2 flex justify-between text-base\"\n      >\n        <div class=\"text-gray-600 w-4/6\">\n          <span class=\"font-medium text-gray-800\">\n            {{ relatedActivity.user }}\n          </span>\n          <span> {{ relatedActivity.content }}</span>\n        </div>\n        <Tooltip\n          :text=\"dateFormat(relatedActivity.creation, dateTooltipFormat)\"\n        >\n          <div class=\"text-gray-600 text-sm w-2/6 flex justify-end\">\n            {{ timeAgo(relatedActivity.creation) }}\n          </div>\n        </Tooltip>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { SelectIcon } from \"@/components/icons\";\nimport { dateFormat, dateTooltipFormat, timeAgo } from \"@/utils\";\nimport { ref } from \"vue\";\nconst props = defineProps({\n  activity: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst { user, content, creation, relatedActivities } = props.activity;\n\nlet show_others = ref(false);\n</script>\n","<template>\n  <div>\n    <div class=\"flex flex-wrap gap-1\">\n      <Button\n        v-for=\"value in values\"\n        ref=\"emails\"\n        :key=\"value\"\n        :label=\"value\"\n        theme=\"gray\"\n        variant=\"subtle\"\n        class=\"rounded-full\"\n        @keydown.delete.capture.stop=\"removeLastValue\"\n      >\n        <template #suffix>\n          <FeatherIcon\n            class=\"h-3.5\"\n            name=\"x\"\n            @click.stop=\"removeValue(value)\"\n          />\n        </template>\n      </Button>\n      <div class=\"flex-1\">\n        <Combobox v-model=\"selectedValue\" nullable>\n          <Popover v-model:show=\"showOptions\" class=\"w-full\">\n            <template #target=\"{ togglePopover }\">\n              <ComboboxInput\n                ref=\"search\"\n                class=\"search-input form-input w-full border-none bg-white hover:bg-white focus:border-none focus:!shadow-none focus-visible:!ring-0\"\n                type=\"text\"\n                :value=\"query\"\n                autocomplete=\"off\"\n                @change=\"\n                  (e) => {\n                    query = e.target.value;\n                    showOptions = true;\n                  }\n                \"\n                @focus=\"() => togglePopover()\"\n                @keydown.delete.capture.stop=\"removeLastValue\"\n              />\n            </template>\n            <template #body=\"{ isOpen }\">\n              <div v-show=\"isOpen\">\n                <div class=\"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl\">\n                  <ComboboxOptions\n                    class=\"my-1 max-h-[12rem] overflow-y-auto px-1.5\"\n                    static\n                  >\n                    <ComboboxOption\n                      v-for=\"option in options\"\n                      :key=\"option.value\"\n                      v-slot=\"{ active }\"\n                      :value=\"option\"\n                    >\n                      <li\n                        :class=\"[\n                          'flex cursor-pointer items-center rounded px-2 py-1 text-base',\n                          { 'bg-gray-100': active },\n                        ]\"\n                      >\n                        <UserAvatar\n                          class=\"mr-2\"\n                          :name=\"option.value\"\n                          size=\"lg\"\n                        />\n                        <div class=\"flex flex-col gap-1 p-1 text-gray-800\">\n                          <div class=\"text-base font-medium\">\n                            {{ option.label }}\n                          </div>\n                          <div class=\"text-sm text-gray-600\">\n                            {{ option.value }}\n                          </div>\n                        </div>\n                      </li>\n                    </ComboboxOption>\n                  </ComboboxOptions>\n                </div>\n              </div>\n            </template>\n          </Popover>\n        </Combobox>\n      </div>\n    </div>\n    <ErrorMessage v-if=\"error\" class=\"mt-2 pl-2\" :message=\"error\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  Combobox,\n  ComboboxInput,\n  ComboboxOptions,\n  ComboboxOption,\n} from \"@headlessui/vue\";\nimport { UserAvatar } from \"@/components/\";\nimport { Popover, createResource } from \"frappe-ui\";\nimport { ref, computed, nextTick } from \"vue\";\nimport { watchDebounced } from \"@vueuse/core\";\n\nconst props = defineProps({\n  validate: {\n    type: Function,\n    default: null,\n  },\n  errorMessage: {\n    type: Function,\n    default: (value) => `${value} is an Invalid value`,\n  },\n});\n\nconst values = defineModel();\n\nconst emails = ref([]);\nconst search = ref(null);\nconst error = ref(null);\nconst query = ref(\"\");\nconst text = ref(\"\");\nconst showOptions = ref(false);\n\nconst selectedValue = computed({\n  get: () => query.value || \"\",\n  set: (val) => {\n    query.value = \"\";\n    if (val) {\n      showOptions.value = false;\n    }\n    val?.value && addValue(val.value);\n  },\n});\n\nwatchDebounced(\n  query,\n  (val) => {\n    val = val || \"\";\n    if (text.value === val) return;\n    text.value = val;\n    reload(val);\n  },\n  { debounce: 300, immediate: true }\n);\n\nconst filterOptions = createResource({\n  url: \"helpdesk.api.contact.search_contacts\",\n  method: \"GET\",\n  cache: [\"Contact\", text.value],\n  params: {\n    txt: text.value,\n  },\n  transform: (data: Record<\"full_name\" | \"name\" | \"email_id\", string>[]) => {\n    return data.map(({ full_name, email_id, name }) => ({\n      label: full_name || name || email_id,\n      value: email_id,\n    }));\n  },\n});\n\nconst options = computed(() => {\n  let searchedContacts = filterOptions.data || [];\n  if (!searchedContacts.length && query.value) {\n    searchedContacts.push({\n      label: query.value,\n      value: query.value,\n    });\n  }\n  return searchedContacts;\n});\n\nfunction reload(val) {\n  filterOptions.update({\n    params: {\n      txt: val,\n    },\n  });\n  filterOptions.reload();\n}\n\nconst addValue = (value) => {\n  error.value = null;\n  if (value) {\n    const splitValues = value.split(\",\");\n    splitValues.forEach((value) => {\n      value = value.trim();\n      if (value) {\n        // check if value is not already in the values array\n        if (!values.value?.includes(value)) {\n          // check if value is valid\n          if (value && props.validate && !props.validate(value)) {\n            error.value = props.errorMessage(value);\n            return;\n          }\n          // add value to values array\n          if (!values.value) {\n            values.value = [value];\n          } else {\n            values.value.push(value);\n          }\n          value = value.replace(value, \"\");\n        }\n      }\n    });\n    !error.value && (value = \"\");\n  }\n};\n\nconst removeValue = (value) => {\n  values.value = values.value.filter((v) => v !== value);\n};\n\nconst removeLastValue = () => {\n  if (query.value) return;\n\n  let emailRef = emails.value[emails.value.length - 1]?.$el;\n  if (document.activeElement === emailRef) {\n    values.value.pop();\n    nextTick(() => {\n      if (values.value.length) {\n        emailRef = emails.value[emails.value.length - 1].$el;\n        emailRef?.focus();\n      } else {\n        setFocus();\n      }\n    });\n  } else {\n    emailRef?.focus();\n  }\n};\n\nfunction setFocus() {\n  search.value.$el.focus();\n}\n\ndefineExpose({ setFocus });\n</script>\n","<template>\n  <div v-if=\"typingUsers.length > 0\" class=\"pl-2\">\n    <div class=\"flex items-center gap-2 text-sm text-gray-600\">\n      <div class=\"flex items-center gap-1.5\">\n        <component :is=\"typingMessage\" />\n        <div class=\"typing-dots\">\n          <span></span>\n          <span></span>\n          <span></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useTyping } from \"@/composables/realtime\";\nimport { useUserStore } from \"@/stores/user\";\nimport { computed, h, onBeforeUnmount } from \"vue\";\nimport UserAvatar from \"./UserAvatar.vue\";\n\nconst props = defineProps({\n  ticketId: {\n    type: String,\n    required: true,\n  },\n});\n\nconst { typingUsers, cleanup } = useTyping(props.ticketId);\n\nconst typingMessage = computed(() => {\n  const count = typingUsers.length;\n  if (count === 0) return null;\n  const { getUser } = useUserStore();\n  let firstUser = getUser(typingUsers[0])?.full_name || typingUsers[0];\n  console.log(firstUser);\n  console.log(typingUsers);\n\n  if (count === 1) {\n    return h(\"div\", { class: \"flex items-center gap-1\" }, [\n      h(UserAvatar, { name: typingUsers[0], size: \"sm\" }),\n      h(\"span\", { class: \"text-ink-gray-6 font-medium\" }, firstUser),\n      h(\"span\", { class: \"text-ink-gray-5\" }, \" is typing\"),\n    ]);\n  } else if (count === 2) {\n    return h(\"div\", { class: \"flex items-center gap-1\" }, [\n      h(\"span\", { class: \"text-ink-gray-6 font-medium\" }, firstUser),\n      h(\"span\", { class: \"text-ink-gray-5\" }, \" and \"),\n      h(\n        \"span\",\n        { class: \"text-ink-gray-6 font-medium\" },\n        getUser(typingUsers[1])?.full_name\n      ),\n      h(\"span\", { class: \"text-ink-gray-5\" }, \" are typing\"),\n    ]);\n  } else {\n    return h(\"div\", { class: \"flex items-center gap-1\" }, [\n      h(\"span\", { class: \"text-ink-gray-6 font-medium\" }, firstUser),\n      h(\"span\", { class: \"text-ink-gray-5\" }, \" and \"),\n      h(\n        \"span\",\n        { class: \"text-ink-gray-6 font-medium\" },\n        `${count - 1} others`\n      ),\n      h(\"span\", { class: \"text-ink-gray-5\" }, \" are typing\"),\n    ]);\n  }\n});\n\nonBeforeUnmount(() => {\n  cleanup();\n});\n</script>\n\n<style scoped>\n.typing-dots {\n  display: inline-flex;\n  gap: 2px;\n  align-items: center;\n}\n\n.typing-dots span {\n  height: 4px;\n  width: 4px;\n  background-color: #6b7280;\n  border-radius: 50%;\n  animation: typing 1.4s infinite ease-in-out;\n}\n\n.typing-dots span:nth-child(1) {\n  animation-delay: -0.32s;\n}\n\n.typing-dots span:nth-child(2) {\n  animation-delay: -0.16s;\n}\n\n@keyframes typing {\n  0%,\n  80%,\n  100% {\n    transform: scale(0);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n</style>\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      title: 'Set Phone Number',\n      actions: [\n        {\n          label: 'Set Phone Number',\n          variant: 'solid',\n          onClick: onSubmit,\n        },\n      ],\n    }\"\n  >\n    <template #body-content>\n      <div>\n        <div class=\"text-base text-ink-gray-6\">\n          <b>{{ contactDetails.name }}</b> does not have a phone number, set one\n          to call them.\n        </div>\n        <div class=\"flex flex-col gap-2 mt-6\">\n          <FormControl\n            v-model=\"contactDetails.phone\"\n            label=\"Phone\"\n            type=\"text\"\n            size=\"sm\"\n            variant=\"subtle\"\n            placeholder=\"+918956895623\"\n            :disabled=\"false\"\n          />\n          <ErrorMessage :message=\"error\" />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { createResource, Dialog, ErrorMessage, toast } from \"frappe-ui\";\nimport { ref, watch } from \"vue\";\nimport { z } from \"zod\";\n\nconst emit = defineEmits([\"onUpdate\"]);\nconst show = defineModel<boolean>();\nconst error = ref(\"\");\nconst props = defineProps({\n  name: {\n    type: String,\n    required: true,\n  },\n});\n\nconst contactDetails = ref({\n  name: \"\",\n  phone: \"\",\n});\n\nconst onSubmit = () => {\n  if (\n    !z\n      .string()\n      .regex(/^\\+(?:[0-9]){6,14}[0-9]$/)\n      .safeParse(contactDetails.value.phone).success\n  ) {\n    error.value = \"Invalid phone number\";\n    return;\n  } else {\n    error.value = \"\";\n  }\n\n  createResource({\n    url: \"frappe.client.set_value\",\n    params: {\n      doctype: \"Contact\",\n      name: props.name,\n      fieldname: \"phone_nos\",\n      value: [{ phone: contactDetails.value.phone, is_primary_phone: true }],\n    },\n    auto: true,\n    onSuccess: () => {\n      emit(\"onUpdate\");\n      toast.success(\"Contact updated\");\n      show.value = false;\n    },\n  });\n};\n\nwatch(show, (val) => {\n  if (val) {\n    contactDetails.value = {\n      name: props.name,\n      phone: \"\",\n    };\n  }\n});\n</script>\n","<template>\n  <svg\n    width=\"12\"\n    height=\"12\"\n    viewBox=\"0 0 12 12\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M3.76527 2.76476L3.76515 2.76469C3.76518 2.76471 3.76516 2.7647 3.76508 2.76466C3.76417 2.76417 3.75528 2.75942 3.73828 2.7571V9.24215C3.75528 9.23982 3.76418 9.23508 3.76508 9.23459C3.76516 9.23455 3.76518 9.23454 3.76515 9.23456L3.76527 9.23448L8.75611 5.99962L3.76527 2.76476ZM9.5471 6.67863L4.30917 10.0736C4.01166 10.2665 3.61363 10.2975 3.28101 10.1538C2.94839 10.01 2.73828 9.71611 2.73828 9.39463V2.60462C2.73828 2.28313 2.94839 1.98924 3.28101 1.84547C3.61363 1.7017 4.01166 1.73272 4.30917 1.92561L9.5471 5.32062C9.79432 5.48091 9.93982 5.73247 9.93982 5.99962C9.93982 6.26677 9.79432 6.51833 9.5471 6.67863Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div class=\"w-full\">\n    <div class=\"mb-1 flex items-center justify-stretch gap-2 py-1 text-base\">\n      <div class=\"inline-flex items-center flex-wrap gap-1 text-ink-gray-5\">\n        <Avatar\n          :image=\"activity?._caller?.image\"\n          :label=\"activity?._caller?.label\"\n          size=\"md\"\n        />\n        <span class=\"font-medium text-ink-gray-8 ml-1\">\n          {{ activity?._caller?.label }}\n        </span>\n        <span>{{\n          activity.call_type == \"Incoming\"\n            ? __(\"has reached out\")\n            : __(\"has made a call\")\n        }}</span>\n      </div>\n      <div class=\"ml-auto whitespace-nowrap\">\n        <Tooltip :text=\"dateFormat(activity.creation, 'MMM D, dddd')\">\n          <div class=\"text-sm text-ink-gray-5\">\n            {{ __(timeAgo(activity.creation)) }}\n          </div>\n        </Tooltip>\n      </div>\n    </div>\n    <div\n      @click=\"showCallLogDetailModal = true\"\n      class=\"flex flex-col gap-2 cursor-pointer border-transparent shadow rounded-md bg-surface-cards px-3 py-2.5 text-ink-gray-9\"\n    >\n      <div class=\"flex items-center justify-between\">\n        <div class=\"inline-flex gap-2 items-center text-base font-medium\">\n          <div>\n            {{\n              activity.call_type == \"Incoming\"\n                ? __(\"Inbound Call\")\n                : __(\"Outbound Call\")\n            }}\n          </div>\n        </div>\n        <div>\n          <MultipleAvatar\n            :avatars=\"[\n              {\n                name: activity._caller.label,\n                label: activity._caller.label,\n                image: activity._caller.image,\n              },\n              {\n                name: activity._receiver.label,\n                label: activity._receiver.label,\n                image: activity._receiver.image,\n              },\n            ]\"\n            size=\"sm\"\n          />\n        </div>\n      </div>\n      <div class=\"flex items-center flex-wrap gap-2\">\n        <Badge :label=\"dateFormat(activity.creation, 'MMM D, dddd')\">\n          <template #prefix>\n            <CalendarIcon class=\"size-3\" />\n          </template>\n        </Badge>\n        <Badge v-if=\"activity.status == 'Completed'\" :label=\"activity.duration\">\n          <template #prefix>\n            <DurationIcon class=\"size-3\" />\n          </template>\n        </Badge>\n        <Badge\n          v-if=\"activity.recording_url\"\n          :label=\"__('Listen')\"\n          class=\"cursor-pointer\"\n        >\n          <template #prefix>\n            <PlayIcon class=\"size-3\" />\n          </template>\n        </Badge>\n        <Badge\n          :label=\"statusLabelMap[activity.status]\"\n          :theme=\"statusColorMap[activity.status]\"\n        />\n      </div>\n    </div>\n    <CallLogDetailModal\n      v-model=\"showCallLogDetailModal\"\n      v-model:callLogModal=\"showCallLogModal\"\n      :callLogId=\"props.activity.name\"\n      :hideTicket=\"true\"\n    />\n    <CallLogModal\n      v-model=\"showCallLogModal\"\n      :callLogId=\"props.activity.name\"\n      @afterInsert=\"refreshTicket()\"\n    />\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { dateFormat, timeAgo } from \"@/utils\";\nimport { Avatar, Badge, Tooltip } from \"frappe-ui\";\nimport { inject, ref } from \"vue\";\nimport MultipleAvatar from \"./MultipleAvatar.vue\";\nimport CalendarIcon from \"./icons/CalendarIcon.vue\";\nimport DurationIcon from \"./icons/DurationIcon.vue\";\nimport PlayIcon from \"./icons/PlayIcon.vue\";\nimport { statusColorMap, statusLabelMap } from \"@/pages/call-logs/utils\";\nimport CallLogDetailModal from \"@/pages/call-logs/CallLogDetailModal.vue\";\nimport CallLogModal from \"@/pages/call-logs/CallLogModal.vue\";\n\nconst props = defineProps({\n  activity: Object,\n});\n\nconst showCallLogDetailModal = ref(false);\nconst showCallLogModal = ref(false);\n\nconst refreshTicket = inject<() => void>(\"refreshTicket\");\n</script>\n","<template>\n  <div\n    class=\"md:mx-10 md:my-4 flex items-center justify-between text-lg font-medium mx-6 mb-4 !mt-8\"\n  >\n    <div class=\"flex h-8 items-center text-xl font-semibold text-gray-800\">\n      {{ title }}\n    </div>\n    <Button\n      v-if=\"title == 'Emails'\"\n      variant=\"solid\"\n      @click=\"communicationAreaRef?.toggleEmailBox() ?? toggleEmailBox()\"\n    >\n      <template #prefix>\n        <FeatherIcon name=\"plus\" class=\"h-4 w-4\" />\n      </template>\n      <span>{{ \"New Email\" }}</span>\n    </Button>\n    <Button\n      v-else-if=\"title == 'Comments'\"\n      variant=\"solid\"\n      @click=\"communicationAreaRef?.toggleCommentBox() ?? toggleCommentBox()\"\n    >\n      <template #prefix>\n        <FeatherIcon name=\"plus\" class=\"h-4 w-4\" />\n      </template>\n      <span>{{ \"New Comment\" }}</span>\n    </Button>\n    <Dropdown v-else-if=\"title == 'Calls'\" :options=\"callActions\" @click.stop>\n      <template v-slot=\"{ open }\">\n        <Button variant=\"solid\" class=\"flex items-center gap-1\">\n          <template #prefix>\n            <FeatherIcon name=\"plus\" class=\"h-4 w-4\" />\n          </template>\n          <span>{{ \"New\" }}</span>\n          <template #suffix>\n            <FeatherIcon\n              :name=\"open ? 'chevron-up' : 'chevron-down'\"\n              class=\"h-4 w-4\"\n            />\n          </template>\n        </Button>\n      </template>\n    </Dropdown>\n    <Dropdown v-else :options=\"defaultActions\" @click.stop>\n      <template v-slot=\"{ open }\">\n        <Button variant=\"solid\" class=\"flex items-center gap-1\">\n          <template #prefix>\n            <FeatherIcon name=\"plus\" class=\"h-4 w-4\" />\n          </template>\n          <span>{{ \"New\" }}</span>\n          <template #suffix>\n            <FeatherIcon\n              :name=\"open ? 'chevron-up' : 'chevron-down'\"\n              class=\"h-4 w-4\"\n            />\n          </template>\n        </Button>\n      </template>\n    </Dropdown>\n  </div>\n  <CallLogModal\n    v-model=\"showCallLogModal\"\n    :ticketId=\"ticketId\"\n    @after-insert=\"refreshTicket\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { CommentIcon, EmailIcon, PhoneIcon } from \"@/components/icons\";\nimport CallLogModal from \"@/pages/call-logs/CallLogModal.vue\";\nimport { useTelephonyStore } from \"@/stores/telephony\";\nimport { toggleCommentBox, toggleEmailBox } from \"@/pages/ticket/modalStates\";\nimport { Dropdown } from \"frappe-ui\";\nimport { storeToRefs } from \"pinia\";\nimport { computed, h, inject, ref, Ref } from \"vue\";\ndefineProps({\n  title: {\n    type: String,\n    required: true,\n  },\n});\n\nconst communicationAreaRef: Ref = inject(\"communicationArea\");\nconst makeCall = inject<() => void>(\"makeCall\");\nconst refreshTicket = inject<() => void>(\"refreshTicket\");\nconst showCallLogModal = ref(false);\nconst { isCallingEnabled } = storeToRefs(useTelephonyStore());\nconst ticketId = inject<string>(\"ticketId\");\n\nconst defaultActions = computed(() => {\n  let actions = [\n    {\n      icon: h(EmailIcon, { class: \"h-4 w-4\" }),\n      label: \"Email\",\n      onClick: () =>\n        communicationAreaRef?.value?.toggleEmailBox() ?? toggleEmailBox(),\n    },\n    {\n      icon: h(CommentIcon, { class: \"h-4 w-4\" }),\n      label: \"Comment\",\n      onClick: () =>\n        communicationAreaRef?.value?.toggleCommentBox() ?? toggleCommentBox(),\n    },\n  ];\n\n  if (isCallingEnabled.value) {\n    actions.push(...callActions.value);\n  }\n\n  return actions;\n});\n\nconst callActions = computed(() => {\n  let actions = [\n    {\n      icon: h(PhoneIcon, { class: \"h-4 w-4\" }),\n      label: \"Make a Call\",\n      onClick: () => makeCall(),\n    },\n    {\n      icon: \"edit-3\",\n      label: \"Log a Call\",\n      onClick: () => {\n        showCallLogModal.value = true;\n      },\n    },\n  ];\n  return actions;\n});\n</script>\n\n<style scoped></style>\n","<template>\n  <div class=\"w-full p-4 rounded\" :class=\"styles[0]\">\n    <!-- Header -->\n    <div\n      class=\"flex mb-1.5 items-center\"\n      :class=\"activity.feedback && 'gap-[9px]'\"\n    >\n      <p class=\"text-base text-ink-gray-8 font-medium\">\n        {{ activity.feedback }}\n      </p>\n      <StarRating :rating=\"activity.feedback_rating\" />\n    </div>\n    <!-- Optional Text -->\n    <div v-if=\"activity.feedback_extra\">\n      <p class=\"mt-2 text-sm text-gray-700\">{{ activity.feedback_extra }}</p>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { FeedbackActivity } from \"@/types\";\nimport { computed, PropType } from \"vue\";\nimport StarRating from \"../StarRating.vue\";\n\nconst props = defineProps({\n  activity: {\n    type: Object as PropType<FeedbackActivity>,\n    required: true,\n  },\n});\n\nconst styles = computed(() => {\n  if (props.activity.feedback_rating <= 0.4) return [\"bg-surface-red-1\", \"red\"];\n  if (props.activity.feedback_rating <= 0.6)\n    return [\"bg-surface-amber-1\", \"yellow\"];\n  return [\"bg-surface-green-1\", \"yellow\"];\n});\n</script>\n","<template>\n  <ActivityHeader :title=\"title\" />\n  <FadedScrollableDiv\n    class=\"flex flex-col flex-1 overflow-y-scroll\"\n    :mask-length=\"20\"\n  >\n    <div v-if=\"activities.length\" class=\"activities flex-1 h-full mt-1\">\n      <div\n        v-for=\"(activity, i) in activities\"\n        :key=\"activity.key\"\n        class=\"activity\"\n      >\n        <!-- single activity -->\n        <div\n          class=\"w-full px-6 md:px-10 grid grid-cols-[30px_minmax(auto,_1fr)] gap-2 sm:gap-4\"\n        >\n          <div\n            class=\"relative flex justify-center after:absolute after:left-[50%] after:top-2 after:-z-10 after:border-l after:border-gray-200\"\n            :class=\"[i != activities.length - 1 ? 'after:h-full' : 'after:h-4']\"\n          >\n            <div\n              class=\"z-1 flex h-7 w-7 items-center justify-center rounded-full bg-white\"\n              :class=\"[['email', 'feedback'].includes(activity.type) && 'mt-2']\"\n            >\n              <Avatar\n                v-if=\"activity.type === 'email' || activity.type === 'feedback'\"\n                size=\"lg\"\n                :label=\"activity.sender?.full_name\"\n                :image=\"getUser(activity.sender?.name).user_image\"\n                class=\"bg-white absolute left-[1px]\"\n              />\n              <CommentIcon\n                v-else-if=\"activity.type === 'comment'\"\n                class=\"text-gray-600 absolute left-[7.5px]\"\n              />\n              <FeatherIcon\n                v-else-if=\"activity.type === 'call'\"\n                :name=\"\n                  activity.call_type === 'Incoming'\n                    ? 'phone-incoming'\n                    : 'phone-outgoing'\n                \"\n                class=\"text-gray-600 absolute left-[7.5px] size-4\"\n              />\n              <DotIcon v-else class=\"text-gray-600 absolute left-[7.5px]\" />\n            </div>\n          </div>\n          <div\n            class=\"mb-4 flex flex-1\"\n            :class=\"[i == activities.length - 1 && 'mb-5']\"\n          >\n            <EmailArea\n              v-if=\"activity.type === 'email'\"\n              :activity=\"activity\"\n              :show-split-option=\"\n                !activity.isFirstEmail && ticketStatus !== 'Closed'\n              \"\n              class=\"py-2 px-3\"\n              @reply=\"(e) => emit('email:reply', e)\"\n            />\n            <CommentBox\n              v-else-if=\"activity.type === 'comment'\"\n              :activity=\"activity\"\n              @update=\"() => emit('update')\"\n            />\n            <CallArea\n              v-else-if=\"activity.type === 'call'\"\n              :activity=\"activity\"\n            />\n            <FeedbackBox\n              :activity=\"activity\"\n              v-else-if=\"activity.type === 'feedback'\"\n            />\n            <HistoryBox v-else :activity=\"activity\" />\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      v-else\n      class=\"h-full flex flex-col items-center justify-center gap-3 text-xl font-medium text-gray-500\"\n    >\n      <component :is=\"emptyTextIcon\" class=\"h-10 w-10\" />\n      <span>{{ emptyText }}</span>\n      <Button\n        v-if=\"title == 'Emails'\"\n        label=\"New Email\"\n        @click=\"communicationAreaRef?.toggleEmailBox() ?? toggleEmailBox()\"\n      />\n      <Button\n        v-else-if=\"title == 'Comments'\"\n        label=\"New Comment\"\n        @click=\"communicationAreaRef?.toggleCommentBox() ?? toggleCommentBox()\"\n      />\n      <Button\n        v-else-if=\"title == 'Calls'\"\n        label=\"Make a Call\"\n        @click=\"makeCall()\"\n      />\n    </div>\n  </FadedScrollableDiv>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  CommentBox,\n  EmailArea,\n  FadedScrollableDiv,\n  HistoryBox,\n} from \"@/components\";\nimport {\n  ActivityIcon,\n  CommentIcon,\n  DotIcon,\n  EmailIcon,\n  PhoneIcon,\n} from \"@/components/icons\";\nimport { toggleCommentBox, toggleEmailBox } from \"@/pages/ticket/modalStates\";\nimport { useUserStore } from \"@/stores/user\";\nimport { TicketActivity } from \"@/types\";\nimport { isElementInViewport } from \"@/utils\";\nimport { Avatar, FeatherIcon } from \"frappe-ui\";\nimport { PropType, Ref, computed, h, inject, nextTick, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport FeedbackBox from \"../ticket-agent/FeedbackBox.vue\";\n\nconst props = defineProps({\n  activities: {\n    type: Array as PropType<TicketActivity[]>,\n    required: true,\n  },\n  title: {\n    type: String,\n    required: true,\n  },\n  ticketStatus: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst emit = defineEmits([\"email:reply\", \"update\"]);\n\nconst route = useRoute();\nconst router = useRouter();\n\nconst { getUser } = useUserStore();\nconst communicationAreaRef: Ref = inject(\"communicationArea\");\nconst makeCall = inject<() => void>(\"makeCall\");\n\nconst emptyText = computed(() => {\n  let text = \"No Activities\";\n  if (props.title == \"Emails\") {\n    text = \"No Email Communications\";\n  } else if (props.title == \"Comments\") {\n    text = \"No Comments\";\n    return text;\n  } else if (props.title == \"Calls\") {\n    text = \"No Calls\";\n    return text;\n  }\n});\n\nconst emptyTextIcon = computed(() => {\n  let icon = ActivityIcon;\n  if (props.title == \"Emails\") {\n    icon = EmailIcon;\n  } else if (props.title == \"Comments\") {\n    icon = CommentIcon;\n  } else if (props.title == \"Calls\") {\n    icon = PhoneIcon;\n  }\n  return h(icon, { class: \"text-gray-500\" });\n});\n\nfunction scrollToLatestActivity() {\n  if (route.hash) {\n    scrollToHash();\n    return;\n  }\n  setTimeout(() => {\n    let el;\n    let e = document.getElementsByClassName(\"activity\");\n    el = e[e.length - 1];\n    if (el && !isElementInViewport(el)) {\n      el.scrollIntoViewIfNeeded();\n      el.focus();\n    }\n  }, 500);\n}\nfunction scrollToHash() {\n  const hash = route.hash;\n  if (hash) {\n    // Remove the # symbol\n    const elementId = hash.substring(1);\n\n    nextTick(() => {\n      // Wait for activities to be rendered\n      setTimeout(() => {\n        const element = document.getElementById(elementId);\n        if (element) {\n          (element as any).scrollIntoViewIfNeeded();\n\n          // Add highlight effect using Tailwind class\n          element.classList.add(\"bg-yellow-100\");\n\n          // Remove highlight after 2 seconds\n          setTimeout(() => {\n            element.classList.remove(\"bg-yellow-100\");\n            router.replace({ hash: \"\" });\n          }, 2000);\n        }\n      }, 1000);\n    });\n  }\n}\n\nwatch(\n  () => route.hash,\n  () => {\n    scrollToLatestActivity();\n  }\n);\n\nwatch(\n  () => props.title,\n  () => {\n    scrollToLatestActivity();\n  },\n  { immediate: true }\n);\n\ndefineExpose({\n  scrollToLatestActivity,\n});\n</script>\n","<template>\n  <div class=\"flex gap-2 px-5 pb-1 leading-5 first:mt-3 items-center\">\n    <div class=\"w-[106px] shrink-0 truncate text-sm text-gray-600\">\n      <Tooltip :text=\"field.label\">\n        <span>{{ field.label }}</span>\n      </Tooltip>\n      <span v-if=\"field.required\" class=\"text-red-500\"> * </span>\n    </div>\n    <div\n      class=\"-m-0.5 min-h-[28px] flex-1 items-center overflow-hidden p-0.5 text-base\"\n    >\n      <component\n        :is=\"component\"\n        :key=\"field.fieldname\"\n        :readonly=\"field.readonly\"\n        :disabled=\"field.disabled\"\n        class=\"form-control\"\n        :placeholder=\"field.placeholder || `Add ${field.label}`\"\n        :model-value=\"transValue\"\n        autocomplete=\"off\"\n        v-on=\"\n          [...textFields, ...numberFields].includes(field.fieldtype)\n            ? {\n                blur: (event) => {\n                  emitUpdate(field.fieldname, event.target.value);\n                },\n              }\n            : {\n                'update:model-value': (event) => {\n                  emitUpdate(\n                    field.fieldname,\n                    event?.value || event?.target?.value || event\n                  );\n                },\n              }\n        \"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Autocomplete, Link } from \"@/components\";\nimport { Field, FieldValue } from \"@/types\";\nimport {\n  createResource,\n  DateTimePicker,\n  dayjs,\n  FormControl,\n  Tooltip,\n} from \"frappe-ui\";\nimport DatePicker from \"frappe-ui/src/components/DatePicker/DatePicker.vue\";\nimport { computed, h } from \"vue\";\n\ninterface P {\n  field: Field;\n  value: FieldValue;\n}\n\ninterface R {\n  fieldname: Field[\"fieldname\"];\n  value: FieldValue;\n}\n\ninterface E {\n  (event: \"change\", value: R);\n}\n\nconst props = defineProps<P>();\nconst emit = defineEmits<E>();\n\nconst apiOptions = createResource({\n  url: props.field.url_method,\n  auto: !!props.field.url_method,\n  transform: (data) => {\n    if (!data?.length) return [];\n    return (\n      data\n        .filter((o) => Boolean(o))\n        .map((o) => {\n          if (\n            typeof o === \"object\" &&\n            o.hasOwnProperty(\"label\") &&\n            o.hasOwnProperty(\"value\")\n          ) {\n            return o;\n          } else {\n            return {\n              label: o?.toString(),\n              value: o,\n            };\n          }\n        }) || []\n    );\n  },\n});\n\nconst textFields = [\"Long Text\", \"Small Text\", \"Text\", \"Text Editor\", \"Data\"];\nconst numberFields = [\"Int\", \"Float\", \"Currency\", \"Percent\"];\n\nconst component = computed(() => {\n  if (props.field.url_method) {\n    return h(Autocomplete, {\n      options: apiOptions.data,\n    });\n  } else if (props.field.fieldtype === \"Link\" && props.field.options) {\n    return h(Link, {\n      doctype: props.field.options,\n      hideMe: true,\n    });\n  } else if (props.field.fieldtype === \"Select\") {\n    return h(Autocomplete, {\n      options: props.field.options\n        .split(\"\\n\")\n        .map((o) => ({ label: o, value: o })),\n    });\n  } else if (props.field.fieldtype === \"Check\") {\n    return h(Autocomplete, {\n      options: [\n        {\n          label: \"Yes\",\n          value: 1,\n        },\n        {\n          label: \"No\",\n          value: 0,\n        },\n      ],\n    });\n  } else if (textFields.includes(props.field.fieldtype)) {\n    return h(FormControl, {\n      type: \"textarea\",\n      rows: props.field.fieldtype === \"Data\" ? 1 : 2,\n    });\n  } else if (props.field.fieldtype === \"Datetime\") {\n    return h(DateTimePicker, {\n      formatter: (datetime: string) => {\n        if (!datetime) return datetime;\n        return dayjs(datetime).format(\n          `${window.date_format.toUpperCase()} ${window.time_format}`\n        );\n      },\n    });\n  } else if (props.field.fieldtype === \"Date\") {\n    return h(DatePicker, {\n      id: props.field.fieldname,\n    });\n  }\n  // else if (props.field.fieldtype === \"Duration\") {\n  //   // console.log(\"HERE TIME\");\n  //   return h(DurationField, { showSeconds: false });\n  // }\n  else {\n    return h(FormControl);\n  }\n});\n\nconst transValue = computed(() => {\n  const fieldtype = props.field.fieldtype;\n  if (fieldtype === \"Check\") {\n    return props.value ? \"Yes\" : \"No\";\n  } else if (fieldtype === \"Date\") {\n    if (!props.value) return props.value;\n    return dayjs(props.value).format(window.date_format.toUpperCase());\n  }\n  // else if (fieldtype === \"Duration\") {\n  //   if (!props.value) return null;\n  // }\n  return props.value;\n});\n\nfunction emitUpdate(fieldname: Field[\"fieldname\"], value: FieldValue) {\n  emit(\"change\", { fieldname, value });\n}\n</script>\n<style scoped>\n:deep(.form-control input:not([type=\"checkbox\"])),\n:deep(.form-control select),\n:deep(.form-control textarea),\n:deep(.form-control button) {\n  border-color: transparent;\n  background: white;\n}\n\n:deep(.form-control button) {\n  gap: 0;\n}\n:deep(.form-control [type=\"checkbox\"]) {\n  margin-left: 9px;\n  cursor: pointer;\n}\n\n:deep(.form-control button > div) {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n:deep(.form-control button svg) {\n  color: white;\n  width: 0;\n}\n</style>\n","import { useTelephonyStore } from \"@/stores/telephony\";\nimport { storeToRefs } from \"pinia\";\nimport { ref, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\n\nexport function useActiveTabManager(tabs) {\n  const route = useRoute();\n  const router = useRouter();\n  const telephonyStore = useTelephonyStore();\n  const { isLoading: isTelephonyLoading } = storeToRefs(telephonyStore);\n\n  const changeTabTo = (tab) => {\n    tabIndex.value = tab;\n    if (tab == 0) {\n      router.replace({ path: route.path });\n    } else {\n      setActiveTabInUrl(tabs.value?.[tab]?.name || tabs.value[0].name);\n    }\n  };\n\n  function setActiveTabInUrl(tabName) {\n    let hash = \"#\" + tabName?.toLowerCase();\n    if (route.hash === hash) return;\n    router.push({ hash, query: route.query });\n  }\n\n  function findTabIndex(tabName) {\n    return tabs.value?.findIndex(\n      (tabOptions) => tabOptions.name.toLowerCase() === tabName\n    );\n  }\n\n  const tabIndex = ref(0);\n\n  const setActiveTab = () => {\n    let _activeTab = route.hash.replace(\"#\", \"\");\n    if (_activeTab) {\n      let index = findTabIndex(_activeTab);\n      if (index !== -1 || index === 0) {\n        tabIndex.value = index;\n        setActiveTabInUrl(tabs.value[index].name);\n        return;\n      }\n    }\n\n    tabIndex.value = 0;\n    router.replace({ path: route.path });\n  };\n\n  // Handle when page is navigated\n  watch(\n    () => route.hash,\n    (newHash) => {\n      let index = findTabIndex(newHash.replace(\"#\", \"\"));\n      if (index === -1) index = 0;\n\n      if (index == 0) {\n        router.replace({ path: route.path });\n      }\n\n      tabIndex.value = index;\n    }\n  );\n\n  // Handle when tabs array is updated\n  watch(\n    [tabs, isTelephonyLoading],\n    ([tabsValue, isLoading]) => {\n      if (!tabsValue?.length) return;\n      if (!isLoading) {\n        setActiveTab();\n      }\n    },\n    { deep: true, flush: \"post\" }\n  );\n\n  return { tabIndex, changeTabTo };\n}\n"],"names":["d","i","n","f","m","F","l","o","e","a","r","u","te","s","le","U","C","b","j","G","me","L","E","P","p","v","R","y","t","c","k","I","H","h","W","O","N","T","x","w","_","J","A","z","V","M","ee","pe","xe","$","K","B","Z","S","D","g","Y","Q","Ie","ye","X","q","inject","tabRef","ref","indicator","tabsLength","computed","_a","transitionClass","moveIndicator","index","selectedTab","watch","nextTick","onMounted","_createBlock","_unref","TabList","_openBlock","_createElementBlock","_Fragment","tab","Tab","_withCtx","selected","_renderSlot","_ctx","_mergeProps","_createElementVNode","_resolveDynamicComponent","_toDisplayString","TabPanels","TabPanel","props","__props","tabIndex","_useModel","provide","_cache","idx","_createVNode","_normalizeProps","_guardReactiveProps","show","searchInput","emit","__emit","search","templates","createListResource","onUnmounted","showEmailBox","filteredTemplates","template","value","_b","_component_Dialog","$event","_component_TextInput","_component_FeatherIcon","_hoisted_1","_renderList","_hoisted_3","TextEditor","_hoisted_4","_hoisted_5","_component_Button","$router","authStore","useAuthStore","getUser","useUserStore","name","creation","content","commenter","commentedBy","attachments","isTicketMergedComment","showDialog","editable","_content","commentBoxRef","editorRef","handleEditMode","handleDiscard","deleteComment","createResource","toast","handleSaveComment","isContentEmpty","updateComment","_hoisted_2","Avatar","_component_Tooltip","dateFormat","dateTooltipFormat","timeAgo","_hoisted_6","Dropdown","getFontFamily","textEditorMenuButtons","event","_hoisted_8","_hoisted_9","AttachmentItem","Dialog","_sfc_render","useAgentStore","defineStore","agents","dropdown","searchAgents","query","updateOnboardingStep","useOnboarding","agentsList","isManager","newComment","useStorage","onUserType","cleanup","useTyping","commentEmpty","loading","newValue","oldValue","onBeforeUnmount","label","agent","removeAttachment","attachment","removeAttachmentFromServer","submitComment","editor","__expose","PreserveVideoControls","file","uploadFunction","_withModifiers","TextEditorFixedMenu","FileUploader","openFileSelector","AttachmentIcon","isMac","useDevice","isMobileView","useScreenSize","emailEditorRef","commentTextEditorRef","emailBoxRef","toggleEmailBox","showCommentBox","toggleCommentBox","submitEmail","splitIfString","str","replyToEmail","data","_c","useShortcut","onClickOutside","EmailIcon","CommentIcon","TypingIndicator","EmailEditor","CommentTextEditor","subject","splitTicket","communication_id","newTicket","handleTicketSplit","_component_FormControl","TriangleAlert","LucideSplit","sender","to","cc","bcc","deliveryStatus","auth","storeToRefs","showSplitModal","status","_status","indicator_color","reply","user","replyAll","normalizeAndFilter","field","arr","item","filteredTo","filteredCc","filteredBcc","_to","_cc","_bcc","$attrs","_normalizeClass","_hoisted_7","_component_Badge","__","ReplyIcon","ReplyAllIcon","_hoisted_10","_hoisted_11","_hoisted_14","_hoisted_17","_component_EmailContent","_hoisted_19","TicketSplitModal","showCannedResponseSelectorModal","sendMail","newEmail","emailEmpty","toEmailsClone","ccEmailsClone","bccEmailsClone","showCC","showBCC","ccInput","bccInput","applyCannedResponse","resetState","submitMail","toggleCC","toggleBCC","addToReply","body","toEmails","ccEmails","bccEmails","MultiSelectInput","validateEmail","CannedResponseSelectorModal","relatedActivities","show_others","_isRef","SelectIcon","relatedActivity","values","emails","error","text","showOptions","selectedValue","val","addValue","watchDebounced","reload","filterOptions","full_name","email_id","options","searchedContacts","removeValue","removeLastValue","emailRef","setFocus","Combobox","Popover","togglePopover","ComboboxInput","isOpen","ComboboxOptions","option","ComboboxOption","active","UserAvatar","_component_ErrorMessage","typingUsers","typingMessage","count","firstUser","contactDetails","onSubmit","z.string","ErrorMessage","showCallLogDetailModal","showCallLogModal","refreshTicket","_d","_f","_e","Tooltip","MultipleAvatar","Badge","CalendarIcon","DurationIcon","PlayIcon","statusLabelMap","statusColorMap","CallLogDetailModal","CallLogModal","communicationAreaRef","makeCall","isCallingEnabled","useTelephonyStore","ticketId","defaultActions","actions","callActions","PhoneIcon","open","styles","StarRating","route","useRoute","router","useRouter","emptyText","emptyTextIcon","icon","ActivityIcon","scrollToLatestActivity","scrollToHash","el","isElementInViewport","hash","elementId","element","_component_ActivityHeader","FadedScrollableDiv","activity","FeatherIcon","DotIcon","EmailArea","CommentBox","_component_CallArea","FeedbackBox","HistoryBox","apiOptions","textFields","numberFields","component","Autocomplete","Link","FormControl","DateTimePicker","datetime","dayjs","DatePicker","transValue","fieldtype","emitUpdate","fieldname","_toHandlers","useActiveTabManager","tabs","telephonyStore","isTelephonyLoading","changeTabTo","setActiveTabInUrl","tabName","findTabIndex","tabOptions","setActiveTab","_activeTab","newHash","tabsValue","isLoading"],"mappings":"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","x_google_ignoreList":[0,1]}