{"version":3,"file":"MobileTicketAgent-e06f9f0b.js","sources":["../../../../desk/src/components/AssignmentModal.vue","../../../../desk/src/components/icons/DetailsIcon.vue","../../../../desk/src/components/SearchComplete.vue","../../../../desk/src/components/ticket/TicketAgentContact.vue","../../../../desk/src/components/ticket/TicketAgentDetails.vue","../../../../desk/src/components/ticket/TicketAgentFields.vue","../../../../desk/src/pages/ticket/MobileTicketAgent.vue"],"sourcesContent":["<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      title: 'Assign To',\n      size: 'xl',\n    }\"\n  >\n    <template #body-content>\n      <AutocompleteNew\n        v-if=\"showRestrictedMembers\"\n        placeholder=\"Search agents\"\n        :model-value=\"search\"\n        :options=\"members\"\n        @update:model-value=\"\n          ({ _, value }) => {\n            addAssignee(value);\n          }\n        \"\n      >\n        <template #item-prefix=\"{ option }\">\n          <UserAvatar class=\"mr-2\" :name=\"option.value\" size=\"sm\" />\n        </template>\n        <template #item-label=\"{ option }\">\n          <Tooltip :text=\"option.value\">\n            {{ getUser(option.value).full_name }}\n          </Tooltip>\n        </template>\n      </AutocompleteNew>\n\n      <SearchComplete\n        v-else\n        class=\"form-control\"\n        doctype=\"HD Agent\"\n        :custom-filters=\"customFilters\"\n        :reset-input=\"true\"\n        @change=\"\n          (option) => {\n            addAssignee(option.value);\n          }\n        \"\n      >\n        <template #item-prefix=\"{ option }\">\n          <UserAvatar class=\"mr-2\" :name=\"option.value\" size=\"sm\" />\n        </template>\n        <template #item-label=\"{ option }\">\n          <Tooltip :text=\"option.value\">\n            {{ getUser(option.value).full_name }}\n          </Tooltip>\n        </template>\n      </SearchComplete>\n\n      <div class=\"mt-3 flex flex-wrap items-center gap-2\">\n        <Tooltip\n          v-for=\"currentAssignee in assignees\"\n          :key=\"currentAssignee.name\"\n          :text=\"currentAssignee.name\"\n        >\n          <Button\n            :label=\"getUser(currentAssignee.name).full_name\"\n            theme=\"gray\"\n            variant=\"outline\"\n          >\n            <template #prefix>\n              <UserAvatar :name=\"currentAssignee.name\" size=\"sm\" />\n            </template>\n            <template #suffix>\n              <FeatherIcon\n                class=\"h-3.5\"\n                name=\"x\"\n                @click.stop=\"removeCurrentAssignee(currentAssignee.name)\"\n              />\n            </template>\n          </Button>\n        </Tooltip>\n      </div>\n      <ErrorMessage v-if=\"error\" class=\"mt-2\" :message=\"error\" />\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { AutocompleteNew, SearchComplete, UserAvatar } from \"@/components\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { useConfigStore } from \"@/stores/config\";\nimport { useUserStore } from \"@/stores/user\";\nimport { call, createResource } from \"frappe-ui\";\nimport { useOnboarding } from \"frappe-ui/frappe\";\nimport { computed, onMounted, ref } from \"vue\";\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    required: true,\n  },\n  docname: {\n    type: String,\n    required: true,\n  },\n  assignees: {\n    type: Array,\n    required: true,\n  },\n  team: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst show = defineModel();\n\nconst emit = defineEmits([\"update\"]);\n\nconst { getUser } = useUserStore();\nconst { updateOnboardingStep } = useOnboarding(\"helpdesk\");\nconst { isManager } = useAuthStore();\nconst { teamRestrictionApplied, assignWithinTeam } = useConfigStore();\n\nconst error = ref(\"\");\n\nconst addAssignee = (value) => {\n  error.value = \"\";\n  createResource({\n    url: \"frappe.desk.form.assign_to.add\",\n    auto: true,\n    params: {\n      doctype: props.doctype,\n      name: props.docname,\n      assign_to: [value],\n    },\n    onSuccess: () => {\n      emit(\"update\");\n      if (isManager) {\n        updateOnboardingStep(\"assign_to_agent\");\n      }\n      members.value = members.value.filter((m) => m.value !== value);\n    },\n  });\n  emit(\"update\");\n};\n\nconst removeCurrentAssignee = (value) => {\n  createResource({\n    url: \"frappe.desk.form.assign_to.remove\",\n    auto: true,\n    params: {\n      doctype: props.doctype,\n      name: props.docname,\n      assign_to: value,\n    },\n    onSuccess: () => {\n      emit(\"update\");\n      members.value.push({\n        label: value,\n        value: value,\n      });\n    },\n  });\n};\n\nconst customFilters = computed(() => {\n  const filters = {};\n  filters[\"is_active\"] = [\"=\", 1];\n  if (Boolean(props.assignees?.length)) {\n    filters[\"name\"] = [\"not in\", [...props.assignees.map((a) => a.name)]];\n  }\n  return filters;\n});\n\nconst search = ref(\"\");\nconst members = ref([]);\nasync function getMembers() {\n  let teamMembers = await call(\n    \"helpdesk.helpdesk.doctype.hd_team.hd_team.get_team_members\",\n    {\n      team: props.team,\n    }\n  );\n  let assignedMembers = props.assignees.map((a) => a.name);\n  teamMembers = teamMembers.filter((member: string) => {\n    return !assignedMembers.includes(member);\n  });\n\n  members.value = teamMembers.map((member: string) => {\n    return {\n      label: member,\n      value: member,\n    };\n  });\n}\n\nconst showRestrictedMembers = computed(() => {\n  return teamRestrictionApplied && assignWithinTeam && props.team;\n});\n\nonMounted(() => {\n  if (showRestrictedMembers.value) {\n    getMembers();\n  }\n});\n</script>\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"lucide lucide-list-collapse\"\n  >\n    <path d=\"m3 10 2.5-2.5L3 5\" />\n    <path d=\"m3 19 2.5-2.5L3 14\" />\n    <path d=\"M10 6h11\" />\n    <path d=\"M10 12h11\" />\n    <path d=\"M10 18h11\" />\n  </svg>\n</template>\n","<template>\n  <Autocomplete\n    placeholder=\"Select an option\"\n    :options=\"options\"\n    :value=\"selection\"\n    @update:query=\"(q) => onUpdateQuery(q)\"\n    @change=\"\n      (v) => {\n        if (!resetInput) {\n          selection = v;\n        }\n        emit('change', v);\n      }\n    \"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { Autocomplete } from \"@/components\";\nimport { createListResource } from \"frappe-ui\";\nimport { computed, ref } from \"vue\";\n\nconst emit = defineEmits([\"change\"]);\n\nconst props = defineProps({\n  value: {\n    type: String,\n    required: false,\n    default: \"\",\n  },\n  doctype: {\n    type: String,\n    required: true,\n  },\n  searchField: {\n    type: String,\n    required: false,\n    default: \"name\",\n  },\n  labelField: {\n    type: String,\n    required: false,\n    default: \"name\",\n  },\n  valueField: {\n    type: String,\n    required: false,\n    default: \"name\",\n  },\n  pageLength: {\n    type: Number,\n    required: false,\n    default: 100,\n  },\n  resetInput: {\n    type: Boolean,\n    required: false,\n    default: false,\n  },\n  customFilters: {\n    type: Object,\n    required: false,\n    default: {},\n  },\n});\n\nconst r = createListResource({\n  doctype: props.doctype,\n  pageLength: props.pageLength,\n  auto: true,\n  fields: [props.labelField, props.searchField, props.valueField],\n  filters: {\n    [props.searchField]: [\"like\", `%${props.value}%`],\n    ...props.customFilters,\n  },\n  onSuccess: () => {\n    selection.value = props.value\n      ? options.value.find((o) => o.value === props.value)\n      : null;\n  },\n});\nconst options = computed(\n  () =>\n    r.data?.map((result) => ({\n      label: result[props.labelField],\n      value: result[props.valueField],\n    })) || []\n);\nconst selection = ref(null);\n\nfunction onUpdateQuery(query: string) {\n  r.update({\n    filters: {\n      [props.searchField]: [\"like\", `%${query}%`],\n      ...props.customFilters,\n    },\n  });\n\n  r.reload();\n}\n</script>\n","<template>\n  <div class=\"flex items-center justify-start gap-5 border-b p-5\">\n    <Avatar size=\"3xl\" :image=\"contact.image\" :label=\"contact.name\" />\n    <div class=\"flex items-center justify-between flex-1\">\n      <Tooltip :text=\"contact.name\">\n        <div class=\"w-full truncate text-2xl font-medium\">\n          {{ contact.name }}\n        </div>\n      </Tooltip>\n      <div class=\"flex gap-1.5\">\n        <Tooltip :text=\"`Call ${contact.name}`\" v-if=\"isCallingEnabled\">\n          <Button @click=\"callContact\">\n            <template #icon>\n              <PhoneIcon class=\"size-4\" />\n            </template>\n          </Button>\n        </Tooltip>\n        <Tooltip :text=\"contact.email_id\">\n          <Button @click=\"openEmailBox()\">\n            <template #icon>\n              <EmailIcon class=\"size-4\" />\n            </template>\n          </Button>\n        </Tooltip>\n        <!-- <RouterLink\n          class=\"group cursor-pointer space-x-1 hover:text-gray-900\"\n          :to=\"{\n            name: 'TicketsAgent',\n          }\"\n          target=\"_blank\"\n        >\n          <Button\n            class=\"h-7 w-7\"\n            @click=\"\n              () => {\n                console.log('Show Contact Tickets');\n              }\n            \"\n          >\n            <Tooltip text=\"Show Contact Tickets\">\n              <TicketIcon class=\"h-4 w-4\" />\n            </Tooltip>\n          </Button>\n        </RouterLink> -->\n      </div>\n    </div>\n  </div>\n  <SetContactPhoneModal\n    v-model=\"showPhoneModal\"\n    :name=\"contact.name\"\n    @onUpdate=\"refreshTicket()\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { EmailIcon, PhoneIcon } from \"@/components/icons/\";\nimport { useTelephonyStore } from \"@/stores/telephony\";\nimport { Avatar, Tooltip, Button } from \"frappe-ui\";\nimport { storeToRefs } from \"pinia\";\nimport SetContactPhoneModal from \"./SetContactPhoneModal.vue\";\nimport { inject, ref } from \"vue\";\n\nconst telephonyStore = useTelephonyStore();\nconst { isCallingEnabled } = storeToRefs(telephonyStore);\nconst showPhoneModal = ref(false);\nconst refreshTicket = inject<() => void>(\"refreshTicket\");\n\nconst props = defineProps({\n  contact: {\n    type: Object,\n    required: true,\n  },\n  ticketId: {\n    type: String,\n    required: true,\n  },\n});\n\nconst callContact = () => {\n  if (!props.contact.mobile_no && !props.contact.phone) {\n    showPhoneModal.value = true;\n    return;\n  }\n  telephonyStore.makeCall({\n    number: props.contact.mobile_no || props.contact.phone,\n    doctype: \"HD Ticket\",\n    docname: props.ticketId,\n  });\n};\nconst emit = defineEmits([\"email:open\"]);\n\nfunction openEmailBox() {\n  emit(\"email:open\", props.contact.email_id);\n}\n</script>\n","<template>\n  <div class=\"flex flex-col gap-3 border-b px-6 py-3\">\n    <div\n      v-for=\"s in sections\"\n      :key=\"s.label\"\n      class=\"flex items-center text-base leading-5\"\n    >\n      <Tooltip :text=\"s.label\">\n        <div class=\"w-[126px] text-sm text-gray-600\">{{ s.label }}</div>\n      </Tooltip>\n      <div class=\"flex items-center justify-between\">\n        <div v-if=\"s.value\">{{ s.value }}</div>\n        <Tooltip :text=\"s.tooltipValue\">\n          <Badge\n            v-if=\"s.badgeText\"\n            class=\"-ml-1\"\n            :label=\"s.badgeText\"\n            variant=\"subtle\"\n            :theme=\"s.badgeColor\"\n          />\n        </Tooltip>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { dayjs } from \"@/dayjs\";\nimport {\n  dateFormat,\n  dateTooltipFormat,\n  formatTime,\n  getTimeInSeconds,\n} from \"@/utils\";\nimport { Badge, Tooltip } from \"frappe-ui\";\nimport { computed, onUnmounted, ref, watch } from \"vue\";\n\nconst props = defineProps({\n  ticket: {\n    type: Object,\n    required: true,\n  },\n});\n\nlet firstResponseInterval = null;\nlet resolutionInterval = null;\n\nconst firstResponseSeconds = ref(0);\nconst resolutionSeconds = ref(0);\n\nconst firstResponseBadge = computed(() => {\n  let firstResponse = null;\n  if (\n    !props.ticket.first_responded_on &&\n    dayjs().isBefore(dayjs(props.ticket.response_by))\n  ) {\n    let responseBy = formatTime(\n      dayjs(props.ticket.response_by).diff(dayjs(), \"s\")\n    );\n    if (firstResponseInterval) {\n      clearInterval(firstResponseInterval);\n      firstResponseInterval = null;\n    }\n    handleFirstResponseInterval(responseBy);\n    firstResponse = {\n      label: `Due in ${formatTime(firstResponseSeconds.value)}`,\n      color: \"orange\",\n      date: props.ticket.response_by,\n    };\n  } else if (\n    dayjs(props.ticket.first_responded_on).isBefore(\n      dayjs(props.ticket.response_by)\n    )\n  ) {\n    firstResponse = {\n      label: `Fulfilled in ${formatTime(\n        dayjs(props.ticket.first_responded_on).diff(\n          dayjs(props.ticket.creation),\n          \"s\"\n        )\n      )}`,\n      color: \"green\",\n      date: props.ticket.first_responded_on,\n    };\n  } else {\n    firstResponse = {\n      label: \"Failed\",\n      color: \"red\",\n      date: props.ticket.response_by,\n    };\n  }\n  return firstResponse;\n});\n\nconst resolutionBadge = computed(() => {\n  let resolution = null;\n  if (resolutionInterval) {\n    clearInterval(resolutionInterval);\n  }\n  if (\n    props.ticket.status_category === \"Paused\" &&\n    props.ticket.on_hold_since &&\n    dayjs(props.ticket.resolution_by).isAfter(dayjs(props.ticket.on_hold_since))\n  ) {\n    let timeLeft = dayjs(props.ticket.resolution_by).diff(dayjs(), \"s\");\n    resolution = {\n      label: `${formatTime(timeLeft)} left (On Hold)`,\n      color: \"blue\",\n      date: props.ticket.on_hold_since,\n    };\n  } else if (\n    !props.ticket.resolution_date &&\n    dayjs().isBefore(props.ticket.resolution_by)\n  ) {\n    let resolutionBy = formatTime(\n      dayjs(props.ticket.resolution_by).diff(dayjs(), \"s\")\n    );\n    handleResolutionInterval(resolutionBy);\n\n    resolution = {\n      label: `Due in ${formatTime(resolutionSeconds.value)}`,\n      color: \"orange\",\n      date: props.ticket.resolution_by,\n    };\n  } else if (props.ticket.agreement_status === \"Fulfilled\") {\n    resolution = {\n      label: `Fulfilled in ${formatTime(\n        dayjs(props.ticket.resolution_time, \"s\")\n      )}`,\n      color: \"green\",\n      date: props.ticket.resolution_date,\n    };\n  } else {\n    resolution = {\n      label: \"Failed\",\n      color: \"red\",\n      date: props.ticket.resolution_by,\n    };\n  }\n  return resolution;\n});\n\nfunction getCalculatedResolution() {\n  let resolution = dayjs(props.ticket.resolution_by).add(\n    props.ticket.total_hold_time,\n    \"s\"\n  );\n  // let now = new Date()\n  resolution = dayjs(resolution).diff(dayjs(), \"s\");\n  return formatTime(resolution);\n}\n\nconst sections = computed(() => [\n  {\n    label: \"First Response\",\n    tooltipValue: dateFormat(firstResponseBadge.value.date, dateTooltipFormat),\n    badgeText: firstResponseBadge.value.label,\n    badgeColor: firstResponseBadge.value.color,\n  },\n  {\n    label: \"Resolution\",\n    tooltipValue: dateFormat(resolutionBadge.value.date, dateTooltipFormat),\n    badgeText: resolutionBadge.value.label,\n    badgeColor: resolutionBadge.value.color,\n  },\n  {\n    label: \"Source\",\n    value: props.ticket.via_customer_portal ? \"Portal\" : \"Mail\",\n  },\n]);\n\n// Watch for status changes and clear intervals\nwatch(\n  () => props.ticket,\n  (ticket: any) => {\n    if (ticket.status_category !== \"Open\") {\n      if (firstResponseInterval) {\n        clearInterval(firstResponseInterval);\n        firstResponseInterval = null;\n      }\n      if (resolutionInterval) {\n        clearInterval(resolutionInterval);\n        resolutionInterval = null;\n      }\n    }\n  },\n  { deep: true, immediate: true }\n);\n\nfunction handleFirstResponseInterval(time: string) {\n  if (!time) return;\n  if (props.ticket.status_category !== \"Open\") {\n    return;\n  }\n  firstResponseSeconds.value = getTimeInSeconds(time);\n  firstResponseInterval = setInterval(() => {\n    if (firstResponseSeconds.value <= 0) {\n      clearInterval(firstResponseInterval);\n      return;\n    }\n    firstResponseSeconds.value--;\n  }, 1000);\n}\n\nfunction handleResolutionInterval(time: string) {\n  if (!time) return;\n  if (props.ticket.status_category !== \"Open\") {\n    return;\n  }\n\n  resolutionSeconds.value = getTimeInSeconds(time);\n  resolutionInterval = setInterval(() => {\n    if (resolutionSeconds.value <= 0) {\n      clearInterval(resolutionInterval);\n      return;\n    }\n    resolutionSeconds.value--;\n  }, 1000);\n}\n\nonUnmounted(() => {\n  if (firstResponseInterval) {\n    clearInterval(firstResponseInterval);\n  }\n  if (resolutionInterval) {\n    clearInterval(resolutionInterval);\n  }\n  firstResponseInterval = null;\n  resolutionInterval = null;\n});\n</script>\n","<template>\n  <div class=\"flex flex-1 flex-col overflow-hidden overflow-y-auto border-b\">\n    <TicketField\n      v-for=\"field in fields\"\n      :key=\"field.fieldname\"\n      :field=\"field\"\n      :value=\"ticket[field.fieldname]\"\n      @change=\"(data) => update(data.fieldname, data.value)\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Field, FieldValue } from \"@/types\";\nimport { toast } from \"frappe-ui\";\nimport { computed } from \"vue\";\nimport TicketField from \"../TicketField.vue\";\nconst emit = defineEmits([\"update\"]);\n\nconst props = defineProps({\n  ticket: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst fields = computed(() => {\n  return props.ticket.fields;\n});\n\nfunction update(field: Field[\"fieldname\"], value: FieldValue, event = null) {\n  if (field === \"subject\" && value === \"\") {\n    toast.error(\"Subject is required\");\n    event.target.value = props.ticket.subject;\n    return;\n  }\n  emit(\"update\", { field, value });\n}\n</script>\n<style scoped>\n:deep(.form-control input:not([type=\"checkbox\"])),\n:deep(.form-control select),\n:deep(.form-control textarea),\n:deep(.form-control button) {\n  border-color: transparent;\n  background: white;\n}\n:deep(.form-control textarea) {\n  field-sizing: content;\n}\n\n:deep(.form-control button) {\n  gap: 0;\n}\n:deep(.form-control [type=\"checkbox\"]) {\n  margin-left: 9px;\n  cursor: pointer;\n}\n\n:deep(.form-control button > div) {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n:deep(.form-control button svg) {\n  color: white;\n  width: 0;\n}\n</style>\n","<template>\n  <div class=\"flex flex-col\">\n    <LayoutHeader v-if=\"ticket.data\">\n      <template #left-header>\n        <Breadcrumbs :items=\"breadcrumbs\" />\n      </template>\n      <template #right-header>\n        <div class=\"absolute right-0 pr-2\">\n          <Dropdown :options=\"dropdownOptions\">\n            <template #default=\"{ open }\">\n              <Button :label=\"ticket.data.status\">\n                <template #prefix>\n                  <IndicatorIcon\n                    :class=\"\n                      ticketStatusStore.getStatus(ticket.data.status)\n                        ?.parsed_color\n                    \"\n                  />\n                </template>\n                <template #suffix>\n                  <FeatherIcon\n                    :name=\"open ? 'chevron-up' : 'chevron-down'\"\n                    class=\"h-4\"\n                  />\n                </template>\n              </Button>\n            </template>\n          </Dropdown>\n        </div>\n      </template>\n    </LayoutHeader>\n    <header\n      class=\"flex h-12 items-center justify-between py-[7px] px-3 border-b\"\n      v-if=\"ticket.data\"\n    >\n      <!-- left side -->\n      <div class=\"flex items-center gap-2 max-w-[50%]\">\n        <div v-if=\"ticket.data.assignees?.length\">\n          <component :is=\"ticket.data.assignees.length == 1 ? 'Button' : 'div'\">\n            <MultipleAvatar\n              :avatars=\"ticket.data.assignees\"\n              @click=\"showAssignmentModal = true\"\n            />\n          </component>\n        </div>\n        <button\n          v-else\n          class=\"rounded bg-gray-100 px-2 py-1.5 text-base text-gray-800\"\n          @click=\"showAssignmentModal = true\"\n        >\n          {{ __(\"Assign\") }}\n        </button>\n      </div>\n      <!-- right side -->\n      <div class=\"flex items-center gap-2\">\n        <CustomActions\n          v-if=\"ticket.data._customActions\"\n          :actions=\"ticket.data._customActions\"\n        />\n      </div>\n    </header>\n    <div v-if=\"ticket.data\" class=\"flex flex-1 overflow-x-hidden\">\n      <div class=\"flex flex-1 flex-col overflow-x-hidden\">\n        <div class=\"flex-1 flex flex-col\">\n          <Tabs\n            :modelValue=\"tabIndex\"\n            :tabs=\"tabs\"\n            @update:modelValue=\"changeTabTo\"\n            class=\"[&_[role='tab']]:px-0 [&_[role='tablist']]:px-5 [&_[role='tablist']]:gap-7.5\"\n          >\n            <template #tab-panel=\"{ tab }\">\n              <div v-if=\"tab.name === 'details'\">\n                <!-- ticket contact info -->\n                <TicketAgentContact\n                  :contact=\"ticket.data.contact\"\n                  :ticketId=\"ticket.data.name\"\n                  @email:open=\"communicationAreaRef.toggleEmailBox()\"\n                />\n                <!-- feedback component -->\n                <TicketFeedback\n                  v-if=\"ticket.data.feedback_rating\"\n                  class=\"border-b px-6 py-3 text-base text-gray-600\"\n                  :ticket=\"ticket.data\"\n                />\n                <!-- SLA Section -->\n                <h3 class=\"px-6 pt-3 font-semibold text-base\">{{ __(\"SLA\") }}</h3>\n                <TicketAgentDetails :ticket=\"ticket.data\" />\n                <!-- Ticket Fields -->\n                <h3 class=\"px-6 pt-3 font-semibold text-base\">{{ __(\"Details\") }}</h3>\n                <TicketAgentFields\n                  :ticket=\"ticket.data\"\n                  @update=\"({ field, value }) => updateTicket(field, value)\"\n                  class=\"!border-0\"\n                />\n              </div>\n\n              <!-- Rest Activities -->\n              <TicketAgentActivities\n                v-else\n                ref=\"ticketAgentActivitiesRef\"\n                :activities=\"filterActivities(tab.name)\"\n                :title=\"tab.label\"\n                :ticket-status=\"ticket.data?.status\"\n                @update=\"\n                  () => {\n                    ticket.reload();\n                  }\n                \"\n                @email:reply=\"\n                  (e) => {\n                    communicationAreaRef.replyToEmail(e);\n                  }\n                \"\n              />\n            </template>\n          </Tabs>\n          <CommunicationArea\n            class=\"sticky bottom-0 z-50 bg-white\"\n            ref=\"communicationAreaRef\"\n            v-model=\"ticket.data\"\n            :ticketId=\"ticket.data?.name\"\n            :to-emails=\"[ticket.data.raised_by]\"\n            :cc-emails=\"[]\"\n            :bcc-emails=\"[]\"\n            :key=\"ticket.data?.name\"\n            @update=\"\n              () => {\n                ticket.reload();\n                tabIndex !== 0 &&\n                  ticketAgentActivitiesRef.scrollToLatestActivity();\n              }\n            \"\n          />\n        </div>\n      </div>\n    </div>\n    <AssignmentModal\n      v-if=\"ticket.data\"\n      v-model=\"showAssignmentModal\"\n      :assignees=\"ticket.data.assignees\"\n      :docname=\"ticketId\"\n      :team=\"ticket.data?.agent_group\"\n      doctype=\"HD Ticket\"\n      @update=\"\n        () => {\n          ticket.reload();\n        }\n      \"\n    />\n    <Dialog v-model=\"showSubjectDialog\">\n      <template #body-title>\n        <h3>{{ __(\"Rename\") }}</h3>\n      </template>\n      <template #body-content>\n        <FormControl\n          v-model=\"subjectInput\"\n          :type=\"'text'\"\n          size=\"sm\"\n          variant=\"subtle\"\n          :disabled=\"false\"\n          :label=\"__('New Subject')\"\n        />\n      </template>\n      <template #actions>\n        <Button\n          variant=\"solid\"\n          :disabled=\"!subjectInput\"\n          :loading=\"isLoading\"\n          @click=\"\n            () => {\n              updateTicket('subject', subjectInput);\n              showSubjectDialog = false;\n            }\n          \"\n        >\n          {{ __(\"Confirm\") }}\n        </Button>\n        <Button class=\"ml-2\" @click=\"showSubjectDialog = false\"> {{ __(\"Close\") }} </Button>\n      </template>\n    </Dialog>\n    <SetContactPhoneModal\n      v-model=\"showPhoneModal\"\n      :name=\"ticket.data?.contact?.name\"\n      @onUpdate=\"ticket.reload\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  Breadcrumbs,\n  Dialog,\n  Dropdown,\n  FormControl,\n  Tabs,\n  call,\n  createResource,\n  toast,\n} from \"frappe-ui\";\nimport { __ } from \"@/translation\";\nimport {\n  computed,\n  ComputedRef,\n  h,\n  onMounted,\n  onUnmounted,\n  provide,\n  ref,\n} from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nimport {\n  AssignmentModal,\n  CommunicationArea,\n  LayoutHeader,\n  MultipleAvatar,\n} from \"@/components\";\nimport {\n  ActivityIcon,\n  CommentIcon,\n  DetailsIcon,\n  EmailIcon,\n  IndicatorIcon,\n  PhoneIcon,\n} from \"@/components/icons\";\nimport { TicketAgentActivities } from \"@/components/ticket\";\n\nimport TicketAgentDetails from \"@/components/ticket/TicketAgentDetails.vue\";\nimport TicketAgentFields from \"@/components/ticket/TicketAgentFields.vue\";\nimport { setupCustomizations } from \"@/composables/formCustomisation\";\nimport { useScreenSize } from \"@/composables/screen\";\nimport { globalStore } from \"@/stores/globalStore\";\nimport { useTicketStatusStore } from \"@/stores/ticketStatus\";\nimport { useUserStore } from \"@/stores/user\";\nimport { TabObject, TicketTab } from \"@/types\";\nimport { useActiveTabManager } from \"@/composables/useActiveTabManager\";\nimport { useTelephonyStore } from \"@/stores/telephony\";\nimport { storeToRefs } from \"pinia\";\nimport { HDTicketStatus } from \"@/types/doctypes\";\nimport SetContactPhoneModal from \"@/components/ticket/SetContactPhoneModal.vue\";\n\nconst telephonyStore = useTelephonyStore();\nconst { isCallingEnabled } = storeToRefs(telephonyStore);\n\nconst ticketStatusStore = useTicketStatusStore();\nconst { getUser } = useUserStore();\n\nconst router = useRouter();\nconst ticketAgentActivitiesRef = ref(null);\nconst communicationAreaRef = ref(null);\nconst subjectInput = ref(null);\nconst isLoading = ref(false);\nconst showPhoneModal = ref(false);\n\nconst props = defineProps({\n  ticketId: {\n    type: String,\n    required: true,\n  },\n});\n\nprovide(\"communicationArea\", communicationAreaRef);\nprovide(\"makeCall\", () => {\n  if (!ticket.data?.contact?.mobile_no && !ticket.data?.contact?.phone) {\n    showPhoneModal.value = true;\n    return;\n  }\n  telephonyStore.makeCall({\n    number: ticket.data?.contact?.phone || ticket.data?.contact?.mobile_no,\n    doctype: \"HD Ticket\",\n    docname: props.ticketId,\n  });\n});\nprovide(\"ticketId\", props.ticketId);\n\nconst { isMobileView } = useScreenSize();\nconst { $dialog } = globalStore();\n\nconst showAssignmentModal = ref(false);\nconst showSubjectDialog = ref(false);\n\nconst ticket = createResource({\n  url: \"helpdesk.helpdesk.doctype.hd_ticket.api.get_one\",\n  cache: [\"Ticket\", props.ticketId],\n  auto: true,\n  params: {\n    name: props.ticketId,\n  },\n  transform: (data) => {\n    if (data._assign) {\n      data.assignees = JSON.parse(data._assign).map((assignee) => {\n        return {\n          name: assignee,\n          image: getUser(assignee).user_image,\n          label: getUser(assignee).full_name,\n        };\n      });\n    }\n  },\n  onSuccess: (data) => {\n    subjectInput.value = ticket.subject;\n    setupCustomizations(ticket, {\n      doc: data,\n      call,\n      router,\n      toast,\n      $dialog,\n      updateField,\n      createToast: toast.create,\n    });\n  },\n});\n\nprovide(\"refreshTicket\", () => ticket.reload());\nprovide(\"onCallEnded\", () => ticket.reload());\n\nfunction updateField(name: string, value: string, callback = () => {}) {\n  updateTicket(name, value);\n  callback();\n}\n\nconst breadcrumbs = computed(() => {\n  let items = [{ label: __(\"Tickets\"), route: { name: \"TicketsAgent\" } }];\n  items.push({\n    label: ticket.data?.subject,\n    route: { name: \"TicketAgent\" },\n  });\n  return items;\n});\n\nconst dropdownOptions = computed(() =>\n  ticketStatusStore.statuses.data?.map((o: HDTicketStatus) => ({\n    label: o.label_agent,\n    value: o.label_agent,\n    onClick: () => updateTicket(\"status\", o.label_agent),\n    icon: () =>\n      h(IndicatorIcon, {\n        class: o.parsed_color,\n      }),\n  }))\n);\n\nconst tabs: ComputedRef<TabObject[]> = computed(() => {\n  const _tabs = [\n    {\n      name: \"details\",\n      label: __(\"Details\"),\n      icon: DetailsIcon,\n      condition: () => isMobileView.value,\n    },\n    {\n      name: \"activity\",\n      label: __(\"Activity\"),\n      icon: ActivityIcon,\n    },\n    {\n      name: \"email\",\n      label: __(\"Emails\"),\n      icon: EmailIcon,\n    },\n    {\n      name: \"comment\",\n      label: __(\"Comments\"),\n      icon: CommentIcon,\n    },\n  ];\n\n  if (isCallingEnabled.value) {\n    _tabs.push({\n      name: \"call\",\n      label: __(\"Calls\"),\n      icon: PhoneIcon,\n    });\n  }\n  return _tabs;\n});\n\nconst { tabIndex, changeTabTo } = useActiveTabManager(tabs);\n\nconst activities = computed(() => {\n  const emailProps = ticket.data.communications.map((email, idx: number) => {\n    return {\n      subject: email.subject,\n      content: email.content,\n      sender: { name: email.user.email, full_name: email.user.name },\n      to: email.recipients,\n      type: \"email\",\n      key: email.creation,\n      cc: email.cc,\n      bcc: email.bcc,\n      creation: email.communication_date || email.creation,\n      attachments: email.attachments,\n      name: email.name,\n      deliveryStatus: email.delivery_status,\n      isFirstEmail: idx === 0,\n    };\n  });\n\n  const commentProps = ticket.data.comments.map((comment) => {\n    return {\n      name: comment.name,\n      type: \"comment\",\n      key: comment.creation,\n      commentedBy: comment.commented_by,\n      commenter: comment.user.name,\n      creation: comment.creation,\n      content: comment.content,\n      attachments: comment.attachments,\n    };\n  });\n\n  const historyProps = [...ticket.data.history, ...ticket.data.views].map(\n    (h) => {\n      return {\n        type: \"history\",\n        key: h.creation,\n        content: h.action ? h.action : __(\"viewed this\"),\n        creation: h.creation,\n        user: h.user.name + \" \",\n      };\n    }\n  );\n\n  const callProps = ticket.data.calls.map((call) => {\n    return {\n      ...call,\n      type: \"call\",\n      name: call.name,\n      key: call.creation,\n      call_type: call.type,\n      content: `${call.caller || \"Unknown\"} made a call to ${\n        call.receiver || \"Unknown\"\n      }`,\n      duration: call.duration ? call.duration + \"s\" : \"0s\",\n    };\n  });\n\n  const sorted = [\n    ...emailProps,\n    ...commentProps,\n    ...historyProps,\n    ...callProps,\n  ].sort((a, b) => new Date(a.creation) - new Date(b.creation));\n\n  const data = [];\n  let i = 0;\n\n  while (i < sorted.length) {\n    const currentActivity = sorted[i];\n    if (currentActivity.type === \"history\") {\n      currentActivity.relatedActivities = [currentActivity];\n      for (let j = i + 1; j < sorted.length + 1; j++) {\n        const nextActivity = sorted[j];\n\n        if (nextActivity && nextActivity.user === currentActivity.user) {\n          currentActivity.relatedActivities.push(nextActivity);\n        } else {\n          data.push(currentActivity);\n          i = j - 1;\n          break;\n        }\n      }\n    } else {\n      data.push(currentActivity);\n    }\n    i++;\n  }\n  return data;\n});\n\nfunction filterActivities(eventType: TicketTab) {\n  if (eventType === \"activity\") {\n    return activities.value;\n  }\n  return activities.value.filter((activity) => activity.type === eventType);\n}\n\nfunction updateTicket(fieldname: string, value: string) {\n  isLoading.value = true;\n  createResource({\n    url: \"frappe.client.set_value\",\n    params: {\n      doctype: \"HD Ticket\",\n      name: props.ticketId,\n      fieldname,\n      value,\n    },\n    auto: true,\n    onSuccess: () => {\n      isLoading.value = false;\n      ticket.reload();\n      toast.success(__(\"Ticket updated\"));\n    },\n  });\n}\nonMounted(() => {\n  document.title = props.ticketId;\n});\n\nonUnmounted(() => {\n  document.title = \"Helpdesk\";\n});\n</script>\n"],"names":["props","__props","show","_useModel","emit","__emit","getUser","useUserStore","updateOnboardingStep","useOnboarding","isManager","useAuthStore","teamRestrictionApplied","assignWithinTeam","useConfigStore","error","ref","addAssignee","value","createResource","members","m","removeCurrentAssignee","customFilters","computed","filters","_a","a","search","getMembers","teamMembers","call","assignedMembers","member","showRestrictedMembers","onMounted","_createBlock","_component_Dialog","$event","_unref","AutocompleteNew","_cache","_","_withCtx","option","_createVNode","UserAvatar","_component_Tooltip","_createTextVNode","_toDisplayString","SearchComplete","_createElementVNode","_hoisted_1","_createElementBlock","_Fragment","_renderList","currentAssignee","_component_Button","_component_FeatherIcon","_withModifiers","_component_ErrorMessage","_sfc_render","_ctx","r","createListResource","selection","options","o","result","onUpdateQuery","query","Autocomplete","q","v","telephonyStore","useTelephonyStore","isCallingEnabled","storeToRefs","showPhoneModal","refreshTicket","inject","callContact","openEmailBox","Avatar","_hoisted_2","Tooltip","_hoisted_3","_hoisted_4","Button","PhoneIcon","EmailIcon","SetContactPhoneModal","firstResponseInterval","resolutionInterval","firstResponseSeconds","resolutionSeconds","firstResponseBadge","firstResponse","dayjs","responseBy","formatTime","handleFirstResponseInterval","resolutionBadge","resolution","timeLeft","resolutionBy","handleResolutionInterval","sections","dateFormat","dateTooltipFormat","watch","ticket","time","getTimeInSeconds","onUnmounted","_openBlock","s","Badge","fields","update","field","event","toast","TicketField","data","ticketStatusStore","useTicketStatusStore","router","useRouter","ticketAgentActivitiesRef","communicationAreaRef","subjectInput","isLoading","provide","_b","_d","_c","_f","_e","_h","_g","isMobileView","useScreenSize","$dialog","globalStore","showAssignmentModal","showSubjectDialog","assignee","setupCustomizations","updateField","name","callback","updateTicket","breadcrumbs","items","__","dropdownOptions","h","IndicatorIcon","tabs","_tabs","DetailsIcon","ActivityIcon","CommentIcon","tabIndex","changeTabTo","useActiveTabManager","activities","emailProps","email","idx","commentProps","comment","historyProps","callProps","sorted","b","i","currentActivity","nextActivity","filterActivities","eventType","activity","fieldname","LayoutHeader","Breadcrumbs","Dropdown","open","_normalizeClass","_hoisted_5","_resolveDynamicComponent","MultipleAvatar","_hoisted_6","_component_CustomActions","_hoisted_7","_hoisted_8","_hoisted_9","Tabs","tab","_hoisted_10","_component_TicketAgentContact","_component_TicketFeedback","_hoisted_11","TicketAgentDetails","_hoisted_12","TicketAgentFields","TicketAgentActivities","e","CommunicationArea","AssignmentModal","Dialog","FormControl"],"mappings":"onFA0FA,MAAMA,EAAQC,EAmBRC,EAAOC,iBAAY,EAEnBC,EAAOC,EAEP,CAAE,QAAAC,GAAYC,KACd,CAAE,qBAAAC,CAAA,EAAyBC,GAAc,UAAU,EACnD,CAAE,UAAAC,GAAcC,KAChB,CAAE,uBAAAC,EAAwB,iBAAAC,CAAiB,EAAIC,GAAe,EAE9DC,EAAQC,EAAI,EAAE,EAEdC,EAAeC,GAAU,CAC7BH,EAAM,MAAQ,GACCI,GAAA,CACb,IAAK,iCACL,KAAM,GACN,OAAQ,CACN,QAASnB,EAAM,QACf,KAAMA,EAAM,QACZ,UAAW,CAACkB,CAAK,CACnB,EACA,UAAW,IAAM,CACfd,EAAK,QAAQ,EACTM,GACFF,EAAqB,iBAAiB,EAEhCY,EAAA,MAAQA,EAAQ,MAAM,OAAQC,GAAMA,EAAE,QAAUH,CAAK,CAC/D,CAAA,CACD,EACDd,EAAK,QAAQ,CAAA,EAGTkB,EAAyBJ,GAAU,CACxBC,GAAA,CACb,IAAK,oCACL,KAAM,GACN,OAAQ,CACN,QAASnB,EAAM,QACf,KAAMA,EAAM,QACZ,UAAWkB,CACb,EACA,UAAW,IAAM,CACfd,EAAK,QAAQ,EACbgB,EAAQ,MAAM,KAAK,CACjB,MAAOF,EACP,MAAAA,CAAA,CACD,CACH,CAAA,CACD,CAAA,EAGGK,EAAgBC,EAAS,IAAM,OACnC,MAAMC,EAAU,CAAA,EAChB,OAAAA,EAAQ,UAAe,CAAC,IAAK,CAAC,GAClBC,EAAA1B,EAAM,YAAN,MAAA0B,EAAiB,SAC3BD,EAAQ,KAAU,CAAC,SAAU,CAAC,GAAGzB,EAAM,UAAU,IAAK2B,GAAMA,EAAE,IAAI,CAAC,CAAC,GAE/DF,CAAA,CACR,EAEKG,EAASZ,EAAI,EAAE,EACfI,EAAUJ,EAAI,CAAA,CAAE,EACtB,eAAea,GAAa,CAC1B,IAAIC,EAAc,MAAMC,GACtB,6DACA,CACE,KAAM/B,EAAM,IACd,CAAA,EAEEgC,EAAkBhC,EAAM,UAAU,IAAK2B,GAAMA,EAAE,IAAI,EACzCG,EAAAA,EAAY,OAAQG,GACzB,CAACD,EAAgB,SAASC,CAAM,CACxC,EAEDb,EAAQ,MAAQU,EAAY,IAAKG,IACxB,CACL,MAAOA,EACP,MAAOA,CAAA,EAEV,CACH,CAEM,MAAAC,EAAwBV,EAAS,IAC9BZ,GAA0BC,GAAoBb,EAAM,IAC5D,EAED,OAAAmC,GAAU,IAAM,CACVD,EAAsB,OACbL,GACb,CACD,+GAtMCO,EA6ESC,GAAA,YA5EEnC,EAAI,2CAAJA,EAAI,MAAAoC,GACZ,QAAS,4BAGT,CAAA,GAEU,iBACT,IAmBkB,CAlBVJ,EAAqB,WAD7BE,EAmBkBG,EAAAC,EAAA,EAAA,OAjBhB,YAAY,gBACX,cAAaZ,EAAM,MACnB,QAASR,EAAO,MAChB,sBAAkBqB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAgB,CAAA,CAAA,EAAAC,EAAG,MAAAxB,KAAK,CAAqBD,EAAYC,CAAK,CAAA,KAMtE,cAAWyB,EACpB,CAA0D,CADlC,OAAAC,KAAM,CAC9BC,EAA0DN,EAAAO,EAAA,EAAA,CAA9C,MAAM,OAAQ,KAAMF,EAAO,MAAO,KAAK,yBAE1C,aAAUD,EACnB,CAEU,CAHa,OAAAC,KAAM,CAC7BC,EAEUE,EAAA,CAFA,KAAMH,EAAO,KAAA,aACrB,IAAqC,CAAlCI,GAAAC,EAAAV,EAAAjC,CAAA,EAAQsC,EAAO,KAAK,EAAE,SAAS,EAAA,CAAA,CAAA,iEAKxCR,EAoBiBG,EAAAW,EAAA,EAAA,OAlBf,MAAM,eACN,QAAQ,WACP,iBAAgB3B,EAAa,MAC7B,cAAa,GACb,SAAMkB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAcG,GAAM,CAAmB3B,EAAY2B,EAAO,KAAK,CAAA,KAM3D,cAAWD,EACpB,CAA0D,CADlC,OAAAC,KAAM,CAC9BC,EAA0DN,EAAAO,EAAA,EAAA,CAA9C,MAAM,OAAQ,KAAMF,EAAO,MAAO,KAAK,yBAE1C,aAAUD,EACnB,CAEU,CAHa,OAAAC,KAAM,CAC7BC,EAEUE,EAAA,CAFA,KAAMH,EAAO,KAAA,aACrB,IAAqC,CAAlCI,GAAAC,EAAAV,EAAAjC,CAAA,EAAQsC,EAAO,KAAK,EAAE,SAAS,EAAA,CAAA,CAAA,qDAKxCO,EAuBM,MAvBNC,GAuBM,QAtBJC,EAqBUC,GAAA,KAAAC,GApBkBtD,EAAS,UAA5BuD,QADTpB,EAqBUW,EAAA,CAnBP,IAAKS,EAAgB,KACrB,KAAMA,EAAgB,IAAA,aAEvB,IAeS,CAfTX,EAeSY,GAAA,CAdN,MAAOlB,EAAOjC,CAAA,EAACkD,EAAgB,IAAI,EAAE,UACtC,MAAM,OACN,QAAQ,SAAA,GAEG,SACT,IAAqD,CAArDX,EAAqDN,EAAAO,EAAA,EAAA,CAAxC,KAAMU,EAAgB,KAAM,KAAK,yBAErC,SACT,IAIE,CAJFX,EAIEa,EAAA,CAHA,MAAM,QACN,KAAK,IACJ,QAAYC,GAAArB,GAAAhB,EAAsBkC,EAAgB,IAAI,EAAA,CAAA,MAAA,CAAA,8EAM7CzC,EAAK,WAAzBqB,EAA2DwB,EAAA,OAAhC,MAAM,OAAQ,QAAS7C,EAAK,KAAA,mEC1EzDqC,GAAkC,CAClC,MAAM,6BACN,WACA,YACA,QAAW,YACX,KAAM,OACN,OAAA,eACA,eAAc,MACd,yBACA,kBAAmC,6CAVrC,SAAAS,GAAAC,EAAArB,EAAA,orBCqBF,MAAMrC,EAAOC,EAEPL,EAAQC,EA0CR8D,EAAIC,GAAmB,CAC3B,QAAShE,EAAM,QACf,WAAYA,EAAM,WAClB,KAAM,GACN,OAAQ,CAACA,EAAM,WAAYA,EAAM,YAAaA,EAAM,UAAU,EAC9D,QAAS,CACP,CAACA,EAAM,WAAW,EAAG,CAAC,OAAQ,IAAIA,EAAM,KAAK,GAAG,EAChD,GAAGA,EAAM,aACX,EACA,UAAW,IAAM,CACfiE,EAAU,MAAQjE,EAAM,MACpBkE,EAAQ,MAAM,KAAMC,GAAMA,EAAE,QAAUnE,EAAM,KAAK,EACjD,IACN,CAAA,CACD,EACKkE,EAAU1C,EACd,IAAA,OACE,QAAAE,EAAAqC,EAAE,OAAF,YAAArC,EAAQ,IAAK0C,IAAY,CACvB,MAAOA,EAAOpE,EAAM,UAAU,EAC9B,MAAOoE,EAAOpE,EAAM,UAAU,CAChC,MAAO,CAAC,EAAA,EAENiE,EAAYjD,EAAI,IAAI,EAE1B,SAASqD,EAAcC,EAAe,CACpCP,EAAE,OAAO,CACP,QAAS,CACP,CAAC/D,EAAM,WAAW,EAAG,CAAC,OAAQ,IAAIsE,CAAK,GAAG,EAC1C,GAAGtE,EAAM,aACX,CAAA,CACD,EAED+D,EAAE,OAAO,CACX,mBAlGE3B,EAaEG,EAAAgC,EAAA,EAAA,CAZA,YAAY,mBACX,QAASL,EAAO,MAChB,MAAOD,EAAS,MAChB,iBAAexB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA+B,GAAMH,EAAcG,CAAC,GACpC,SAAM/B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAUgC,GAAC,CAAoBxE,EAAU,aAAcgE,EAAA,MAAYQ,GAAqBrE,WAAeqE,CAAC,CAAA,4XCwDnH,MAAMC,EAAiBC,KACjB,CAAE,iBAAAC,CAAA,EAAqBC,GAAYH,CAAc,EACjDI,EAAiB9D,EAAI,EAAK,EAC1B+D,EAAgBC,GAAmB,eAAe,EAElDhF,EAAQC,EAWRgF,EAAc,IAAM,CACxB,GAAI,CAACjF,EAAM,QAAQ,WAAa,CAACA,EAAM,QAAQ,MAAO,CACpD8E,EAAe,MAAQ,GACvB,MACF,CACAJ,EAAe,SAAS,CACtB,OAAQ1E,EAAM,QAAQ,WAAaA,EAAM,QAAQ,MACjD,QAAS,YACT,QAASA,EAAM,QAAA,CAChB,CAAA,EAEGI,EAAOC,EAEb,SAAS6E,GAAe,CACjB9E,EAAA,aAAcJ,EAAM,QAAQ,QAAQ,CAC3C,8BA5FEmD,EA6CM,MA7CNC,GA6CM,CA5CJP,EAAkEN,EAAA4C,EAAA,EAAA,CAA1D,KAAK,MAAO,MAAOlF,EAAO,QAAC,MAAQ,MAAOA,EAAO,QAAC,gCAC1DkD,EA0CM,MA1CNiC,GA0CM,CAzCJvC,EAIUN,EAAA8C,CAAA,EAAA,CAJA,KAAMpF,EAAO,QAAC,IAAA,aACtB,IAEM,CAFNkD,EAEM,MAFNmC,GACKrC,EAAAhD,EAAA,QAAQ,IAAI,EAAA,CAAA,CAAA,oBAGnBkD,EAmCM,MAnCNoC,GAmCM,CAlC0ChD,EAAgBqC,CAAA,OAA9DxC,EAMUG,EAAA8C,CAAA,EAAA,OANA,KAAI,QAAUpF,EAAO,QAAC,IAAI,EAAA,aAClC,IAIS,CAJT4C,EAISN,EAAAiD,EAAA,EAAA,CAJA,QAAOP,GAAW,CACd,OACT,IAA4B,CAA5BpC,EAA4BN,EAAAkD,EAAA,EAAA,CAAjB,MAAM,SAAQ,CAAA,sCAI/B5C,EAMUN,EAAA8C,CAAA,EAAA,CANA,KAAMpF,EAAO,QAAC,QAAA,aACtB,IAIS,CAJT4C,EAISN,EAAAiD,EAAA,EAAA,CAJA,uBAAON,IAAY,GACf,OACT,IAA4B,CAA5BrC,EAA4BN,EAAAmD,EAAA,EAAA,CAAjB,MAAM,SAAQ,CAAA,kCA2BrC7C,EAIE8C,GAAA,YAHSb,EAAc,2CAAdA,EAAc,MAAAxC,GACtB,KAAMrC,EAAO,QAAC,KACd,0BAAUsC,EAAawC,CAAA,4RCb5B,MAAM/E,EAAQC,EAOd,IAAI2F,EAAwB,KACxBC,EAAqB,KAEnB,MAAAC,EAAuB9E,EAAI,CAAC,EAC5B+E,EAAoB/E,EAAI,CAAC,EAEzBgF,EAAqBxE,EAAS,IAAM,CACxC,IAAIyE,EAAgB,KACpB,GACE,CAACjG,EAAM,OAAO,oBACdkG,EAAM,EAAE,SAASA,EAAMlG,EAAM,OAAO,WAAW,CAAC,EAChD,CACA,IAAImG,EAAaC,EACfF,EAAMlG,EAAM,OAAO,WAAW,EAAE,KAAKkG,IAAS,GAAG,CAAA,EAE/CN,IACF,cAAcA,CAAqB,EACXA,EAAA,MAE1BS,EAA4BF,CAAU,EACtBF,EAAA,CACd,MAAO,UAAUG,EAAWN,EAAqB,KAAK,CAAC,GACvD,MAAO,SACP,KAAM9F,EAAM,OAAO,WAAA,CAGrB,MAAAkG,EAAMlG,EAAM,OAAO,kBAAkB,EAAE,SACrCkG,EAAMlG,EAAM,OAAO,WAAW,CAAA,EAGhBiG,EAAA,CACd,MAAO,gBAAgBG,EACrBF,EAAMlG,EAAM,OAAO,kBAAkB,EAAE,KACrCkG,EAAMlG,EAAM,OAAO,QAAQ,EAC3B,GACF,CAAA,CACD,GACD,MAAO,QACP,KAAMA,EAAM,OAAO,kBAAA,EAGLiG,EAAA,CACd,MAAO,SACP,MAAO,MACP,KAAMjG,EAAM,OAAO,WAAA,EAGhB,OAAAiG,CAAA,CACR,EAEKK,EAAkB9E,EAAS,IAAM,CACrC,IAAI+E,EAAa,KAIjB,GAHIV,GACF,cAAcA,CAAkB,EAGhC7F,EAAM,OAAO,kBAAoB,UACjCA,EAAM,OAAO,eACbkG,EAAMlG,EAAM,OAAO,aAAa,EAAE,QAAQkG,EAAMlG,EAAM,OAAO,aAAa,CAAC,EAC3E,CACI,IAAAwG,EAAWN,EAAMlG,EAAM,OAAO,aAAa,EAAE,KAAKkG,IAAS,GAAG,EACrDK,EAAA,CACX,MAAO,GAAGH,EAAWI,CAAQ,CAAC,kBAC9B,MAAO,OACP,KAAMxG,EAAM,OAAO,aAAA,CAEvB,SACE,CAACA,EAAM,OAAO,iBACdkG,IAAQ,SAASlG,EAAM,OAAO,aAAa,EAC3C,CACA,IAAIyG,EAAeL,EACjBF,EAAMlG,EAAM,OAAO,aAAa,EAAE,KAAKkG,IAAS,GAAG,CAAA,EAErDQ,EAAyBD,CAAY,EAExBF,EAAA,CACX,MAAO,UAAUH,EAAWL,EAAkB,KAAK,CAAC,GACpD,MAAO,SACP,KAAM/F,EAAM,OAAO,aAAA,CAEZ,MAAAA,EAAM,OAAO,mBAAqB,YAC9BuG,EAAA,CACX,MAAO,gBAAgBH,EACrBF,EAAMlG,EAAM,OAAO,gBAAiB,GAAG,CAAA,CACxC,GACD,MAAO,QACP,KAAMA,EAAM,OAAO,eAAA,EAGRuG,EAAA,CACX,MAAO,SACP,MAAO,MACP,KAAMvG,EAAM,OAAO,aAAA,EAGhB,OAAAuG,CAAA,CACR,EAYKI,EAAWnF,EAAS,IAAM,CAC9B,CACE,MAAO,iBACP,aAAcoF,GAAWZ,EAAmB,MAAM,KAAMa,EAAiB,EACzE,UAAWb,EAAmB,MAAM,MACpC,WAAYA,EAAmB,MAAM,KACvC,EACA,CACE,MAAO,aACP,aAAcY,GAAWN,EAAgB,MAAM,KAAMO,EAAiB,EACtE,UAAWP,EAAgB,MAAM,MACjC,WAAYA,EAAgB,MAAM,KACpC,EACA,CACE,MAAO,SACP,MAAOtG,EAAM,OAAO,oBAAsB,SAAW,MACvD,CAAA,CACD,EAGD8G,GACE,IAAM9G,EAAM,OACX+G,GAAgB,CACXA,EAAO,kBAAoB,SACzBnB,IACF,cAAcA,CAAqB,EACXA,EAAA,MAEtBC,IACF,cAAcA,CAAkB,EACXA,EAAA,MAG3B,EACA,CAAE,KAAM,GAAM,UAAW,EAAK,CAAA,EAGhC,SAASQ,EAA4BW,EAAc,CAC5CA,GACDhH,EAAM,OAAO,kBAAoB,SAGhB8F,EAAA,MAAQmB,GAAiBD,CAAI,EAClDpB,EAAwB,YAAY,IAAM,CACpC,GAAAE,EAAqB,OAAS,EAAG,CACnC,cAAcF,CAAqB,EACnC,MACF,CACqBE,EAAA,SACpB,GAAI,EACT,CAEA,SAASY,EAAyBM,EAAc,CACzCA,GACDhH,EAAM,OAAO,kBAAoB,SAInB+F,EAAA,MAAQkB,GAAiBD,CAAI,EAC/CnB,EAAqB,YAAY,IAAM,CACjC,GAAAE,EAAkB,OAAS,EAAG,CAChC,cAAcF,CAAkB,EAChC,MACF,CACkBE,EAAA,SACjB,GAAI,EACT,CAEA,OAAAmB,GAAY,IAAM,CACZtB,GACF,cAAcA,CAAqB,EAEjCC,GACF,cAAcA,CAAkB,EAEVD,EAAA,KACHC,EAAA,IAAA,CACtB,UApOCsB,EAAA,EAAA9D,EAsBM,MAtBND,GAsBM,QArBJC,EAoBMC,GAAA,KAAAC,GAnBQoD,EAAQ,MAAbS,QADT/D,EAoBM,MAAA,CAlBH,IAAK+D,EAAE,MACR,MAAM,uCAAA,GAENvE,EAEUN,EAAA8C,CAAA,EAAA,CAFA,KAAM+B,EAAE,KAAA,aAChB,IAAgE,CAAhEjE,EAAgE,MAAhEiC,GAAgDnC,EAAAmE,EAAE,KAAK,EAAA,CAAA,CAAA,uBAEzDjE,EAWM,MAXNmC,GAWM,CAVO8B,EAAE,WAAb/D,EAAuC,MAAAkC,GAAAtC,EAAhBmE,EAAE,KAAK,EAAA,CAAA,YAC9BvE,EAQUN,EAAA8C,CAAA,EAAA,CARA,KAAM+B,EAAE,YAAA,aAChB,IAME,CALMA,EAAE,eADVhF,EAMEG,EAAA8E,EAAA,EAAA,OAJA,MAAM,QACL,MAAOD,EAAE,UACV,QAAQ,SACP,MAAOA,EAAE,UAAA,sQCDtB,MAAMhH,EAAOC,EAEPL,EAAQC,EAORqH,EAAS9F,EAAS,IACfxB,EAAM,OAAO,MACrB,EAED,SAASuH,EAAOC,EAA2BtG,EAAmBuG,EAAQ,KAAM,CACtE,GAAAD,IAAU,WAAatG,IAAU,GAAI,CACvCwG,GAAM,MAAM,qBAAqB,EAC3BD,EAAA,OAAO,MAAQzH,EAAM,OAAO,QAClC,MACF,CACAI,EAAK,SAAU,CAAE,MAAAoH,EAAO,MAAAtG,CAAO,CAAA,CACjC,eApCEiG,EAAA,EAAA9D,EAQM,MARND,GAQM,QAPJC,EAMEC,GAAA,KAAAC,GALgB+D,EAAM,MAAfE,QADTpF,EAMEuF,GAAA,CAJC,IAAKH,EAAM,UACX,MAAAA,EACA,MAAOvH,EAAA,OAAOuH,EAAM,SAAS,EAC7B,SAAM/E,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAGmF,GAASL,EAAOK,EAAK,UAAWA,EAAK,KAAK,mpBC0O1D,MAAMlD,EAAiBC,KACjB,CAAE,iBAAAC,CAAA,EAAqBC,GAAYH,CAAc,EAEjDmD,EAAoBC,KACpB,CAAE,QAAAxH,GAAYC,KAEdwH,EAASC,KACTC,EAA2BjH,EAAI,IAAI,EACnCkH,EAAuBlH,EAAI,IAAI,EAC/BmH,EAAenH,EAAI,IAAI,EACvBoH,EAAYpH,EAAI,EAAK,EACrB8D,EAAiB9D,EAAI,EAAK,EAE1BhB,EAAQC,EAOdoI,EAAQ,oBAAqBH,CAAoB,EACjDG,EAAQ,WAAY,IAAM,qBACpB,GAAA,GAACC,GAAA5G,EAAAqF,EAAO,OAAP,YAAArF,EAAa,UAAb,MAAA4G,EAAsB,YAAa,GAACC,GAAAC,EAAAzB,EAAO,OAAP,YAAAyB,EAAa,UAAb,MAAAD,EAAsB,OAAO,CACpEzD,EAAe,MAAQ,GACvB,MACF,CACAJ,EAAe,SAAS,CACtB,SAAQ+D,GAAAC,EAAA3B,EAAO,OAAP,YAAA2B,EAAa,UAAb,YAAAD,EAAsB,UAASE,GAAAC,EAAA7B,EAAO,OAAP,YAAA6B,EAAa,UAAb,YAAAD,EAAsB,WAC7D,QAAS,YACT,QAAS3I,EAAM,QAAA,CAChB,CAAA,CACF,EACOqI,EAAA,WAAYrI,EAAM,QAAQ,EAE5B,KAAA,CAAE,aAAA6I,GAAiBC,KACnB,CAAE,QAAAC,GAAYC,KAEdC,EAAsBjI,EAAI,EAAK,EAC/BkI,EAAoBlI,EAAI,EAAK,EAE7B+F,EAAS5F,GAAe,CAC5B,IAAK,kDACL,MAAO,CAAC,SAAUnB,EAAM,QAAQ,EAChC,KAAM,GACN,OAAQ,CACN,KAAMA,EAAM,QACd,EACA,UAAY4H,GAAS,CACfA,EAAK,UACFA,EAAA,UAAY,KAAK,MAAMA,EAAK,OAAO,EAAE,IAAKuB,IACtC,CACL,KAAMA,EACN,MAAO7I,EAAQ6I,CAAQ,EAAE,WACzB,MAAO7I,EAAQ6I,CAAQ,EAAE,SAAA,EAE5B,EAEL,EACA,UAAYvB,GAAS,CACnBO,EAAa,MAAQpB,EAAO,QAC5BqC,GAAoBrC,EAAQ,CAC1B,IAAKa,EACL,KAAA7F,GACA,OAAAgG,EACA,MAAAL,GACA,QAAAqB,EACA,YAAAM,EACA,YAAa3B,GAAM,MAAA,CACpB,CACH,CAAA,CACD,EAEDW,EAAQ,gBAAiB,IAAMtB,EAAO,OAAQ,CAAA,EAC9CsB,EAAQ,cAAe,IAAMtB,EAAO,OAAQ,CAAA,EAE5C,SAASsC,EAAYC,EAAcpI,EAAeqI,EAAW,IAAM,CAAA,EAAI,CACrEC,EAAaF,EAAMpI,CAAK,EACfqI,GACX,CAEM,MAAAE,EAAcjI,EAAS,IAAM,OACjC,IAAIkI,EAAQ,CAAC,CAAE,MAAOC,EAAG,SAAS,EAAG,MAAO,CAAE,KAAM,cAAe,CAAG,CAAA,EACtE,OAAAD,EAAM,KAAK,CACT,OAAOhI,EAAAqF,EAAO,OAAP,YAAArF,EAAa,QACpB,MAAO,CAAE,KAAM,aAAc,CAAA,CAC9B,EACMgI,CAAA,CACR,EAEKE,EAAkBpI,EAAS,IAAA,OAC/B,OAAAE,EAAAmG,EAAkB,SAAS,OAA3B,YAAAnG,EAAiC,IAAKyC,IAAuB,CAC3D,MAAOA,EAAE,YACT,MAAOA,EAAE,YACT,QAAS,IAAMqF,EAAa,SAAUrF,EAAE,WAAW,EACnD,KAAM,IACJ0F,GAAEC,GAAe,CACf,MAAO3F,EAAE,YAAA,CACV,CAAA,IACH,EAGE4F,EAAiCvI,EAAS,IAAM,CACpD,MAAMwI,EAAQ,CACZ,CACE,KAAM,UACN,MAAOL,EAAG,SAAS,EACnB,KAAMM,GACN,UAAW,IAAMpB,EAAa,KAChC,EACA,CACE,KAAM,WACN,MAAOc,EAAG,UAAU,EACpB,KAAMO,EACR,EACA,CACE,KAAM,QACN,MAAOP,EAAG,QAAQ,EAClB,KAAMjE,EACR,EACA,CACE,KAAM,UACN,MAAOiE,EAAG,UAAU,EACpB,KAAMQ,EACR,CAAA,EAGF,OAAIvF,EAAiB,OACnBoF,EAAM,KAAK,CACT,KAAM,OACN,MAAOL,EAAG,OAAO,EACjB,KAAMlE,EAAA,CACP,EAEIuE,CAAA,CACR,EAEK,CAAE,SAAAI,EAAU,YAAAC,EAAY,EAAIC,GAAoBP,CAAI,EAEpDQ,EAAa/I,EAAS,IAAM,CAChC,MAAMgJ,EAAazD,EAAO,KAAK,eAAe,IAAI,CAAC0D,EAAOC,KACjD,CACL,QAASD,EAAM,QACf,QAASA,EAAM,QACf,OAAQ,CAAE,KAAMA,EAAM,KAAK,MAAO,UAAWA,EAAM,KAAK,IAAK,EAC7D,GAAIA,EAAM,WACV,KAAM,QACN,IAAKA,EAAM,SACX,GAAIA,EAAM,GACV,IAAKA,EAAM,IACX,SAAUA,EAAM,oBAAsBA,EAAM,SAC5C,YAAaA,EAAM,YACnB,KAAMA,EAAM,KACZ,eAAgBA,EAAM,gBACtB,aAAcC,IAAQ,CAAA,EAEzB,EAEKC,EAAe5D,EAAO,KAAK,SAAS,IAAK6D,IACtC,CACL,KAAMA,EAAQ,KACd,KAAM,UACN,IAAKA,EAAQ,SACb,YAAaA,EAAQ,aACrB,UAAWA,EAAQ,KAAK,KACxB,SAAUA,EAAQ,SAClB,QAASA,EAAQ,QACjB,YAAaA,EAAQ,WAAA,EAExB,EAEKC,EAAe,CAAC,GAAG9D,EAAO,KAAK,QAAS,GAAGA,EAAO,KAAK,KAAK,EAAE,IACjE8C,IACQ,CACL,KAAM,UACN,IAAKA,EAAE,SACP,QAASA,EAAE,OAASA,EAAE,OAASF,EAAG,aAAa,EAC/C,SAAUE,EAAE,SACZ,KAAMA,EAAE,KAAK,KAAO,GAAA,EAExB,EAGIiB,EAAY/D,EAAO,KAAK,MAAM,IAAKhF,IAChC,CACL,GAAGA,EACH,KAAM,OACN,KAAMA,EAAK,KACX,IAAKA,EAAK,SACV,UAAWA,EAAK,KAChB,QAAS,GAAGA,EAAK,QAAU,SAAS,mBAClCA,EAAK,UAAY,SACnB,GACA,SAAUA,EAAK,SAAWA,EAAK,SAAW,IAAM,IAAA,EAEnD,EAEKgJ,EAAS,CACb,GAAGP,EACH,GAAGG,EACH,GAAGE,EACH,GAAGC,CACH,EAAA,KAAK,CAAC,EAAGE,IAAM,IAAI,KAAK,EAAE,QAAQ,EAAI,IAAI,KAAKA,EAAE,QAAQ,CAAC,EAEtDpD,EAAO,CAAA,EACb,IAAIqD,EAAI,EAED,KAAAA,EAAIF,EAAO,QAAQ,CAClB,MAAAG,EAAkBH,EAAOE,CAAC,EAC5B,GAAAC,EAAgB,OAAS,UAAW,CACtBA,EAAA,kBAAoB,CAACA,CAAe,EACpD,QAAS,EAAID,EAAI,EAAG,EAAIF,EAAO,OAAS,EAAG,IAAK,CACxC,MAAAI,EAAeJ,EAAO,CAAC,EAE7B,GAAII,GAAgBA,EAAa,OAASD,EAAgB,KACxCA,EAAA,kBAAkB,KAAKC,CAAY,MAC9C,CACLvD,EAAK,KAAKsD,CAAe,EACzBD,EAAI,EAAI,EACR,KACF,CACF,CAAA,MAEArD,EAAK,KAAKsD,CAAe,EAE3BD,GACF,CACO,OAAArD,CAAA,CACR,EAED,SAASwD,GAAiBC,EAAsB,CAC9C,OAAIA,IAAc,WACTd,EAAW,MAEbA,EAAW,MAAM,OAAQe,GAAaA,EAAS,OAASD,CAAS,CAC1E,CAES,SAAA7B,EAAa+B,EAAmBrK,EAAe,CACtDkH,EAAU,MAAQ,GACHjH,GAAA,CACb,IAAK,0BACL,OAAQ,CACN,QAAS,YACT,KAAMnB,EAAM,SACZ,UAAAuL,EACA,MAAArK,CACF,EACA,KAAM,GACN,UAAW,IAAM,CACfkH,EAAU,MAAQ,GAClBrB,EAAO,OAAO,EACRW,GAAA,QAAQiC,EAAG,gBAAgB,CAAC,CACpC,CAAA,CACD,CACH,CACA,OAAAxH,GAAU,IAAM,CACd,SAAS,MAAQnC,EAAM,QAAA,CACxB,EAEDkH,GAAY,IAAM,CAChB,SAAS,MAAQ,UAAA,CAClB,mFApfC,OAAAC,EAAA,EAAA9D,EAwLM,MAxLND,GAwLM,CAvLgBb,EAAAwE,CAAA,EAAO,UAA3B3E,EA4BeG,EAAAiJ,EAAA,EAAA,CAAA,IAAA,GAAA,CA3BF,gBACT,IAAoC,CAApC3I,EAAoCN,EAAAkJ,EAAA,EAAA,CAAtB,MAAOhC,EAAW,KAAA,EAAA,KAAA,EAAA,CAAA,OAAA,CAAA,CAAA,GAEvB,iBACT,IAqBM,CArBNtG,EAqBM,MArBNiC,GAqBM,CApBJvC,EAmBWN,EAAAmJ,EAAA,EAAA,CAnBA,QAAS9B,EAAe,OAAA,CACtB,QAAOjH,EAChB,CAeS,CAhBW,KAAAgJ,KAAI,CACxB9I,EAeSY,EAAA,CAfA,MAAOlB,EAAAwE,CAAA,EAAO,KAAK,MAAA,GACf,SACT,IAKE,OAAA,OALFlE,EAKEN,EAAAuH,EAAA,EAAA,CAJC,MAAK8B,IAAyBrJ,EAAAA,EAAAsF,CAAA,EAAkB,UAAUtF,KAAO,KAAK,MAAM,IAA9CA,YAAAA,EAA0E,oCAMlG,SACT,IAGE,CAHFM,EAGEa,EAAA,CAFC,KAAMiI,EAAI,aAAA,eACX,MAAM,yFAWdpJ,EAAAwE,CAAA,EAAO,MAFfI,IAAA9D,EA6BS,SA7BTiC,GA6BS,CAxBPnC,EAgBM,MAhBNoC,GAgBM,EAfOhD,EAAAA,EAAAwE,CAAA,EAAO,KAAK,YAAZxE,MAAAA,EAAuB,YAAlCc,EAOM,MAAAwI,GAAA,EANJ1E,EAAA,EAAA/E,EAKY0J,GALIvJ,EAAMwE,CAAA,EAAC,KAAK,UAAU,QAAM,EAAA,SAAA,KAAA,EAAA,KAAA,WAC1C,IAGE,CAHFlE,EAGEN,EAAAwJ,EAAA,EAAA,CAFC,QAASxJ,EAAAwE,CAAA,EAAO,KAAK,UACrB,uBAAOkC,EAAmB,MAAA,0CAIjC5F,EAMS,SAAA,OAJP,MAAM,0DACL,uBAAO4F,EAAmB,MAAA,GAAA,IAExB1G,EAAEoH,CAAA,EAAA,QAAA,CAAA,EAAA,CAAA,EAAA,GAITxG,EAKM,MALN6I,GAKM,CAHIzJ,EAAMwE,CAAA,EAAC,KAAK,oBADpB3E,EAGE6J,EAAA,OADC,QAAS1J,EAAAwE,CAAA,EAAO,KAAK,cAAA,8CAIjBxE,EAAAwE,CAAA,EAAO,MAAlBI,IAAA9D,EA0EM,MA1EN6I,GA0EM,CAzEJ/I,EAwEM,MAxENgJ,GAwEM,CAvEJhJ,EAsEM,MAtENiJ,GAsEM,CArEJvJ,EAmDON,EAAA8J,EAAA,EAAA,CAlDJ,WAAY9J,EAAQ6H,CAAA,EACpB,KAAML,EAAI,MACV,sBAAmBxH,EAAW8H,EAAA,EAC/B,MAAM,8EAAA,GAEK,YAAS1H,EAClB,CAuBM,CAxBgB,IAAA2J,KAAG,OAAA,OACdA,EAAI,OAAI,aAAnB,EAAAjJ,EAuBM,MAAAkJ,GAAA,CArBJ1J,EAIE2J,EAAA,CAHC,QAASjK,EAAAwE,CAAA,EAAO,KAAK,QACrB,SAAUxE,EAAAwE,CAAA,EAAO,KAAK,KACtB,eAAUtE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,IAAE4F,EAAoB,MAAC,eAAc,mCAI1C3F,EAAMwE,CAAA,EAAC,KAAK,qBADpB3E,EAIEqK,EAAA,OAFA,MAAM,6CACL,OAAQlK,EAAMwE,CAAA,EAAC,IAAA,+BAGlB5D,EAAkE,KAAlEuJ,GAAkEzJ,EAAjBV,EAAEoH,CAAA,EAAA,KAAA,CAAA,EAAA,CAAA,EACnD9G,EAA4C8J,GAAA,CAAvB,OAAQpK,EAAMwE,CAAA,EAAC,yBAEpC5D,EAAsE,KAAtEyJ,GAAsE3J,EAArBV,EAAEoH,CAAA,EAAA,SAAA,CAAA,EAAA,CAAA,EACnD9G,EAIEgK,GAAA,CAHC,OAAQtK,EAAMwE,CAAA,EAAC,KACf,SAAMtE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAA,CAAK,MAAA+E,GAAO,MAAAtG,EAAY,IAAAsI,EAAahC,GAAOtG,EAAK,GACxD,MAAM,wCAKVkB,EAgBEG,EAAAuK,EAAA,EAAA,eAdI,2BAAJ,IAAI7E,EACH,WAAYmD,GAAiBkB,EAAI,IAAI,EACrC,MAAOA,EAAI,MACX,iBAAe/J,EAAAA,EAAAwE,CAAA,EAAO,OAAPxE,YAAAA,EAAa,OAC5B,SAAME,EAAA,CAAA,IAAAA,EAAA,CAAA,OAAiDF,EAAAwE,CAAA,EAAO,QAAM,GAKpE,gBAAWtE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAsBsK,IAAC,CAA+C7E,EAAA,MAAC,aAAa6E,EAAC,CAAA,gHAQvG3K,EAgBEG,EAAAyK,EAAA,EAAA,CAfA,MAAM,wCACF,uBAAJ,IAAI9E,EACK,WAAA3F,EAAAwE,CAAA,EAAO,KAAP,sBAAAtE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,GAAAC,EAAAwE,CAAA,EAAO,KAAIzE,GACnB,UAAUC,EAAAA,EAAAwE,CAAA,EAAO,OAAPxE,YAAAA,EAAa,KACvB,YAAY,CAAAA,EAAAwE,CAAA,EAAO,KAAK,SAAS,EACjC,YAAW,CAAE,EACb,aAAY,CAAE,EACd,KAAKxE,EAAAA,EAAAwE,CAAA,EAAO,OAAPxE,YAAAA,EAAa,KAClB,SAAME,EAAA,CAAA,IAAAA,EAAA,CAAA,OAAyCF,EAAAwE,CAAA,EAAO,SAA0BxE,EAAQ6H,CAAA,IAAA,GAA4BnC,EAAA,MAAyB,wBAAsB,mEAYpK1F,EAAAwE,CAAA,EAAO,QADf,EAAA3E,EAYEG,EAAA0K,EAAA,EAAA,kBAVShE,EAAmB,2CAAnBA,EAAmB,MAAA3G,GAC3B,UAAWC,EAAAwE,CAAA,EAAO,KAAK,UACvB,QAAS9G,EAAQ,SACjB,MAAMsC,GAAAA,EAAAwE,CAAA,EAAO,OAAPxE,YAAAA,GAAa,YACpB,QAAQ,YACP,SAAME,EAAA,CAAA,IAAAA,EAAA,CAAA,OAA6BF,EAAAwE,CAAA,EAAO,QAAM,kEAMnDlE,EA8BSN,EAAA2K,EAAA,EAAA,YA9BQhE,EAAiB,6CAAjBA,EAAiB,MAAA5G,EAAA,GACrB,eACT,IAA2B,CAA3Ba,EAA2B,YAApBZ,EAAEoH,CAAA,EAAA,QAAA,CAAA,EAAA,CAAA,CAAA,GAEA,iBACT,IAOE,CAPF9G,EAOEN,EAAA4K,EAAA,EAAA,YANShF,EAAY,6CAAZA,EAAY,MAAA7F,GACpB,KAAM,OACP,KAAK,KACL,QAAQ,SACP,SAAU,GACV,MAAOC,EAAEoH,CAAA,EAAA,aAAA,oCAGH,UACT,IAYS,CAZT9G,EAYSY,EAAA,CAXP,QAAQ,QACP,UAAW0E,EAAY,MACvB,QAASC,EAAS,MAClB,QAAK3F,EAAA,EAAA,IAAAA,EAAA,EAAA,mBAA6D0F,EAAY,KAAA,EAAiBe,EAAiB,MAAA,EAAA,eAOjH,IAAmB,MAAhB3G,EAAEoH,CAAA,EAAA,SAAA,CAAA,EAAA,CAAA,CAAA,kCAEP9G,EAAoFY,EAAA,CAA5E,MAAM,OAAQ,yBAAOyF,EAAiB,MAAA,GAAA,aAAW,IAAiB,MAAd3G,EAAEoH,CAAA,EAAA,OAAA,CAAA,EAAA,CAAA,CAAA,kCAGlE9G,EAIE8C,GAAA,YAHSb,EAAc,6CAAdA,EAAc,MAAAxC,GACtB,MAAMC,IAAAA,GAAAA,EAAMwE,CAAA,EAAC,OAAPxE,YAAAA,GAAa,UAAbA,YAAAA,GAAsB,KAC5B,WAAUA,EAAMwE,CAAA,EAAC,MAAA"}