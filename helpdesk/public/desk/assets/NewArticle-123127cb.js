import{a as D}from"./Link-842a8a10.js";import{d as N,U as V,u as K,s as M,a as U,A as d,c as v,q as e,r as E,e as T,k as q,g as a,w as m,h as t,l as s,v as I,an as H,b2 as L,b6 as O,S as _}from"./index-b4c863a6.js";import{g as R}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-c8d975a4.js";import"./dayjs-95f8111d.js";import{e as j}from"./knowledgeBase-2d00b929.js";import{_ as z}from"./LayoutHeader-0efddba1.js";import{_ as F}from"./UserAvatar.vue_vue_type_script_setup_true_lang-e554c997.js";import{u as P}from"./onboarding-89cf30fe.js";import{u as W}from"./pageMeta-b63f711b.js";import{_ as G}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-c05e3797.js";import{T as J,_ as Q}from"./file-to-base64-e61fad39.js";import"./Avatar.vue_vue_type_script_setup_true_lang-89128cfb.js";import"./index-6b12b9aa.js";import"./index-3720151f.js";import"./Dropdown-f79f7542.js";import"./popper-0aa08b12.js";import"./chevron-left-d60af664.js";import"./chevron-right-cd59273c.js";import"./plus-3c348a65.js";const X={class:"flex flex-col flex-1"},Y={class:"pt-6 mx-auto w-full max-w-4xl px-5"},Z={class:"flex flex-col gap-3 rounded-lg border w-full p-4"},ee={class:"flex justify-between items-center mb-3"},te={class:"flex gap-1 items-center flex-1 mr-7 max-w-fit overflow-hidden"},oe={class:"flex gap-2"},re=["placeholder"],Se=N({__name:"NewArticle",props:{id:{type:String,required:!0}},setup(b){const x=V().getUser(),{$dialog:w}=R(),u=K(),y=M(),{updateOnboardingStep:A}=P("helpdesk"),{isManager:C}=U(),n=d(""),i=d(""),c=d(b.id||null),p=v(()=>y.query.title||"");function S(){j.submit({title:n.value,content:i.value,category:c.value},{onSuccess:o=>{_.success(e("Article created")),C&&A("first_article"),f(),u.push({name:"Article",params:{articleId:o.name}})},onError:o=>{_.error(o)}})}function B(){if(!n.value&&!i.value){u.push({name:"AgentKnowledgeBase"});return}w({title:e("Discard Article"),message:e("Are you sure you want to discard this article?"),actions:[{label:e("Confirm"),variant:"solid",onClick(o){u.push({name:"AgentKnowledgeBase"}),f(),o()}}]})}function f(){n.value="",i.value=""}const k=v(()=>{const o=[{label:e("Knowledge Base"),route:{name:"AgentKnowledgeBase"}}];return p.value&&o.push({label:p.value,route:{name:"AgentKnowledgeBase"}}),o.push({label:e("New Article")}),o});return W(()=>({title:e("New Article")})),(o,r)=>{const $=D,g=E("Button");return T(),q("div",X,[a(t(z),null,{"left-header":m(()=>[a(t(G),{items:k.value},null,8,["items"])]),"right-header":m(()=>[...r[4]||(r[4]=[])]),_:1}),s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[a(t(F),{name:t(x).name,expand:!0},null,8,["name"]),s("span",null,I(t(e)("in")),1),a($,{class:"form-control",doctype:"HD Article Category",placeholder:t(e)("Select Category"),modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=l=>c.value=l),pageLength:100,"hide-clear-button":!0},null,8,["placeholder","modelValue"])]),s("div",oe,[a(g,{label:t(e)("Discard"),onClick:B},null,8,["label"]),a(g,{label:t(e)("Create"),variant:"solid",onClick:S},null,8,["label"])])]),H(s("textarea",{class:"w-full resize-none border-0 text-3xl font-bold placeholder-ink-gray-3 p-0 pb-3 border-b border-gray-200 focus:ring-0 focus:border-gray-200","onUpdate:modelValue":r[1]||(r[1]=l=>n.value=l),placeholder:t(e)("Title"),rows:"1",wrap:"soft",maxlength:"140",autofocus:"",onInput:r[2]||(r[2]=l=>{const h=l.target;h.style.height=`${h.scrollHeight}px`})},null,40,re),[[L,n.value]]),a(t(Q),{content:i.value,onChange:r[3]||(r[3]=l=>i.value=l),placeholder:t(e)("Write your article here..."),"editor-class":"rounded-b-lg max-w-[unset] prose-sm h-[calc(100vh-340px)] sm:h-[calc(100vh-250px)] overflow-auto"},{bottom:m(()=>[a(t(J),{class:"-ml-1 overflow-x-auto w-full",buttons:t(O)},null,8,["buttons"])]),_:1},8,["content","placeholder"])])])])}}});export{Se as default};
//# sourceMappingURL=NewArticle-123127cb.js.map
