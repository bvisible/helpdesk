import{d as _,$ as B,z as d,Y as F,V as T,a3 as w,f as v,w as D,h as r,r as p,e as u,l as a,g as f,k,F as $,E as L,x as N}from"./index-3194ec9b.js";import"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-a9d0f8af.js";import"./dayjs-f66c5460.js";import"./LayoutHeader-3eb7ac7a.js";import{_ as R}from"./StarRating.vue_vue_type_script_setup_true_lang-0c43ad36.js";import{I as S}from"./symbols-7dbf6ecf.js";const U={class:"space-y-4 text-base text-gray-700"},E={class:"space-y-2"},H={key:0,class:"space-y-2"},I={class:"flex flex-wrap gap-2"},O={class:"space-y-2"},K=_({__name:"TicketFeedback",props:{open:{type:Boolean}},emits:["update:open"],setup(P,{emit:b}){const g=b,m=B(S),o=d(0),s=d(""),n=d(null),i=F({doctype:"HD Ticket Feedback Option",fields:["name","label"],pageLength:99999}),y=T({url:"frappe.client.set_value",debounce:300,makeParams:l=>({doctype:"HD Ticket",name:m.data.name,fieldname:l.fieldname,value:l.value}),onSuccess:()=>{g("update:open",!1),m.reload()}});return w(o,l=>{n.value=null,s.value="",i.update({filters:{rating:l,disabled:0}}),i.reload()}),(l,e)=>{const V=p("Button"),x=p("FormControl"),C=p("Dialog");return u(),v(C,{"model-value":l.open,options:{title:"Rate this ticket",actions:[{disabled:!n.value,label:"Submit",theme:"gray",variant:"solid",onClick:()=>r(y).submit({fieldname:{status:"Closed",feedback:n.value,feedback_extra:s.value}})}]},"onUpdate:modelValue":e[3]||(e[3]=()=>l.$emit("update:open",!l.open))},{"body-content":D(()=>{var c;return[a("div",U,[a("div",E,[e[4]||(e[4]=a("span",null," Select a rating ",-1)),e[5]||(e[5]=a("span",{class:"text-red-500"}," * ",-1)),f(r(R),{static:!1,rating:o.value,modelValue:o.value,"onUpdate:modelValue":[e[0]||(e[0]=t=>o.value=t),e[1]||(e[1]=t=>o.value=t)]},null,8,["rating","modelValue"])]),(c=r(i).data)!=null&&c.length?(u(),k("div",H,[e[6]||(e[6]=a("span",null," Pick an option ",-1)),e[7]||(e[7]=a("span",{class:"text-red-500"}," * ",-1)),a("div",I,[(u(!0),k($,null,L(r(i).data,t=>(u(),v(V,{key:t.name,label:t.label,theme:n.value===t.name?"blue":"gray",variant:"subtle",onClick:j=>n.value=t.name},null,8,["label","theme","onClick"]))),128))])])):N("",!0),a("div",O,[e[8]||(e[8]=a("span",null," Other ",-1)),f(x,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),type:"textarea",placeholder:"Tell us more"},null,8,["modelValue"])])])]}),_:1},8,["model-value","options"])}}});export{K as _};
//# sourceMappingURL=TicketFeedback.vue_vue_type_script_setup_true_lang-61cfd4e7.js.map
