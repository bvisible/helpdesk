import{d as Be,ay as Ne,A as b,a4 as ue,c as T,e as v,f as ve,w as R,C as ie,D as de,E as me,g as M,h as C,b4 as Ye,a8 as se,aF as xe,z as ne,ah as He,Q as Ie,l as B,a1 as F,k as h,v as V,y as Ce,F as Q,G as J,H as Fe,am as Ve,an as Le,ao as Ee}from"./index-b4c863a6.js";import{d as H,c as ze,m as Se,e as P,f as Te,h as Ae,i as Ke}from"./utils-4e66359c.js";const qe={class:"flex items-center justify-between p-2 pb-0 gap-1"},Ue={key:0},We={key:1},Ge={key:2},Qe={class:"flex items-center"},Je={class:"p-2"},Xe={key:0,role:"grid","aria-label":"Calendar dates"},Ze={class:"flex items-center text-xs font-medium uppercase text-ink-gray-4 mb-1"},je=["aria-selected","aria-label","onClick"],Oe={key:1,class:"grid grid-cols-3 gap-1",role:"grid","aria-label":"Select month"},Pe=["aria-selected","onClick"],ea={key:2,class:"grid grid-cols-3 gap-1",role:"grid","aria-label":"Select year"},aa=["aria-selected","onClick"],ta={key:0,class:"flex items-center justify-between gap-1 p-2 border-t"},la={class:"flex gap-1"},De="YYYY-MM-DD",Va=Be({__name:"DatePicker",props:{value:{default:""},modelValue:{default:""},placement:{default:"bottom-start"},format:{},variant:{default:"subtle"},readonly:{type:Boolean,default:!1},placeholder:{default:"Select date"},inputClass:{},allowCustom:{type:Boolean,default:!0},autoClose:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},label:{},clearable:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(N,{emit:$e}){const n=N,w=$e,{autoClose:ee}=Ne(n),o=b("date"),r=b(H().year()),f=b(H().month()),i=b(""),y=b(n.modelValue||n.value||"");function K(u){if(!u)return null;const c=String(u).trim();if(!c)return null;if(n.format){const x=H(c,n.format,!0);if(x.isValid())return x}const d=H(c);if(d.isValid())return d;const p=Ae(c);if(p){const x=H(p);if(x.isValid())return x}return null}function q(u){if(!u){if(n.clearable)i.value="";else{const d=P();r.value=d.year(),f.value=d.month(),i.value=d.format(De)}return}const c=K(u);if(!c){i.value="";return}r.value=c.year(),f.value=c.month(),i.value=c.format(De)}q(y.value);function U(){q(n.modelValue||n.value)}ue(()=>[n.modelValue,n.value],([u,c])=>{q(u||c)});const ae=T(()=>n.format?k(i.value,n.format):i.value);function k(u,c){const d=H(u);return d.isValid()?d.format(c):u}const g=b(ae.value),$=b(!1);ue(ae,u=>{$.value||(g.value=u)});function _(u,c=!0){c&&ee.value&&u&&u()}function W(){i.value&&(i.value="",w("update:modelValue",""),w("change",""),y.value="",g.value="")}function X(u=!1,c){const d=g.value.trim();if(!d){n.clearable?(W(),_(c,u)):(D(P()),_(c,u));return}const p=K(d);p&&(D(p),_(c,u))}const G=b(null);function te(u){var d;const c=u.relatedTarget;c&&((d=G.value)!=null&&d.contains(c))||(X(),$.value=!1)}function I(u){X(!0,u),$.value=!1}function ce(u,c){$.value=!0,u||c()}const Z=T(()=>ze(r.value,f.value,i.value));function D(u){const c=H(u);if(!c.isValid())return;const d=i.value;i.value=c.format(De),r.value=c.year(),f.value=c.month(),i.value!==y.value&&(w("update:modelValue",i.value),i.value!==d&&w("change",i.value),y.value=i.value),$.value||(g.value=n.format?k(i.value,n.format):i.value),o.value="date"}function L(u){f.value=u,o.value="date"}function he(u){r.value=u,o.value="month"}function re(){if(o.value==="date"){const u=Te(r.value,f.value).subtract(1,"month");r.value=u.year(),f.value=u.month()}else o.value==="month"?r.value-=1:r.value-=12}function j(){if(o.value==="date"){const u=Te(r.value,f.value).add(1,"month");r.value=u.year(),f.value=u.month()}else o.value==="month"?r.value+=1:r.value+=12}function le(u,c){D(u),ee.value&&c(),$.value=!1}function E(u=0,c){le(P().add(u,"day"),c)}function ye(u){E(0,u)}function oe(u){E(1,u)}function pe(u){W(),_(u),$.value=!1,o.value="date"}function ge(){o.value==="date"?o.value="month":o.value==="month"?o.value="year":o.value="date"}function we(){o.value="date",$.value&&(X(),$.value=!1)}const fe=T(()=>r.value-r.value%12),O=T(()=>Array.from({length:12},(u,c)=>fe.value+c));return(u,c)=>(v(),ve(C(Fe),{class:"inline-block",placement:N.placement,onOpen:U,onClose:we},{target:R(({togglePopover:d,isOpen:p})=>[ie(u.$slots,"target",de(me({togglePopover:d,isOpen:p,displayLabel:ae.value,inputValue:g.value})),()=>[M(C(Ye),{modelValue:g.value,"onUpdate:modelValue":c[0]||(c[0]=x=>g.value=x),type:"text",class:se(["cursor-text w-full",n.inputClass]),label:n.label,variant:n.variant,placeholder:n.placeholder,disabled:n.disabled,readonly:n.readonly||!n.allowCustom,onFocus:x=>ce(p,d),onClick:x=>ce(p,d),onBlur:te,onKeydown:xe(ne(x=>I(d),["prevent"]),["enter"])},He({suffix:R(()=>[ie(u.$slots,"suffix",de(me({togglePopover:d,isOpen:p,displayLabel:ae.value,inputValue:g.value})),()=>[M(Ie,{name:"chevron-down",class:"h-4 w-4 cursor-pointer",onMousedown:ne(d,["prevent"])},null,8,["onMousedown"])])]),_:2},[u.$slots.prefix?{name:"prefix",fn:R(()=>[ie(u.$slots,"prefix",de(me({togglePopover:d,isOpen:p,displayLabel:ae.value,inputValue:g.value})))]),key:"0"}:void 0]),1032,["modelValue","class","label","variant","placeholder","disabled","readonly","onFocus","onClick","onKeydown"])])]),body:R(({togglePopover:d})=>[B("div",{ref_key:"popoverContentRef",ref:G,class:"w-fit min-w-60 select-none text-base text-ink-gray-9 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 mt-2"},[B("div",qe,[M(C(F),{variant:"ghost",size:"sm",class:"text-sm font-medium text-ink-gray-7",onClick:ge},{default:R(()=>[o.value==="date"?(v(),h("span",Ue,V(C(Se)[f.value])+" "+V(r.value),1)):o.value==="month"?(v(),h("span",We,V(r.value),1)):(v(),h("span",Ge,V(fe.value)+" - "+V(fe.value+11),1))]),_:1}),B("div",Qe,[M(C(F),{variant:"ghost",icon:"chevron-left",class:"size-7",onClick:re}),N.clearable?Ce("",!0):(v(),ve(C(F),{key:0,variant:"ghost",class:"text-xs",label:"Today",onClick:()=>ye(d)},null,8,["onClick"])),M(C(F),{variant:"ghost",icon:"chevron-right",class:"size-7",onClick:j})])]),B("div",Je,[o.value==="date"?(v(),h("div",Xe,[B("div",Ze,[(v(),h(Q,null,J(["S","M","T","W","T","F","S"],p=>B("div",{key:p,class:"flex h-6 w-8 items-center justify-center"},V(p),1)),64))]),(v(!0),h(Q,null,J(Z.value,(p,x)=>(v(),h("div",{key:x,class:"flex",role:"row"},[(v(!0),h(Q,null,J(p,Y=>(v(),h("button",{type:"button",key:Y.key,class:se(["flex h-8 w-8 items-center justify-center rounded cursor-pointer text-sm focus:outline-none focus:ring-2 focus:ring-outline-gray-2",[Y.inMonth?"text-ink-gray-8":"text-ink-gray-3",Y.isToday?"font-extrabold text-ink-gray-9":"",Y.isSelected?"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":"hover:bg-surface-gray-2"]]),role:"gridcell","aria-selected":Y.isSelected?"true":"false","aria-label":Y.date.format("YYYY-MM-DD")+(Y.isToday?" (Today)":""),onClick:be=>le(Y.date,d)},V(Y.date.date()),11,je))),128))]))),128))])):o.value==="month"?(v(),h("div",Oe,[(v(!0),h(Q,null,J(C(Se),(p,x)=>(v(),h("button",{type:"button",key:p,class:se(["py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6",{"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":x===f.value}]),"aria-selected":x===f.value?"true":"false",onClick:Y=>L(x)},V(p.slice(0,3)),11,Pe))),128))])):(v(),h("div",ea,[(v(!0),h(Q,null,J(O.value,p=>(v(),h("button",{type:"button",key:p,class:se(["py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6",{"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":p===r.value}]),"aria-selected":p===r.value?"true":"false",onClick:x=>he(p)},V(p),11,aa))),128))]))]),n.clearable?(v(),h("div",ta,[B("div",la,[M(C(F),{variant:"outline",label:"Today",onClick:()=>ye(d)},null,8,["onClick"]),M(C(F),{variant:"outline",label:"Tomorrow",onClick:()=>oe(d)},null,8,["onClick"])]),i.value?(v(),ve(C(F),{key:0,size:"sm",variant:"outline",label:"Clear",onClick:()=>pe(d)},null,8,["onClick"])):Ce("",!0)])):Ce("",!0)],512)]),_:3},8,["placement"]))}}),na=["aria-activedescendant"],ua=["data-value","data-index","onClick","onMouseenter","id","aria-selected"],sa={class:"truncate"},ra=Be({__name:"TimePicker",props:{value:{default:""},modelValue:{default:""},interval:{default:15},options:{default:()=>[]},placement:{default:"bottom-start"},placeholder:{default:"Select time"},variant:{default:"subtle"},allowCustom:{type:Boolean,default:!0},autoClose:{type:Boolean,default:!0},use12Hour:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},scrollMode:{default:"center"},minTime:{default:""},maxTime:{default:""}},emits:["update:modelValue","change","input-invalid","invalid-change","open","close"],setup(N,{emit:$e}){const n=N,w=$e,ee=b(null),o=b(!1),r=b(!1),f=b(-1),i=b(!1),y=b(!1);let K=!1,q=!1;const U=b(null),ae=n.modelValue||n.value||"",k=b(ae),g=b("");g.value=Z(k.value);const $=Math.random().toString(36).slice(2,9),_=T(()=>f.value>-1?W(f.value):void 0);function W(e){return`tp-${$}-${e}`}function X(e){if(!e||!/^\d{2}:\d{2}(:\d{2})?$/.test(e))return null;const[a,t]=e.split(":").map(l=>parseInt(l));return a>23||t>59?null:a*60+t}const G=T(()=>X(n.minTime)),te=T(()=>X(n.maxTime)),I=T(()=>{var a;if((a=n.options)!=null&&a.length)return n.options.map(t=>{const l=ce(t.value);return{value:l,label:t.label||Z(l)}});const e=[];for(let t=0;t<1440;t+=n.interval){if(G.value!=null&&t<G.value||te.value!=null&&t>te.value)continue;const l=Math.floor(t/60).toString().padStart(2,"0"),s=(t%60).toString().padStart(2,"0"),m=`${l}:${s}`;e.push({value:m,label:Z(m)})}return e});ue(()=>[n.modelValue,n.value],([e,a])=>{const t=e||a||"";t&&t!==k.value?(k.value=ce(t),g.value=Z(k.value)):t||(k.value="",g.value="")});function ce(e){if(!e)return"";if(/^\d{2}:\d{2}$/.test(e)||/^\d{2}:\d{2}:\d{2}$/.test(e))return e;const a=D(e);return a.valid?a.ss?`${a.hh24}:${a.mm}:${a.ss}`:`${a.hh24}:${a.mm}`:""}function Z(e){if(!e)return"";const a=e.split(":"),t=parseInt(a[0]),l=parseInt(a[1]),s=a[2],m=`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}${s?`:${s}`:""}`;if(!n.use12Hour)return m;const S=t<12;return`${t%12===0?12:t%12}:${l.toString().padStart(2,"0")}${s?`:${s}`:""} ${S?"am":"pm"}`}function D(e){if(!e)return{valid:!1};let a=e.trim().toLowerCase();a=a.replace(/\./g,""),a=a.replace(/(\d)(am|pm)$/,"$1 $2");const t=/^(\d{1,2})(?::(\d{1,2}))?(?::(\d{1,2}))?\s*([ap]m)?$/,l=a.match(t);if(!l)return{valid:!1};let[,s,m,S,z]=l,A=parseInt(s);if(isNaN(A)||A<0||A>23)return{valid:!1};if(S&&!m)return{valid:!1};let _e=m!=null&&m!==""?parseInt(m):0;if(isNaN(_e)||_e<0||_e>59)return{valid:!1};let ke;if(S&&(ke=parseInt(S),isNaN(ke)||ke<0||ke>59))return{valid:!1};if(z){if(A<1||A>12)return{valid:!1};A===12&&z==="am"?A=0:A<12&&z==="pm"&&(A+=12)}return{valid:!0,hh24:A.toString().padStart(2,"0"),mm:_e.toString().padStart(2,"0"),ss:ke!=null?ke.toString().padStart(2,"0"):void 0,total:A*60+_e}}function L(e,a){if(!a.length)return-1;const t=a.map(S=>{const[z,A]=S.value.split(":").map(Number);return z*60+A});let l=0,s=t.length-1;for(;l<=s;){const S=l+s>>1,z=t[S];if(z===e)return S;z<e?l=S+1:s=S-1}const m=[];return l<t.length&&m.push(l),l-1>=0&&m.push(l-1),m.length?m.sort((S,z)=>Math.abs(t[S]-e)-Math.abs(t[z]-e))[0]:-1}function he(e){return G.value!=null&&e<G.value||te.value!=null&&e>te.value}function re(e,a=!1){const t=k.value;k.value=e,g.value=Z(e),(a||!o.value)&&w("update:modelValue",e),a&&e!==t&&w("change",e),be(!1)}function j(){const e=g.value,a=D(e);if(!e){const l=k.value;k.value="",o.value||w("update:modelValue",""),l&&l!==""&&w("change",""),be(!1);return}if(!a.valid||he(a.total)){w("input-invalid",e),be(!0);return}const t=a.ss?`${a.hh24}:${a.mm}:${a.ss}`:`${a.hh24}:${a.mm}`;if(!n.allowCustom&&!I.value.some(l=>{const s=t.length===8?t.slice(0,5):t;return l.value===s})){const l=L(a.total,I.value);if(l>-1){const s=I.value[l].value,m=t.length===8&&s.length===5?`${s}${t.slice(5)}`:s;re(m,!0);return}}re(t,!0)}function le(e,a=!1){const t=k.value;re(e,!0),a&&t===k.value&&w("change",k.value),n.autoClose&&(r.value=!1)}const E=T(()=>{const e=I.value;if(!e.length)return{selected:null,nearest:null};const a=D(g.value),t=y.value&&a.valid?a.ss?`${a.hh24}:${a.mm}:${a.ss}`:`${a.hh24}:${a.mm}`:k.value||null;if(!t)return{selected:null,nearest:null};const l=t&&t.length===8?t.slice(0,5):t,s=e.find(z=>z.value===l)||null;if(s)return{selected:s,nearest:null};const m=D(t);if(!m.valid)return{selected:null,nearest:null};const S=L(m.total,e);return{selected:null,nearest:S>-1?e[S]:null}});function ye(e,a){if(a===f.value)return"bg-surface-gray-3 text-ink-gray-8";const{selected:t,nearest:l}=E.value;return y.value&&!t?l&&l.value===e.value?"text-ink-gray-7 italic bg-surface-gray-2":"text-ink-gray-6 hover:bg-surface-gray-2 hover:text-ink-gray-8":t&&t.value===e.value?"bg-surface-gray-3 text-ink-gray-8":l&&l.value===e.value?"text-ink-gray-7 italic bg-surface-gray-2":"text-ink-gray-6 hover:bg-surface-gray-2 hover:text-ink-gray-8"}ue(()=>I.value,()=>oe());function oe(){Ve(()=>{if(!ee.value||!r.value)return;let e=null;if(f.value>-1)e=ee.value.querySelector(`[data-index="${f.value}"]`);else{const{selected:a,nearest:t}=E.value,l=a||t;l&&(e=ee.value.querySelector(`[data-value="${l.value}"]`))}e&&e.scrollIntoView({block:n.scrollMode==="center"?"center":n.scrollMode==="start"?"start":"nearest"})})}ue(r,e=>{e?(w("open"),pe(),oe()):w("close")}),ue(()=>g.value,()=>{K||(r.value&&oe(),y.value=!0,f.value=-1)});function pe(){const{selected:e,nearest:a}=E.value,t=e||a;if(!t){f.value=-1;return}const l=I.value.findIndex(s=>s.value===t.value);f.value=l}function ge(e){const a=I.value;if(!a.length)return;f.value===-1?pe():f.value=(f.value+e+a.length)%a.length;const t=a[f.value];if(t){K=!0;const l=k.value.length===8&&t.value.length===5?`${t.value}${k.value.slice(5)}`:t.value;re(l,!1),Ve(()=>{K=!1})}y.value=!1,oe()}function we(e,a){a?ge(1):e()}function fe(e,a){a?ge(-1):e()}function O(){if(!r.value){j(),x();return}const e=D(g.value),a=e.valid?e.ss?`${e.hh24}:${e.mm}:${e.ss}`:`${e.hh24}:${e.mm}`:null,t=a?I.value.some(l=>{const s=a.length===8?a.slice(0,5):a;return l.value===s}):!1;if(e.valid&&(!t||y.value)){j(),n.autoClose&&(r.value=!1),x();return}if(f.value>-1){const l=I.value[f.value];l&&le(l.value,!0)}else j(),n.autoClose&&(r.value=!1);x()}function u(e,a){e||a(),n.allowCustom&&p()}function c(){o.value=!0,n.allowCustom&&!i.value&&p()}function d(){if(r.value){o.value=!1;return}j(),o.value=!1}function p(){Ve(()=>{var a,t;const e=((a=U.value)==null?void 0:a.el)||U.value;if(e&&e.querySelector){const l=e.querySelector("input")||e;(t=l==null?void 0:l.select)==null||t.call(l)}else e!=null&&e.select&&e.select();i.value=!0})}function x(){Ve(()=>{var a,t;const e=((a=U.value)==null?void 0:a.el)||U.value;if(e&&e.querySelector){const l=e.querySelector("input")||e;(t=l==null?void 0:l.blur)==null||t.call(l)}else e!=null&&e.blur&&e.blur();o.value=!1})}function Y(){r.value&&(r.value=!1),x()}function be(e){q!==e&&(q=e,w("invalid-change",e))}return(e,a)=>(v(),ve(Fe,{show:r.value,"onUpdate:show":a[1]||(a[1]=t=>r.value=t),transition:"default",placement:N.placement},{target:R(({togglePopover:t,isOpen:l})=>[M(Ye,{ref_key:"inputRef",ref:U,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=s=>g.value=s),variant:N.variant,type:"text",class:"text-sm w-full cursor-text",placeholder:N.placeholder,disabled:N.disabled,readonly:!n.allowCustom,onFocus:c,onClick:s=>u(l,t),onKeydown:[xe(ne(O,["prevent"]),["enter"]),xe(ne(s=>we(t,l),["prevent"]),["down"]),xe(ne(s=>fe(t,l),["prevent"]),["up"]),xe(ne(Y,["prevent"]),["esc"])],onBlur:d},He({suffix:R(()=>[ie(e.$slots,"suffix",de(me({togglePopover:t,isOpen:l})),()=>[M(Ie,{name:"chevron-down",class:"h-4 w-4 cursor-pointer",onMousedown:ne(t,["prevent"])},null,8,["onMousedown"])])]),_:2},[e.$slots.prefix?{name:"prefix",fn:R(()=>[ie(e.$slots,"prefix")]),key:"0"}:void 0]),1032,["modelValue","variant","placeholder","disabled","readonly","onClick","onKeydown"])]),body:R(({isOpen:t})=>[Le(B("div",{ref_key:"panelRef",ref:ee,class:"mt-2 max-h-48 w-44 overflow-y-auto rounded-lg bg-surface-modal p-1 text-base shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",role:"listbox","aria-activedescendant":_.value},[(v(!0),h(Q,null,J(I.value,(l,s)=>(v(),h("button",{key:l.value,"data-value":l.value,"data-index":s,type:"button",class:se(["group flex h-7 w-full items-center rounded px-2 text-left",ye(l,s)]),onClick:m=>le(l.value),onMouseenter:m=>f.value=s,role:"option",id:W(s),"aria-selected":k.value===l.value},[B("span",sa,V(l.label),1)],42,ua))),128))],8,na),[[Ee,t]])]),_:3},8,["show","placement"]))}}),oa={class:"flex items-center justify-between p-2 pb-0 gap-1"},ia={key:0},ca={key:1},fa={key:2},va={class:"flex items-center"},da={class:"p-2"},ma={key:0,role:"grid","aria-label":"Calendar dates"},ha={class:"flex items-center text-xs font-medium uppercase text-ink-gray-4 mb-1"},ya=["aria-selected","aria-label","disabled","onClick"],pa={key:1,class:"grid grid-cols-3 gap-1",role:"grid","aria-label":"Select month"},ga=["aria-selected","onClick"],ba={key:2,class:"grid grid-cols-3 gap-1",role:"grid","aria-label":"Select year"},ka=["aria-selected","onClick"],xa={class:"flex flex-col gap-2 p-2 pt-0"},Ca={key:0,class:"flex items-center justify-between gap-1 p-2 border-t"},$a={class:"flex gap-1"},Me="YYYY-MM-DD",Re="YYYY-MM-DD h:mm a",Sa=Be({__name:"DateTimePicker",props:{value:{default:""},modelValue:{default:""},placement:{default:"bottom-start"},format:{},variant:{default:"subtle"},readonly:{type:Boolean,default:!1},placeholder:{default:"Select date & time"},inputClass:{},allowCustom:{type:Boolean,default:!0},autoClose:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},label:{},clearable:{type:Boolean,default:!0},minDateTime:{},maxDateTime:{},allowCustomTime:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(N,{emit:$e}){const n=N,w=$e,{autoClose:ee}=Ne(n),o=b("date"),r=b(H().year()),f=b(H().month()),i=b(""),y=b(""),K=b(n.modelValue||n.value||"");function q(e){if(!e)return null;const a=String(e).trim();if(!a)return null;if(n.format){const s=H(a,n.format,!0);if(s.isValid())return s}const t=P(a);if(t.isValid())return t;const l=Ae(a);if(l){const s=P(l);if(s.isValid())return s}return null}function U(e){if(!e){if(n.clearable)i.value="",y.value="";else{const t=P();r.value=t.year(),f.value=t.month(),i.value=t.format(Me),y.value=t.format("HH:mm:ss")}return}const a=q(e);if(!a){i.value="",y.value="";return}r.value=a.year(),f.value=a.month(),i.value=a.format(Me),y.value=a.format("HH:mm:ss")}U(K.value);function ae(){U(n.modelValue||n.value)}ue(()=>[n.modelValue,n.value],([e,a])=>{U(e||a)});const k=T(()=>{if(!i.value)return"";const e=`${i.value} ${y.value||"00:00:00"}`,a=H(e);return a.isValid()?a.format(Re):""}),g=T(()=>k.value?n.format?H(k.value).format(n.format):k.value:""),$=b(g.value),_=b(!1);ue(g,e=>{_.value||($.value=e)});function W(e,a=!0){a&&ee.value&&e&&e()}function X(){!i.value&&!y.value||(i.value="",y.value="",w("update:modelValue",""),w("change",""),K.value="",$.value="")}function G(e=!1,a){const t=$.value.trim();if(!t){if(n.clearable)X(),W(a,e);else{const s=P();E(s),y.value=s.format("HH:mm:ss"),O(),W(a,e)}return}const l=q(t);l&&(E(l),y.value=l.format("HH:mm:ss"),O(),W(a,e))}const te=b(null);function I(e){var t;const a=e.relatedTarget;a&&((t=te.value)!=null&&t.contains(a))||(G(),_.value=!1)}function ce(e){G(!0,e),_.value=!1}function Z(e,a){_.value=!0,e||a()}const D=T(()=>n.minDateTime?q(n.minDateTime):null),L=T(()=>n.maxDateTime?q(n.maxDateTime):null);function he(e){return!!(D.value&&e.endOf("day").isBefore(D.value)||L.value&&e.startOf("day").isAfter(L.value))}const re=T(()=>ze(r.value,f.value,i.value).map(a=>a.map(t=>({...t,disabled:he(t.date)})))),j=T(()=>!D.value||!i.value?"":H(i.value).isSame(D.value,"day")?D.value.format("HH:mm:ss"):""),le=T(()=>!L.value||!i.value?"":H(i.value).isSame(L.value,"day")?L.value.format("HH:mm:ss"):"");ue([j,le,y,i],()=>{if(!i.value||!y.value)return;const e=H(`${i.value} ${y.value}`);D.value&&e.isBefore(D.value)&&(y.value=j.value||y.value),L.value&&e.isAfter(L.value)&&(y.value=le.value||y.value)});function E(e){const a=H(e);a.isValid()&&(he(a)||(i.value=a.format(Me),r.value=a.year(),f.value=a.month()))}function ye(e){f.value=e,o.value="date"}function oe(e){r.value=e,o.value="month"}function pe(){if(o.value==="date"){const e=Te(r.value,f.value).subtract(1,"month");r.value=e.year(),f.value=e.month()}else o.value==="month"?r.value-=1:r.value-=12}function ge(){if(o.value==="date"){const e=Te(r.value,f.value).add(1,"month");r.value=e.year(),f.value=e.month()}else o.value==="month"?r.value+=1:r.value+=12}function we(e,a){E(e),O(!0,a),_.value=!1,o.value="date"}function fe(e){y.value=e,_.value=!1,i.value&&O()}function O(e=!1,a){if(!i.value){X();return}const t=k.value,l=Ke(t).format(Re);l!==K.value&&(w("update:modelValue",l),w("change",l),K.value=l),_.value||($.value=g.value),W(a,e)}function u(e){const a=P();E(a),y.value=a.format("HH:mm:ss"),O(!0,e),_.value=!1}function c(){const e=P().add(1,"day");E(e),y.value||(y.value=P().format("HH:mm:ss")),O(),_.value=!1}function d(e){X(),W(e),_.value=!1,o.value="date"}function p(){o.value==="date"?o.value="month":o.value==="month"?o.value="year":o.value="date"}function x(){o.value="date",_.value&&(G(),_.value=!1)}const Y=T(()=>r.value-r.value%12),be=T(()=>Array.from({length:12},(e,a)=>Y.value+a));return(e,a)=>(v(),ve(C(Fe),{class:"inline-block",placement:N.placement,onOpen:ae,onClose:x},{target:R(({togglePopover:t,isOpen:l})=>[ie(e.$slots,"target",de(me({togglePopover:t,isOpen:l,displayLabel:g.value,inputValue:$.value})),()=>[M(C(Ye),{modelValue:$.value,"onUpdate:modelValue":a[0]||(a[0]=s=>$.value=s),type:"text",class:se(["cursor-text w-full",n.inputClass]),label:n.label,variant:n.variant,placeholder:n.placeholder||"Select date & time",disabled:n.disabled,readonly:n.readonly||!n.allowCustom,onFocus:s=>Z(l,t),onClick:s=>Z(l,t),onBlur:I,onKeydown:xe(ne(s=>ce(t),["prevent"]),["enter"])},He({suffix:R(()=>[ie(e.$slots,"suffix",de(me({togglePopover:t,isOpen:l,displayLabel:g.value,inputValue:$.value})),()=>[M(Ie,{name:"chevron-down",class:"h-4 w-4 cursor-pointer",onMousedown:ne(t,["prevent"])},null,8,["onMousedown"])])]),_:2},[e.$slots.prefix?{name:"prefix",fn:R(()=>[ie(e.$slots,"prefix",de(me({togglePopover:t,isOpen:l,displayLabel:g.value,inputValue:$.value})))]),key:"0"}:void 0]),1032,["modelValue","class","label","variant","placeholder","disabled","readonly","onFocus","onClick","onKeydown"])])]),body:R(({togglePopover:t})=>[B("div",{ref_key:"popoverContentRef",ref:te,class:"w-fit min-w-60 select-none text-base text-ink-gray-9 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 mt-2"},[B("div",oa,[M(C(F),{variant:"ghost",size:"sm",class:"text-sm font-medium text-ink-gray-7",onClick:p},{default:R(()=>[o.value==="date"?(v(),h("span",ia,V(C(Se)[f.value])+" "+V(r.value),1)):o.value==="month"?(v(),h("span",ca,V(r.value),1)):(v(),h("span",fa,V(Y.value)+" - "+V(Y.value+11),1))]),_:1}),B("div",va,[M(C(F),{variant:"ghost",icon:"chevron-left",class:"size-7",onClick:pe}),N.clearable?Ce("",!0):(v(),ve(C(F),{key:0,variant:"ghost",class:"text-xs",label:"Now",onClick:()=>u(t)},null,8,["onClick"])),M(C(F),{variant:"ghost",icon:"chevron-right",class:"size-7",onClick:ge})])]),B("div",da,[o.value==="date"?(v(),h("div",ma,[B("div",ha,[(v(),h(Q,null,J(["S","M","T","W","T","F","S"],l=>B("div",{key:l,class:"flex h-6 w-8 items-center justify-center"},V(l),1)),64))]),(v(!0),h(Q,null,J(re.value,(l,s)=>(v(),h("div",{key:s,class:"flex",role:"row"},[(v(!0),h(Q,null,J(l,m=>(v(),h("button",{type:"button",key:m.key,class:se(["flex h-8 w-8 items-center justify-center rounded cursor-pointer text-sm focus:outline-none focus:ring-2 focus:ring-outline-gray-2",[m.inMonth?"text-ink-gray-8":"text-ink-gray-3",m.isToday?"font-extrabold text-ink-gray-9":"",m.disabled?"opacity-30 cursor-not-allowed hover:bg-transparent":m.isSelected?"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":"hover:bg-surface-gray-2"]]),role:"gridcell","aria-selected":m.isSelected?"true":"false","aria-label":m.date.format("YYYY-MM-DD")+(m.isToday?" (Today)":""),disabled:m.disabled,onClick:S=>!m.disabled&&we(m.date,t)},V(m.date.date()),11,ya))),128))]))),128))])):o.value==="month"?(v(),h("div",pa,[(v(!0),h(Q,null,J(C(Se),(l,s)=>(v(),h("button",{type:"button",key:l,class:se(["py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6",{"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":s===f.value}]),"aria-selected":s===f.value?"true":"false",onClick:m=>ye(s)},V(l.slice(0,3)),11,ga))),128))])):(v(),h("div",ba,[(v(!0),h(Q,null,J(be.value,l=>(v(),h("button",{type:"button",key:l,class:se(["py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6",{"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":l===r.value}]),"aria-selected":l===r.value?"true":"false",onClick:s=>oe(l)},V(l),11,ka))),128))]))]),B("div",xa,[M(ra,{value:y.value,allowCustom:n.allowCustomTime,placement:"bottom-start",placeholder:"Select time",minTime:j.value,maxTime:le.value,onChange:fe},null,8,["value","allowCustom","minTime","maxTime"])]),n.clearable?(v(),h("div",Ca,[B("div",$a,[M(C(F),{variant:"outline",label:"Now",onClick:()=>u(t)},null,8,["onClick"]),M(C(F),{variant:"outline",label:"Tomorrow",onClick:a[1]||(a[1]=()=>c())})]),i.value?(v(),ve(C(F),{key:0,size:"sm",variant:"outline",label:"Clear",onClick:()=>d(t)},null,8,["onClick"])):Ce("",!0)])):Ce("",!0)],512)]),_:3},8,["placement"]))}});export{Sa as _,Va as a};
//# sourceMappingURL=DateTimePicker.vue_vue_type_script_setup_true_lang-a14f638d.js.map
