{"version":3,"file":"CallLogModal.vue_vue_type_script_setup_true_lang-9a8921a1.js","sources":["../../../../desk/src/components/icons/CalendarIcon.vue","../../../../desk/src/components/icons/DurationIcon.vue","../../../../desk/src/pages/call-logs/utils.ts","../../../../desk/src/components/icons/ArrowUpRightIcon.vue","../../../../desk/src/components/icons/ContactsIcon.vue","../../../../desk/src/components/icons/CheckCircleIcon.vue","../../../../desk/src/pages/call-logs/CallLogDetailModal.vue","../../../../desk/src/pages/call-logs/CallLogModal.vue"],"sourcesContent":["<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M4.5 1C4.77614 1 5 1.22386 5 1.5V2.5L5 2.50056C5.15613 2.5 5.32244 2.5 5.5 2.5H10.5C10.6776 2.5 10.8439 2.5 11 2.50056C11 2.50037 11 2.50019 11 2.5V1.5C11 1.22386 11.2239 1 11.5 1C11.7761 1 12 1.22386 12 1.5V2.5C12 2.50803 11.9998 2.51602 11.9994 2.52395C12.49 2.55387 12.838 2.62116 13.135 2.77248C13.6054 3.01217 13.9878 3.39462 14.2275 3.86502C14.5 4.3998 14.5 5.09987 14.5 6.5V10.5C14.5 11.9001 14.5 12.6002 14.2275 13.135C13.9878 13.6054 13.6054 13.9878 13.135 14.2275C12.6002 14.5 11.9001 14.5 10.5 14.5H5.5C4.09987 14.5 3.3998 14.5 2.86502 14.2275C2.39462 13.9878 2.01217 13.6054 1.77248 13.135C1.5 12.6002 1.5 11.9001 1.5 10.5V6.5C1.5 5.09987 1.5 4.3998 1.77248 3.86502C2.01217 3.39462 2.39462 3.01217 2.86502 2.77248C3.16202 2.62116 3.51 2.55387 4.00056 2.52395C4.00019 2.51602 4 2.50803 4 2.5V1.5C4 1.22386 4.22386 1 4.5 1ZM5.5 3.5H10.5C11.2166 3.5 11.6938 3.50078 12.0606 3.53074C12.4156 3.55975 12.5781 3.61105 12.681 3.66349C12.9632 3.8073 13.1927 4.03677 13.3365 4.31901C13.389 4.42194 13.4403 4.5844 13.4693 4.93944C13.4916 5.21337 13.4977 5.54901 13.4994 6H2.50061C2.50226 5.54901 2.50836 5.21337 2.53074 4.93944C2.55975 4.5844 2.61105 4.42194 2.66349 4.31901C2.8073 4.03677 3.03677 3.8073 3.31901 3.66349C3.42194 3.61105 3.5844 3.55975 3.93944 3.53074C4.30615 3.50078 4.78343 3.5 5.5 3.5ZM2.5 7V10.5C2.5 11.2166 2.50078 11.6939 2.53074 12.0606C2.55975 12.4156 2.61105 12.5781 2.66349 12.681C2.8073 12.9632 3.03677 13.1927 3.31901 13.3365C3.42194 13.389 3.5844 13.4403 3.93944 13.4693C4.30615 13.4992 4.78343 13.5 5.5 13.5H10.5C11.2166 13.5 11.6938 13.4992 12.0606 13.4693C12.4156 13.4403 12.5781 13.389 12.681 13.3365C12.9632 13.1927 13.1927 12.9632 13.3365 12.681C13.389 12.5781 13.4403 12.4156 13.4693 12.0606C13.4992 11.6939 13.5 11.2166 13.5 10.5V7H2.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"12\"\n    height=\"12\"\n    viewBox=\"0 0 12 12\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_4750_5685)\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M10.4375 6C10.4375 8.45076 8.45076 10.4375 6 10.4375C3.54924 10.4375 1.5625 8.45076 1.5625 6C1.5625 3.54924 3.54924 1.5625 6 1.5625C8.45076 1.5625 10.4375 3.54924 10.4375 6ZM11.4375 6C11.4375 9.00305 9.00305 11.4375 6 11.4375C2.99695 11.4375 0.5625 9.00305 0.5625 6C0.5625 2.99695 2.99695 0.5625 6 0.5625C9.00305 0.5625 11.4375 2.99695 11.4375 6ZM9.00005 5.50004C9.27619 5.50004 9.50004 5.72391 9.50004 6.00005C9.50004 6.27619 9.27618 6.50004 9.00003 6.50004L6.25001 6.5C5.8358 6.49999 5.50003 6.16421 5.50002 5.75L5.5 3C5.5 2.72386 5.72385 2.5 6 2.5C6.27614 2.5 6.5 2.72385 6.5 3L6.50002 5.5L9.00005 5.50004Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_4750_5685\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n","export const statusColorMap = {\n  Completed: \"green\",\n  Busy: \"orange\",\n  Failed: \"red\",\n  Initiated: \"gray\",\n  Queued: \"gray\",\n  Canceled: \"gray\",\n  Ringing: \"gray\",\n  \"No Answer\": \"red\",\n  \"In Progress\": \"blue\",\n};\n\nexport const statusLabelMap = {\n  Completed: \"Completed\",\n  Initiated: \"Initiated\",\n  Busy: \"Declined\",\n  Failed: \"Failed\",\n  Queued: \"Queued\",\n  Canceled: \"Canceled\",\n  Ringing: \"Ringing\",\n  \"No Answer\": \"Missed Call\",\n  \"In Progress\": \"In Progress\",\n};\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M11.9998 3.5H4.92871C4.65257 3.5 4.42871 3.72386 4.42871 4C4.42871 4.27614 4.65257 4.5 4.92871 4.5H10.7929L3.64645 11.6464C3.45118 11.8417 3.45118 12.1583 3.64645 12.3536C3.84171 12.5488 4.15829 12.5488 4.35355 12.3536L11.4998 5.20733V11.0711C11.4998 11.3472 11.7236 11.5711 11.9998 11.5711C12.2759 11.5711 12.4998 11.3472 12.4998 11.0711V4.0149C12.5037 3.88202 12.455 3.74787 12.3536 3.64645C12.281 3.57388 12.1917 3.52828 12.098 3.50965C12.0813 3.50632 12.0643 3.50383 12.0471 3.50221C12.0336 3.50095 12.02 3.50022 12.0062 3.50004C12.0041 3.50001 12.0019 3.5 11.9998 3.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M9.02099 11.5599C10.662 11.5599 11.9923 10.2295 11.9923 8.58852C11.9923 6.9475 10.662 5.61719 9.02099 5.61719C7.37996 5.61719 6.04965 6.9475 6.04965 8.58852C6.04965 10.2295 7.37996 11.5599 9.02099 11.5599Z\"\n      stroke=\"currentColor\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M3.92462 15.2834C4.245 14.2791 4.85628 13.3883 5.68566 12.7269C6.63325 11.9711 7.80938 11.5596 9.02143 11.5596C10.2335 11.5596 11.4096 11.9711 12.3572 12.7269C13.1866 13.3883 13.7979 14.2791 14.1182 15.2834\"\n      stroke=\"currentColor\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <rect\n      x=\"2.25\"\n      y=\"2.25\"\n      width=\"13.5\"\n      height=\"13.5\"\n      rx=\"2.5\"\n      stroke=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_3668_69185)\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M14.25 8C14.25 11.4518 11.4518 14.25 8 14.25C4.54822 14.25 1.75 11.4518 1.75 8C1.75 4.54822 4.54822 1.75 8 1.75C11.4518 1.75 14.25 4.54822 14.25 8ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM11.2909 5.98482C11.4666 5.77175 11.4363 5.45663 11.2232 5.28096C11.0101 5.1053 10.695 5.13561 10.5193 5.34868L7.07001 9.53239L5.72845 7.79857C5.55946 7.58018 5.24543 7.54012 5.02703 7.70911C4.80863 7.8781 4.76858 8.19214 4.93756 8.41053L6.66217 10.6394C6.7552 10.7596 6.89788 10.831 7.04988 10.8334C7.20188 10.8357 7.3467 10.7688 7.4434 10.6515L11.2909 5.98482Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_3668_69185\">\n        <rect width=\"16\" height=\"16\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n","<template>\n  <Dialog v-model=\"show\">\n    <template #body>\n      <div class=\"bg-surface-modal px-4 pb-6 pt-5 sm:px-6\">\n        <div class=\"mb-5 flex items-center justify-between\">\n          <div>\n            <h3 class=\"text-2xl font-semibold leading-6 text-ink-gray-9\">\n              {{ __(\"Call Details\") }}\n            </h3>\n          </div>\n          <div class=\"flex items-center gap-1\">\n            <Button\n              v-if=\"isManager\"\n              variant=\"ghost\"\n              class=\"w-7\"\n              @click=\"openCallLogModal\"\n              icon=\"edit\"\n            />\n            <Button\n              variant=\"ghost\"\n              class=\"w-7\"\n              @click=\"show = false\"\n              icon=\"x\"\n            />\n          </div>\n        </div>\n        <div class=\"flex flex-col gap-3.5\">\n          <div\n            v-for=\"field in detailFields\"\n            :key=\"field.name\"\n            class=\"flex gap-2 text-base text-ink-gray-8\"\n          >\n            <div class=\"grid size-7 place-content-center\">\n              <component :is=\"field.icon\" class=\"size-4 text-ink-gray-8\" />\n            </div>\n            <div class=\"flex min-h-7 w-full items-center gap-2\">\n              <div\n                v-if=\"field.name == 'receiver'\"\n                class=\"flex items-center gap-1\"\n              >\n                <Avatar\n                  :image=\"field.value.caller.image\"\n                  :label=\"field.value.caller.label\"\n                  size=\"sm\"\n                />\n                <div class=\"ml-1 flex flex-col gap-1\">\n                  {{ field.value.caller.label }}\n                </div>\n                <FeatherIcon\n                  name=\"arrow-right\"\n                  class=\"mx-1 h-4 w-4 text-ink-gray-5\"\n                />\n                <Avatar\n                  :image=\"field.value.receiver.image\"\n                  :label=\"field.value.receiver.label\"\n                  size=\"sm\"\n                />\n                <div class=\"ml-1 flex flex-col gap-1\">\n                  {{ field.value.receiver.label }}\n                </div>\n              </div>\n              <Tooltip v-else-if=\"field.tooltip\" :text=\"field.tooltip\">\n                {{ field.value }}\n              </Tooltip>\n              <div class=\"w-full\" v-else-if=\"field.name == 'recording_url'\">\n                <audio\n                  class=\"audio-control w-full\"\n                  controls\n                  :src=\"field.value\"\n                ></audio>\n              </div>\n              <div class=\"w-full\" v-else-if=\"field.name == 'ticket'\">\n                <div\n                  class=\"flex items-center gap-1.5 cursor-pointer\"\n                  @click=\"() => field.link()\"\n                >\n                  #{{ field.value }}\n                  <ArrowUpRightIcon\n                    class=\"h-4 w-4 shrink-0 cursor-pointer text-ink-gray-5 hover:text-ink-gray-8\"\n                  />\n                </div>\n              </div>\n              <div v-else :class=\"field.color ? `text-${field.color}-600` : ''\">\n                {{ field.value }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport ArrowUpRightIcon from \"@/components/icons/ArrowUpRightIcon.vue\";\nimport DurationIcon from \"@/components/icons/DurationIcon.vue\";\nimport ContactsIcon from \"@/components/icons/ContactsIcon.vue\";\nimport CalendarIcon from \"@/components/icons/CalendarIcon.vue\";\nimport CheckCircleIcon from \"@/components/icons/CheckCircleIcon.vue\";\nimport TicketIcon from \"@/components/icons/TicketIcon.vue\";\nimport { FeatherIcon, Avatar, Tooltip, createResource } from \"frappe-ui\";\nimport { computed, h, nextTick, ref, watch } from \"vue\";\nimport { formatDate } from \"@vueuse/core\";\nimport dayjs from \"dayjs\";\nimport { timeAgo } from \"@/utils\";\nimport { statusColorMap, statusLabelMap } from \"./utils\";\nimport { useAuthStore } from \"@/stores/auth\";\n\nconst show = defineModel();\nconst callLog = ref(null);\nconst { isManager } = useAuthStore();\n\nconst props = defineProps({\n  callLogId: {\n    type: String,\n    default: \"\",\n  },\n  hideTicket: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst callLogData = createResource({\n  url: \"telephony.api.get_call_log\",\n  onSuccess(data) {\n    callLog.value = data;\n  },\n  auto: false,\n});\n\nconst detailFields = computed(() => {\n  if (!callLog.value) return [];\n\n  let data = JSON.parse(JSON.stringify(callLog.value));\n\n  for (const key in data) {\n    data[key] = getCallLogDetail(key, data);\n  }\n\n  let details = [\n    {\n      icon: h(FeatherIcon, {\n        name: data.type.icon,\n        class: \"h-3.5 w-3.5\",\n      }),\n      name: \"type\",\n      value: data.type.label + \" Call\",\n    },\n    {\n      icon: ContactsIcon,\n      name: \"receiver\",\n      value: {\n        receiver: data.receiver,\n        caller: data.caller,\n      },\n    },\n    {\n      icon: CalendarIcon,\n      name: \"creation\",\n      value: data.creation.label,\n      tooltip: data.creation.label,\n    },\n    {\n      icon: DurationIcon,\n      name: \"duration\",\n      value: data.duration.label,\n    },\n    {\n      icon: CheckCircleIcon,\n      name: \"status\",\n      value: data.status.label,\n      color: data.status.color,\n    },\n    {\n      icon: h(FeatherIcon, {\n        name: \"play-circle\",\n        class: \"h-4 w-4 mt-2\",\n      }),\n      name: \"recording_url\",\n      value: data.recording_url,\n    },\n  ];\n\n  const ticketLink = data.links?.find(\n    (link) => link.link_doctype == \"HD Ticket\"\n  );\n\n  if (ticketLink && !props.hideTicket) {\n    details.push({\n      icon: TicketIcon,\n      name: \"ticket\",\n      value: ticketLink.link_name,\n      link: () => {\n        window.open(`/helpdesk/tickets/${ticketLink.link_name}`);\n      },\n    });\n  }\n\n  return details.filter((detail) => detail.value);\n});\n\nconst showCallLogModal = defineModel(\"callLogModal\");\n\nfunction openCallLogModal() {\n  showCallLogModal.value = true;\n  nextTick(() => {\n    show.value = false;\n  });\n}\n\nfunction getCallLogDetail(row, log, columns = []) {\n  let incoming = log.type === \"Incoming\";\n\n  if (row === \"duration\") {\n    return {\n      label: log._duration,\n      icon: \"clock\",\n    };\n  } else if (row === \"caller\") {\n    return {\n      label: log._caller?.label,\n      image: log._caller?.image,\n    };\n  } else if (row === \"receiver\") {\n    return {\n      label: log._receiver?.label,\n      image: log._receiver?.image,\n    };\n  } else if (row === \"type\") {\n    return {\n      label: log.type,\n      icon: incoming ? \"phone-incoming\" : \"phone-outgoing\",\n    };\n  } else if (row === \"status\") {\n    return {\n      label: statusLabelMap[log.status],\n      color: statusColorMap[log.status],\n    };\n  } else if ([\"modified\", \"creation\"].includes(row)) {\n    return {\n      label: dayjs(log[row]).format(\"ddd, MMM D, YYYY h:mm a\"),\n      timeAgo: timeAgo(log[row]),\n    };\n  }\n\n  let fieldType = columns?.find((col) => (col.key || col.value) == row)?.type;\n\n  if (fieldType && [\"Date\", \"Datetime\"].includes(fieldType)) {\n    return formatDate(log[row], \"\");\n  }\n\n  return log[row];\n}\n\nwatch(show, (newValue) => {\n  if (newValue && props.callLogId) {\n    callLogData.submit({\n      name: props.callLogId,\n    });\n  }\n});\n</script>\n\n<style scoped>\n.audio-control {\n  height: 36px;\n  outline: none;\n  border-radius: 10px;\n  cursor: pointer;\n  background-color: rgb(237, 237, 237);\n}\n\naudio::-webkit-media-controls-panel {\n  background-color: rgb(237, 237, 237) !important;\n}\n\n.audio-control::-webkit-media-controls-panel {\n  background-color: white;\n}\n</style>\n","<template>\n  <Dialog v-model=\"show\" :options=\"dialogOptions\" @after-leave=\"resetCallLog\">\n    <template #body>\n      <div class=\"px-4 pt-5 bg-surface-modal sm:px-6\">\n        <div class=\"flex items-center justify-between mb-5\">\n          <div class=\"flex items-center gap-2\">\n            <h3 class=\"text-2xl font-semibold leading-6 text-ink-gray-9\">\n              {{ __(dialogOptions.title) || __(\"Untitled\") }}\n            </h3>\n            <Badge v-if=\"isDirty\" :label=\"'Not Saved'\" theme=\"orange\" />\n          </div>\n          <div class=\"flex items-center gap-1\">\n            <Button\n              variant=\"ghost\"\n              class=\"w-7\"\n              @click=\"show = false\"\n              icon=\"x\"\n            />\n          </div>\n        </div>\n        <div class=\"flex flex-col gap-4\">\n          <div class=\"grid grid-cols-2 gap-4\">\n            <div class=\"flex flex-col gap-1.5\">\n              <FormLabel label=\"Type\" required />\n              <Select\n                v-model=\"callLog.type\"\n                :options=\"callLogTypeOptions\"\n                placeholder=\"Select\"\n              />\n              <ErrorMessage :message=\"errors.type\" />\n            </div>\n            <div class=\"flex flex-col gap-1.5\">\n              <FormLabel label=\"To\" required />\n              <FormControl\n                v-model=\"callLog.to\"\n                type=\"text\"\n                placeholder=\"+18596748596\"\n              />\n              <ErrorMessage :message=\"errors.to\" />\n            </div>\n          </div>\n          <div class=\"grid grid-cols-2 gap-4\">\n            <div class=\"flex flex-col gap-1.5\">\n              <FormLabel label=\"From\" required />\n              <FormControl\n                v-model=\"callLog.from\"\n                type=\"text\"\n                placeholder=\"+19138276548\"\n              />\n              <ErrorMessage :message=\"errors.from\" />\n            </div>\n            <div class=\"flex flex-col gap-1.5\">\n              <FormLabel label=\"Status\" required />\n              <Select\n                v-model=\"callLog.status\"\n                :options=\"callLogStatusOptions\"\n                placeholder=\"Select\"\n              ></Select>\n              <ErrorMessage :message=\"errors.status\" />\n            </div>\n          </div>\n          <div class=\"grid grid-cols-2 gap-4\">\n            <div class=\"flex flex-col gap-1.5\">\n              <FormLabel label=\"Duration\" required />\n              <FormControl\n                v-model=\"callLog.duration\"\n                type=\"number\"\n                placeholder=\"Duration\"\n                description=\"Call duration in seconds\"\n              />\n              <ErrorMessage :message=\"errors.duration\" />\n            </div>\n            <div\n              class=\"flex flex-col gap-1.5\"\n              v-if=\"callLog.type === 'Incoming'\"\n            >\n              <Link\n                :value=\"callLog.receiver\"\n                :doctype=\"'User'\"\n                :placeholder=\"'Select'\"\n                label=\"Call Received By\"\n                @change=\"(data) => (callLog.receiver = data)\"\n              />\n            </div>\n            <div\n              class=\"flex flex-col gap-1.5\"\n              v-if=\"callLog.type === 'Outgoing'\"\n            >\n              <Link\n                :value=\"callLog.caller\"\n                :doctype=\"'User'\"\n                :placeholder=\"'Select'\"\n                label=\"Caller\"\n                @change=\"(data) => (callLog.caller = data)\"\n              />\n            </div>\n            <div class=\"flex flex-col gap-1.5\">\n              <Link\n                :value=\"callLog.ticket\"\n                :doctype=\"'HD Ticket'\"\n                :placeholder=\"'Select'\"\n                label=\"Ticket\"\n                :show-description=\"true\"\n                @change=\"(data) => (callLog.ticket = String(data))\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"px-4 pt-4 pb-7 sm:px-6\">\n        <div class=\"space-y-2\">\n          <Button\n            class=\"w-full\"\n            v-for=\"action in dialogOptions.actions\"\n            :key=\"action.label\"\n            v-bind=\"action\"\n            :label=\"__(action.label)\"\n            :loading=\"loading\"\n          />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { useAuthStore } from \"@/stores/auth\";\nimport { getRandom } from \"@/utils\";\nimport {\n  createResource,\n  Dialog,\n  ErrorMessage,\n  FormControl,\n  FormLabel,\n  Select,\n  toast,\n  type DialogProps,\n} from \"frappe-ui\";\nimport { computed, ref, watch } from \"vue\";\n\nconst show = defineModel<boolean>();\nconst editMode = ref(false);\nconst loading = ref(false);\nconst isDirty = ref(false);\nconst originalCallLog = ref(\"\");\nconst emit = defineEmits([\"afterInsert\"]);\nconst { user } = useAuthStore();\n\nconst errors = ref({\n  type: \"\",\n  to: \"\",\n  from: \"\",\n  status: \"\",\n  duration: \"\",\n});\n\nconst callLog = ref({\n  receiver: \"\",\n  caller: \"\",\n  type: \"\",\n  to: \"\",\n  from: \"\",\n  status: \"\",\n  duration: 0,\n  ticket: \"\",\n});\n\nconst props = defineProps({\n  callLogId: {\n    type: String,\n    default: \"\",\n  },\n  ticketId: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst callLogData = createResource({\n  url: \"telephony.api.get_call_log\",\n  onSuccess(data) {\n    const linkedTicket = data.links.find(\n      (link) => link.link_doctype == \"HD Ticket\"\n    );\n    callLog.value = {\n      receiver: data.receiver,\n      caller: data.caller,\n      type: data.type,\n      to: data.to,\n      from: data.from,\n      status: data.status,\n      duration: data.duration || 0,\n      ticket: String(linkedTicket?.link_name || \"\"),\n    };\n    originalCallLog.value = JSON.stringify(callLog.value);\n  },\n  auto: false,\n});\n\nconst callLogTypeOptions = [\n  { label: \"\", value: \"\" },\n  { label: \"Incoming\", value: \"Incoming\" },\n  { label: \"Outgoing\", value: \"Outgoing\" },\n];\n\nconst callLogStatusOptions = [\n  { label: \"\", value: \"\" },\n  { label: \"Completed\", value: \"Completed\" },\n  { label: \"Busy\", value: \"Busy\" },\n  { label: \"Failed\", value: \"Failed\" },\n  { label: \"Initiated\", value: \"Initiated\" },\n  { label: \"Queued\", value: \"Queued\" },\n  { label: \"Canceled\", value: \"Canceled\" },\n  { label: \"Ringing\", value: \"Ringing\" },\n  { label: \"No Answer\", value: \"No Answer\" },\n  { label: \"In Progress\", value: \"In Progress\" },\n];\n\nconst dialogOptions = computed<DialogProps[\"options\"]>(() => ({\n  title: !editMode.value ? \"New Call Log\" : \"Edit Call Log\",\n  size: \"xl\",\n  actions: [\n    {\n      label: editMode.value ? \"Save\" : \"Create\",\n      variant: \"solid\",\n      onClick: () => {\n        if (editMode.value) {\n          updateCallLog();\n        } else {\n          createCallLog();\n        }\n      },\n      disabled: !isDirty.value,\n    },\n  ],\n}));\n\nconst resetCallLog = () => {\n  callLog.value = {\n    receiver: \"\",\n    caller: \"\",\n    type: \"\",\n    to: \"\",\n    from: \"\",\n    status: \"\",\n    duration: 0,\n    ticket: \"\",\n  };\n  originalCallLog.value = JSON.stringify(callLog.value);\n  errors.value = {\n    type: \"\",\n    to: \"\",\n    from: \"\",\n    status: \"\",\n    duration: \"\",\n  };\n  loading.value = false;\n};\n\nfunction updateCallLog() {\n  validateCallLog();\n  if (Object.values(errors.value).some((error) => error)) {\n    toast.error(\"Please fill all required fields\");\n    return;\n  }\n  loading.value = true;\n  const links = [];\n  if (callLog.value.ticket) {\n    links.push({\n      link_doctype: \"HD Ticket\",\n      link_name: callLog.value.ticket,\n    });\n  }\n  // Copy old links\n  callLogData.data.links.forEach((link) => {\n    if (link.link_doctype == \"HD Ticket\") {\n      return;\n    }\n    links.push(link);\n  });\n\n  if (callLog.value.receiver == \"@me\") {\n    callLog.value.receiver = user;\n  }\n  if (callLog.value.caller == \"@me\") {\n    callLog.value.caller = user;\n  }\n  createResource({\n    url: \"frappe.client.set_value\",\n    params: {\n      doctype: \"TP Call Log\",\n      name: props.callLogId,\n      fieldname: {\n        ...callLog.value,\n        links,\n      },\n    },\n    auto: true,\n    onSuccess(doc) {\n      loading.value = false;\n      handleCallLogUpdate(doc);\n    },\n  });\n}\n\nfunction createCallLog() {\n  validateCallLog();\n  if (Object.values(errors.value).some((error) => error)) {\n    toast.error(\"Please fill all required fields\");\n    return;\n  }\n  loading.value = true;\n  const links = [];\n  if (callLog.value.ticket) {\n    links.push({\n      link_doctype: \"HD Ticket\",\n      link_name: callLog.value.ticket,\n    });\n  }\n  if (callLog.value.receiver == \"@me\") {\n    callLog.value.receiver = user;\n  }\n  if (callLog.value.caller == \"@me\") {\n    callLog.value.caller = user;\n  }\n  createResource({\n    url: \"telephony.api.create_call_log\",\n    params: {\n      id: getRandom(12),\n      telephony_medium: \"Manual\",\n      from_number: callLog.value.from,\n      to_number: callLog.value.to,\n      duration: callLog.value.duration,\n      status: callLog.value.status,\n      call_type: callLog.value.type,\n      caller: callLog.value.caller,\n      receiver: callLog.value.receiver,\n      ticket: callLog.value.ticket,\n      links,\n    },\n    auto: true,\n    onSuccess(doc) {\n      loading.value = false;\n      handleCallLogUpdate(doc);\n    },\n    onError() {\n      loading.value = false;\n    },\n  });\n}\n\nfunction handleCallLogUpdate(doc) {\n  show.value = false;\n  emit(\"afterInsert\", doc);\n}\n\nconst validateCallLog = () => {\n  if (!callLog.value.type) {\n    errors.value.type = \"Type is required\";\n  } else {\n    errors.value.type = \"\";\n  }\n\n  if (!callLog.value.to) {\n    errors.value.to = \"To is required\";\n  } else if (!/^\\+?\\d{8,15}$/.test(callLog.value.to)) {\n    errors.value.to = \"Please enter a valid phone number\";\n  } else {\n    errors.value.to = \"\";\n  }\n\n  if (!callLog.value.from) {\n    errors.value.from = \"From is required\";\n  } else if (!/^\\+?\\d{8,15}$/.test(callLog.value.from)) {\n    errors.value.from = \"Please enter a valid phone number\";\n  } else {\n    errors.value.from = \"\";\n  }\n\n  if (!callLog.value.status) {\n    errors.value.status = \"Status is required\";\n  } else {\n    errors.value.status = \"\";\n  }\n\n  if (!callLog.value.duration) {\n    errors.value.duration = \"Duration is required\";\n  } else {\n    errors.value.duration = \"\";\n  }\n};\n\nwatch(\n  callLog,\n  (newValue) => {\n    isDirty.value = JSON.stringify(newValue) !== originalCallLog.value;\n  },\n  { deep: true }\n);\n\nwatch(show, (newValue) => {\n  if (newValue && props.callLogId) {\n    editMode.value = true;\n    callLogData.submit({\n      name: props.callLogId,\n    });\n  } else {\n    editMode.value = false;\n  }\n  if (newValue && props.ticketId) {\n    callLog.value.ticket = String(props.ticketId);\n  }\n});\n</script>\n"],"names":["_hoisted_1","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","statusColorMap","statusLabelMap","show","_useModel","callLog","ref","isManager","useAuthStore","props","__props","callLogData","createResource","data","detailFields","computed","key","getCallLogDetail","details","h","FeatherIcon","ContactsIcon","CalendarIcon","DurationIcon","CheckCircleIcon","ticketLink","_a","link","TicketIcon","detail","showCallLogModal","openCallLogModal","nextTick","row","log","columns","incoming","_b","_c","_d","dayjs","timeAgo","fieldType","_e","col","formatDate","watch","newValue","_createBlock","_component_Dialog","$event","_hoisted_2","_hoisted_3","_toDisplayString","__","_hoisted_4","_unref","_component_Button","_createVNode","_hoisted_5","_Fragment","_renderList","field","_hoisted_6","_resolveDynamicComponent","_hoisted_7","_hoisted_8","Avatar","_hoisted_9","_hoisted_10","Tooltip","_createTextVNode","_hoisted_11","_hoisted_13","ArrowUpRightIcon","editMode","loading","isDirty","originalCallLog","emit","__emit","user","errors","linkedTicket","callLogTypeOptions","callLogStatusOptions","dialogOptions","updateCallLog","createCallLog","resetCallLog","validateCallLog","error","toast","links","doc","handleCallLogUpdate","getRandom","Dialog","_component_Badge","FormLabel","Select","ErrorMessage","FormControl","_hoisted_12","_hoisted_14","_hoisted_15","_component_Link","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","action","_mergeProps"],"mappings":"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"}