{"version":3,"file":"MobileNotifications-680dd5ad.js","sources":["../../../../desk/src/pages/MobileNotifications.vue"],"sourcesContent":["<template>\n  <LayoutHeader>\n    <template #left-header>\n      <Breadcrumbs\n        :items=\"[{ label: __('Notifications'), route: { name: 'Notifications' } }]\"\n      />\n    </template>\n    <template #right-header>\n      <Tooltip :text=\"__('Mark all as read')\">\n        <div>\n          <Button\n            :label=\"__('Mark all as read')\"\n            @click=\"() => notificationStore.clear.submit()\"\n          >\n            <template #prefix>\n              <LucideCheckCheck class=\"h-4 w-4\" />\n            </template>\n          </Button>\n        </div>\n      </Tooltip>\n    </template>\n  </LayoutHeader>\n  <div v-if=\"notificationStore.data.length\" class=\"divide-y text-base\">\n    <RouterLink\n      v-for=\"n in notificationStore.data\"\n      :key=\"n.name\"\n      class=\"flex cursor-pointer items-start gap-3.5 px-5 py-2.5 hover:bg-gray-100\"\n      :to=\"getRoute(n)\"\n      @click=\"\n        () => {\n          notificationStore.read(n.reference_ticket);\n        }\n      \"\n    >\n      <UserAvatar :name=\"n.user_from\" />\n      <div>\n        <div class=\"mb-2 leading-5\">\n          <span class=\"space-x-1 text-gray-700\">\n            <span class=\"font-medium text-gray-900\">{{ n.user_from }}</span>\n            <span v-if=\"n.notification_type === 'Mention'\"\n              >{{ __(\"mentioned you in ticket\") }}</span\n            >\n            <span v-if=\"n.notification_type === 'Assignment'\"\n              >{{ __(\"assigned you a ticket\") }}</span\n            >\n            <span v-if=\"n.notification_type === 'Reaction'\"\n              >{{ __(\"has reopened the ticket\") }}</span\n            >\n            <span class=\"font-medium text-gray-900\">{{\n              n.reference_ticket\n            }}</span>\n          </span>\n        </div>\n        <div class=\"flex items-center gap-2\">\n          <div class=\"text-sm text-gray-600\">\n            {{ dayjs.tz(n.creation).fromNow() }}\n          </div>\n          <div v-if=\"!n.read\" class=\"h-1.5 w-1.5 rounded-full bg-blue-400\" />\n        </div>\n      </div>\n    </RouterLink>\n  </div>\n  <div v-else class=\"flex flex-1 flex-col items-center gap-2\">\n    <LucideBell class=\"h-20 w-20 text-gray-300\" />\n    <div class=\"text-lg font-medium text-gray-500\">\n      {{ __(\"No new notifications\") }}\n    </div>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { Breadcrumbs, Tooltip } from \"frappe-ui\";\nimport LayoutHeader from \"@/components/LayoutHeader.vue\";\nimport { useNotificationStore } from \"@/stores/notification\";\nimport { ref } from \"vue\";\nimport { onClickOutside } from \"@vueuse/core\";\nimport { dayjs } from \"@/dayjs\";\nimport { Notification } from \"@/types\";\nimport { UserAvatar } from \"@/components\";\nimport LucideBell from \"~icons/lucide/bell\";\nimport { __ } from \"@/translation\";\nconst notificationStore = useNotificationStore();\nconst target = ref(null);\nonClickOutside(\n  target,\n  () => {\n    if (notificationStore.visible) {\n      notificationStore.toggle();\n    }\n  },\n  {\n    ignore: [\"#notifications-btn\"],\n  }\n);\n\nfunction getRoute(n: Notification) {\n  switch (n.notification_type) {\n    case \"Mention\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n        hash: \"#\" + n.reference_comment,\n      };\n    case \"Assignment\":\n    case \"Reaction\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n      };\n  }\n}\n</script>\n"],"names":["notificationStore","useNotificationStore","target","ref","onClickOutside","getRoute","n","_createVNode","LayoutHeader","_unref","Breadcrumbs","__","Tooltip","_createElementVNode","_component_Button","_cache","_component_LucideCheckCheck","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","_createBlock","_component_RouterLink","UserAvatar","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","dayjs","_hoisted_11","_hoisted_12","LucideBell","_hoisted_13"],"mappings":"usCAgFA,MAAMA,EAAoBC,IACpBC,EAASC,EAAI,IAAI,EACvBC,EACEF,EACA,IAAM,CACAF,EAAkB,SACpBA,EAAkB,OAAO,CAE7B,EACA,CACE,OAAQ,CAAC,oBAAoB,CAC/B,CAAA,EAGF,SAASK,EAASC,EAAiB,CACjC,OAAQA,EAAE,kBAAmB,CAC3B,IAAK,UACI,MAAA,CACL,KAAM,cACN,OAAQ,CACN,SAAUA,EAAE,gBACd,EACA,KAAM,IAAMA,EAAE,iBAAA,EAElB,IAAK,aACL,IAAK,WACI,MAAA,CACL,KAAM,cACN,OAAQ,CACN,SAAUA,EAAE,gBACd,CAAA,CAEN,CACF,8EAhHEC,EAoBeC,EAAA,KAAA,CAnBF,gBACT,IAEE,CAFFD,EAEEE,EAAAC,CAAA,EAAA,CADC,cAAiBD,EAAEE,CAAA,EAAA,eAAA,EAAA,MAAA,CAAA,KAAA,iBAAA,uBAGb,iBACT,IAWU,CAXVJ,EAWUE,EAAAG,CAAA,EAAA,CAXA,KAAMH,EAAEE,CAAA,EAAA,kBAAA,CAAA,aAChB,IASM,CATNE,EASM,MAAA,KAAA,CARJN,EAOSO,EAAA,CANN,MAAOL,EAAEE,CAAA,EAAA,kBAAA,EACT,QAAaI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,IAAAN,EAAAT,CAAA,EAAkB,MAAM,OAAM,EAAA,GAEjC,SACT,IAAoC,CAApCO,EAAoCS,EAAA,CAAlB,MAAM,UAAS,CAAA,kDAOlCP,EAAiBT,CAAA,EAAC,KAAK,QAAlCiB,IAAAC,EAuCM,MAvCNC,EAuCM,EAtCJF,EAAA,EAAA,EAAAC,EAqCaE,EApCC,KAAAC,EAAAZ,EAAAT,CAAA,EAAkB,KAAvBM,QADTgB,EAqCaC,EAAA,CAnCV,IAAKjB,EAAE,KACR,MAAM,wEACL,GAAID,EAASC,CAAC,EACd,aAAkCG,EAAAT,CAAA,EAAkB,KAAKM,EAAE,gBAAgB,eAM5E,IAAkC,CAAlCC,EAAkCE,EAAAe,CAAA,EAAA,CAArB,KAAMlB,EAAE,4BACrBO,EAwBM,MAAA,KAAA,CAvBJA,EAgBM,MAhBNY,EAgBM,CAfJZ,EAcO,OAdPa,EAcO,CAbLb,EAAgE,OAAhEc,EAA2CC,EAAAtB,EAAE,SAAS,EAAA,CAAA,EAC1CA,EAAE,oBAAiB,WAA/BW,EAAA,EAAAC,EAEC,WADKT,EAAEE,CAAA,EAAA,yBAAA,CAAA,EAAA,CAAA,YAEIL,EAAE,oBAAiB,cAA/BW,EAAA,EAAAC,EAEC,WADKT,EAAEE,CAAA,EAAA,uBAAA,CAAA,EAAA,CAAA,YAEIL,EAAE,oBAAiB,YAA/BW,EAAA,EAAAC,EAEC,WADKT,EAAEE,CAAA,EAAA,yBAAA,CAAA,EAAA,CAAA,YAERE,EAES,OAFTgB,EACED,EAAAtB,EAAE,gBAAgB,EAAA,CAAA,CAAA,KAIxBO,EAKM,MALNiB,EAKM,CAJJjB,EAEM,MAFNkB,EAEMH,EADDnB,EAAKuB,CAAA,EAAC,GAAG1B,EAAE,QAAQ,EAAE,QAAO,CAAA,EAAA,CAAA,EAErBA,EAAE,eAAdW,EAAA,EAAAC,EAAmE,MAAnEe,CAAmE,iDAK3EhB,EAAA,EAAAC,EAKM,MALNgB,EAKM,CAJJ3B,EAA8CE,EAAA0B,CAAA,EAAA,CAAlC,MAAM,0BAAyB,EAC3CtB,EAEM,MAFNuB,EAEMR,EADDnB,EAAEE,CAAA,EAAA,sBAAA,CAAA,EAAA,CAAA,CAAA"}