import{_ as T}from"./UserAvatar.vue_vue_type_script_setup_true_lang-e554c997.js";import{_ as j}from"./plus-3c348a65.js";import{m as N,n as V,r as w,e as v,f as $,w as m,l as o,v as _,g as l,h as t,b4 as q,X as D,d as H,U as A,q as g,s as E,A as y,Z as L,ba as P,k as h,F as Q,G,z as X,y as Y,a3 as Z,a6 as J,M as K}from"./index-b4c863a6.js";import"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-c8d975a4.js";import{d as O}from"./dayjs-95f8111d.js";import"./knowledgeBase-2d00b929.js";import{_ as W}from"./LayoutHeader-0efddba1.js";import{_ as ee}from"./EmptyState.vue_vue_type_script_setup_true_lang-eb9071a9.js";import{_ as F}from"./file-to-base64-e61fad39.js";import{u as te}from"./pageMeta-b63f711b.js";import{_ as se}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-c05e3797.js";import{D as oe}from"./Dropdown-f79f7542.js";import"./Avatar.vue_vue_type_script_setup_true_lang-89128cfb.js";import"./popper-0aa08b12.js";import"./chevron-left-d60af664.js";import"./chevron-right-cd59273c.js";import"./index-6b12b9aa.js";import"./index-3720151f.js";const ae={class:"flex items-center gap-3"},le={class:"text-2xl font-semibold leading-6 text-gray-900"},ne={class:"flex flex-col gap-4"},ie={__name:"CannedResponseModal",props:N({name:{type:String,required:!1,default:null},isNew:{type:Boolean,required:!1,default:!1}},{modelValue:{},modelModifiers:{},title:{},titleModifiers:{},message:{},messageModifiers:{}}),emits:N(["update"],["update:modelValue","update:title","update:message"]),setup(p,{emit:C}){const b=p,x=V(p,"modelValue"),n=V(p,"title"),i=V(p,"message"),c=C;async function k(){b.name?await D("frappe.client.set_value",{doctype:"HD Canned Response",name:b.name,fieldname:{title:n.value,message:i.value}}):await D("frappe.client.insert",{doc:{doctype:"HD Canned Response",title:n.value,message:i.value}}),c("update"),x.value=!1}return(d,a)=>{const u=w("Dialog");return v(),$(u,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=f=>x.value=f),options:{size:"xl",actions:[{label:p.isNew?"Create":"Update",variant:"solid",onClick:()=>k()}]}},{"body-title":m(()=>[o("div",ae,[o("h3",le,_(p.isNew?"Create Canned Response":"Edit Canned Response"),1)])]),"body-content":m(()=>[o("div",ne,[o("div",null,[a[3]||(a[3]=o("div",{class:"mb-1.5 text-sm text-gray-600"},_("Title"),-1)),l(t(q),{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=f=>n.value=f),variant:"outline",placeholder:"Customer Query Resolved"},null,8,["modelValue"])]),o("div",null,[a[4]||(a[4]=o("div",{class:"mb-1.5 text-sm text-gray-600"},_("Message"),-1)),l(t(F),{ref:"content",variant:"outline","editor-class":"!prose-sm overflow-auto min-h-[180px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors","bubble-menu":!0,content:i.value,placeholder:"Your query has been resolved. Thank you for reaching out.",onChange:a[1]||(a[1]=f=>i.value=f)},null,8,["content"])])])]),_:1},8,["modelValue","options"])}}},re={class:"flex flex-col"},de={class:"flex items-center gap-2"},ue={class:"flex-1 overflow-y-auto"},me={key:0,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4"},pe=["onClick"],ce={class:"flex items-center justify-between"},fe={class:"truncate text-lg font-medium"},ve={class:"mt-2 flex items-center justify-between gap-2"},ge={class:"flex items-center gap-2"},_e={class:"text-sm text-gray-800"},xe={class:"text-sm text-gray-700"},je=H({__name:"CannedResponses",setup(p){const{getUser:C}=A(),b=[{label:g("Canned Responses"),route:{name:"CannedResponses"}}],x=E(),n=y(null),i=y(null),c=y(null),k=x.hash.split("#")[1]==="new",d=y(k||!1),a=y(""),u=L({doctype:"HD Canned Response",fields:["name","title","message","owner","modified"],auto:!0,orFilters:{},orderBy:"modified desc"});P(a,r=>{u.update({orFilters:r?{message:["like",`%${r}%`],title:["like",`%${r}%`]}:{}}),u.reload()},{debounce:300});function f(r){n.value=r.title,i.value=r.message,c.value=r.name,d.value=!0}async function B(r){await D("frappe.client.delete",{doctype:"HD Canned Response",name:r}),u.reload()}return te(()=>({title:g("Canned Responses")})),(r,s)=>{var M;const I=w("FeatherIcon"),R=w("TextInput"),z=j,U=w("Button"),S=T;return v(),h("div",re,[l(t(W),null,{"left-header":m(()=>[l(t(se),{items:b,class:"-ml-0.5"})]),"right-header":m(()=>[o("div",de,[l(R,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),type:"text",placeholder:t(g)("Search canned responses"),class:"input input-bordered h-8 px-2 text-sm",style:{"min-width":"290px"}},{prefix:m(()=>[l(I,{name:"search",class:"h-4 w-4 text-gray-500 ml-2"})]),_:1},8,["modelValue","placeholder"]),l(U,{label:t(g)("Create"),theme:"gray",variant:"solid",onClick:s[1]||(s[1]=()=>{n.value=null,i.value=null,d.value=!0})},{prefix:m(()=>[l(z,{class:"h-4 w-4"})]),_:1},8,["label"])])]),_:1}),o("div",ue,[((M=t(u).data)==null?void 0:M.length)>0?(v(),h("div",me,[(v(!0),h(Q,null,G(t(u).data,e=>(v(),h("div",{key:e.name,class:"group flex h-60 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-4 py-3 pt-2 shadow-sm hover:bg-gray-50",onClick:ye=>f(e)},[o("div",ce,[o("div",fe,_(e.title),1),l(t(oe),{options:[{label:t(g)("Delete"),icon:"trash-2",onClick:()=>B(e.name)}],onClick:s[2]||(s[2]=X(()=>{},["stop"]))},{default:m(()=>[l(U,{icon:"more-horizontal",variant:"ghosted",class:"hover:bg-white"})]),_:1},8,["options"])]),e.message?(v(),$(t(F),{key:0,content:e.message,editable:!1,"editor-class":"prose-sm",class:"flex-1 overflow-hidden response-preview"},null,8,["content"])):Y("",!0),o("div",ve,[o("div",ge,[l(S,{name:e.owner,size:"xs"},null,8,["name"]),o("div",_e,_(t(C)(e.owner).full_name),1)]),l(t(K),{text:t(Z)(e.modified,t(J))},{default:m(()=>[o("div",xe,_(t(O).tz(e.modified).fromNow()),1)]),_:2},1032,["text"])])],8,pe))),128))])):(v(),$(ee,{key:1,title:t(g)("No Canned Responses Found"),onEmptyStateAction:s[3]||(s[3]=e=>d.value=!0)},null,8,["title"]))]),l(t(ie),{modelValue:d.value,"onUpdate:modelValue":s[4]||(s[4]=e=>d.value=e),title:n.value,"onUpdate:title":s[5]||(s[5]=e=>n.value=e),message:i.value,"onUpdate:message":s[6]||(s[6]=e=>i.value=e),name:c.value,"is-new":!c.value,onClose:s[7]||(s[7]=()=>{d.value=!1,n.value=null,i.value=null,c.value=null}),onUpdate:s[8]||(s[8]=()=>{t(u).reload(),d.value=!1,n.value=null,i.value=null,c.value=null})},null,8,["modelValue","title","message","name","is-new"])])}}});export{je as default};
//# sourceMappingURL=CannedResponses-f3a47428.js.map
