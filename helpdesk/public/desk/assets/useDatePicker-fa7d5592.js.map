{"version":3,"file":"useDatePicker-fa7d5592.js","sources":["../../../../frappe-ui/src/components/DatePicker/utils.ts","../../../../frappe-ui/src/components/DatePicker/useDatePicker.ts"],"sourcesContent":["import { dayjs } from '../../utils/dayjs'\n\ntype DateConstructorParam = string | number | Date\n\nfunction getDate(...args: DateConstructorParam[]): Date {\n  return new Date(...(args as [DateConstructorParam]))\n}\n\nfunction getDateValue(date: Date | string) {\n  if (!date || date.toString() === 'Invalid Date') return ''\n\n  return dayjs(date)\n    .set('hour', 0)\n    .set('minute', 0)\n    .set('second', 0)\n    .set('millisecond', 0)\n    .format('YYYY-MM-DD')\n}\n\nfunction getDatesAfter(date: Date, count: number) {\n  let incrementer = 1\n  if (count < 0) {\n    incrementer = -1\n    count = Math.abs(count)\n  }\n  const dates: Date[] = []\n\n  while (count) {\n    date = getDate(\n      date.getFullYear(),\n      date.getMonth(),\n      date.getDate() + incrementer,\n    )\n    dates.push(date)\n    count--\n  }\n\n  if (incrementer === -1) {\n    return dates.reverse()\n  }\n  return dates\n}\n\nfunction getDaysInMonth(monthIndex: number, year: number) {\n  const daysInMonthMap = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n  const daysInMonth = daysInMonthMap[monthIndex]\n  if (monthIndex === 1 && isLeapYear(year)) {\n    return 29\n  }\n  return daysInMonth\n}\n\nfunction isLeapYear(year: number) {\n  if (year % 400 === 0) return true\n  if (year % 100 === 0) return false\n  if (year % 4 === 0) return true\n  return false\n}\n\nexport { getDate, getDateValue, getDatesAfter, getDaysInMonth, isLeapYear }\n","import { computed, ref } from 'vue'\nimport { getDate, getDatesAfter, getDaysInMonth } from './utils'\n\nexport function useDatePicker() {\n  const currentYear = ref<number>(0)\n  const currentMonth = ref<number>(0)\n\n  const today = computed(() => getDate())\n\n  const dates = computed(() => {\n    if (!(currentYear.value && currentMonth.value)) {\n      return []\n    }\n    const monthIndex = currentMonth.value - 1\n    const year = currentYear.value\n\n    const firstDayOfMonth = getDate(year, monthIndex, 1)\n    const lastDayOfMonth = getDate(year, monthIndex + 1, 0)\n    const leftPaddingCount = firstDayOfMonth.getDay()\n    const rightPaddingCount = 6 - lastDayOfMonth.getDay()\n\n    const leftPadding = getDatesAfter(firstDayOfMonth, -leftPaddingCount)\n    const rightPadding = getDatesAfter(lastDayOfMonth, rightPaddingCount)\n    const daysInMonth = getDaysInMonth(monthIndex, year)\n    const datesInMonth = getDatesAfter(firstDayOfMonth, daysInMonth - 1)\n\n    let dates = [\n      ...leftPadding,\n      firstDayOfMonth,\n      ...datesInMonth,\n      ...rightPadding,\n    ]\n\n    if (dates.length < 42) {\n      const lastDate = dates.at(-1)\n      if (lastDate) {\n        const finalPadding = getDatesAfter(lastDate, 42 - dates.length)\n        dates = dates.concat(...finalPadding)\n      }\n    }\n    return dates\n  })\n\n  const datesAsWeeks = computed(() => {\n    const datesAsWeeks: Date[][] = []\n    const computedDates = dates.value.slice()\n    while (computedDates.length) {\n      const week = computedDates.splice(0, 7)\n      datesAsWeeks.push(week)\n    }\n    return datesAsWeeks\n  })\n\n  const formattedMonth = computed(() => {\n    if (!(currentYear.value && currentMonth.value)) {\n      return ''\n    }\n    const date = getDate(currentYear.value, currentMonth.value - 1, 1)\n    const month = date.toLocaleString('en-US', {\n      month: 'long',\n    })\n    return `${month}, ${date.getFullYear()}`\n  })\n\n  function prevMonth() {\n    changeMonth(-1)\n  }\n\n  function nextMonth() {\n    changeMonth(1)\n  }\n\n  function changeMonth(adder: number) {\n    currentMonth.value = currentMonth.value + adder\n    if (currentMonth.value < 1) {\n      currentMonth.value = 12\n      currentYear.value = currentYear.value - 1\n    }\n    if (currentMonth.value > 12) {\n      currentMonth.value = 1\n      currentYear.value = currentYear.value + 1\n    }\n  }\n\n  return {\n    currentYear,\n    currentMonth,\n    today,\n    dates,\n    datesAsWeeks,\n    formattedMonth,\n    prevMonth,\n    nextMonth,\n    changeMonth,\n  }\n}\n"],"names":["getDate","args","getDateValue","date","dayjs","getDatesAfter","count","incrementer","dates","getDaysInMonth","monthIndex","year","daysInMonth","isLeapYear","useDatePicker","currentYear","ref","currentMonth","today","computed","firstDayOfMonth","lastDayOfMonth","leftPaddingCount","rightPaddingCount","leftPadding","rightPadding","datesInMonth","lastDate","finalPadding","datesAsWeeks","computedDates","week","formattedMonth","prevMonth","changeMonth","nextMonth","adder"],"mappings":"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"}