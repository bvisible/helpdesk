{"version":3,"file":"CallLogs-f42f353e.js","sources":["../../../../desk/src/pages/call-logs/CallLogs.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col\">\n    <LayoutHeader>\n      <template #left-header>\n        <div class=\"text-lg font-medium text-gray-900\">Call Logs</div>\n      </template>\n      <template #right-header>\n        <Button\n          label=\"New Call Log\"\n          theme=\"gray\"\n          variant=\"solid\"\n          @click=\"newCallLog\"\n          icon-left=\"plus\"\n        />\n      </template>\n    </LayoutHeader>\n    <ListViewBuilder\n      ref=\"listViewRef\"\n      :options=\"options\"\n      @row-click=\"openCallLog\"\n      @empty-state-action=\"showCallLogModal = true\"\n    />\n    <CallLogDetailModal\n      v-model=\"showCallLogDetailModal\"\n      v-model:callLogModal=\"showCallLogModal\"\n      :callLogId=\"callLogId\"\n    />\n    <CallLogModal\n      v-model=\"showCallLogModal\"\n      :callLogId=\"callLogId\"\n      @after-insert=\"\n        () => {\n          listViewRef?.reload();\n        }\n      \"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport LayoutHeader from \"@/components/LayoutHeader.vue\";\nimport ListViewBuilder from \"@/components/ListViewBuilder.vue\";\nimport { Avatar, Badge, Button, FeatherIcon, usePageMeta } from \"frappe-ui\";\nimport { computed, h, ref } from \"vue\";\nimport CallLogDetailModal from \"./CallLogDetailModal.vue\";\nimport CallLogModal from \"./CallLogModal.vue\";\nimport { statusColorMap, statusLabelMap } from \"./utils\";\nimport { PhoneIcon } from \"@/components/icons\";\n\nconst showCallLogModal = ref(false);\nconst showCallLogDetailModal = ref(false);\nconst callLogId = ref(\"\");\n\nconst listViewRef = ref(null);\n\nconst options = computed(() => {\n  return {\n    doctype: \"TP Call Log\",\n    selectable: true,\n    showSelectBanner: true,\n    emptyState: {\n      title: \"No Call Logs Found\",\n      icon: PhoneIcon,\n    },\n    columnConfig: {\n      caller: {\n        prefix: ({ row }) => {\n          return h(Avatar, {\n            shape: \"circle\",\n            image: row._caller?.image || \"Unknown\",\n            label: row._caller?.label || \"Unknown\",\n            size: \"sm\",\n          });\n        },\n        custom: ({ row }) => {\n          return h(\"span\", row._caller?.label || \"Unknown\");\n        },\n      },\n      receiver: {\n        prefix: ({ row }) => {\n          return h(Avatar, {\n            shape: \"circle\",\n            image: row._receiver?.image || \"Unknown\",\n            label: row._receiver?.label || \"Unknown\",\n            size: \"sm\",\n          });\n        },\n        custom: ({ row }) => {\n          return h(\"span\", row._receiver?.label || \"Unknown\");\n        },\n      },\n      type: {\n        prefix: ({ row }) => {\n          let icon =\n            row.type === \"Incoming\" ? \"phone-incoming\" : \"phone-outgoing\";\n          return h(FeatherIcon, {\n            name: icon,\n            class: [\"size-3 shrink-0\"],\n          });\n        },\n      },\n      status: {\n        custom: ({ row }) => {\n          return h(Badge, {\n            label: statusLabelMap[row.status],\n            variant: \"subtle\",\n            theme: statusColorMap[row.status],\n          });\n        },\n      },\n      duration: {\n        prefix: () => {\n          return h(FeatherIcon, {\n            name: \"clock\",\n            class: [\"size-3 shrink-0\"],\n          });\n        },\n        custom: ({ row }) => {\n          return h(\"span\", row.duration ? row.duration + \"s\" : \"0s\");\n        },\n      },\n    },\n  };\n});\n\nconst newCallLog = () => {\n  callLogId.value = \"\";\n  showCallLogModal.value = true;\n};\n\nfunction openCallLog(id: string): void {\n  callLogId.value = id;\n  showCallLogDetailModal.value = true;\n}\n\nusePageMeta(() => {\n  return {\n    title: \"Call Logs\",\n  };\n});\n</script>\n"],"names":["showCallLogModal","ref","showCallLogDetailModal","callLogId","listViewRef","options","computed","PhoneIcon","row","h","Avatar","_a","_b","icon","FeatherIcon","Badge","statusLabelMap","statusColorMap","newCallLog","openCallLog","id","usePageMeta","_openBlock","_createElementBlock","_hoisted_1","_createVNode","LayoutHeader","_cache","_createElementVNode","_unref","Button","ListViewBuilder","CallLogDetailModal","$event","CallLogModal"],"mappings":"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"}