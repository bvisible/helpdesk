import{t as J,a as _,i as H,w as B,b as I,n as K,c as P}from"./index-3720151f.js";import{c as W,a4 as R,bC as $,A as T,am as q,N as G,bj as Q}from"./index-b4c863a6.js";function E(e){var n;const r=_(e);return(n=r==null?void 0:r.$el)!=null?n:r}const N=H?window:void 0;function j(...e){let n,r,a,c;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,a,c]=e,n=N):[n,r,a,c]=e,!n)return K;Array.isArray(r)||(r=[r]),Array.isArray(a)||(a=[a]);const u=[],m=()=>{u.forEach(i=>i()),u.length=0},b=(i,s,l,d)=>(i.addEventListener(s,l,d),()=>i.removeEventListener(s,l,d)),g=R(()=>[E(n),_(c)],([i,s])=>{if(m(),!i)return;const l=P(s)?{...s}:s;u.push(...r.flatMap(d=>a.map(h=>b(i,d,h,l))))},{immediate:!0,flush:"post"}),f=()=>{g(),m()};return J(f),f}function U(){const e=T(!1),n=Q();return n&&G(()=>{e.value=!0},n),e}function X(e){const n=U();return W(()=>(n.value,!!e()))}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O="__vueuse_ssr_handlers__",Y=Z();function Z(){return O in A||(A[O]=A[O]||{}),A[O]}function k(e,n){return Y[e]||n}function ee(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const te={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},D="vueuse-storage";function se(e,n,r,a={}){var c;const{flush:u="pre",deep:m=!0,listenToStorageChanges:b=!0,writeDefaults:g=!0,mergeDefaults:f=!1,shallow:i,window:s=N,eventFilter:l,onError:d=t=>{console.error(t)},initOnMounted:h}=a,y=(i?$:T)(typeof n=="function"?n():n);if(!r)try{r=k("getDefaultStorage",()=>{var t;return(t=N)==null?void 0:t.localStorage})()}catch(t){d(t)}if(!r)return y;const w=_(n),M=ee(w),S=(c=a.serializer)!=null?c:te[M],{pause:V,resume:z}=B(y,()=>F(y.value),{flush:u,deep:m,eventFilter:l});s&&b&&I(()=>{j(s,"storage",v),j(s,D,x),h&&v()}),h||v();function C(t,o){s&&s.dispatchEvent(new CustomEvent(D,{detail:{key:e,oldValue:t,newValue:o,storageArea:r}}))}function F(t){try{const o=r.getItem(e);if(t==null)C(o,null),r.removeItem(e);else{const p=S.write(t);o!==p&&(r.setItem(e,p),C(o,p))}}catch(o){d(o)}}function L(t){const o=t?t.newValue:r.getItem(e);if(o==null)return g&&w!=null&&r.setItem(e,S.write(w)),w;if(!t&&f){const p=S.read(o);return typeof f=="function"?f(p,w):M==="object"&&!Array.isArray(p)?{...w,...p}:p}else return typeof o!="string"?o:S.read(o)}function v(t){if(!(t&&t.storageArea!==r)){if(t&&t.key==null){y.value=w;return}if(!(t&&t.key!==e)){V();try{(t==null?void 0:t.newValue)!==S.write(y.value)&&(y.value=L(t))}catch(o){d(o)}finally{t?q(z):z()}}}}function x(t){v(t.detail)}return y}function oe(e,n,r={}){const{window:a=N,...c}=r;let u;const m=X(()=>a&&"ResizeObserver"in a),b=()=>{u&&(u.disconnect(),u=void 0)},g=W(()=>Array.isArray(e)?e.map(s=>E(s)):[E(e)]),f=R(g,s=>{if(b(),m.value&&a){u=new ResizeObserver(n);for(const l of s)l&&u.observe(l,c)}},{immediate:!0,flush:"post"}),i=()=>{b(),f()};return J(i),{isSupported:m,stop:i}}export{se as a,oe as u};
//# sourceMappingURL=index-6b12b9aa.js.map
