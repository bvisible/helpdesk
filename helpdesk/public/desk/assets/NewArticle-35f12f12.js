import{a as N}from"./Link-431cfb69.js";import{d as V,S as $,u as D,q as K,a as M,z as c,c as v,k as q,g as o,w as d,h as s,l as r,aq as E,b9 as L,r as T,e as U,aN as H,P as x}from"./index-3194ec9b.js";import{_ as I}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-add081d8.js";import{T as z,_ as O}from"./TextEditor.vue_vue_type_script_setup_true_lang-7cb9f49e.js";import{u as P}from"./pageMeta-9b603434.js";import{g as R,a as j}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-a9d0f8af.js";import"./dayjs-f66c5460.js";import{L as F,e as W}from"./LayoutHeader-3eb7ac7a.js";import{_ as G}from"./UserAvatar.vue_vue_type_script_setup_true_lang-95965310.js";import"./Dropdown-c7dd9c29.js";import"./Avatar.vue_vue_type_script_setup_true_lang-1b98856a.js";const J={class:"flex flex-col flex-1"},Q={class:"pt-6 mx-auto w-full max-w-4xl px-5"},X={class:"flex flex-col gap-3 rounded-lg border w-full p-4"},Y={class:"flex justify-between items-center mb-3"},Z={class:"flex gap-1 items-center flex-1 mr-7 max-w-fit overflow-hidden"},ee={class:"flex gap-2"},fe=V({__name:"NewArticle",props:{id:{type:String,required:!0}},setup(b){const h=$().getUser(),{$dialog:w}=R(),i=D(),_=K(),{updateOnboardingStep:y}=j("helpdesk"),{isManager:A}=M(),l=c(""),n=c(""),u=c(b.id||null),m=v(()=>_.query.title||"");function C(){W.submit({title:l.value,content:n.value,category:u.value},{onSuccess:t=>{x.success("Article created"),A&&y("first_article"),p(),i.push({name:"Article",params:{articleId:t.name}})},onError:t=>{x.error(t)}})}function B(){if(!l.value&&!n.value){i.push({name:"AgentKnowledgeBase"});return}w({title:"Discard Article",message:"Are you sure you want to discard this article?",actions:[{label:"Confirm",variant:"solid",onClick(t){i.push({name:"AgentKnowledgeBase"}),p(),t()}}]})}function p(){l.value="",n.value=""}const S=v(()=>{const t=[{label:"Knowledge Base",route:{name:"AgentKnowledgeBase"}}];return m.value&&t.push({label:m.value,route:{name:"AgentKnowledgeBase"}}),t.push({label:"New Article"}),t});return P(()=>({title:"New Article"})),(t,e)=>{const k=N,f=T("Button");return U(),q("div",J,[o(s(F),null,{"left-header":d(()=>[o(s(I),{items:S.value},null,8,["items"])]),"right-header":d(()=>[...e[4]||(e[4]=[])]),_:1}),r("div",Q,[r("div",X,[r("div",Y,[r("div",Z,[o(s(G),{name:s(h).name,expand:!0},null,8,["name"]),e[5]||(e[5]=r("span",null,"in",-1)),o(k,{class:"form-control",doctype:"HD Article Category",placeholder:"Select Category",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),pageLength:100,"hide-clear-button":!0},null,8,["modelValue"])]),r("div",ee,[o(f,{label:"Discard",onClick:B}),o(f,{label:"Create",variant:"solid",onClick:C})])]),E(r("textarea",{class:"w-full resize-none border-0 text-3xl font-bold placeholder-ink-gray-3 p-0 pb-3 border-b border-gray-200 focus:ring-0 focus:border-gray-200","onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),placeholder:"Title",rows:"1",wrap:"soft",maxlength:"140",autofocus:"",onInput:e[2]||(e[2]=a=>{const g=a.target;g.style.height=`${g.scrollHeight}px`})},null,544),[[L,l.value]]),o(s(O),{content:n.value,onChange:e[3]||(e[3]=a=>n.value=a),placeholder:"Write your article here...","editor-class":"rounded-b-lg max-w-[unset] prose-sm h-[calc(100vh-340px)] sm:h-[calc(100vh-250px)] overflow-auto"},{bottom:d(()=>[o(s(z),{class:"-ml-1 overflow-x-auto w-full",buttons:s(H)},null,8,["buttons"])]),_:1},8,["content"])])])])}}});export{fe as default};
//# sourceMappingURL=NewArticle-35f12f12.js.map
