import{z as C,b4 as H,b5 as I,c as g,a3 as L,ap as J,e as r,f as N,w as b,g as v,h as u,G as K,B as y,C as q,D as O,l as n,a8 as P,k as i,t as h,Q as T,aq as A,aX as W,aY as ee,F as D,E as j,x as V,aZ as te,ab as E,s as se,ar as F,a_ as ae}from"./index-3194ec9b.js";const le={class:"w-full -ml-0.5"},re=["onClick"],oe={class:"flex items-center"},ue={key:0,class:"overflow-hidden text-ellipsis whitespace-nowrap text-base leading-5"},ne={key:1,class:"text-base leading-5 text-gray-500"},ie={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl"},de={class:"relative px-1.5 pt-0.5"},ce={key:0,class:"px-2.5 py-1.5 text-sm font-medium text-gray-500"},fe={key:0,class:"mt-1.5 rounded-md px-2.5 py-1.5 text-base text-gray-600"},pe={key:0,class:"border-t p-1.5 pb-0.5"},ge={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(x,{expose:U,emit:G}){const l=x,S=G,d=C(""),c=C(!1),w=C(null),$=H(),M=I(),z=g(()=>"value"in $),f=g({get(){return z.value?$.value:l.modelValue},set(e){d.value="",e&&(c.value=!1),S(z.value?"change":"update:modelValue",e)}});function Q(){c.value=!1}const _=g(()=>{var t;return!l.options||l.options.length==0?[]:((t=l.options[0])!=null&&t.group?l.options:[{group:"",items:l.options}]).map((s,a)=>({key:a,group:s.group,hideLabel:s.hideLabel||!1,items:l.filterable?R(s.items):s.items})).filter(s=>s.items.length>0)});function R(e){return d.value?e.filter(t=>[t.label,t.value].some(a=>(a||"").toString().toLowerCase().includes(d.value.toLowerCase()))):e}function X(e){if(typeof e=="string"){let s=_.value.flatMap(a=>a.items).find(a=>a.value===e);return(s==null?void 0:s.label)||e}return e==null?void 0:e.label}L(d,e=>{S("update:query",e)}),L(c,e=>{e&&J(()=>{w.value.el.focus()})});const Y=g(()=>l.disabled?"text-gray-600":"text-gray-800"),Z=g(()=>{let e={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[l.size],t={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[l.size],s=l.disabled?"disabled":l.variant,a={subtle:"border border-gray-100 bg-gray-100 placeholder-gray-500 hover:border-gray-200 hover:bg-gray-200 focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white placeholder-gray-500 hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border bg-gray-50 placeholder-gray-400",l.variant==="outline"?"border-gray-300":"border-transparent"]}[s];return[e,t,a,Y.value,"transition-colors w-full"]});return U({query:d}),(e,t)=>(r(),N(u(ae),{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),nullable:""},{default:b(({open:s})=>[v(u(K),{show:c.value,"onUpdate:show":t[2]||(t[2]=a=>c.value=a)},{target:b(({open:a,togglePopover:p})=>[y(e.$slots,"target",q(O({open:a,togglePopover:p})),()=>[n("div",le,[n("button",{class:P(["flex w-full items-center justify-between focus:outline-none",Z.value]),onClick:()=>{!x.disabled&&p()}},[n("div",oe,[y(e.$slots,"prefix"),f.value?(r(),i("span",ue,h(X(f.value)),1)):(r(),i("span",ne,h(x.placeholder||""),1))]),v(u(T),{name:"chevron-down",class:"h-4 w-4 text-gray-600","aria-hidden":"true"})],10,re)])])]),body:b(({isOpen:a})=>{var p;return[A(n("div",null,[n("div",ie,[n("div",de,[v(u(W),{ref_key:"search",ref:w,class:"form-input w-full",type:"text",value:d.value,autocomplete:"off",placeholder:"Search",onChange:t[0]||(t[0]=o=>{d.value=o.target.value})},null,8,["value"]),n("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:t[1]||(t[1]=o=>f.value=null)},[v(u(T),{name:"x",class:"w-4"})])]),v(u(ee),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:b(()=>[(r(!0),i(D,null,j(_.value,o=>A((r(),i("div",{key:o.key,class:"mt-1.5"},[o.group&&!o.hideLabel?(r(),i("div",ce,h(o.group),1)):V("",!0),(r(!0),i(D,null,j(o.items,m=>(r(),N(u(te),{key:m.value,as:"template",value:m},{default:b(({active:k,selected:B})=>[n("li",{class:P(["flex items-center rounded px-2.5 py-1.5 text-base",{"bg-gray-100":k}])},[y(e.$slots,"item-prefix",E({ref_for:!0},{active:k,selected:B,option:m})),y(e.$slots,"item-label",E({ref_for:!0},{active:k,selected:B,option:m}),()=>[se(h(m.label),1)])],2)]),_:2},1032,["value"]))),128))])),[[F,o.items.length>0]])),128)),_.value.length==0?(r(),i("li",fe," No results found ")):V("",!0)]),_:3}),u(M).footer?(r(),i("div",pe,[y(e.$slots,"footer",q(O({value:(p=w.value)==null?void 0:p.el._value,close:Q})))])):V("",!0)])],512),[[F,a]])]}),_:3},8,["show"])]),_:3},8,["modelValue"]))}};export{ge as _};
//# sourceMappingURL=Autocomplete-4c667766.js.map
