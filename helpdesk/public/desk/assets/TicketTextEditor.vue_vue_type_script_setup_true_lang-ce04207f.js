import{d as v,z as y,c as k,a as _,ap as B,r as C,e as u,k as g,g as r,w as n,l,h as o,B as i,ab as V,aM as F,f as b,t as S,E,y as H,aS as M,F as P,P as T}from"./index-3194ec9b.js";import{F as I}from"./FileUploader-0835fb8b.js";import{P as N,I as $}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-a9d0f8af.js";import{_ as L}from"./AttachmentItem.vue_vue_type_script_setup_true_lang-858a5224.js";import"./dayjs-f66c5460.js";import"./LayoutHeader-3eb7ac7a.js";import{T as j,_ as z}from"./TextEditor.vue_vue_type_script_setup_true_lang-7cb9f49e.js";import{_ as w}from"./UserAvatar.vue_vue_type_script_setup_true_lang-95965310.js";const A={class:"rounded p-3 shadow w-full"},D={class:"text-base"},U={class:"flex items-center justify-between"},q={class:"flex flex-col gap-2"},O={class:"flex flex-col space-y-1.5 overflow-auto sm:flex-row sm:justify-between"},G={class:"flex items-center gap-1"},J={class:"flex items-center gap-2"},K=v({__name:"TextEditor",props:{modelValue:{},autofocus:{type:Boolean,default:!1}},emits:["clear","update:modelValue"],setup(h,{expose:c}){const p=h,m=y(null),d=k(()=>m.value.editor),e=_(),s=["Paragraph",["Heading 2","Heading 3","Heading 4","Heading 5"],"Bullet List","Numbered List","Image","Video","Link","Blockquote","Code"];return c({editor:d}),p.autofocus&&B(()=>m.value.editor.commands.focus()),(a,t)=>{const f=C("Button");return u(),g("div",A,[r(o(z),V({ref_key:"e",ref:m,extensions:[o(N)]},a.$attrs,{"editor-class":["prose-f max-h-64 max-w-none  overflow-auto my-4 min-h-[5rem]",o(F)(a.modelValue)],"bubble-menu":"",content:a.modelValue,onChange:t[1]||(t[1]=x=>a.$emit("update:modelValue",x))}),{top:n(()=>[l("span",D,[l("span",U,[r(o(w),{name:o(e).userName,image:o(e).userImage,expand:"",strong:""},null,8,["name","image"]),i(a.$slots,"top-right")]),i(a.$slots,"top-bottom")])]),bottom:n(()=>[l("div",q,[i(a.$slots,"bottom-top"),l("div",O,[l("div",G,[r(o(j),{buttons:s}),i(a.$slots,"bottom-left")]),l("div",J,[r(f,{label:"Discard",theme:"gray",variant:"subtle",onClick:t[0]||(t[0]=()=>{d.value.commands.clearContent(!0),a.$emit("clear")})}),i(a.$slots,"bottom-right")])])])]),_:3},16,["extensions","editor-class","content"])])}}}),Q={class:"flex flex-wrap gap-2"},R={class:"flex"},W={class:"text-base text-gray-700"},ne=v({__name:"TicketTextEditor",props:{content:{},placeholder:{},attachments:{},expand:{type:Boolean,default:!1}},emits:["update:content","update:attachments","update:expand"],setup(h,{expose:c}){const p=y(null),m=k(()=>p.value.editor),d=_();return c({editor:m}),(e,s)=>{const a=C("Button");return e.expand?(u(),b(o(K),{key:0,ref_key:"e",ref:p,"model-value":e.content,placeholder:e.placeholder,"onUpdate:modelValue":s[2]||(s[2]=t=>e.$emit("update:content",t)),onClear:s[3]||(s[3]=()=>e.$emit("update:attachments",[]))},{"bottom-top":n(()=>[l("div",Q,[(u(!0),g(P,null,E(e.attachments,t=>(u(),b(o(L),{key:t.file_url,label:t.file_name,url:["MOV","MP4"].includes(t.file_type)?null:t.file_url},{suffix:n(()=>[r(o($),{icon:"lucide:x",onClick:H(()=>{e.$emit("update:attachments",e.attachments.filter(f=>f.file_url!==t.file_url)),o(M)(t.name)},["stop"])},null,8,["onClick"])]),_:2},1032,["label","url"]))),128))])]),"bottom-left":n(()=>[l("span",R,[i(e.$slots,"bottom-left"),r(o(I),{"upload-args":{folder:"Home/Helpdesk",private:!0},onSuccess:s[0]||(s[0]=t=>e.$emit("update:attachments",[...e.attachments,t])),onFailure:s[1]||(s[1]=()=>o(T).error("Error uploading file"))},{default:n(({openFileSelector:t})=>[r(a,{theme:"gray",variant:"ghost",onClick:f=>t()},{icon:n(()=>[r(o($),{icon:"lucide:paperclip"})]),_:1},8,["onClick"])]),_:1})])]),"top-right":n(()=>[i(e.$slots,"top-right")]),"top-bottom":n(()=>[i(e.$slots,"top-bottom")]),"bottom-right":n(()=>[i(e.$slots,"bottom-right")]),_:3},8,["model-value","placeholder"])):(u(),g("div",{key:1,class:"flex w-full cursor-pointer items-center gap-2 rounded bg-gray-100 px-3.5 py-2 hover:bg-gray-200",onClick:s[4]||(s[4]=()=>e.$emit("update:expand",!e.expand))},[r(o(w),{name:o(d).userName,image:o(d).userImage,size:"sm"},null,8,["name","image"]),l("span",W,S(e.placeholder),1)]))}}});export{ne as _};
//# sourceMappingURL=TicketTextEditor.vue_vue_type_script_setup_true_lang-ce04207f.js.map
