import{d as F,a0 as D,A as p,Z as T,W as w,a4 as S,r as m,e as d,f as b,w as L,l,v as c,h as a,q as n,g,k as y,F as N,G as R,y as U}from"./index-b4c863a6.js";import"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-c8d975a4.js";import"./dayjs-95f8111d.js";import"./knowledgeBase-2d00b929.js";import{_ as $}from"./StarRating.vue_vue_type_script_setup_true_lang-4484b1d1.js";import{I as H}from"./symbols-7dbf6ecf.js";const I={class:"space-y-4 text-base text-gray-700"},O={class:"space-y-2"},P={key:0,class:"space-y-2"},j={class:"flex flex-wrap gap-2"},q={class:"space-y-2"},K=F({__name:"TicketFeedback",props:{open:{type:Boolean}},emits:["update:open"],setup(v,{emit:_}){const x=_,f=D(H),s=p(0),r=p(""),i=p(null),u=T({doctype:"HD Ticket Feedback Option",fields:["name","label"],pageLength:99999}),V=w({url:"frappe.client.set_value",debounce:300,makeParams:o=>({doctype:"HD Ticket",name:f.data.name,fieldname:o.fieldname,value:o.value}),onSuccess:()=>{x("update:open",!1),f.reload()}});return S(s,o=>{i.value=null,r.value="",u.update({filters:{rating:o,disabled:0}}),u.reload()}),(o,e)=>{const C=m("Button"),B=m("FormControl"),h=m("Dialog");return d(),b(h,{"model-value":v.open,options:{title:a(n)("Rate this ticket"),actions:[{disabled:!i.value,label:a(n)("Submit"),theme:"gray",variant:"solid",onClick:()=>a(V).submit({fieldname:{status:"Closed",feedback:i.value,feedback_extra:r.value}})}]},"onUpdate:modelValue":e[3]||(e[3]=()=>o.$emit("update:open",!v.open))},{"body-content":L(()=>{var k;return[l("div",I,[l("div",O,[l("span",null,c(a(n)("Select a rating")),1),e[4]||(e[4]=l("span",{class:"text-red-500"}," * ",-1)),g(a($),{static:!1,rating:s.value,modelValue:s.value,"onUpdate:modelValue":[e[0]||(e[0]=t=>s.value=t),e[1]||(e[1]=t=>s.value=t)]},null,8,["rating","modelValue"])]),(k=a(u).data)!=null&&k.length?(d(),y("div",P,[l("span",null,c(a(n)("Pick an option")),1),e[5]||(e[5]=l("span",{class:"text-red-500"}," * ",-1)),l("div",j,[(d(!0),y(N,null,R(a(u).data,t=>(d(),b(C,{key:t.name,label:t.label,theme:i.value===t.name?"blue":"gray",variant:"subtle",onClick:A=>i.value=t.name},null,8,["label","theme","onClick"]))),128))])])):U("",!0),l("div",q,[l("span",null,c(a(n)("Other")),1),g(B,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),type:"textarea",placeholder:a(n)("Tell us more")},null,8,["modelValue","placeholder"])])])]}),_:1},8,["model-value","options"])}}});export{K as _};
//# sourceMappingURL=TicketFeedback.vue_vue_type_script_setup_true_lang-1c8e7a06.js.map
